(this["webpackJsonpfront-js"]=this["webpackJsonpfront-js"]||[]).push([[27],{1058:function(e,t,a){"use strict";a(1071);var n=a(24),c=a.n(n),r=a(7);t.a=function(e){return Object(r.jsx)("div",{className:"tempalte-pageTab-nav",children:e.list.map((function(t){return Object(r.jsx)("div",{className:c()("tempalte-pageTab-nav-item",{"tempalte-pageTab-nav-active":e.activeKey===t.value}),onClick:function(){return t.handler(t)},children:t.label},t.value)}))})}},1061:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(15),c=a.n(n),r={row:{gutter:[{xs:8,sm:16,md:32},20]},colLeft:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:15}},colRight:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:9}}},s={1:{title:c.a.get("banner.title_deposit"),content:c.a.get("banner.desc_deposit"),tabTitle:c.a.get("header.deposit")},2:{title:c.a.get("banner.title_withdraw"),content:c.a.get("banner.desc_withdraw"),tabTitle:c.a.get("header.withdraw")},3:{title:c.a.get("banner.title_1"),content:c.a.get("banner.desc_1"),tabTitle:c.a.get("header.swap")}},i=[{label:s[1].tabTitle,value:"1"},{label:s[2].tabTitle,value:"2"},{label:s[3].tabTitle,value:"3"}]},1063:function(e,t,a){"use strict";var n=a(4),c=a(24),r=a.n(c),s=a(1085),i=a(7);t.a=function(e){var t,a=e.checked,c=e.tokenLogo,o=e.symbol,l=void 0===o?"":o,u=e.onChange,b=e.id,j=void 0===b?"":b;return Object(i.jsxs)("div",{className:r()((t={},Object(n.a)(t,s.sun_check_button,!0),Object(n.a)(t,s.sun_check_active_button,a),t)),onClick:function(){u&&u(!a,j)},children:[c&&Object(i.jsx)("img",{src:c,alt:"",className:"token-logo"}),Object(i.jsx)("span",{children:l})]})}},1064:function(e,t,a){"use strict";var n=a(15),c=a.n(n),r=a(24),s=a.n(r),i=a(1914),o=a(1074),l=a(7),u=[{key:.2,label:"0.2%"},{key:3,label:"3%"}],b=[{key:.005,label:"0.5%"},{key:.01,label:"1%"}];t.a=function(e){var t=e.slippage,a=e.customSlippage,n=e.CUSTOM_SLIPPAGE,r=e.type,j="withdraw"===(void 0===r?"withdraw":r)?u:b;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"mr-10",children:c.a.get("withdraw.slippage")}),Object(l.jsxs)("div",{className:s()(o.setting_btns),children:[Object(l.jsx)("div",{className:o.setting_btn_wrap,children:j.map((function(a){return Object(l.jsx)("button",{className:s()(t===a.key?o.active:""),onClick:function(){return t=a.key,void(e.onChangeSlippage&&e.onChangeSlippage(t));var t},children:a.label})}))}),Object(l.jsx)(i.a,{className:s()(o.setting_input,o.module_important,["ml-20"]),suffix:"%",value:a,onFocus:function(){a||e.onChangeSlippage&&e.onChangeSlippage(n)},onBlur:function(){a||e.onChangeSlippage&&e.onChangeSlippage(String(j[0].key))},onChange:function(t){e.onChangeCustomSlippage&&e.onChangeCustomSlippage(t.target.value)}})]})]})}},1068:function(e,t,a){"use strict";var n=a(4),c=a(3),r=a(24),s=a.n(r),i=a(1072),o=a(7),l=function(e){var t,a=e.title,c=e.subTitle,r=e.isRevert,l="string"===typeof a;return Object(o.jsxs)("div",{className:i.page_title_wrap,children:[r&&c&&Object(o.jsx)("div",{className:i.page_title_sub,children:c}),a&&Object(o.jsx)("div",{className:s()((t={},Object(n.a)(t,i.page_title,!0),Object(n.a)(t,i.page_title_revert,r),Object(n.a)(t,i.page_title_ele,!l),t)),children:l?a.split("").map((function(e,t){return Object(o.jsx)("span",{className:i.page_title_ele,children:e},t)})):a}),c&&!r&&Object(o.jsx)("div",{className:i.page_title_sub,children:c})]})};t.a=Object(c.memo)(l)},1071:function(e,t,a){},1072:function(e,t,a){e.exports={page_title:"style_page_title__dfZPh",page_title_wrap:"style_page_title_wrap__7dtV_",page_title_ele:"style_page_title_ele__Tktf1",page_title_sub:"style_page_title_sub__1IUsF",page_title_revert:"style_page_title_revert__18HMS"}},1074:function(e,t,a){e.exports={setting_wrap:"style_setting_wrap__L7ld9",setting_label:"style_setting_label__3qQrG",setting_btns:"style_setting_btns__zH_61",setting_btn_wrap:"style_setting_btn_wrap__uxT1B",setting_input:"style_setting_input__kvJzs",active:"style_active__10VTC",module_important:"style_module_important__PuwNO",info_text:"style_info_text__3K73H",setting_minutes:"style_setting_minutes__1mIXw"}},1076:function(e,t,a){},1077:function(e,t,a){"use strict";a(3);var n=a(15),c=a.n(n),r=a(75),s=a(6),i=a(135),o=a(1),l=(a(1078),a(1092)),u=a(1089),b=a(7),j=s.a.Fee,p=s.a.A,O=s.a.ADMIN_FEE,d=s.a.poolKeys;s.a.pools;t.a=function(e){var t=Object(r.d)((function(){return i.a.pool})),a=Object(r.d)((function(){return i.a.network})),n=function(e,t){var a=Object(o.a)(e).times(t).div(1e18);return a.isNaN()?"--":Object(o.u)(a,2)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var a=Object(o.a)(0);for(var n in e){var c=e[n],r=c.userSwapBalance,s=c.priceKey,i=t?t[s]:"--";a=a.plus(Object(o.a)(r).times(i))}return Object(o.u)(a)}catch(l){return console.log(l),"--"}},x=d.map((function(e){return t.poolData[e]})).filter((function(e){return e})),g=t.volData?t.volData["3pvol24Hours"]:"",v="Old 3Pool ".concat(c.a.get("pool.pool2_contract")),m="3SUN ".concat(c.a.get("pool.token_contract2"));return Object(b.jsx)(r.a,{children:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(l.a,{poolTokens:x,totalSwapBalance:t.totalSwapBalance,adminFee:O,fee:j,virtualPrice:t.virtualPrice,dailyVol:g,poolContract:s.a.stablePool,poolName:v,lpTokenAddress:s.a.stableLp,lpTokenName:m,aValue:p}),a.isConnected&&Object(o.a)(t.sharePer).gt(0)&&Object(b.jsx)(u.a,{sharePer:t.sharePer,usdBalance:f(t.poolData,t.volData),avgUsdBalance:n(t.userLpBalance,t.virtualPrice),userTotalBalance:t.userTotalBalance,myPoolTokens:x})]})}})}},1079:function(e,t,a){},1080:function(e,t,a){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAAA/JJREFUWEfVWctqFUEQPeX7/X5tXIkIouBa/AkxgkYXgrhwIQiufaCuxYXoQsSNGkHFnxDXgiKIuHJlTIwmMYmJ8ci5Voe+k3tneuaOIVMwhCTT3aerTlWdnjb0YCQNwHIAKwEsA7AEwFL/qZn/AJj1n78B/AIwY2asuqwWLG0kBXCVPwJZxrSJKT1mpg2UslKASa4AsMG9GhaSBwVgJuNR/T/2uCKhTSoCwTRm1MymU1EnASapcK/3BUOoJ9xLWjTZSAbgayLqaMNjZiba5FohYA//ZgB6V9z7qcfMFNrKRlLeX+tPmHukiCa5gElqQlFAJi8ofKJAbUZSFNEaootMa8gpHa0rYJIbAShssnE9vWR33g692qwDoEc2YWY/Oo3pCDjj2e9mNlmbS3MmIrkawKY8T88D7Jzd4oMWDGzYRwb0tyyn2wB7NdjmCSYKjC2EZ7NrkFRFEj2U5ENx9cgCVjUQ+ZVg8m6pjkTyMIA9AAZSSlQ3ZzinRY0WFjMbCe/OAfamsNV39bVMNSCp5LwN4JxPfMPMrvQSHa8e2z3aw6G5xIBFBRX1UlQgeRDAUwD7I4A9A9ZcETWkP4b0txbgKNHUDOTdpKZA8jyAW1EN1XQDAM7WUVm8ucjLajKtBAyAxReVlCTvkhTXHwA4GnlVxf6CmT3shQo5CdiqzeYE3+G7UEbmagOSRwA8AbA7mvwNgBNm9qFOsB590VR0VdQHBVgKTMk2a2aDBR3pMoCrGcWljnTPtW4VvB/lgLyKRFIOVQsfFuBQ8yRoRnNKzTEAz6sgShhz2swe56wtrSFdMy7AofbmdjWSfQCeJSxe5ZUiwKFlTwmw6CBazGuDHRJAoA9UQZQzJoUSOuFILkwLcOCHylmhgK4ZbNJ0LhlU3mYFeJfX4y+p9TdplRpf8nq8Uy2jkYAbR4mkpPMG0w9gb43R1lTvzCy3XEbSoZV0qWXtFIBHNYMN0x3PAx2J+lZZS20c/xNwn5m9SG0cSa25Bkqolkrd6XAbTCfwa2Z2s0AStLVmKbZk8VOFEiT3uWY+FI3/DKDfzF4VgG0XP66IwpE+SV6WAU3yDIA7rgXC0JeumeeOPjl0CJT9Jy8dcGh9pQR8gWfU/6WZT0bv6ax4yczupmy6q4B30JWOSDmeuQ5AcjTYe9fMb1PAOqbg3fYjkv8zJJ9OyqUOoZ0AkIwB3wdw0cz0ATHJCg+hDrqnY36MxAWL6PDJzF4nofSXko75DlifVZvzISWTgPp1cX+qCmFr1MfACHRzPrd28fTi/qAdgVZTacaVQQS6OZcymdrajGuvbNH3E4C0guhS5WJRF4qTRTdGnZpN4bVXgcBZ8Kvbv7gRNO3rhp7CAAAAAElFTkSuQmCC"},1081:function(e,t,a){"use strict";var n=a(5),c=a(64);t.a=function(e){var t=e.childPage,a=["deposit","withdraw","swap"],r=function(e,r){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a[e-1],o=c.g[r?"".concat(r,"_").concat(i):i];o&&Object(c.a)(Object(n.a)({action:o(t),event_category:t},s))};return{tabChangeLog:function(e){return r(e,"tab")},tabSubmitLog:function(e,t){return r(e,null,t)}}}},1085:function(e,t,a){e.exports={sun_check_button:"style_sun_check_button__5diEB",sun_check_active_button:"style_sun_check_active_button__28IzL"}},1110:function(e,t,a){"use strict";var n=a(4),c=a(5),r=a(0),s=a(2),i=a(11),o=a(3),l=a(15),u=a.n(l),b=a(75),j=a(1931),p=a(1933),O=a(1502),d=a(1042),f=a(180),x=a(284),g=a(25),v=a(1),m=a(6),h=a(135),w=a(1057),_=a(1067),k=(a(1075),a(1077)),S=a(341),y=a(1066),N=a(1059),A=a(12),C=a(1058),T=a(1061),D=a(1062),L=a(1070),I=a(339),P=a(7),F=m.a.pools,U=m.a.poolKeys,B=m.a.ALL_FEE,V=m.a.defaultSlippage,E=m.a.stablePool;t.a=function(e){var t,a,l,m,K,M,R,q,H=e.pageList,J=e.tabPaneKey,Z=Object(b.d)((function(){return h.a.network})),Q=Object(b.d)((function(){return h.a.system})),W=Object(b.d)((function(){return h.a.pool})),z=Object(o.useState)(function(){var e={};return U.map((function(t){e[t]=""})),e}()),G=Object(i.a)(z,2),X=G[0],Y=G[1],$=Object(o.useState)(!1),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ne=Object(o.useState)(!0),ce=Object(i.a)(ne,2),re=ce[0],se=ce[1],ie=Object(o.useState)(!1),oe=Object(i.a)(ie,2),le=oe[0],ue=oe[1],be=Object(o.useState)("--"),je=Object(i.a)(be,2),pe=je[0],Oe=je[1],de=Object(o.useState)("--"),fe=Object(i.a)(de,2),xe=fe[0],ge=fe[1],ve=Object(o.useState)(!1),me=Object(i.a)(ve,2),he=me[0],we=me[1],_e=Object(o.useState)(!1),ke=Object(i.a)(_e,2),Se=ke[0],ye=ke[1],Ne=Object(o.useState)(!1),Ae=Object(i.a)(Ne,2),Ce=Ae[0],Te=Ae[1],De=null;Object(o.useEffect)(Object(s.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ve(X),Ie()]);case 2:he&&Ue(X);case 3:case"end":return e.stop()}}),e)}))),[X]);var Le=function(t){return(a=a||Object(s.a)(Object(r.a)().mark((function t(a){var n,s,i,o,l,u,b,j,p,O,d,f,x,g,m,h,w;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,n=[],e.onSubmit&&e.onSubmit(),U.map((function(e){n.push(Object(c.a)(Object(c.a)({},W.poolData[e]),{},{inputValue:a[e]?Object(v.fb)(a[e]).times(F[e].precision):Object(v.a)(0)}))})),s=0;case 5:if(!(s<n.length)){t.next=19;break}if(i=n[s],o=i.allowance,l=void 0===o?Object(v.a)(0):o,u=i.inputValue,b=i.token,j=i.symbol,p=i.approveStatus,O=i.id,!Object(v.a)(l).lt(u)||p){t.next=16;break}return t.next=10,Q.approveToken(b,E,{title:"deposit.approve_token",obj:{value:j},continuous:!0},[["pool/getBalanceInfo"]]);case 10:if(!t.sent){t.next=15;break}W.poolData[O].approveStatus=2,t.next=16;break;case 15:return t.abrupt("return");case 16:s++,t.next=5;break;case 19:if(d=n.sort((function(e,t){return e.index-t.index})),f=d.length,x=d.map((function(e){return e.inputValue._toIntegerDown()._toHex()}))||[],g=null,!W.lpTotalSupply.lte(0)){t.next=26;break}return t.next=26,W.getUserLp();case 26:if(!W.lpTotalSupply.lte(0)){t.next=30;break}g=Object(v.a)(1),t.next=36;break;case 30:return t.next=32,Object(A.d)(x);case 32:if((m=t.sent).success){t.next=35;break}return t.abrupt("return");case 35:g=m.value;case 36:return g=g.times(Object(v.a)(1).minus(Object(v.a)(B).times(f).div(Object(v.a)(4).times(f-1)).div(1e10))),h=g.times(1-V)._toFixed(0,1),w={title:"actions.addLiq",obj:{detail:Object(v.A)(a)}},t.next=41,Q.addLiquidity(x,h,w,[["pool/updateCurrencyData"]]);case 41:t.sent&&Re(),t.next=48;break;case 45:t.prev=45,t.t0=t.catch(0),console.log("deposit err: ",t.t0);case 48:case"end":return t.stop()}}),t,null,[[0,45]])})))).apply(this,arguments)},Ie=function(){return(l=l||Object(s.a)(Object(r.a)().mark((function e(){var t,a,n,c,s,i,o,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],X)n=F[a],c=n.index,s=n.precision,i=X[a].replace(/,/g,""),t[c]=Object(v.a)(i).isNaN()?0:Object(v.a)(i).times(s)._toIntegerDown()._toHex();if(o=null,!W.lpTotalSupply.lte(0)){e.next=6;break}return e.next=6,W.getUserLp();case 6:if(!W.lpTotalSupply.lte(0)){e.next=10;break}o=Object(v.a)(1),e.next=16;break;case 10:return e.next=12,Object(A.d)(t);case 12:if((l=e.sent).success){e.next=15;break}return e.abrupt("return");case 15:o=l.value.div(1e18);case 16:ge(o);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)},Pe=function(){return(m=m||Object(s.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([W.getSwapBalance(),W.getVirtualPrice(),W.getVolData()]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)},Fe=function(){return(K=K||Object(s.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([W.getUserLp(),W.getBalanceInfo()]);case 2:t={},U.map((function(e){var a=W.poolData[e],n=a.precision,c=a.balance,r=a.decimal;t[e]=Object(v.c)(Object(v.a)(c).div(n)._toFixed(r,1))})),Y(t),!he&&we(!0),De||(De=setInterval(Object(s.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Pe(),W.getUserLp();case 2:case"end":return e.stop()}}),e)}))),Z.defaultIntervalSec));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)};Object(o.useEffect)(Object(s.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Fe(),Pe()]);case 2:return e.abrupt("return",(function(){clearInterval(De)}));case 3:case"end":return e.stop()}}),e)}))),[Z.defaultAccount]);var Ue=function(e){var t=Object.keys(e),a=t.length;if(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e),a=t.filter((function(t){return Object(v.fb)(e[t]).eq(0)||!e[t]}));return t.length===a.length}(e))return ue(u.a.get("error.e1")),!0;for(var n=0;n<a;n++){var c=t[n],r=e[c];if(!r&&(te||re))return ue(u.a.get("error.e1")),!0;var s=W.poolData[c],i=s.balance,o=s.precision,l=s.symbol;if(Object(v.a)(i).div(o).lt(Object(v.fb)(r)))return ue(u.a.get("error.e2",{token:l})),!0}return ue(!1),!1},Be=function(e){Te(e.target.checked)},Ve=function(e){return(M=M||Object(s.a)(Object(r.a)().mark((function e(t){var a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.calcInclPrice(t);case 2:a=e.sent,Oe(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},Ee=function(e,t){var a=t,n={};n[e]=Object(v.c)(String(a).replace(/,/g,""));var c=W.poolData[e],r=(c.precision,c.swapBalance),s=(c.balance,Object(v.fb)(a).div(r).isNaN()?Object(v.a)(0):Object(v.fb)(a).div(r));U.filter((function(t){return t!==e})).map((function(e){var t=W.poolData[e],a=t.balance,c=void 0===a?Object(v.a)(0):a,r=t.swapBalance,i=t.precision,o=t.decimal;n[e]=Object(v.c)(s.times(r)._toFixed(o,1)),c.div(i).lt(Object(v.fb)(n[e]))&&(n[e]=Object(v.c)(c.div(i)._toFixed(o,1)))})),Y(n)},Ke=function(e){return(R=R||Object(s.a)(Object(r.a)().mark((function e(t){var a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.checked,ae(a),re&&se(!a),a&&Ee(U[0],X[U[0]])}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},Me=function(e){return(q=q||Object(s.a)(Object(r.a)().mark((function e(t){var a,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.checked,se(a),te&&ae(!a),n={},U.map((function(e){var t=W.poolData[e],a=t.balance,c=t.precision,r=t.decimal;n[e]=Object(v.a)(a).isNaN()?0:Object(v.c)(a.div(c)._toFixed(r,1))})),Y(n)}catch(c){console.log(c)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},Re=function(){Te(!1),ye(!1)},qe=Object(I.b)();return Object(P.jsx)(b.a,{children:function(){return Object(P.jsxs)(j.a,Object(c.a)(Object(c.a)({},T.a.row),{},{children:[Object(P.jsx)(p.a,Object(c.a)(Object(c.a)({},T.a.colLeft),{},{children:Object(P.jsxs)("div",{className:"pool-deposit",children:[Object(P.jsx)(C.a,{list:H,activeKey:J[0]}),e.isSinglePage?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(w.a,{routeName:"3pool/deposit",mountedActions:Fe,instantActions:Pe}),Object(P.jsx)(_.a,{title:"3pool "+u.a.get("banner.title_deposit"),desc:u.a.get("banner.desc_deposit")}),Object(P.jsx)(y.a,{})]}):null,Z.isConnected?Object(P.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(P.jsxs)("div",{className:"add-liq",children:[Object(P.jsxs)("fieldset",{className:"currencies",children:[Object(P.jsx)("legend",{children:u.a.get("deposit.currencies")}),Object(P.jsx)("ul",{children:U.map((function(e){var t=W.poolData[e],a=t.symbol,r=void 0===a?"":a,s=t.balance,i=void 0===s?"--":s,o=t.precision,l=t.decimal;return i=Object(v.a)(i).div(o),Object(P.jsxs)("li",{children:[Object(P.jsxs)("div",{className:"cur-label",children:[Object(P.jsxs)("span",{className:"icon",children:[Object(P.jsx)("img",{src:g.a[e]?g.a[e]:x.default,alt:"",className:"token-logo"})," ",r]}),Object(P.jsx)("span",{className:"token-max",children:u.a.getHTML("deposit.token_max",{balance:Object(v.u)(i)})})]}),Object(P.jsx)(L.a,{onMaxClick:function(){!function(e,t,a){if(!Object(v.a)(t).isNaN()){var r=Object(v.a)(t)._toFixed(a,1);Y(Object(c.a)(Object(c.a)({},X),{},Object(n.a)({},e,Object(v.c)(r)))),te&&Ee(e,r)}}(e,i,l)},value:X[e],onChange:function(t){return function(e,t){re&&se(!1);var a=F[t].decimal,r=Object(v.V)((""+e.target.value).replace(/,/g,""),a),s=r.valid,i=r.str;s&&(Y(Object(c.a)(Object(c.a)({},X),{},Object(n.a)({},t,Object(v.c)(i)))),te&&Ee(t,i))}(t,e)}})]},e)}))})]}),!Object(v.a)(pe).isNaN()&&Object(v.ab)(pe,!0),Object(P.jsxs)("div",{className:"deposit-check",children:[Object(P.jsx)(O.a,{checked:te,onChange:Ke,children:u.a.get("deposit.ch1")}),Object(P.jsx)("br",{}),Object(P.jsx)(O.a,{checked:re,onChange:Me,children:u.a.get("deposit.ch2")})]}),le?Object(P.jsx)(N.a,{styleName:"mt-40",type:"single",disabled:!0,info:u.a.get("deposit.action")}):Object(P.jsx)(N.a,{styleName:"mt-40",type:"single",info:qe?u.a.get("not_available"):u.a.get("deposit.action"),onClick:function(){return function(e){return(t=t||Object(s.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,le){e.next=5;break}if(!Ue(t)){e.next=5;break}return e.abrupt("return");case 5:if(!le){e.next=7;break}return e.abrupt("return");case 7:if(!Object(v.a)(pe).abs().gt(10)){e.next=9;break}return e.abrupt("return",ye(!0));case 9:return e.next=11,Le(t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}(X)},disabled:qe}),le&&Object(P.jsx)("div",{className:"error-content mt-12",children:Object(P.jsx)("div",{className:"error-tip",children:le})}),Object(v.a)(xe).gt(0)&&Object(P.jsxs)("div",{className:"error-content mt-12",children:[Object(P.jsxs)("div",{className:"error-tip",children:[u.a.getHTML("deposit.swap_detail",{value:Object(v.u)(xe,2),symbol:"Old 3pool LP"})," "]}),Object(P.jsx)("div",{className:"error-tip",children:u.a.get("deposit.exchange_rate",{value:Object(v.u)(W.virtualPrice,6),symbol:"Old 3pool LP"})})]})]})}):Object(P.jsx)(D.a,{}),Object(P.jsx)(S.a,{}),Object(P.jsx)(d.a,{title:u.a.get("deposit.high_slippage_title"),open:Se,closable:!0,icon:null,onCancel:Re,footer:null,width:400,className:"common-modal common-bg slippage-modal",children:Object(P.jsxs)("div",{className:"center",children:[Object(P.jsxs)("div",{className:"common-err-bg",children:[Object(P.jsx)("div",{children:u.a.get("deposit.high_tip1")}),Object(P.jsx)("div",{children:u.a.get("deposit.high_tip2",{value:Object(v.u)(Object(v.a)(pe).abs(),3)})})]}),Object(P.jsx)(O.a,{checked:Ce,onChange:Be,children:u.a.get("deposit.confirm_slippage",{value:Object(v.u)(Object(v.a)(pe).abs(),3)})}),Object(P.jsx)("br",{}),Object(P.jsxs)("div",{className:"btns flex",children:[Object(P.jsx)(f.a,{onClick:function(){return ye(!1)},type:"primary",children:u.a.get("cancel")}),Object(P.jsx)(f.a,{onClick:function(){return Le(X)},disabled:!Ce,children:u.a.get("deposit.anyway")})]})]})})]})})),Object(P.jsx)(p.a,Object(c.a)(Object(c.a)({},T.a.colRight),{},{children:Object(P.jsx)(k.a,{className:Z.isConnected?null:"window-for-tabs-pane"})}))]}))}})}},1111:function(e,t,a){"use strict";var n=a(4),c=a(5),r=a(0),s=a(2),i=a(11),o=a(3),l=a(15),u=a.n(l),b=a(1931),j=a(1933),p=a(345),O=a(1040),d=a(284),f=a(75),x=a(135),g=a(25),v=a(6),m=a(12),h=a(1),w=a(1077),_=a(1057),k=a(1067),S=(a(1075),a(1066)),y=(a(41),a(1063)),N=a(1059),A=a(1064),C=a(1061),T=a(1058),D=a(1062),L=a(1070),I=a(7),P=v.a.pools,F=v.a.poolKeys,U=v.a.stableLp,B=v.a.ALL_FEE,V=v.a.stablePool,E=v.a.tokens,K="---",M="CUSTOM",R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={};return F.map((function(a){t[a]=e})),t};t.a=function(e){var t,a,l,v,q,H,J,Z,Q,W,z,G=e.pageList,X=e.tabPaneKey,Y=Object(o.useState)(),$=Object(i.a)(Y,2),ee=$[0],te=void 0===ee?R("--"):ee,ae=$[1],ne=Object(o.useState)("100.00"),ce=Object(i.a)(ne,2),re=ce[0],se=ce[1],ie=Object(o.useState)(.2),oe=Object(i.a)(ie,2),le=oe[0],ue=oe[1],be=Object(o.useState)(""),je=Object(i.a)(be,2),pe=je[0],Oe=je[1],de=Object(o.useState)(!0),fe=Object(i.a)(de,2),xe=fe[0],ge=fe[1],ve=Object(o.useState)(!1),me=Object(i.a)(ve,2),he=me[0],we=me[1],_e=Object(o.useState)("--"),ke=Object(i.a)(_e,2),Se=ke[0],ye=ke[1],Ne=Object(o.useState)(),Ae=Object(i.a)(Ne,2),Ce=Ae[0],Te=void 0===Ce?R(!1):Ce,De=Ae[1],Le=Object(o.useState)(!1),Ie=Object(i.a)(Le,2),Pe=Ie[0],Fe=Ie[1],Ue=Object(o.useState)(!1),Be=Object(i.a)(Ue,2),Ve=Be[0],Ee=Be[1],Ke=Object(f.d)((function(){return x.a.system})),Me=Object(f.d)((function(){return x.a.pool})),Re=Object(f.d)((function(){return x.a.network})),qe=null;Object(o.useEffect)(Object(s.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ve&&He();case 1:case"end":return e.stop()}}),e)}))),[te,re,le,pe,Te]),Object(o.useEffect)((function(){at(te,he)}),[te]);var He=function(){return re!==K&&Object(h.fb)(re).gt(100)?(Fe(u.a.get("error.e3")),!0):function(){for(var e in te)if(Object(h.fb)(te[e]).gt(0)||"--"===te[e])return!1;return!0}()?(Fe(u.a.get("error.e4")),!0):le===M&&(We()||re===K)&&(Object(h.a)(pe).lt(.1)||Object(h.a)(pe).gt(50)||Object(h.a)(pe).isNaN())?(Fe(u.a.get("error.e5")),!0):(Fe(!1),!1)},Je=function(e,a){return(t=t||Object(s.a)(Object(r.a)().mark((function e(t,a){var n,c,s,i,o,l,u,b;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.length,c=t.map((function(e){return e.inputValue.isNaN()?0:e.inputValue._toIntegerDown()._toHex()}))||[],e.next=5,Object(m.d)(c,!1);case 5:if((s=e.sent).success){e.next=8;break}return e.abrupt("return");case 8:if(i=s.value,o=i.times(Object(h.a)(1).plus(Object(h.a)(B).times(n).div(4*(n-1)))),l=Object(h.a)(100).plus(a).div(100),o=o.times(l)._toIntegerDown(),!xe||!Object(h.a)(Me.userLpAllowance).lt(o)){e.next=21;break}return e.next=15,Ke.approveToken(U,V,{title:"deposit.approve_token",obj:{value:E.thrpoollp.symbol},continuous:!0},[["pool/getUserLp"]]);case 15:if(!e.sent){e.next=20;break}ge(!1),e.next=21;break;case 20:return e.abrupt("return");case 21:return u=o._toHex(),b={title:"actions.remove",obj:{detail:Object(h.A)(te)}},e.next=25,Ke.removeLiqImBalance(c,u,b,[["pool/updateCurrencyData"]]);case 25:e.sent,e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),console.log(e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,28]])})))).apply(this,arguments)},Ze=function(e,t){return(a=a||Object(s.a)(Object(r.a)().mark((function e(t,a){var n,c,s,i,o,l,u;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ze(a,t,Object(h.fb)(re));case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(c=n.userLpBalance,n.lpTotalSupply,n.balances,s=n.userLpAllowance,i=n.minAmounts,o=Object(h.fb)(re).div(100).times(c)._toIntegerDown(),!xe||!Object(h.a)(s).lt(o._toIntegerDown())){e.next=17;break}return e.next=11,Ke.approveToken(U,V,{title:"deposit.approve_token",obj:{value:E.thrpoollp.symbol},continuous:!0},[["pool/getUserLp"]]);case 11:if(!e.sent){e.next=16;break}ge(!1),e.next=17;break;case 16:return e.abrupt("return");case 17:return l={title:"actions.remove",obj:{detail:Object(h.A)(te)}},u=o._toHex(),e.next=21,Ke.removeLiquidity(u,i,l,[["pool/updateCurrencyData"]]);case 21:e.sent,e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})))).apply(this,arguments)},Qe=function(e,t,a){return(l=l||Object(s.a)(Object(r.a)().mark((function e(t,a,n){var c,s,i,o,l,u,b,j,p,O,d,f,x,g;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(m.qb)(a,t);case 3:if((c=e.sent).success){e.next=6;break}return e.abrupt("return");case 6:if(s=c.userLpBalance,i=c.userLpAllowance,o=Object(h.fb)(re).div(100).times(s)._toIntegerDown(),!xe||!Object(h.a)(i).lt(o._toIntegerDown())){e.next=17;break}return e.next=11,Ke.approveToken(U,V,{title:"deposit.approve_token",obj:{value:E.thrpoollp.symbol},continuous:!0},[["pool/getUserLp"]]);case 11:if(!e.sent){e.next=16;break}ge(!1),e.next=17;break;case 16:return e.abrupt("return");case 17:for(b in l=o._toHex(),u=!1,Te)!0===Te[b]&&(u=P[b].index);return e.next=22,Object(m.p)(l,u);case 22:if((j=e.sent).success){e.next=25;break}return e.abrupt("return");case 25:return p=j.value,O=t.length,d=p.times(Object(h.a)(1).minus(Object(h.a)(B).times(O).div(4*(O-1)).div(1e10))),f=Object(h.a)(100).div(Object(h.a)(100).plus(n)),x=d.times(f)._toIntegerDown()._toHex(),g={title:"actions.remove",obj:{detail:Object(h.A)(te)}},e.next=33,Ke.removeLiqOneCoin(l,u,x,g,[["pool/updateCurrencyData"]]);case 33:e.sent,e.next=39;break;case 36:e.prev=36,e.t0=e.catch(0),console.log(e.t0);case 39:case"end":return e.stop()}}),e,null,[[0,36]])})))).apply(this,arguments)},We=function(){for(var e in Te)if(Te[e])return e;return!1},ze=function(e,t,a){return(q=q||Object(s.a)(Object(r.a)().mark((function e(t,a,n){var c,s,i,o,l,u,b,j,p=arguments;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=p.length>3&&void 0!==p[3]&&p[3],e.prev=1,e.next=4,Object(m.qb)(t,a);case 4:if((s=e.sent).success){e.next=7;break}return e.abrupt("return");case 7:return i=s.userLpBalance,o=s.lpTotalSupply,l=s.balances,u=s.userLpAllowance,b=[],j={},a.map((function(e){var t=e.index,a=e.id,r=e.decimal,s=e.precision,u=Object(h.fb)(n).div(100).times(l[t]);c||(u=Object(h.a)(.98).times(u)),b[t]=u.times(i).div(o)._toIntegerDown()._toHex(),j[a]=Object(h.c)(u.times(i).div(o).div(s)._toFixed(r,1))})),e.abrupt("return",{userLpBalance:i,lpTotalSupply:o,balances:l,userLpAllowance:u,minAmounts:b,amountsStr:j});case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)},Ge=function(e,t){return(H=H||Object(s.a)(Object(r.a)().mark((function e(t,a){var n,c,s,i,o,l,u,b,j,p;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Me.getUserLp();case 3:return n=Me.userLpBalance,c=P[t],s=c.precision,i=c.decimal,o=Object(h.fb)(a).div(100).times(n)._toIntegerDown(),l=P[t].index,u=o._toHex(),e.next=10,Object(m.p)(u,l);case 10:if((b=e.sent).success){e.next=13;break}return e.abrupt("return",!1);case 13:return j=b.value,p=Object(h.a)(j).div(s)._toFixed(i,1),e.abrupt("return",p);case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)},Xe=function(){Me.getSwapBalance(),Me.getVirtualPrice(),Me.getVolData()},Ye=function(){return(J=J||Object(s.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Me.getUserLp(),Me.getBalanceInfo()]);case 2:t={},F.map((function(e){var a=Me.poolData[e],n=a.userSwapBalance,c=a.decimal;t[e]=Object(h.c)(Object(h.a)(n)._toFixed(c,1))})),ae(t),qe||(qe=setInterval(Object(s.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xe(),e.next=3,Me.getUserLp();case 3:case"end":return e.stop()}}),e)}))),Re.defaultIntervalSec));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)};Object(o.useEffect)((function(){return Ye(),Xe(),function(){clearInterval(qe)}}),[]);var $e=function(e,t){return(Z=Z||Object(s.a)(Object(r.a)().mark((function e(t,a){var s,i,o,l,u;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ve&&Ee(!0),s=Object(h.fb)(re),i={},o={},!t){e.next=16;break}for(l in we(!0),Te)l!==a&&(i[l]=!1,o[l]=0);return De(Object(c.a)(Object(c.a)(Object(c.a)({},Te),i),{},Object(n.a)({},a,t))),(re===K||Object(h.fb)(re).lte(0))&&se(s="100.00"),Object(h.a)(s).gt(100)&&(s=100),e.next=12,Ge(a,s);case 12:(u=e.sent)&&ae(Object(c.a)(Object(c.a)(Object(c.a)({},te),o),{},Object(n.a)({},a,Object(h.c)(u)))),e.next=19;break;case 16:se(K),we(!1),De(Object(c.a)(Object(c.a)({},Te),{},Object(n.a)({},a,t)));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)},et=function(){var e={},t={};F.map((function(a){e[a]=0,t[0]=!1})),ae(e),De(Te),se(0)},tt=function(){var e={};F.map((function(t){e[t]=0})),ae(e)},at=function(e,t){return(W=W||Object(s.a)(Object(r.a)().mark((function e(t,a){var n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.calcInclPrice(t,!1,a);case 2:n=e.sent,ye(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},nt=function(e){return(z=z||Object(s.a)(Object(r.a)().mark((function e(t){var a,s,i,o,l,u,b,j,p,O,d,f,x,g,v;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ve&&Ee(!0),s=t.target.value,i=s.split("."),(null===(a=i[1])||void 0===a?void 0:a.length)>2&&(s="".concat(i[0]+"."+i[1].substr(0,2))),!Object(h.a)(s).gt(100)){e.next=6;break}return e.abrupt("return");case 6:if(o=Object(h.V)(s,10),l=o.valid,u=o.str,re!==K){e.next=9;break}return e.abrupt("return",et());case 9:if(""!==s){e.next=12;break}return se(""),e.abrupt("return",tt());case 12:if(!l){e.next=34;break}if(se(Object(h.c)(u)),!(b=Object(h.a)(u).gt(100)?Object(h.a)(100):Object(h.a)(u)).isNaN()){e.next=17;break}return e.abrupt("return");case 17:if(Re.defaultAccount){e.next=19;break}return e.abrupt("return");case 19:if(j=Re.defaultAccount,!(p=We())){e.next=26;break}return e.next=24,Ge(p,b);case 24:return O=e.sent,e.abrupt("return",O&&ae(Object(c.a)(Object(c.a)({},te),{},Object(n.a)({},p,Object(h.c)(O)))));case 26:if(u===K){e.next=34;break}return d=[],F.map((function(e){d.push(Object(c.a)({},P[e]))})),f=d.sort((function(e,t){return e.index-t.index})),e.next=32,ze(j,f,u,!0);case 32:x=e.sent,s===t.target.value&&(g=x.amountsStr,v=void 0===g?{}:g,x&&ae(v));case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)},ct=function(e){!Ve&&Ee(!0),ue(e),e!==K&&Oe("")},rt=function(e){var t=Object(h.V)(e,10),a=t.valid,n=t.str;if(a)if(""===n)Oe("");else if(Object(h.a)(n).lte(100)){var c,r=n,s=n.split(".");(null===(c=s[1])||void 0===c?void 0:c.length)>2&&(r="".concat(s[0]+"."+s[1].substr(0,2))),Oe(r)}},st=function(e){return We()||re===K?Object(I.jsx)("div",{className:"flex start mt-20",children:Object(I.jsx)(A.a,{slippage:e,customSlippage:pe,CUSTOM_SLIPPAGE:M,onChangeSlippage:ct,onChangeCustomSlippage:rt})}):Object(I.jsx)(I.Fragment,{})};return Object(I.jsx)(f.a,{children:function(){return Object(I.jsxs)(b.a,Object(c.a)(Object(c.a)({},C.a.row),{},{children:[Object(I.jsxs)(j.a,Object(c.a)(Object(c.a)({},C.a.colLeft),{},{children:[Object(I.jsx)(T.a,{list:G,activeKey:X[0]}),Object(I.jsxs)("div",{className:"pool-deposit",children:[e.isSinglePage?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(_.a,{routeName:"3pool/withdraw",mountedActions:Ye,instantActions:Xe}),Object(I.jsx)(k.a,{title:"3pool "+u.a.get("banner.title_withdraw"),desc:u.a.get("banner.desc_withdraw")}),Object(I.jsx)(S.a,{})]}):null,Re.isConnected?Object(I.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(I.jsxs)("div",{className:"add-liq withdraw-liq",children:[Object(I.jsxs)("div",{className:"flex",children:[u.a.get("withdraw.share_of_liq"),Object(I.jsx)(L.a,{className:"flex-1 ml-20",showMax:!1,placeholder:"100.00",value:re,onChange:nt})]}),Object(I.jsxs)("fieldset",{className:"currencies mt-35",children:[Object(I.jsx)("legend",{children:u.a.get("deposit.currencies")}),Object(I.jsx)("ul",{children:F.map((function(e){var t=P[e].symbol,a=void 0===t?"":t;return Object(I.jsxs)("li",{children:[Object(I.jsx)("div",{className:"cur-label",children:Object(I.jsxs)("span",{className:"icon",children:[Object(I.jsx)("img",{src:g.a[e]?g.a[e]:d.default,alt:"",className:"token-logo"}),a]})}),Object(I.jsx)(L.a,{showMax:!1,value:te[e],onChange:function(t){!function(e,t){(Q=Q||Object(s.a)(Object(r.a)().mark((function e(t,a){var s,i,o,l,u,b;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(b in!Ve&&Ee(!0),s=P[a].decimal,i=Object(h.V)((""+t.target.value).replace(/,/g,""),s),o=i.valid,l=i.str,o&&ae(Object(c.a)(Object(c.a)({},te),{},Object(n.a)({},a,Object(h.c)(l)))),se(K),we(!1),u={},Te)u[b]=!1;De(u);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(t,e)}})]},e)}))})]}),Object(h.ab)(Se),Object(I.jsxs)("fieldset",{children:[Object(I.jsxs)("legend",{className:"flex aic jcs pt20",children:[Object(I.jsx)("span",{className:"mr-10",children:u.a.get("withdraw.withdraw_text")}),Object(I.jsx)(p.a,{title:u.a.get("withdraw.tip"),children:Object(I.jsx)(O.a,{})})]}),Object(I.jsx)("div",{className:"withdraw-one",children:F.map((function(e){var t=P[e].symbol,a=void 0===t?"":t;return Object(I.jsx)(y.a,{id:e,checked:Te[e],tokenLogo:g.a[e]?g.a[e]:d.default,symbol:a,onChange:$e})}))})]}),st(le),Pe?Object(I.jsx)(N.a,{styleName:"mt-40",type:"single",disabled:!0,info:u.a.get("withdraw.action")}):Object(I.jsx)(N.a,{styleName:"mt-40",type:"single",info:u.a.get("withdraw.action"),onClick:function(){return function(t){return(v=v||Object(s.a)(Object(r.a)().mark((function t(a){var n,s,i,o;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,Re.defaultAccount){t.next=3;break}return t.abrupt("return");case 3:if(!Ve&&Ee(!0),Pe){t.next=8;break}if(!He(a)){t.next=8;break}return t.abrupt("return");case 8:if(!Pe){t.next=10;break}return t.abrupt("return");case 10:if(n=Re.defaultAccount,s=[],F.map((function(e){s.push(Object(c.a)(Object(c.a)({},P[e]),{},{inputValue:Object(h.fb)(a[e]).times(P[e].precision)}))})),i=s.sort((function(e,t){return e.index-t.index})),o=le===M?pe:le,e.onSubmit&&e.onSubmit(),!he){t.next=20;break}return t.next=19,Qe(i,n,o);case 19:return t.abrupt("return",t.sent);case 20:if(re===K){t.next=24;break}return t.next=23,Ze(i,n);case 23:return t.abrupt("return",t.sent);case 24:return t.next=26,Je(i,o);case 26:return t.abrupt("return",t.sent);case 29:t.prev=29,t.t0=t.catch(0),console.log(t.t0);case 32:case"end":return t.stop()}}),t,null,[[0,29]])})))).apply(this,arguments)}(te)},disabled:Pe}),Pe&&Object(I.jsx)("div",{className:"error-content mt-12",children:Object(I.jsx)("div",{className:"error-tip",children:Pe})})]})}):Object(I.jsx)(D.a,{})]})]})),Object(I.jsx)(j.a,Object(c.a)(Object(c.a)({},C.a.colRight),{},{children:Object(I.jsx)(w.a,{className:Re.isConnected?null:"window-for-tabs-pane"})}))]}))}})}},1123:function(e,t,a){"use strict";a.r(t),a.d(t,"renderTab",(function(){return M})),a.d(t,"usePoolTab",(function(){return Z}));var n=a(11),c=a(0),r=a(2),s=a(5),i=a(1931),o=a(1933),l=a(1954),u=a(75),b=a(3),j=a.n(b),p=a(15),O=a.n(p),d=(a(1076),a(1079),a(135)),f=a(1057),x=a(1096),g=(a(1915),a(1914)),v=(a(1500),a.p,a(284)),m=a(1080),h=a(6),w=a(12),_=a(25),k=a(1),S=a(1063),y=a(1064),N=a(1059),A=a(286),C=a(7);function T(e){var t,a,i=Object(b.useState)(2),o=Object(n.a)(i,2),l=o[0],j=o[1],p=Object(b.useState)(1),f=Object(n.a)(p,2),T=f[0],D=f[1],L=Object(b.useState)(0),I=Object(n.a)(L,2),P=I[0],F=I[1],U=Object(b.useState)(1),B=Object(n.a)(U,2),V=B[0],E=B[1],K=Object(b.useState)(-1),M=Object(n.a)(K,2),R=M[0],q=M[1],H=Object(b.useState)(1),J=Object(n.a)(H,2),Z=J[0],Q=J[1],W=Object(b.useState)(.005),z=Object(n.a)(W,2),G=z[0],X=z[1],Y=Object(b.useState)(""),$=Object(n.a)(Y,2),ee=$[0],te=$[1],ae=Object(b.useState)(!0),ne=Object(n.a)(ae,2),ce=(ne[0],ne[1],Object(b.useState)("")),re=Object(n.a)(ce,2),se=re[0],ie=re[1],oe=Object(b.useState)(!1),le=Object(n.a)(oe,2),ue=le[0],be=le[1],je=h.a.pools,pe=h.a.poolIndex,Oe=h.a.stablePool,de=h.a.poolKeys,fe=Object(u.d)((function(){return d.a.network})),xe=Object(u.d)((function(){return d.a.system})),ge=Object(u.d)((function(){return d.a.pool})),ve=Object(b.useState)(!1),me=Object(n.a)(ve,2),he=me[0],we=me[1];Object(b.useEffect)((function(){Se({i:l,j:P,dx:T})}),[]);var _e=function(){!he&&we(!0);var e=l,t=P,a=V;e!==t&&(j(t),F(e),D(a),Se({i:t,j:e,dx:a,notChangeRate:!0}),ye({no:1,i:t,j:e,dx:a}))},ke=function(e){var t=Object.assign({},(Object(x.a)(e),e));be(!ue),ye(Object(s.a)(Object(s.a)({},t),{},{exchangeFlags:!ue}))},Se=function(e){return(t=t||Object(r.a)(Object(c.a)().mark((function e(t){var a,n,r,s,i,o,u;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object.assign({},(Object(x.a)(t),t)),e.prev=1,n=void 0===a.i?l:a.i,r=void 0===a.j?P:a.j,s=void 0===a.dx?Object(k.fb)(T):Object(k.fb)(a.dx),Object(k.a)(s).gt(0)){e.next=8;break}return E(0),e.abrupt("return");case 8:return i=Object(k.a)(s).times(je[pe[n]].precision)._toIntegerDown()._toHex(),o=null,e.next=12,Object(w.Q)(n,r,i);case 12:(o=e.sent).success?(u=Object(k.a)(o.value).div(je[pe[r]].precision),E(Object(k.c)(Object(k.a)(u)._toFixed(je[pe[r]].decimal,1))),Q(Object(k.a)(o.value))):(E(0),Q(1)),a.notChangeRate||ye({i:n,j:r,dx:s}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log("getDyData: ",e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)},ye=function(e){return(a=a||Object(r.a)(Object(c.a)().mark((function e(t){var a,n,r,s,i,o,u,b;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object.assign({},(Object(x.a)(t),t)),e.prev=1,n=void 0===a.i?l:a.i,r=void 0===a.j?P:a.j,s=void 0===a.dx?Object(k.fb)(T):Object(k.fb)(a.dx),i=void 0===a.exchangeFlags?ue:a.exchangeFlags,o=Object(k.a)(s).times(je[pe[n]].precision)._toIntegerDown()._toHex(),u=null,Object(k.a)(s).gt(0)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,Object(w.Q)(n,r,o);case 12:(u=e.sent).success&&(b=Object(k.a)(u.value).div(je[pe[r]].precision).div(s),q(i?Object(k.a)(1).div(Object(k.a)(b)._toFixed(4,1))._toFixed(4,1):b._toFixed(4,1))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log("getRateData: ",e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)},Ne=function(e){var t=l;Number(e)!==Number(P)&&(t=P),F(t),j(e);var a=Object(k.fb)(T)._toFixed(je[pe[e]].decimal,1);D(Object(k.c)(a)),Se({i:e,j:t,dx:a})},Ae=function(e){var t=P;Number(e)!==Number(l)&&(t=l),j(t),F(e);var a=Object(k.fb)(T)._toFixed(je[pe[t]].decimal,1);D(Object(k.c)(a)),Se({j:e,i:t,dx:a})},Ce=function(e){!he&&we(!0);var t=Object(k.V)((""+e).replace(/,/g,""),je[pe[l]].decimal),a=t.valid,n=t.str,c=ge.poolData&&Object(k.a)(ge.poolData[pe[l]].balance).div(je[pe[l]].precision)._toFixed(2,1);if(a){if(Object(k.a)(n).lte(0))return D(Object(k.c)(n)),E(0),void ie(O.a.get("buysell.error_msg_1"));Object(k.a)(n).gt(c)&&ie(O.a.get("buysell.error_msg_2")),D(Object(k.c)(n)),Se({dx:n})}},Te=function(e){var t="--";return t=ge.poolData[pe[l]].balance,t=Object(k.a)(t).isNaN()?"--":ge.poolData[pe[l]].balance.div(ge.poolData[pe[l]].precision),Object(C.jsx)("span",{children:ge.poolData&&Object(k.u)(t)})},De=function(){var e=ge.poolData[pe[l]],t=e.precision,a=e.balance,n=e.symbol;return a=Object(k.a)(a).div(t),Object(k.fb)(T).eq(0)||Object(k.fb)(T).isNaN()?(ie(O.a.get("error.e1")),!0):Object(k.fb)(T).gt(a)?(ie(O.a.get("error.e2",{token:n})),!0):2===G&&(!ee||Number(ee)<.1||Number(ee)>50)?(ie(O.a.get("error.e5")),!0):(ie(""),!1)};Object(b.useEffect)((function(){he&&De()}),[l,P,T,G,ee]);var Le=function(){var e=ge.poolData&&Object(k.a)(ge.poolData[pe[l]].balance).div(je[pe[l]].precision);Ce(e)},Ie=function(e){!he&&we(!0),X(e),2!==e&&te("")},Pe=function(e){!he&&we(!0);var t=Object(k.V)(e,10),a=t.valid,n=t.str;if(a)if(""===n)te("");else if(Object(k.a)(n).lte(100)){var c,r=n,s=n.split(".");(null===(c=s[1])||void 0===c?void 0:c.length)>2&&(r="".concat(s[0]+"."+s[1].substr(0,2))),te(r)}},Fe=function(){var e=function(){var e=l,t=P;if(ue){var a=[t,e];e=a[0],t=a[1]}return Object(C.jsx)(C.Fragment,{children:pe[e].toUpperCase()+"/"+pe[t].toUpperCase()})};return Object(C.jsxs)("p",{className:"exchang-rate-text mt-20",children:[Object(C.jsxs)("span",{className:"en-US"===window.localStorage.getItem("lang")?"er-en":"",children:[O.a.get("buysell.exchange_rate",{symbol:"3pool LP"})+" ",Object(C.jsx)(e,{})]}),Object(C.jsx)("img",{style:{cursor:"pointer",margin:"0 6px"},className:"exchange-img",alt:"",src:m.a,onClick:ke}),Object(C.jsxs)("span",{children:["(",O.a.get("buysell.including_fees"),"): ",-1===R?O.a.get("buysell.not_available"):R]})]})},Ue=function(){var t,a,n=function(){return(t=t||Object(r.a)(Object(c.a)().mark((function t(){var a,n,r,s,i,o,u;return Object(c.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!se){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,a=2!==G?G:ee?Object(k.a)(ee).div(100):0,n=Object(k.a)(Z).times(Object(k.a)(1).minus(Object(k.a)(a)))._toIntegerDown()._toHex(),r=l,s=P,i=Object(k.fb)(T).times(je[pe[r]].precision)._toIntegerDown()._toHex(),o={title:"notification.tip1",title2:"notification.tip1",title3:"notification.tip1",title4:"notification.tip1",obj:{fromValue:Object(k.u)(Object(k.fb)(T)),fromToken:pe[r].toUpperCase(),toValue:Object(k.u)(Object(k.fb)(V)),toToken:pe[s].toUpperCase()}},t.next=11,xe.toExchange(r,s,i,n,o,[["pool/updateCurrencyData"]]);case 11:(u=t.sent)&&(setTimeout((function(){ge.getBalanceInfo()}),5e3),e.onSubmit&&e.onSubmit(u)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),console.log("sellSubmit: ",t.t0);case 18:case"end":return t.stop()}}),t,null,[[2,15]])})))).apply(this,arguments)};return Object(C.jsx)(C.Fragment,{children:se?Object(C.jsx)(N.a,{styleName:"mt-40",type:"single",disabled:!0,info:O.a.get("sell_btn")}):Object(C.jsx)(N.a,{styleName:"mt-40",type:"single",info:O.a.get("sell_btn"),onClick:function(){return(a=a||Object(r.a)(Object(c.a)().mark((function e(){var t,a,r,s;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fe.isConnected){e.next=3;break}return ie(O.a.get("buysell.error_msg_3")),e.abrupt("return");case 3:if(!he&&we(!0),se){e.next=8;break}if(!De()){e.next=8;break}return e.abrupt("return");case 8:if(!se){e.next=10;break}return e.abrupt("return");case 10:return e.prev=10,e.next=13,Object(w.Sb)(window.defaultAccount,[je[pe[l]].token],[Oe]);case 13:if(t=e.sent,a=t[Oe].allowance,r=ge.poolData[pe[l]].approveStatus,a.gt(0)||r){e.next=29;break}return s={action:"approve",title:"deposit.approve_token",obj:{value:de[l].toUpperCase()},continuous:!0},e.next=20,xe.approveToken(je[pe[l]].token,Oe,s,[["pool/getBalanceInfo"]]);case 20:if(!e.sent){e.next=26;break}ge.poolData[pe[l]].approveStatus=2,n(),e.next=27;break;case 26:return e.abrupt("return");case 27:e.next=30;break;case 29:n();case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(10),console.log("exchangeBefore: ",e.t0);case 35:case"end":return e.stop()}}),e,null,[[10,32]])})))).apply(this,arguments)}})})},Be=function(e){var t=e.direction,a=void 0===t?"left":t,n=de;return Object(C.jsx)("div",{className:"flex start mb-16 pc-input-box",children:n.map((function(e){var t=_.a[e]||v.default,n="left"===a?l:P;return Object(C.jsx)(S.a,{id:e,checked:n===je[e].index,tokenLogo:t,symbol:je[e].symbol,onChange:function(t,n){"left"===a?Ne(je[e].index):Ae(je[e].index)}})}))})},Ve=function(){return Object(C.jsx)("span",{className:"exchange-alt",onClick:function(){return _e()}})},Ee=Object(A.a)(A.b);return Object(C.jsx)(u.a,{children:function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:"exchange-box",children:[Object(C.jsx)(Be,{direction:"left"},"left"),Object(C.jsxs)("div",{className:"input-block",children:[Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)("div",{className:"input-number",children:Object(C.jsx)(g.a,{className:"input",value:T,onChange:function(e){return Ce(e.target.value)}})}),Object(C.jsx)("span",{className:"max-btn",onClick:Le,children:O.a.get("sunSwapV3.swap.input_from_max")})]}),Object(C.jsxs)("div",{className:"mt-12 input-bottom-usd",children:[Object(C.jsx)("span",{children:O.a.get("sunSwapV3.swap.input_from_balance")})," ",Te(ge.poolData)]})]}),Object(C.jsxs)("div",{className:"flex",children:[Object(C.jsx)(Ve,{}),!Ee&&Object(C.jsx)("div",{className:"flex start",children:Object(C.jsx)(y.a,{type:"exchange",slippage:G,customSlippage:ee,CUSTOM_SLIPPAGE:2,onChangeSlippage:function(e){Ie(Number(e))},onChangeCustomSlippage:function(e){X(2),Pe(e)}})})]}),Object(C.jsx)(Be,{direction:"right"},"right"),Object(C.jsxs)("div",{className:"input-block",children:[Object(C.jsx)("div",{className:"input-number",children:Object(C.jsx)(g.a,{disabled:!0,className:"input",value:V})}),Object(C.jsxs)("div",{className:"mt-12 input-bottom-usd",children:[Object(C.jsx)("span",{children:O.a.get("sunSwapV3.swap.input_from_balance")})," ",Te(ge.poolData)]})]}),Object(C.jsx)(Fe,{}),Ee&&Object(C.jsx)("div",{className:"flex start",children:Object(C.jsx)(y.a,{type:"exchange",slippage:G,customSlippage:ee,CUSTOM_SLIPPAGE:2,onChangeSlippage:function(e){Ie(Number(e))},onChangeCustomSlippage:function(e){X(2),Pe(e)}})})]}),Object(C.jsx)(Ue,{}),se&&Object(C.jsx)("div",{className:"error-content mt-12",children:Object(C.jsx)("div",{className:"error-tip",children:se})})]})}})}var D=a(1077),L=a(1110),I=a(1111),P=a(1081),F=a(64),U=a(1068),B=a(1061),V=a(1058),E=a(1062),K=function(e){var t=e.onSubmit,a=e.pageList,n=e.tabPaneKey,c=e.isConnected;return Object(C.jsxs)(i.a,Object(s.a)(Object(s.a)({},B.a.row),{},{children:[Object(C.jsxs)(o.a,Object(s.a)(Object(s.a)({},B.a.colLeft),{},{children:[Object(C.jsx)(V.a,{list:a,activeKey:n[0]}),c?Object(C.jsx)("div",{className:"window-for-tabs-pane",children:Object(C.jsx)(T,{onSubmit:t})}):Object(C.jsx)(E.a,{})]})),Object(C.jsx)(o.a,Object(s.a)(Object(s.a)({},B.a.colRight),{},{children:Object(C.jsx)(D.a,{})}))]}))},M=function(e){return Object(C.jsx)("span",{children:J[e].tabTitle})},R=Object(P.a)({childPage:F.h.liquidity_old3pool}),q=R.tabChangeLog,H=R.tabSubmitLog,J={1:{title:O.a.get("banner.title_deposit"),content:O.a.get("banner.desc_deposit"),tabTitle:O.a.get("header.deposit")},2:{title:O.a.get("banner.title_withdraw"),content:O.a.get("banner.desc_withdraw"),tabTitle:O.a.get("header.withdraw")},3:{title:O.a.get("banner.title_1"),content:O.a.get("banner.desc_1"),tabTitle:O.a.get("header.swap")}},Z=function(e){var t=window.location.hash.split("/"),a=Object(n.a)(t,3),c=a[1],r=a[2],s=window.localStorage.getItem("lang");return c.includes("usdc")&&(c="en-US"===s?"USDC Old":"Old USDC"),c.includes("3pool")&&(c="Old 3pool"),c.includes("busd")&&(c="en-US"===s?"Old BUSD":O.a.get("buysell.busd_2pool")),c.includes("usdd_usd_2pool")&&(c="en-US"===s?"Old USDD":O.a.get("buysell.usdd_2pool")),c.includes("usdj_2pool")&&(c="en-US"===s?"Old USDJ":O.a.get("buysell.usdj_2pool")),c.includes("tusd_2pool")&&(c="en-US"===s?"Old TUSD":O.a.get("buysell.tusd_2pool")),{title:c,tabKey:[{deposit:"1",withdraw:"2",swap:"3"}[r]||"1"]}};t.default=function(){var e=Z(),t=e.title,a=e.tabKey,i=j.a.useState(a),o=Object(n.a)(i,2),p=o[0],x=o[1],g=function(){var e,t=null,a=Object(u.d)((function(){return d.a.pool})),n=Object(u.d)((function(){return d.a.network})),s=function(){a.getSwapBalance(),a.getVirtualPrice(),a.getVolData()};return j.a.useEffect((function(){return function(){clearInterval(t)}}),[]),{mountedActions:function(){return(e=e||Object(r.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.getUserLp(),e.next=3,a.getBalanceInfo();case 3:t||(t=setInterval(Object(r.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(),a.getUserLp(),e.next=4,a.getBalanceInfo();case 4:case"end":return e.stop()}}),e)}))),n.defaultIntervalSec));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},instantActions:s}}(),v=g.mountedActions,m=g.instantActions,h=Object(b.useCallback)((function(e){var t=e.value;x(t),q(t)}),[]),w=function(){var e=window.localStorage.getItem("lang")||O.a.options.currentLocale,t=window.location.origin+window.location.pathname;window.location.href=t+"?lang=".concat(e,"#/sunCurve")},_=Object(b.useMemo)((function(){return{shouldScroll:!0,navRightMoreShow:!0,navRightMoreClick:w}}),[]),k=Object(b.useMemo)((function(){return B.b.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{handler:h})}))}),[h]),S=Object(u.d)((function(){return d.a.network}));return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(f.a,{mountedActions:v,instantActions:m,subNavProps:_}),Object(C.jsxs)("div",{className:"main-page-content",children:[Object(C.jsx)(U.a,{title:"".concat(t," ").concat(J[p[0]].title),subTitle:J[p[0]].content}),Object(C.jsx)("div",{className:"pool-tabs",children:Object(C.jsxs)(l.a,{activeKey:p[0],centered:!0,onChange:h,renderTabBar:function(){return null},children:[Object(C.jsx)(l.a.TabPane,{tab:M("1"),children:Object(C.jsx)(L.a,{onSubmit:function(){return H("1")},pageList:k,tabPaneKey:p})},"1"),Object(C.jsx)(l.a.TabPane,{tab:M("2"),children:Object(C.jsx)(I.a,{onSubmit:function(){return H("2")},pageList:k,tabPaneKey:p})},"2"),Object(C.jsx)(l.a.TabPane,{tab:M("3"),children:Object(C.jsx)(K,{onSubmit:function(e){return H("3",{event_label:e,txid:e})},pageList:k,tabPaneKey:p,isConnected:S.isConnected})},"3")]})})]})]})}}}]);