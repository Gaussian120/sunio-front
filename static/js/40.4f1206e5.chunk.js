(this["webpackJsonpfront-js"]=this["webpackJsonpfront-js"]||[]).push([[40],{1058:function(e,t,a){"use strict";a(1071);var c=a(24),n=a.n(c),r=a(7);t.a=function(e){return Object(r.jsx)("div",{className:"tempalte-pageTab-nav",children:e.list.map((function(t){return Object(r.jsx)("div",{className:n()("tempalte-pageTab-nav-item",{"tempalte-pageTab-nav-active":e.activeKey===t.value}),onClick:function(){return t.handler(t)},children:t.label},t.value)}))})}},1061:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var c=a(15),n=a.n(c),r={row:{gutter:[{xs:8,sm:16,md:32},20]},colLeft:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:15}},colRight:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:9}}},s={1:{title:n.a.get("banner.title_deposit"),content:n.a.get("banner.desc_deposit"),tabTitle:n.a.get("header.deposit")},2:{title:n.a.get("banner.title_withdraw"),content:n.a.get("banner.desc_withdraw"),tabTitle:n.a.get("header.withdraw")},3:{title:n.a.get("banner.title_1"),content:n.a.get("banner.desc_1"),tabTitle:n.a.get("header.swap")}},i=[{label:s[1].tabTitle,value:"1"},{label:s[2].tabTitle,value:"2"},{label:s[3].tabTitle,value:"3"}]},1071:function(e,t,a){},1077:function(e,t,a){"use strict";a(3);var c=a(15),n=a.n(c),r=a(78),s=a(6),i=a(110),o=a(1),l=(a(1078),a(1092)),b=a(1089),u=a(7),j=s.a.Fee,p=s.a.A,d=s.a.ADMIN_FEE,O=s.a.poolKeys;s.a.pools;t.a=function(e){var t=Object(r.d)((function(){return i.a.pool})),a=Object(r.d)((function(){return i.a.network})),c=function(e,t){var a=Object(o.a)(e).times(t).div(1e18);return a.isNaN()?"--":Object(o.u)(a,2)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var a=Object(o.a)(0);for(var c in e){var n=e[c],r=n.userSwapBalance,s=n.priceKey,i=t?t[s]:"--";a=a.plus(Object(o.a)(r).times(i))}return Object(o.u)(a)}catch(l){return console.log(l),"--"}},v=O.map((function(e){return t.poolData[e]})).filter((function(e){return e})),x=t.volData?t.volData["3pvol24Hours"]:"",h="Old 3Pool ".concat(n.a.get("pool.pool2_contract")),m="3SUN ".concat(n.a.get("pool.token_contract2"));return Object(u.jsx)(r.a,{children:function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)(l.a,{poolTokens:v,totalSwapBalance:t.totalSwapBalance,adminFee:d,fee:j,virtualPrice:t.virtualPrice,dailyVol:x,poolContract:s.a.stablePool,poolName:h,lpTokenAddress:s.a.stableLp,lpTokenName:m,aValue:p}),a.isConnected&&Object(o.a)(t.sharePer).gt(0)&&Object(u.jsx)(b.a,{sharePer:t.sharePer,usdBalance:f(t.poolData,t.volData),avgUsdBalance:c(t.userLpBalance,t.virtualPrice),userTotalBalance:t.userTotalBalance,myPoolTokens:v})]})}})}},1106:function(e,t,a){},1110:function(e,t,a){"use strict";var c=a(4),n=a(5),r=a(0),s=a(2),i=a(11),o=a(3),l=a(15),b=a.n(l),u=a(78),j=a(1931),p=a(1933),d=a(1502),O=a(1042),f=a(181),v=a(283),x=a(25),h=a(1),m=a(6),g=a(110),k=a(1057),w=a(1067),y=(a(1075),a(1077)),N=a(340),_=a(1066),S=a(1059),P=a(12),T=a(1058),D=a(1061),L=a(1062),C=a(1070),B=a(338),F=a(7),I=m.a.pools,A=m.a.poolKeys,V=m.a.ALL_FEE,E=m.a.defaultSlippage,K=m.a.stablePool;t.a=function(e){var t,a,l,m,U,H,q,M,J=e.pageList,R=e.tabPaneKey,z=Object(u.d)((function(){return g.a.network})),G=Object(u.d)((function(){return g.a.system})),Q=Object(u.d)((function(){return g.a.pool})),W=Object(o.useState)(function(){var e={};return A.map((function(t){e[t]=""})),e}()),X=Object(i.a)(W,2),Y=X[0],Z=X[1],$=Object(o.useState)(!1),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ce=Object(o.useState)(!0),ne=Object(i.a)(ce,2),re=ne[0],se=ne[1],ie=Object(o.useState)(!1),oe=Object(i.a)(ie,2),le=oe[0],be=oe[1],ue=Object(o.useState)("--"),je=Object(i.a)(ue,2),pe=je[0],de=je[1],Oe=Object(o.useState)("--"),fe=Object(i.a)(Oe,2),ve=fe[0],xe=fe[1],he=Object(o.useState)(!1),me=Object(i.a)(he,2),ge=me[0],ke=me[1],we=Object(o.useState)(!1),ye=Object(i.a)(we,2),Ne=ye[0],_e=ye[1],Se=Object(o.useState)(!1),Pe=Object(i.a)(Se,2),Te=Pe[0],De=Pe[1],Le=null;Object(o.useEffect)(Object(s.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ee(Y),Be()]);case 2:ge&&Ae(Y);case 3:case"end":return e.stop()}}),e)}))),[Y]);var Ce=function(t){return(a=a||Object(s.a)(Object(r.a)().mark((function t(a){var c,s,i,o,l,b,u,j,p,d,O,f,v,x,m,g,k;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,c=[],e.onSubmit&&e.onSubmit(),A.map((function(e){c.push(Object(n.a)(Object(n.a)({},Q.poolData[e]),{},{inputValue:a[e]?Object(h.fb)(a[e]).times(I[e].precision):Object(h.a)(0)}))})),s=0;case 5:if(!(s<c.length)){t.next=19;break}if(i=c[s],o=i.allowance,l=void 0===o?Object(h.a)(0):o,b=i.inputValue,u=i.token,j=i.symbol,p=i.approveStatus,d=i.id,!Object(h.a)(l).lt(b)||p){t.next=16;break}return t.next=10,G.approveToken(u,K,{title:"deposit.approve_token",obj:{value:j},continuous:!0},[["pool/getBalanceInfo"]]);case 10:if(!t.sent){t.next=15;break}Q.poolData[d].approveStatus=2,t.next=16;break;case 15:return t.abrupt("return");case 16:s++,t.next=5;break;case 19:if(O=c.sort((function(e,t){return e.index-t.index})),f=O.length,v=O.map((function(e){return e.inputValue._toIntegerDown()._toHex()}))||[],x=null,!Q.lpTotalSupply.lte(0)){t.next=26;break}return t.next=26,Q.getUserLp();case 26:if(!Q.lpTotalSupply.lte(0)){t.next=30;break}x=Object(h.a)(1),t.next=36;break;case 30:return t.next=32,Object(P.d)(v);case 32:if((m=t.sent).success){t.next=35;break}return t.abrupt("return");case 35:x=m.value;case 36:return x=x.times(Object(h.a)(1).minus(Object(h.a)(V).times(f).div(Object(h.a)(4).times(f-1)).div(1e10))),g=x.times(1-E)._toFixed(0,1),k={title:"actions.addLiq",obj:{detail:Object(h.A)(a)}},t.next=41,G.addLiquidity(v,g,k,[["pool/updateCurrencyData"]]);case 41:t.sent&&qe(),t.next=48;break;case 45:t.prev=45,t.t0=t.catch(0),console.log("deposit err: ",t.t0);case 48:case"end":return t.stop()}}),t,null,[[0,45]])})))).apply(this,arguments)},Be=function(){return(l=l||Object(s.a)(Object(r.a)().mark((function e(){var t,a,c,n,s,i,o,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],Y)c=I[a],n=c.index,s=c.precision,i=Y[a].replace(/,/g,""),t[n]=Object(h.a)(i).isNaN()?0:Object(h.a)(i).times(s)._toIntegerDown()._toHex();if(o=null,!Q.lpTotalSupply.lte(0)){e.next=6;break}return e.next=6,Q.getUserLp();case 6:if(!Q.lpTotalSupply.lte(0)){e.next=10;break}o=Object(h.a)(1),e.next=16;break;case 10:return e.next=12,Object(P.d)(t);case 12:if((l=e.sent).success){e.next=15;break}return e.abrupt("return");case 15:o=l.value.div(1e18);case 16:xe(o);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)},Fe=function(){return(m=m||Object(s.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Q.getSwapBalance(),Q.getVirtualPrice(),Q.getVolData()]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)},Ie=function(){return(U=U||Object(s.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Q.getUserLp(),Q.getBalanceInfo()]);case 2:t={},A.map((function(e){var a=Q.poolData[e],c=a.precision,n=a.balance,r=a.decimal;t[e]=Object(h.c)(Object(h.a)(n).div(c)._toFixed(r,1))})),Z(t),!ge&&ke(!0),Le||(Le=setInterval(Object(s.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fe(),Q.getUserLp();case 2:case"end":return e.stop()}}),e)}))),z.defaultIntervalSec));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)};Object(o.useEffect)(Object(s.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ie(),Fe()]);case 2:return e.abrupt("return",(function(){clearInterval(Le)}));case 3:case"end":return e.stop()}}),e)}))),[z.defaultAccount]);var Ae=function(e){var t=Object.keys(e),a=t.length;if(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e),a=t.filter((function(t){return Object(h.fb)(e[t]).eq(0)||!e[t]}));return t.length===a.length}(e))return be(b.a.get("error.e1")),!0;for(var c=0;c<a;c++){var n=t[c],r=e[n];if(!r&&(te||re))return be(b.a.get("error.e1")),!0;var s=Q.poolData[n],i=s.balance,o=s.precision,l=s.symbol;if(Object(h.a)(i).div(o).lt(Object(h.fb)(r)))return be(b.a.get("error.e2",{token:l})),!0}return be(!1),!1},Ve=function(e){De(e.target.checked)},Ee=function(e){return(H=H||Object(s.a)(Object(r.a)().mark((function e(t){var a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.calcInclPrice(t);case 2:a=e.sent,de(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},Ke=function(e,t){var a=t,c={};c[e]=Object(h.c)(String(a).replace(/,/g,""));var n=Q.poolData[e],r=(n.precision,n.swapBalance),s=(n.balance,Object(h.fb)(a).div(r).isNaN()?Object(h.a)(0):Object(h.fb)(a).div(r));A.filter((function(t){return t!==e})).map((function(e){var t=Q.poolData[e],a=t.balance,n=void 0===a?Object(h.a)(0):a,r=t.swapBalance,i=t.precision,o=t.decimal;c[e]=Object(h.c)(s.times(r)._toFixed(o,1)),n.div(i).lt(Object(h.fb)(c[e]))&&(c[e]=Object(h.c)(n.div(i)._toFixed(o,1)))})),Z(c)},Ue=function(e){return(q=q||Object(s.a)(Object(r.a)().mark((function e(t){var a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.checked,ae(a),re&&se(!a),a&&Ke(A[0],Y[A[0]])}catch(c){console.log(c)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},He=function(e){return(M=M||Object(s.a)(Object(r.a)().mark((function e(t){var a,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.checked,se(a),te&&ae(!a),c={},A.map((function(e){var t=Q.poolData[e],a=t.balance,n=t.precision,r=t.decimal;c[e]=Object(h.a)(a).isNaN()?0:Object(h.c)(a.div(n)._toFixed(r,1))})),Z(c)}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},qe=function(){De(!1),_e(!1)},Me=Object(B.b)();return Object(F.jsx)(u.a,{children:function(){return Object(F.jsxs)(j.a,Object(n.a)(Object(n.a)({},D.a.row),{},{children:[Object(F.jsx)(p.a,Object(n.a)(Object(n.a)({},D.a.colLeft),{},{children:Object(F.jsxs)("div",{className:"pool-deposit",children:[Object(F.jsx)(T.a,{list:J,activeKey:R[0]}),e.isSinglePage?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(k.a,{routeName:"3pool/deposit",mountedActions:Ie,instantActions:Fe}),Object(F.jsx)(w.a,{title:"3pool "+b.a.get("banner.title_deposit"),desc:b.a.get("banner.desc_deposit")}),Object(F.jsx)(_.a,{})]}):null,z.isConnected?Object(F.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(F.jsxs)("div",{className:"add-liq",children:[Object(F.jsxs)("fieldset",{className:"currencies",children:[Object(F.jsx)("legend",{children:b.a.get("deposit.currencies")}),Object(F.jsx)("ul",{children:A.map((function(e){var t=Q.poolData[e],a=t.symbol,r=void 0===a?"":a,s=t.balance,i=void 0===s?"--":s,o=t.precision,l=t.decimal;return i=Object(h.a)(i).div(o),Object(F.jsxs)("li",{children:[Object(F.jsxs)("div",{className:"cur-label",children:[Object(F.jsxs)("span",{className:"icon",children:[Object(F.jsx)("img",{src:x.a[e]?x.a[e]:v.default,alt:"",className:"token-logo"})," ",r]}),Object(F.jsx)("span",{className:"token-max",children:b.a.getHTML("deposit.token_max",{balance:Object(h.u)(i)})})]}),Object(F.jsx)(C.a,{onMaxClick:function(){!function(e,t,a){if(!Object(h.a)(t).isNaN()){var r=Object(h.a)(t)._toFixed(a,1);Z(Object(n.a)(Object(n.a)({},Y),{},Object(c.a)({},e,Object(h.c)(r)))),te&&Ke(e,r)}}(e,i,l)},value:Y[e],onChange:function(t){return function(e,t){re&&se(!1);var a=I[t].decimal,r=Object(h.V)((""+e.target.value).replace(/,/g,""),a),s=r.valid,i=r.str;s&&(Z(Object(n.a)(Object(n.a)({},Y),{},Object(c.a)({},t,Object(h.c)(i)))),te&&Ke(t,i))}(t,e)}})]},e)}))})]}),!Object(h.a)(pe).isNaN()&&Object(h.ab)(pe,!0),Object(F.jsxs)("div",{className:"deposit-check",children:[Object(F.jsx)(d.a,{checked:te,onChange:Ue,children:b.a.get("deposit.ch1")}),Object(F.jsx)("br",{}),Object(F.jsx)(d.a,{checked:re,onChange:He,children:b.a.get("deposit.ch2")})]}),le?Object(F.jsx)(S.a,{styleName:"mt-40",type:"single",disabled:!0,info:b.a.get("deposit.action")}):Object(F.jsx)(S.a,{styleName:"mt-40",type:"single",info:Me?b.a.get("not_available"):b.a.get("deposit.action"),onClick:function(){return function(e){return(t=t||Object(s.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,le){e.next=5;break}if(!Ae(t)){e.next=5;break}return e.abrupt("return");case 5:if(!le){e.next=7;break}return e.abrupt("return");case 7:if(!Object(h.a)(pe).abs().gt(10)){e.next=9;break}return e.abrupt("return",_e(!0));case 9:return e.next=11,Ce(t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}(Y)},disabled:Me}),le&&Object(F.jsx)("div",{className:"error-content mt-12",children:Object(F.jsx)("div",{className:"error-tip",children:le})}),Object(h.a)(ve).gt(0)&&Object(F.jsxs)("div",{className:"error-content mt-12",children:[Object(F.jsxs)("div",{className:"error-tip",children:[b.a.getHTML("deposit.swap_detail",{value:Object(h.u)(ve,2),symbol:"Old 3pool LP"})," "]}),Object(F.jsx)("div",{className:"error-tip",children:b.a.get("deposit.exchange_rate",{value:Object(h.u)(Q.virtualPrice,6),symbol:"Old 3pool LP"})})]})]})}):Object(F.jsx)(L.a,{}),Object(F.jsx)(N.a,{}),Object(F.jsx)(O.a,{title:b.a.get("deposit.high_slippage_title"),open:Ne,closable:!0,icon:null,onCancel:qe,footer:null,width:400,className:"common-modal common-bg slippage-modal",children:Object(F.jsxs)("div",{className:"center",children:[Object(F.jsxs)("div",{className:"common-err-bg",children:[Object(F.jsx)("div",{children:b.a.get("deposit.high_tip1")}),Object(F.jsx)("div",{children:b.a.get("deposit.high_tip2",{value:Object(h.u)(Object(h.a)(pe).abs(),3)})})]}),Object(F.jsx)(d.a,{checked:Te,onChange:Ve,children:b.a.get("deposit.confirm_slippage",{value:Object(h.u)(Object(h.a)(pe).abs(),3)})}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{className:"btns flex",children:[Object(F.jsx)(f.a,{onClick:function(){return _e(!1)},type:"primary",children:b.a.get("cancel")}),Object(F.jsx)(f.a,{onClick:function(){return Ce(Y)},disabled:!Te,children:b.a.get("deposit.anyway")})]})]})})]})})),Object(F.jsx)(p.a,Object(n.a)(Object(n.a)({},D.a.colRight),{},{children:Object(F.jsx)(y.a,{className:z.isConnected?null:"window-for-tabs-pane"})}))]}))}})}},1935:function(e,t,a){"use strict";a.r(t);a(3),a(1057),a(1106),a(1078);var c=a(1110),n=a(7);t.default=function(){return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(c.a,{isSinglePage:!0})})}}}]);