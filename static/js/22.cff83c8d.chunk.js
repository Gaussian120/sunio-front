(this["webpackJsonpfront-js"]=this["webpackJsonpfront-js"]||[]).push([[22,27],{1059:function(e,t,a){"use strict";a(1072);var c=a(15),s=a.n(c),n=a(2);t.a=e=>Object(n.jsx)("div",{className:"tempalte-pageTab-nav",children:e.list.map((t=>Object(n.jsx)("div",{className:s()("tempalte-pageTab-nav-item",{"tempalte-pageTab-nav-active":e.activeKey===t.value}),onClick:()=>t.handler(t),children:t.label},t.value)))})},1063:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return l}));var c=a(8),s=a.n(c);const n={row:{gutter:[{xs:8,sm:16,md:32},20]},colLeft:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:15}},colRight:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:9}}},o={1:{title:s.a.get("banner.title_deposit"),content:s.a.get("banner.desc_deposit"),tabTitle:s.a.get("header.deposit")},2:{title:s.a.get("banner.title_withdraw"),content:s.a.get("banner.desc_withdraw"),tabTitle:s.a.get("header.withdraw")},3:{title:s.a.get("banner.title_1"),content:s.a.get("banner.desc_1"),tabTitle:s.a.get("header.swap")}},l=[{label:o[1].tabTitle,value:"1"},{label:o[2].tabTitle,value:"2"},{label:o[3].tabTitle,value:"3"}]},1064:function(e,t,a){"use strict";var c=a(15),s=a.n(c),n=a(1086),o=a(2);t.a=e=>{const{checked:t,tokenLogo:a,symbol:c="",onChange:l,id:i=""}=e;return Object(o.jsxs)("div",{className:s()({[n.sun_check_button]:!0,[n.sun_check_active_button]:t}),onClick:()=>{l&&l(!t,i)},children:[a&&Object(o.jsx)("img",{src:a,alt:"",className:"token-logo"}),Object(o.jsx)("span",{children:c})]})}},1065:function(e,t,a){"use strict";var c=a(8),s=a.n(c),n=a(15),o=a.n(n),l=a(1930),i=a(1075),r=a(2);const b=[{key:.2,label:"0.2%"},{key:3,label:"3%"}],d=[{key:.005,label:"0.5%"},{key:.01,label:"1%"}];t.a=e=>{const{slippage:t,customSlippage:a,CUSTOM_SLIPPAGE:c,type:n="withdraw"}=e,j="withdraw"===n?b:d;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"mr-10",children:s.a.get("withdraw.slippage")}),Object(r.jsxs)("div",{className:o()(i.setting_btns),children:[Object(r.jsx)("div",{className:i.setting_btn_wrap,children:j.map((a=>Object(r.jsx)("button",{className:o()(t===a.key?i.active:""),onClick:()=>{return t=a.key,void(e.onChangeSlippage&&e.onChangeSlippage(t));var t},children:a.label})))}),Object(r.jsx)(l.a,{className:o()(i.setting_input,i.module_important,["ml-20"]),suffix:"%",value:a,onFocus:()=>{a||e.onChangeSlippage&&e.onChangeSlippage(c)},onBlur:()=>{a||e.onChangeSlippage&&e.onChangeSlippage(String(j[0].key))},onChange:t=>{e.onChangeCustomSlippage&&e.onChangeCustomSlippage(t.target.value)}})]})]})}},1069:function(e,t,a){"use strict";var c=a(1),s=a(15),n=a.n(s),o=a(1073),l=a(2);const i=e=>{const{title:t,subTitle:a,isRevert:c}=e,s="string"===typeof t;return Object(l.jsxs)("div",{className:o.page_title_wrap,children:[c&&a&&Object(l.jsx)("div",{className:o.page_title_sub,children:a}),t&&Object(l.jsx)("div",{className:n()({[o.page_title]:!0,[o.page_title_revert]:c,[o.page_title_ele]:!s}),children:s?t.split("").map(((e,t)=>Object(l.jsx)("span",{className:o.page_title_ele,children:e},t))):t}),a&&!c&&Object(l.jsx)("div",{className:o.page_title_sub,children:a})]})};t.a=Object(c.memo)(i)},1072:function(e,t,a){},1073:function(e,t,a){e.exports={page_title:"style_page_title__dfZPh",page_title_wrap:"style_page_title_wrap__7dtV_",page_title_ele:"style_page_title_ele__Tktf1",page_title_sub:"style_page_title_sub__1IUsF",page_title_revert:"style_page_title_revert__18HMS"}},1075:function(e,t,a){e.exports={setting_wrap:"style_setting_wrap__L7ld9",setting_label:"style_setting_label__3qQrG",setting_btns:"style_setting_btns__zH_61",setting_btn_wrap:"style_setting_btn_wrap__uxT1B",setting_input:"style_setting_input__kvJzs",active:"style_active__10VTC",module_important:"style_module_important__PuwNO",info_text:"style_info_text__3K73H",setting_minutes:"style_setting_minutes__1mIXw"}},1077:function(e,t,a){},1078:function(e,t,a){"use strict";a(1);var c=a(8),s=a.n(c),n=a(70),o=a(3),l=a(98),i=a(0),r=(a(1079),a(1094)),b=a(1092),d=a(2);const{Fee:j,A:u,ADMIN_FEE:p,poolKeys:O,pools:g}=o.a;t.a=e=>{const t=Object(n.d)((()=>l.a.pool)),a=Object(n.d)((()=>l.a.network)),c=(e,t)=>{const a=Object(i.a)(e).times(t).div(1e18);return a.isNaN()?"--":Object(i.u)(a,2)},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=Object(i.a)(0);for(let c in e){const{userSwapBalance:s,priceKey:n}=e[c],o=t?t[n]:"--";a=a.plus(Object(i.a)(s).times(o))}return Object(i.u)(a)}catch(a){return console.log(a),"--"}},m=O.map((e=>t.poolData[e])).filter((e=>e)),f=t.volData?t.volData["3pvol24Hours"]:"",x="Old 3Pool ".concat(s.a.get("pool.pool2_contract")),h="3SUN ".concat(s.a.get("pool.token_contract2"));return Object(d.jsx)(n.a,{children:()=>Object(d.jsxs)("div",{children:[Object(d.jsx)(r.a,{poolTokens:m,totalSwapBalance:t.totalSwapBalance,adminFee:p,fee:j,virtualPrice:t.virtualPrice,dailyVol:f,poolContract:o.a.stablePool,poolName:x,lpTokenAddress:o.a.stableLp,lpTokenName:h,aValue:u}),a.isConnected&&Object(i.a)(t.sharePer).gt(0)&&Object(d.jsx)(b.a,{sharePer:t.sharePer,usdBalance:g(t.poolData,t.volData),avgUsdBalance:c(t.userLpBalance,t.virtualPrice),userTotalBalance:t.userTotalBalance,myPoolTokens:m})]})})}},1080:function(e,t,a){},1081:function(e,t,a){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAAA/JJREFUWEfVWctqFUEQPeX7/X5tXIkIouBa/AkxgkYXgrhwIQiufaCuxYXoQsSNGkHFnxDXgiKIuHJlTIwmMYmJ8ci5Voe+k3tneuaOIVMwhCTT3aerTlWdnjb0YCQNwHIAKwEsA7AEwFL/qZn/AJj1n78B/AIwY2asuqwWLG0kBXCVPwJZxrSJKT1mpg2UslKASa4AsMG9GhaSBwVgJuNR/T/2uCKhTSoCwTRm1MymU1EnASapcK/3BUOoJ9xLWjTZSAbgayLqaMNjZiba5FohYA//ZgB6V9z7qcfMFNrKRlLeX+tPmHukiCa5gElqQlFAJi8ofKJAbUZSFNEaootMa8gpHa0rYJIbAShssnE9vWR33g692qwDoEc2YWY/Oo3pCDjj2e9mNlmbS3MmIrkawKY8T88D7Jzd4oMWDGzYRwb0tyyn2wB7NdjmCSYKjC2EZ7NrkFRFEj2U5ENx9cgCVjUQ+ZVg8m6pjkTyMIA9AAZSSlQ3ZzinRY0WFjMbCe/OAfamsNV39bVMNSCp5LwN4JxPfMPMrvQSHa8e2z3aw6G5xIBFBRX1UlQgeRDAUwD7I4A9A9ZcETWkP4b0txbgKNHUDOTdpKZA8jyAW1EN1XQDAM7WUVm8ucjLajKtBAyAxReVlCTvkhTXHwA4GnlVxf6CmT3shQo5CdiqzeYE3+G7UEbmagOSRwA8AbA7mvwNgBNm9qFOsB590VR0VdQHBVgKTMk2a2aDBR3pMoCrGcWljnTPtW4VvB/lgLyKRFIOVQsfFuBQ8yRoRnNKzTEAz6sgShhz2swe56wtrSFdMy7AofbmdjWSfQCeJSxe5ZUiwKFlTwmw6CBazGuDHRJAoA9UQZQzJoUSOuFILkwLcOCHylmhgK4ZbNJ0LhlU3mYFeJfX4y+p9TdplRpf8nq8Uy2jkYAbR4mkpPMG0w9gb43R1lTvzCy3XEbSoZV0qWXtFIBHNYMN0x3PAx2J+lZZS20c/xNwn5m9SG0cSa25Bkqolkrd6XAbTCfwa2Z2s0AStLVmKbZk8VOFEiT3uWY+FI3/DKDfzF4VgG0XP66IwpE+SV6WAU3yDIA7rgXC0JeumeeOPjl0CJT9Jy8dcGh9pQR8gWfU/6WZT0bv6ax4yczupmy6q4B30JWOSDmeuQ5AcjTYe9fMb1PAOqbg3fYjkv8zJJ9OyqUOoZ0AkIwB3wdw0cz0ATHJCg+hDrqnY36MxAWL6PDJzF4nofSXko75DlifVZvzISWTgPp1cX+qCmFr1MfACHRzPrd28fTi/qAdgVZTacaVQQS6OZcymdrajGuvbNH3E4C0guhS5WJRF4qTRTdGnZpN4bVXgcBZ8Kvbv7gRNO3rhp7CAAAAAElFTkSuQmCC"},1082:function(e,t,a){"use strict";var c=a(56);t.a=e=>{let{childPage:t}=e;const a=["deposit","withdraw","swap"],s=function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=a[e-1],l=c.g[s?"".concat(s,"_").concat(o):o];l&&Object(c.a)({action:l(t),event_category:t,...n})};return{tabChangeLog:e=>s(e,"tab"),tabSubmitLog:(e,t)=>s(e,null,t)}}},1083:function(e,t,a){"use strict";var c=a(1),s=a(0),n=a(2);t.a=e=>{let{name:t,cb:a,valueFlag:o}=e;return Object(c.useEffect)((()=>{const e=Object(s.G)(t),c="withdraw"===e?"2":"1";if(console.log("====cbIndex===",c),e){a&&a(o?{value:c}:c)}}),[]),Object(n.jsx)(n.Fragment,{})}},1086:function(e,t,a){e.exports={sun_check_button:"style_sun_check_button__5diEB",sun_check_active_button:"style_sun_check_active_button__28IzL"}},1100:function(e,t,a){"use strict"},1104:function(e,t,a){"use strict";var c=a(70),s=a(1),n=a(8),o=a.n(n),l=(a(1079),a(3)),i=a(98),r=a(0),b=a(33),d=a(1094),j=a(1092),u=a(2);t.a=e=>{const{curveConfig:t,type:a}=e;let{busd2PoolContracts:n,currencyBUSDKeys:p,curveSymbol:O,curveLPSymbol:g,busdusdPoolKeys:m,twoPoolUsdLpKey:f="2poollp"}=t;const x=Object(c.d)((()=>i.a.network)),h=Object(c.d)((()=>Object(b.d)({Stores:i.a,poolType:f,baseStoreName:"busdPool"}))),v=Object(c.d)((()=>Object(b.d)({Stores:i.a,poolType:f,baseStoreName:"usd2Pool"}))),[w,y]=Object(s.useState)(h);Object(s.useEffect)((()=>{y("2usdlp"===a?v:h)}));const _=(e,t)=>{const a=Object(r.a)(e).times(t).div(1e18);return a.isNaN()?"--":Object(r.u)(a,2)},S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=Object(r.a)(0);for(let c in e)if(m.includes(c)){const{userSwapBalance:s,priceKey:n}=e[c],o=t?t[n]:"--";a=a.plus(Object(r.a)(s).times(o))}return Object(r.u)(a)}catch(a){return console.log(a),"--"}},N=window.localStorage.getItem("lang"),P=p.map((e=>w.currencyData[e])).filter((e=>e)),k="".concat("2poollp"===f?"Old ":"").concat(O.toUpperCase()," ").concat("en-US"===N?"":"Pool"," ").concat(o.a.get("pool.pool_contract")),C="".concat(O.toUpperCase()," ").concat("2poollp"===f?" 2pool ":" 2Pool_2 "," ").concat(o.a.get("pool.token_contract2")),L=p.map((e=>w.currencyData[e])).filter((e=>e)),D=w.volData?w.volData["".concat(O).concat("2Pool_2"===f?"UsdtTusdPool24hourVol":"2UsdPool24hourVol")]:"";return Object(u.jsx)(c.a,{children:()=>Object(u.jsxs)("div",{children:[Object(u.jsx)(d.a,{curveLPSymbol:g,poolTokens:P,totalSwapBalance:w.totalSwapBalance,adminFee:w.poolInfo.ADMIN_FEE,fee:w.poolInfo.Fee,virtualPrice:w.virtualPrice,dailyVol:D,poolContract:n.usdcSwap,poolName:k,lpTokenAddress:l.a.tokens["".concat(O).concat(f)].token,lpTokenName:C,aValue:w.poolInfo.A}),x.isConnected&&Object(r.a)(w.sharePer).gt(0)&&Object(u.jsx)(j.a,{sharePer:w.sharePer,usdBalance:S(w.currencyData,w.volData),avgUsdBalance:_(w.swapBalanceInfo.userUsdcLpBalance,w.virtualPrice),userTotalBalance:w.swapBalanceInfo.userTotalBalance,myPoolTokens:L})]})})}},1108:function(e,t,a){},1112:function(e,t,a){"use strict";var c=a(1),s=a(8),n=a.n(s),o=a(70),l=a(1947),i=a(1949),r=a(1517),b=a(1043),d=a(188),j=a(268),u=a(17),p=a(0),O=a(3),g=a(98),m=a(1058),f=a(1068),x=(a(1076),a(1078)),h=a(324),v=a(1067),w=a(1060),y=a(5),_=a(1059),S=a(1063),N=a(1062),P=a(1071),k=a(322),C=a(2);const{pools:L,poolKeys:D,ALL_FEE:I,defaultSlippage:A,stablePool:U}=O.a;t.a=e=>{const{pageList:t,tabPaneKey:a}=e,s=Object(o.d)((()=>g.a.network)),O=Object(o.d)((()=>g.a.system)),T=Object(o.d)((()=>g.a.pool)),[B,F]=Object(c.useState)((()=>{const e={};return D.map((t=>{e[t]=""})),e})()),[V,K]=Object(c.useState)(!1),[E,H]=Object(c.useState)(!0),[q,M]=Object(c.useState)(!1),[R,J]=Object(c.useState)("--"),[Z,G]=Object(c.useState)("--"),[Q,W]=Object(c.useState)(!1),[z,X]=Object(c.useState)(!1),[Y,$]=Object(c.useState)(!1);let ee=null;Object(c.useEffect)((async()=>{await Promise.all([le(B),ae()]),Q&&ne(B)}),[B]);const te=async t=>{try{const a=[];e.onSubmit&&e.onSubmit(),D.map((e=>{a.push({...T.poolData[e],inputValue:t[e]?Object(p.fb)(t[e]).times(L[e].precision):Object(p.a)(0)})}));for(let e=0;e<a.length;e++){const{allowance:t=Object(p.a)(0),inputValue:c,token:s,symbol:n,approveStatus:o,id:l}=a[e];if(Object(p.a)(t).lt(c)&&!o){if(!await O.approveToken(s,U,{title:"deposit.approve_token",obj:{value:n},continuous:!0},[["pool/getBalanceInfo"]]))return;T.poolData[l].approveStatus=2}}const c=a.sort(((e,t)=>e.index-t.index)),s=c.length,n=c.map((e=>e.inputValue._toIntegerDown()._toHex()))||[];let o=null;if(T.lpTotalSupply.lte(0)&&await T.getUserLp(),T.lpTotalSupply.lte(0))o=Object(p.a)(1);else{const e=await Object(y.d)(n);if(!e.success)return;o=e.value}o=o.times(Object(p.a)(1).minus(Object(p.a)(I).times(s).div(Object(p.a)(4).times(s-1)).div(1e10)));const l=o.times(1-A)._toFixed(0,1),i={title:"actions.addLiq",obj:{detail:Object(p.A)(t)}};await O.addLiquidity(n,l,i,[["pool/updateCurrencyData"]])&&de()}catch(a){console.log("deposit err: ",a)}},ae=async()=>{const e=[];for(let a in B){const{index:t,precision:c}=L[a],s=B[a].replace(/,/g,"");e[t]=Object(p.a)(s).isNaN()?0:Object(p.a)(s).times(c)._toIntegerDown()._toHex()}let t=null;if(T.lpTotalSupply.lte(0)&&await T.getUserLp(),T.lpTotalSupply.lte(0))t=Object(p.a)(1);else{const a=await Object(y.d)(e);if(!a.success)return;t=a.value.div(1e18)}G(t)},ce=async()=>{await Promise.all([T.getSwapBalance(),T.getVirtualPrice(),T.getVolData()])},se=async()=>{await Promise.all([T.getUserLp(),T.getBalanceInfo()]);const e={};D.map((t=>{const{precision:a,balance:c,decimal:s}=T.poolData[t];e[t]=Object(p.c)(Object(p.a)(c).div(a)._toFixed(s,1))})),F(e),!Q&&W(!0),ee||(ee=setInterval((async()=>{ce(),T.getUserLp()}),s.defaultIntervalSec))};Object(c.useEffect)((async()=>(await Promise.all([se(),ce()]),()=>{clearInterval(ee)})),[s.defaultAccount]);const ne=e=>{const t=Object.keys(e),a=t.length;if(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e),a=t.filter((t=>Object(p.fb)(e[t]).eq(0)||!e[t]));return t.length===a.length}(e))return M(n.a.get("error.e1")),!0;for(let c=0;c<a;c++){const a=t[c],s=e[a];if(!s&&(V||E))return M(n.a.get("error.e1")),!0;const{balance:o,precision:l,symbol:i}=T.poolData[a];if(Object(p.a)(o).div(l).lt(Object(p.fb)(s)))return M(n.a.get("error.e2",{token:i})),!0}return M(!1),!1},oe=e=>{$(e.target.checked)},le=async e=>{const t=await T.calcInclPrice(e);J(t)},ie=(e,t)=>{const a=t,c={};c[e]=Object(p.c)(String(a).replace(/,/g,""));const{precision:s,swapBalance:n,balance:o}=T.poolData[e],l=Object(p.fb)(a).div(n).isNaN()?Object(p.a)(0):Object(p.fb)(a).div(n);D.filter((t=>t!==e)).map((e=>{const{balance:t=Object(p.a)(0),swapBalance:a,precision:s,decimal:n}=T.poolData[e];c[e]=Object(p.c)(l.times(a)._toFixed(n,1)),t.div(s).lt(Object(p.fb)(c[e]))&&(c[e]=Object(p.c)(t.div(s)._toFixed(n,1)))})),F(c)},re=async e=>{try{const t=e.target.checked;K(t),E&&H(!t),t&&ie(D[0],B[D[0]])}catch(t){console.log(t)}},be=async e=>{try{const t=e.target.checked;H(t),V&&K(!t);const a={};D.map((e=>{const{balance:t,precision:c,decimal:s}=T.poolData[e];a[e]=Object(p.a)(t).isNaN()?0:Object(p.c)(t.div(c)._toFixed(s,1))})),F(a)}catch(t){console.log(t)}},de=()=>{$(!1),X(!1)},je=Object(k.b)();return Object(C.jsx)(o.a,{children:()=>Object(C.jsxs)(l.a,{...S.a.row,children:[Object(C.jsx)(i.a,{...S.a.colLeft,children:Object(C.jsxs)("div",{className:"pool-deposit",children:[Object(C.jsx)(_.a,{list:t,activeKey:a[0]}),e.isSinglePage?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(m.a,{routeName:"3pool/deposit",mountedActions:se,instantActions:ce}),Object(C.jsx)(f.a,{title:"3pool "+n.a.get("banner.title_deposit"),desc:n.a.get("banner.desc_deposit")}),Object(C.jsx)(v.a,{})]}):null,s.isConnected?Object(C.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(C.jsxs)("div",{className:"add-liq",children:[Object(C.jsxs)("fieldset",{className:"currencies",children:[Object(C.jsx)("legend",{children:n.a.get("deposit.currencies")}),Object(C.jsx)("ul",{children:D.map((e=>{let{symbol:t="",balance:a="--",precision:c,decimal:s}=T.poolData[e];return a=Object(p.a)(a).div(c),Object(C.jsxs)("li",{children:[Object(C.jsxs)("div",{className:"cur-label",children:[Object(C.jsxs)("span",{className:"icon",children:[Object(C.jsx)("img",{src:u.a[e]?u.a[e]:j.default,alt:"",className:"token-logo"})," ",t]}),Object(C.jsx)("span",{className:"token-max",children:n.a.getHTML("deposit.token_max",{balance:Object(p.u)(a)})})]}),Object(C.jsx)(P.a,{onMaxClick:()=>{((e,t,a)=>{if(Object(p.a)(t).isNaN())return;const c=Object(p.a)(t)._toFixed(a,1);F({...B,[e]:Object(p.c)(c)}),V&&ie(e,c)})(e,a,s)},value:B[e],onChange:t=>((e,t)=>{E&&H(!1);const{decimal:a}=L[t],{valid:c,str:s}=Object(p.V)((""+e.target.value).replace(/,/g,""),a);c&&(F({...B,[t]:Object(p.c)(s)}),V&&ie(t,s))})(t,e)})]},e)}))})]}),!Object(p.a)(R).isNaN()&&Object(p.ab)(R,!0),Object(C.jsxs)("div",{className:"deposit-check",children:[Object(C.jsx)(r.a,{checked:V,onChange:re,children:n.a.get("deposit.ch1")}),Object(C.jsx)("br",{}),Object(C.jsx)(r.a,{checked:E,onChange:be,children:n.a.get("deposit.ch2")})]}),q?Object(C.jsx)(w.a,{styleName:"mt-40",type:"single",disabled:!0,info:n.a.get("deposit.action")}):Object(C.jsx)(w.a,{styleName:"mt-40",type:"single",info:je?n.a.get("not_available"):n.a.get("deposit.action"),onClick:()=>(async e=>{try{if(!q&&ne(e))return;if(q)return;if(Object(p.a)(R).abs().gt(10))return X(!0);await te(e)}catch(t){console.log(t)}})(B),disabled:je}),q&&Object(C.jsx)("div",{className:"error-content mt-12",children:Object(C.jsx)("div",{className:"error-tip",children:q})}),Object(p.a)(Z).gt(0)&&Object(C.jsxs)("div",{className:"error-content mt-12",children:[Object(C.jsxs)("div",{className:"error-tip",children:[n.a.getHTML("deposit.swap_detail",{value:Object(p.u)(Z,2),symbol:"Old 3pool LP"})," "]}),Object(C.jsx)("div",{className:"error-tip",children:n.a.get("deposit.exchange_rate",{value:Object(p.u)(T.virtualPrice,6),symbol:"Old 3pool LP"})})]})]})}):Object(C.jsx)(N.a,{}),Object(C.jsx)(h.a,{}),Object(C.jsx)(b.a,{title:n.a.get("deposit.high_slippage_title"),open:z,closable:!0,icon:null,onCancel:de,footer:null,width:400,className:"common-modal common-bg slippage-modal",children:Object(C.jsxs)("div",{className:"center",children:[Object(C.jsxs)("div",{className:"common-err-bg",children:[Object(C.jsx)("div",{children:n.a.get("deposit.high_tip1")}),Object(C.jsx)("div",{children:n.a.get("deposit.high_tip2",{value:Object(p.u)(Object(p.a)(R).abs(),3)})})]}),Object(C.jsx)(r.a,{checked:Y,onChange:oe,children:n.a.get("deposit.confirm_slippage",{value:Object(p.u)(Object(p.a)(R).abs(),3)})}),Object(C.jsx)("br",{}),Object(C.jsxs)("div",{className:"btns flex",children:[Object(C.jsx)(d.a,{onClick:()=>X(!1),type:"primary",children:n.a.get("cancel")}),Object(C.jsx)(d.a,{onClick:()=>te(B),disabled:!Y,children:n.a.get("deposit.anyway")})]})]})})]})}),Object(C.jsx)(i.a,{...S.a.colRight,children:Object(C.jsx)(x.a,{className:s.isConnected?null:"window-for-tabs-pane"})})]})})}},1114:function(e,t,a){"use strict";var c=a(1),s=a(8),n=a.n(s),o=a(1947),l=a(1949),i=a(329),r=a(1041),b=a(268),d=a(70),j=a(98),u=a(17),p=a(3),O=a(5),g=a(0),m=a(1078),f=a(1058),x=a(1068),h=(a(1076),a(1067)),v=(a(34),a(1064)),w=a(1060),y=a(1065),_=a(1063),S=a(1059),N=a(1062),P=a(1071),k=a(2);const{pools:C,poolKeys:L,stableLp:D,ALL_FEE:I,stablePool:A,tokens:U}=p.a,T="---",B="CUSTOM",F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t={};return L.map((a=>{t[a]=e})),t};t.a=e=>{const{pageList:t,tabPaneKey:a}=e,[s=F("--"),p]=Object(c.useState)(),[V,K]=Object(c.useState)("100.00"),[E,H]=Object(c.useState)(.2),[q,M]=Object(c.useState)(""),[R,J]=Object(c.useState)(!0),[Z,G]=Object(c.useState)(!1),[Q,W]=Object(c.useState)("--"),[z=F(!1),X]=Object(c.useState)(),[Y,$]=Object(c.useState)(!1),[ee,te]=Object(c.useState)(!1),ae=Object(d.d)((()=>j.a.system)),ce=Object(d.d)((()=>j.a.pool)),se=Object(d.d)((()=>j.a.network));let ne=null;Object(c.useEffect)((async()=>{ee&&oe()}),[s,V,E,q,z]),Object(c.useEffect)((()=>{ge(s,Z)}),[s]);const oe=()=>V!==T&&Object(g.fb)(V).gt(100)?($(n.a.get("error.e3")),!0):(()=>{for(let e in s)if(Object(g.fb)(s[e]).gt(0)||"--"===s[e])return!1;return!0})()?($(n.a.get("error.e4")),!0):E===B&&(be()||V===T)&&(Object(g.a)(q).lt(.1)||Object(g.a)(q).gt(50)||Object(g.a)(q).isNaN())?($(n.a.get("error.e5")),!0):($(!1),!1),le=async(e,t)=>{try{const a=e.length,c=e.map((e=>e.inputValue.isNaN()?0:e.inputValue._toIntegerDown()._toHex()))||[],n=await Object(O.d)(c,!1);if(!n.success)return;let o=n.value.times(Object(g.a)(1).plus(Object(g.a)(I).times(a).div(4*(a-1))));const l=Object(g.a)(100).plus(t).div(100);if(o=o.times(l)._toIntegerDown(),R&&Object(g.a)(ce.userLpAllowance).lt(o)){if(!await ae.approveToken(D,A,{title:"deposit.approve_token",obj:{value:U.thrpoollp.symbol},continuous:!0},[["pool/getUserLp"]]))return;J(!1)}const i=o._toHex(),r={title:"actions.remove",obj:{detail:Object(g.A)(s)}};await ae.removeLiqImBalance(c,i,r,[["pool/updateCurrencyData"]])}catch(a){console.log(a)}},ie=async(e,t)=>{try{const a=await de(t,e,Object(g.fb)(V));if(!a)return;const{userLpBalance:c,lpTotalSupply:n,balances:o,userLpAllowance:l,minAmounts:i}=a,r=Object(g.fb)(V).div(100).times(c)._toIntegerDown();if(R&&Object(g.a)(l).lt(r._toIntegerDown())){if(!await ae.approveToken(D,A,{title:"deposit.approve_token",obj:{value:U.thrpoollp.symbol},continuous:!0},[["pool/getUserLp"]]))return;J(!1)}const b={title:"actions.remove",obj:{detail:Object(g.A)(s)}},d=r._toHex();await ae.removeLiquidity(d,i,b,[["pool/updateCurrencyData"]])}catch(a){console.log(a)}},re=async(e,t,a)=>{try{const c=await Object(O.qb)(t,e);if(!c.success)return;const{userLpBalance:n,userLpAllowance:o}=c,l=Object(g.fb)(V).div(100).times(n)._toIntegerDown();if(R&&Object(g.a)(o).lt(l._toIntegerDown())){if(!await ae.approveToken(D,A,{title:"deposit.approve_token",obj:{value:U.thrpoollp.symbol},continuous:!0},[["pool/getUserLp"]]))return;J(!1)}const i=l._toHex();let r=!1;for(let e in z)!0===z[e]&&(r=C[e].index);const b=await Object(O.p)(i,r);if(!b.success)return;const d=b.value,j=e.length,u=d.times(Object(g.a)(1).minus(Object(g.a)(I).times(j).div(4*(j-1)).div(1e10))),p=Object(g.a)(100).div(Object(g.a)(100).plus(a)),m=u.times(p)._toIntegerDown()._toHex(),f={title:"actions.remove",obj:{detail:Object(g.A)(s)}};await ae.removeLiqOneCoin(i,r,m,f,[["pool/updateCurrencyData"]])}catch(c){console.log(c)}},be=()=>{for(let e in z)if(z[e])return e;return!1},de=async function(e,t,a){let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{const s=await Object(O.qb)(e,t);if(!s.success)return;const{userLpBalance:n,lpTotalSupply:o,balances:l,userLpAllowance:i}=s,r=[],b={};return t.map((e=>{const{index:t,id:s,decimal:i,precision:d}=e;let j=Object(g.fb)(a).div(100).times(l[t]);c||(j=Object(g.a)(.98).times(j)),r[t]=j.times(n).div(o)._toIntegerDown()._toHex(),b[s]=Object(g.c)(j.times(n).div(o).div(d)._toFixed(i,1))})),{userLpBalance:n,lpTotalSupply:o,balances:l,userLpAllowance:i,minAmounts:r,amountsStr:b}}catch(s){console.log(s)}},je=async(e,t)=>{try{await ce.getUserLp();const{userLpBalance:a}=ce,{precision:c,decimal:s}=C[e],n=Object(g.fb)(t).div(100).times(a)._toIntegerDown(),o=C[e].index,l=n._toHex(),i=await Object(O.p)(l,o);if(!i.success)return!1;const r=i.value;return Object(g.a)(r).div(c)._toFixed(s,1)}catch(a){console.log(a)}},ue=()=>{ce.getSwapBalance(),ce.getVirtualPrice(),ce.getVolData()},pe=async()=>{await Promise.all([ce.getUserLp(),ce.getBalanceInfo()]);const e={};L.map((t=>{const{userSwapBalance:a,decimal:c}=ce.poolData[t];e[t]=Object(g.c)(Object(g.a)(a)._toFixed(c,1))})),p(e),ne||(ne=setInterval((async()=>{ue(),await ce.getUserLp()}),se.defaultIntervalSec))};Object(c.useEffect)((()=>(pe(),ue(),()=>{clearInterval(ne)})),[]);const Oe=async(e,t)=>{!ee&&te(!0);let a=Object(g.fb)(V);const c={},n={};if(e){G(!0);for(let e in z)e!==t&&(c[e]=!1,n[e]=0);X({...z,...c,[t]:e}),(V===T||Object(g.fb)(V).lte(0))&&(a="100.00",K(a)),Object(g.a)(a).gt(100)&&(a=100);const o=await je(t,a);o&&p({...s,...n,[t]:Object(g.c)(o)})}else K(T),G(!1),X({...z,[t]:e})},ge=async(e,t)=>{const a=await ce.calcInclPrice(e,!1,t);W(a)},me=async e=>{var t;!ee&&te(!0);let a=e.target.value,c=a.split(".");if((null===(t=c[1])||void 0===t?void 0:t.length)>2&&(a="".concat(c[0]+"."+c[1].substr(0,2))),Object(g.a)(a).gt(100))return;const{valid:n,str:o}=Object(g.V)(a,10);if(V===T)return(()=>{const e={},t={};L.map((a=>{e[a]=0,t[0]=!1})),p(e),X(z),K(0)})();if(""===a)return K(""),(()=>{const e={};L.map((t=>{e[t]=0})),p(e)})();if(n){K(Object(g.c)(o));const t=Object(g.a)(o).gt(100)?Object(g.a)(100):Object(g.a)(o);if(t.isNaN())return;if(!se.defaultAccount)return;const c=se.defaultAccount,n=be();if(n){const e=await je(n,t);return e&&p({...s,[n]:Object(g.c)(e)})}if(o!==T){const t=[];L.map((e=>{t.push({...C[e]})}));const s=t.sort(((e,t)=>e.index-t.index)),n=await de(c,s,o,!0);if(a===e.target.value){const{amountsStr:e={}}=n;n&&p(e)}}}},fe=e=>{!ee&&te(!0),H(e),e!==T&&M("")},xe=e=>{const{valid:t,str:a}=Object(g.V)(e,10);if(t)if(""===a)M("");else if(Object(g.a)(a).lte(100)){var c;let e=a,t=a.split(".");(null===(c=t[1])||void 0===c?void 0:c.length)>2&&(e="".concat(t[0]+"."+t[1].substr(0,2))),M(e)}},he=e=>be()||V===T?Object(k.jsx)("div",{className:"flex start mt-20",children:Object(k.jsx)(y.a,{slippage:e,customSlippage:q,CUSTOM_SLIPPAGE:B,onChangeSlippage:fe,onChangeCustomSlippage:xe})}):Object(k.jsx)(k.Fragment,{});return Object(k.jsx)(d.a,{children:()=>Object(k.jsxs)(o.a,{..._.a.row,children:[Object(k.jsxs)(l.a,{..._.a.colLeft,children:[Object(k.jsx)(S.a,{list:t,activeKey:a[0]}),Object(k.jsxs)("div",{className:"pool-deposit",children:[e.isSinglePage?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(f.a,{routeName:"3pool/withdraw",mountedActions:pe,instantActions:ue}),Object(k.jsx)(x.a,{title:"3pool "+n.a.get("banner.title_withdraw"),desc:n.a.get("banner.desc_withdraw")}),Object(k.jsx)(h.a,{})]}):null,se.isConnected?Object(k.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(k.jsxs)("div",{className:"add-liq withdraw-liq",children:[Object(k.jsxs)("div",{className:"flex",children:[n.a.get("withdraw.share_of_liq"),Object(k.jsx)(P.a,{className:"flex-1 ml-20",showMax:!1,placeholder:"100.00",value:V,onChange:me})]}),Object(k.jsxs)("fieldset",{className:"currencies mt-35",children:[Object(k.jsx)("legend",{children:n.a.get("deposit.currencies")}),Object(k.jsx)("ul",{children:L.map((e=>{const t=C[e],{symbol:a=""}=t;return Object(k.jsxs)("li",{children:[Object(k.jsx)("div",{className:"cur-label",children:Object(k.jsxs)("span",{className:"icon",children:[Object(k.jsx)("img",{src:u.a[e]?u.a[e]:b.default,alt:"",className:"token-logo"}),a]})}),Object(k.jsx)(P.a,{showMax:!1,value:s[e],onChange:t=>{(async(e,t)=>{!ee&&te(!0);const{decimal:a}=C[t],{valid:c,str:n}=Object(g.V)((""+e.target.value).replace(/,/g,""),a);c&&p({...s,[t]:Object(g.c)(n)}),K(T),G(!1);const o={};for(let s in z)o[s]=!1;X(o)})(t,e)}})]},e)}))})]}),Object(g.ab)(Q),Object(k.jsxs)("fieldset",{children:[Object(k.jsxs)("legend",{className:"flex aic jcs pt20",children:[Object(k.jsx)("span",{className:"mr-10",children:n.a.get("withdraw.withdraw_text")}),Object(k.jsx)(i.a,{title:n.a.get("withdraw.tip"),children:Object(k.jsx)(r.a,{})})]}),Object(k.jsx)("div",{className:"withdraw-one",children:L.map((e=>{const{symbol:t=""}=C[e];return Object(k.jsx)(v.a,{id:e,checked:z[e],tokenLogo:u.a[e]?u.a[e]:b.default,symbol:t,onChange:Oe})}))})]}),he(E),Y?Object(k.jsx)(w.a,{styleName:"mt-40",type:"single",disabled:!0,info:n.a.get("withdraw.action")}):Object(k.jsx)(w.a,{styleName:"mt-40",type:"single",info:n.a.get("withdraw.action"),onClick:()=>(async t=>{try{if(!se.defaultAccount)return;if(!ee&&te(!0),!Y&&oe(t))return;if(Y)return;const a=se.defaultAccount,c=[];L.map((e=>{c.push({...C[e],inputValue:Object(g.fb)(t[e]).times(C[e].precision)})}));const s=c.sort(((e,t)=>e.index-t.index)),n=E===B?q:E;return e.onSubmit&&e.onSubmit(),Z?await re(s,a,n):V!==T?await ie(s,a):await le(s,n)}catch(a){console.log(a)}})(s),disabled:Y}),Y&&Object(k.jsx)("div",{className:"error-content mt-12",children:Object(k.jsx)("div",{className:"error-tip",children:Y})})]})}):Object(k.jsx)(N.a,{})]})]}),Object(k.jsx)(l.a,{..._.a.colRight,children:Object(k.jsx)(m.a,{className:se.isConnected?null:"window-for-tabs-pane"})})]})})}},1121:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var c=a(0),s=a(61);const n={usdd2Pool_2:{keys:s.e.usdd2Pool_2UsdPoolKeys,poolsInfo:s.e.usdd2Pool_2UsdPools},usdj2Pool_2:{keys:s.e.usdj2Pool_2UsdPoolKeys,poolsInfo:s.e.usdj2Pool_2UsdPools},usdc2Pool_2:{keys:s.e.usdc2Pool_2UsdPoolKeys,poolsInfo:s.e.usdc2Pool_2UsdPools},busd2Pool_2:{keys:s.e.busd2Pool_2UsdPoolKeys,poolsInfo:s.e.busd2Pool_2UsdPools},usddlp:{keys:s.e.usdd2Pool_2Keys,poolsInfo:s.e.usdd2Pool_2Pools},usdjlp:{keys:s.e.usdj2Pool_2Keys,poolsInfo:s.e.usdj2Pool_2Pools},usdclp:{keys:s.e.usdc2Pool_2Keys,poolsInfo:s.e.usdc2Pool_2Pools},busdlp:{keys:s.e.busd2Pool_2Keys,poolsInfo:s.e.busd2Pool_2Pools}};const o=(e,t)=>function(e,t,a){try{const{keys:s,poolsInfo:n}=e[a]||{};let o=[];return s.map((e=>{const a=Object(c.u)(Object(c.fb)(t[e]).isNaN()?0:Object(c.fb)(t[e])),s=n[e].symbol;o.push("".concat(a," ").concat(s))})),o.join(" + ")}catch(s){return console.error("getApproveDetail",s),""}}(n,e,t)},1125:function(e,t,a){"use strict";a.r(t),a.d(t,"renderTab",(function(){return F})),a.d(t,"usePoolTab",(function(){return H}));var c=a(1947),s=a(1949),n=a(1973),o=a(70),l=a(1),i=a.n(l),r=a(8),b=a.n(r),d=(a(1077),a(1080),a(98)),j=a(1058),u=(a(1931),a(1930)),p=(a(1513),a.p,a(268)),O=a(1081),g=a(3),m=a(5),f=a(17),x=a(0),h=a(1064),v=a(1065),w=a(1060),y=a(270),_=a(2);function S(e){const[t,a]=Object(l.useState)(2),[c,s]=Object(l.useState)(1),[n,i]=Object(l.useState)(0),[r,j]=Object(l.useState)(1),[S,N]=Object(l.useState)(-1),[P,k]=Object(l.useState)(1),[C,L]=Object(l.useState)(.005),[D,I]=Object(l.useState)(""),[A,U]=Object(l.useState)(!0),[T,B]=Object(l.useState)(""),[F,V]=Object(l.useState)(!1),{pools:K,poolIndex:E,stablePool:H,poolKeys:q}=g.a,M=Object(o.d)((()=>d.a.network)),R=Object(o.d)((()=>d.a.system)),J=Object(o.d)((()=>d.a.pool)),[Z,G]=Object(l.useState)(!1);Object(l.useEffect)((()=>{z({i:t,j:n,dx:c})}),[]);const Q=()=>{!Z&&G(!0);let e=t,c=n,o=r;e!==c&&(a(c),i(e),s(o),z({i:c,j:e,dx:o,notChangeRate:!0}),X({no:1,i:c,j:e,dx:o}))},W=e=>{let{...t}=e;V(!F),X({...t,exchangeFlags:!F})},z=async e=>{let{...a}=e;try{let e=void 0===a.i?t:a.i,s=void 0===a.j?n:a.j,o=void 0===a.dx?Object(x.fb)(c):Object(x.fb)(a.dx);if(!Object(x.a)(o).gt(0))return void j(0);let l=Object(x.a)(o).times(K[E[e]].precision)._toIntegerDown()._toHex(),i=null;if(i=await Object(m.Q)(e,s,l),i.success){let e=Object(x.a)(i.value).div(K[E[s]].precision);j(Object(x.c)(Object(x.a)(e)._toFixed(K[E[s]].decimal,1))),k(Object(x.a)(i.value))}else j(0),k(1);a.notChangeRate||X({i:e,j:s,dx:o})}catch(s){console.log("getDyData: ",s)}},X=async e=>{let{...a}=e;try{let e=void 0===a.i?t:a.i,s=void 0===a.j?n:a.j,o=void 0===a.dx?Object(x.fb)(c):Object(x.fb)(a.dx),l=void 0===a.exchangeFlags?F:a.exchangeFlags,i=Object(x.a)(o).times(K[E[e]].precision)._toIntegerDown()._toHex(),r=null;if(!Object(x.a)(o).gt(0))return;if(r=await Object(m.Q)(e,s,i),r.success){let e=Object(x.a)(r.value).div(K[E[s]].precision).div(o);N(l?Object(x.a)(1).div(Object(x.a)(e)._toFixed(4,1))._toFixed(4,1):e._toFixed(4,1))}}catch(s){console.log("getRateData: ",s)}},Y=e=>{let o=t;Number(e)!==Number(n)&&(o=n),i(o),a(e);let l=Object(x.fb)(c)._toFixed(K[E[e]].decimal,1);s(Object(x.c)(l)),z({i:e,j:o,dx:l})},$=e=>{let o=n;Number(e)!==Number(t)&&(o=t),a(o),i(e);let l=Object(x.fb)(c)._toFixed(K[E[o]].decimal,1);s(Object(x.c)(l)),z({j:e,i:o,dx:l})},ee=e=>{!Z&&G(!0);const{valid:a,str:c}=Object(x.V)((""+e).replace(/,/g,""),K[E[t]].decimal);let n=J.poolData&&Object(x.a)(J.poolData[E[t]].balance).div(K[E[t]].precision)._toFixed(2,1);if(a){if(Object(x.a)(c).lte(0))return s(Object(x.c)(c)),j(0),void B(b.a.get("buysell.error_msg_1"));Object(x.a)(c).gt(n)&&B(b.a.get("buysell.error_msg_2")),s(Object(x.c)(c)),z({dx:c})}},te=e=>{let a="--";return a=J.poolData[E[t]].balance,a=Object(x.a)(a).isNaN()?"--":J.poolData[E[t]].balance.div(J.poolData[E[t]].precision),Object(_.jsx)("span",{children:J.poolData&&Object(x.u)(a)})},ae=()=>{let{precision:e,balance:a,symbol:s}=J.poolData[E[t]];return a=Object(x.a)(a).div(e),Object(x.fb)(c).eq(0)||Object(x.fb)(c).isNaN()?(B(b.a.get("error.e1")),!0):Object(x.fb)(c).gt(a)?(B(b.a.get("error.e2",{token:s})),!0):2===C&&(!D||Number(D)<.1||Number(D)>50)?(B(b.a.get("error.e5")),!0):(B(""),!1)};Object(l.useEffect)((()=>{Z&&ae()}),[t,n,c,C,D]);const ce=()=>{let e=J.poolData&&Object(x.a)(J.poolData[E[t]].balance).div(K[E[t]].precision);ee(e)},se=e=>{!Z&&G(!0),L(e),2!==e&&I("")},ne=e=>{!Z&&G(!0);const{valid:t,str:a}=Object(x.V)(e,10);if(t)if(""===a)I("");else if(Object(x.a)(a).lte(100)){var c;let e=a,t=a.split(".");(null===(c=t[1])||void 0===c?void 0:c.length)>2&&(e="".concat(t[0]+"."+t[1].substr(0,2))),I(e)}},oe=()=>{const e=()=>{let e=t,a=n;return F&&([e,a]=[a,e]),Object(_.jsx)(_.Fragment,{children:E[e].toUpperCase()+"/"+E[a].toUpperCase()})};return Object(_.jsxs)("p",{className:"exchang-rate-text mt-20",children:[Object(_.jsxs)("span",{className:"en-US"===window.localStorage.getItem("lang")?"er-en":"",children:[b.a.get("buysell.exchange_rate",{symbol:"3pool LP"})+" ",Object(_.jsx)(e,{})]}),Object(_.jsx)("img",{style:{cursor:"pointer",margin:"0 6px"},className:"exchange-img",alt:"",src:O.a,onClick:W}),Object(_.jsxs)("span",{children:["(",b.a.get("buysell.including_fees"),"): ",-1===S?b.a.get("buysell.not_available"):S]})]})},le=()=>{const a=async()=>{if(!T)try{let a=2!==C?C:D?Object(x.a)(D).div(100):0,s=Object(x.a)(P).times(Object(x.a)(1).minus(Object(x.a)(a)))._toIntegerDown()._toHex(),o=t,l=n,i=Object(x.fb)(c).times(K[E[o]].precision)._toIntegerDown()._toHex();const b={title:"notification.tip1",title2:"notification.tip1",title3:"notification.tip1",title4:"notification.tip1",obj:{fromValue:Object(x.u)(Object(x.fb)(c)),fromToken:E[o].toUpperCase(),toValue:Object(x.u)(Object(x.fb)(r)),toToken:E[l].toUpperCase()}};let d=await R.toExchange(o,l,i,s,b,[["pool/updateCurrencyData"]]);d&&(setTimeout((()=>{J.getBalanceInfo()}),5e3),e.onSubmit&&e.onSubmit(d))}catch(a){console.log("sellSubmit: ",a)}};return Object(_.jsx)(_.Fragment,{children:T?Object(_.jsx)(w.a,{styleName:"mt-40",type:"single",disabled:!0,info:b.a.get("sell_btn")}):Object(_.jsx)(w.a,{styleName:"mt-40",type:"single",info:b.a.get("sell_btn"),onClick:async()=>{if(M.isConnected){if(!Z&&G(!0),!T){if(ae())return}if(!T)try{let e=(await Object(m.Sb)(window.defaultAccount,[K[E[t]].token],[H]))[H].allowance;const{approveStatus:c}=J.poolData[E[t]];if(e.gt(0)||c)a();else{const e={action:"approve",title:"deposit.approve_token",obj:{value:q[t].toUpperCase()},continuous:!0};if(!await R.approveToken(K[E[t]].token,H,e,[["pool/getBalanceInfo"]]))return;J.poolData[E[t]].approveStatus=2,a()}}catch(e){console.log("exchangeBefore: ",e)}}else B(b.a.get("buysell.error_msg_3"))}})})},ie=e=>{let{direction:a="left"}=e,c=q;return Object(_.jsx)("div",{className:"flex start mb-16 pc-input-box",children:c.map((e=>{const c=f.a[e]||p.default,s="left"===a?t:n;return Object(_.jsx)(h.a,{id:e,checked:s===K[e].index,tokenLogo:c,symbol:K[e].symbol,onChange:(t,c)=>{"left"===a?Y(K[e].index):$(K[e].index)}})}))})},re=()=>Object(_.jsx)("span",{className:"exchange-alt",onClick:()=>Q()}),be=Object(y.a)(y.b);return Object(_.jsx)(o.a,{children:()=>Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"exchange-box",children:[Object(_.jsx)(ie,{direction:"left"},"left"),Object(_.jsxs)("div",{className:"input-block",children:[Object(_.jsxs)("div",{className:"flex",children:[Object(_.jsx)("div",{className:"input-number",children:Object(_.jsx)(u.a,{className:"input",value:c,onChange:e=>ee(e.target.value)})}),Object(_.jsx)("span",{className:"max-btn",onClick:ce,children:b.a.get("sunSwapV3.swap.input_from_max")})]}),Object(_.jsxs)("div",{className:"mt-12 input-bottom-usd",children:[Object(_.jsx)("span",{children:b.a.get("sunSwapV3.swap.input_from_balance")})," ",te(J.poolData)]})]}),Object(_.jsxs)("div",{className:"flex",children:[Object(_.jsx)(re,{}),!be&&Object(_.jsx)("div",{className:"flex start",children:Object(_.jsx)(v.a,{type:"exchange",slippage:C,customSlippage:D,CUSTOM_SLIPPAGE:2,onChangeSlippage:e=>{se(Number(e))},onChangeCustomSlippage:e=>{L(2),ne(e)}})})]}),Object(_.jsx)(ie,{direction:"right"},"right"),Object(_.jsxs)("div",{className:"input-block",children:[Object(_.jsx)("div",{className:"input-number",children:Object(_.jsx)(u.a,{disabled:!0,className:"input",value:r})}),Object(_.jsxs)("div",{className:"mt-12 input-bottom-usd",children:[Object(_.jsx)("span",{children:b.a.get("sunSwapV3.swap.input_from_balance")})," ",te(J.poolData)]})]}),Object(_.jsx)(oe,{}),be&&Object(_.jsx)("div",{className:"flex start",children:Object(_.jsx)(v.a,{type:"exchange",slippage:C,customSlippage:D,CUSTOM_SLIPPAGE:2,onChangeSlippage:e=>{se(Number(e))},onChangeCustomSlippage:e=>{L(2),ne(e)}})})]}),Object(_.jsx)(le,{}),T&&Object(_.jsx)("div",{className:"error-content mt-12",children:Object(_.jsx)("div",{className:"error-tip",children:T})})]})})}var N=a(1078),P=a(1112),k=a(1114),C=a(1082),L=a(56),D=a(1069),I=a(1063),A=a(1059),U=a(1062),T=a(1083);const B=e=>{let{onSubmit:t,pageList:a,tabPaneKey:n,isConnected:o}=e;return Object(_.jsxs)(c.a,{...I.a.row,children:[Object(_.jsxs)(s.a,{...I.a.colLeft,children:[Object(_.jsx)(A.a,{list:a,activeKey:n[0]}),o?Object(_.jsx)("div",{className:"window-for-tabs-pane",children:Object(_.jsx)(S,{onSubmit:t})}):Object(_.jsx)(U.a,{})]}),Object(_.jsx)(s.a,{...I.a.colRight,children:Object(_.jsx)(N.a,{})})]})},F=e=>Object(_.jsx)("span",{children:E[e].tabTitle}),{tabChangeLog:V,tabSubmitLog:K}=Object(C.a)({childPage:L.h.liquidity_old3pool}),E={1:{title:b.a.get("banner.title_deposit"),content:b.a.get("banner.desc_deposit"),tabTitle:b.a.get("header.deposit")},2:{title:b.a.get("banner.title_withdraw"),content:b.a.get("banner.desc_withdraw"),tabTitle:b.a.get("header.withdraw")},3:{title:b.a.get("banner.title_1"),content:b.a.get("banner.desc_1"),tabTitle:b.a.get("header.swap")}},H=e=>{let[,t,a]=window.location.hash.split("/");const c=window.localStorage.getItem("lang");return t.includes("usdc")&&(t="en-US"===c?"USDC Old":"Old USDC"),t.includes("3pool")&&(t="Old 3pool"),t.includes("busd")&&(t="en-US"===c?"Old BUSD":b.a.get("buysell.busd_2pool")),t.includes("usdd_usd_2pool")&&(t="en-US"===c?"Old USDD":b.a.get("buysell.usdd_2pool")),t.includes("usdj_2pool")&&(t="en-US"===c?"Old USDJ":b.a.get("buysell.usdj_2pool")),t.includes("tusd_2pool")&&(t="en-US"===c?"Old TUSD":b.a.get("buysell.tusd_2pool")),{title:t,tabKey:[{deposit:"1",withdraw:"2",swap:"3"}[a]||"1"]}};t.default=()=>{const{title:e,tabKey:t}=H(),[a,c]=i.a.useState(t),{mountedActions:s,instantActions:r}=(()=>{let e=null;const t=Object(o.d)((()=>d.a.pool)),a=Object(o.d)((()=>d.a.network)),c=()=>{t.getSwapBalance(),t.getVirtualPrice(),t.getVolData()};return i.a.useEffect((()=>()=>{clearInterval(e)}),[]),{mountedActions:async()=>{t.getUserLp(),await t.getBalanceInfo(),e||(e=setInterval((async()=>{c(),t.getUserLp(),await t.getBalanceInfo()}),a.defaultIntervalSec))},instantActions:c}})(),u=Object(l.useCallback)((e=>{let{value:t}=e;c(t),V(t)}),[]),p=()=>{const e=window.localStorage.getItem("lang")||b.a.options.currentLocale,t=window.location.origin+window.location.pathname;window.location.href=t+"?lang=".concat(e,"#/sunCurve")},O=Object(l.useMemo)((()=>({shouldScroll:!0,navRightMoreShow:!0,navRightMoreClick:p})),[]),g=Object(l.useMemo)((()=>I.b.map((e=>({...e,handler:u})))),[u]),m=Object(o.d)((()=>d.a.network));return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(j.a,{mountedActions:s,instantActions:r,subNavProps:O}),Object(_.jsxs)("div",{className:"main-page-content",children:[Object(_.jsx)(D.a,{title:"".concat(e," ").concat(E[a[0]].title),subTitle:E[a[0]].content}),Object(_.jsxs)("div",{className:"pool-tabs",children:[Object(_.jsxs)(n.a,{activeKey:a[0],centered:!0,onChange:u,renderTabBar:()=>null,children:[Object(_.jsx)(n.a.TabPane,{tab:F("1"),children:Object(_.jsx)(P.a,{onSubmit:()=>K("1"),pageList:g,tabPaneKey:a})},"1"),Object(_.jsx)(n.a.TabPane,{tab:F("2"),children:Object(_.jsx)(k.a,{onSubmit:()=>K("2"),pageList:g,tabPaneKey:a})},"2"),Object(_.jsx)(n.a.TabPane,{tab:F("3"),children:Object(_.jsx)(B,{onSubmit:e=>K("3",{event_label:e,txid:e}),pageList:g,tabPaneKey:a,isConnected:m.isConnected})},"3")]}),Object(_.jsx)(T.a,{name:"type",cb:u,valueFlag:!0})]})]})]})}},1163:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var c=a(1517),s=a(1930),n=a(91),o=a(70),l=a(1),i=a(8),r=a.n(i),b=(a(1100),a(268)),d=a(1081),j=a(3),u=a(98),p=a(5),O=a(17),g=a(0),m=a(33),f=a(1064),x=a(1065),h=a(1060),v=a(270),w=a(2);let{tokens:y}=j.a;const _=2;function S(e){const{curveConfig:t,initParams:a}=e,{busd2PoolPools:i,busd2PoolIndex:j,busdUsdPoolIndex:S,busdusdPools:N,busd2PoolKeys:P,busdusdPoolKeys:k,busd2PoolContracts:C,curveLPSymbol:L,twoPoolUsdLpKey:D}=t,{usdcSwap:I}=C,[A,U]=Object(l.useState)(0),[T,B]=Object(l.useState)(1),[F,V]=Object(l.useState)(1),[K,E]=Object(l.useState)(1),[H,q]=Object(l.useState)(-1),[M,R]=Object(l.useState)(1),[J,Z]=Object(l.useState)(.005),[G,Q]=Object(l.useState)(""),[W,z]=Object(l.useState)(!0),[X,Y]=Object(l.useState)(""),[$,ee]=Object(l.useState)(!1),te=(Object(n.a)(window.navigator).any,Object(o.d)((()=>u.a.network))),ae=Object(o.d)((()=>u.a.system)),ce=Object(o.d)((()=>Object(m.d)({Stores:u.a,poolType:D,baseStoreName:"busdPool"}))),[se,ne]=Object(l.useState)(!1),[oe,le]=Object(l.useState)(!1),[ie,re]=Object(l.useState)(ce.poolData1),[be,de]=Object(l.useState)(j);Object(l.useEffect)((()=>{ce.initPage(a),pe({i:A,j:F,dx:T,checked:oe})}),[]),Object(l.useEffect)((()=>{oe?(re(ce.poolData2),de(S)):(re(ce.poolData1),de(j))}),[oe,ce.poolData1,ce.poolData2]);const je=()=>{try{let e=A,t=F;return $&&([e,t]=[t,e]),Object(w.jsx)(w.Fragment,{children:y[be[e]].symbol+"/"+y[be[t]].symbol})}catch(e){return Object(w.jsx)(w.Fragment,{})}},ue=e=>{let{...t}=e;ee(!$),Oe({...t,exchangeFlags:!$,checked:oe})},pe=async e=>{let{...t}=e;try{let e=void 0===t.i?A:t.i,a=void 0===t.j?F:t.j,c=void 0===t.dx?T:t.dx,s=t.checked?S:j,n=t.checked?N:i;if(!Object(g.fb)(c).gt(0))return void E(0);let o=Object(g.fb)(c).times(n[s[e]].precision)._toIntegerDown()._toHex(),l=null;if(l=t.checked?await Object(p.R)(e,a,o,I):await Object(p.mb)(e,a,o,I),l.success){let e=Object(g.a)(l.value).div(n[s[a]].precision);E(Object(g.c)(Object(g.a)(e)._toFixed(n[s[a]].decimal,1))),R(Object(g.a)(l.value))}else E(0),R(1);t.notChangeRate||Oe({i:e,j:a,dx:c,checked:t.checked})}catch(a){console.log("getDyData: ",a)}},Oe=async e=>{let{...t}=e;try{let e=void 0===t.i?A:t.i,a=void 0===t.j?F:t.j,c=void 0===t.dx?T:t.dx,s=void 0===t.exchangeFlags?$:t.exchangeFlags,n=t.checked?S:j,o=t.checked?N:i,l=Object(g.fb)(c).times(o[n[e]].precision)._toIntegerDown()._toHex(),r=null;if(!Object(g.fb)(c).gt(0))return;if(r=t.checked?await Object(p.R)(e,a,l,I):await Object(p.mb)(e,a,l,I),r.success){let e=Object(g.a)(r.value).div(o[n[a]].precision).div(Object(g.fb)(c));q(s?Object(g.a)(1).div(Object(g.a)(e)._toFixed(4,1))._toFixed(4,1):e._toFixed(4,1))}}catch(a){console.log("getRateData: ",a)}},ge=e=>{let t=oe?N:i,a=A;Number(e)!==Number(F)&&(a=F),V(a),U(e);let c=Object(g.fb)(T)._toFixed(t[be[e]].decimal,1);B(Object(g.c)(c)),pe({i:e,j:a,dx:c,checked:oe})},me=e=>{let t=oe?N:i,a=F;Number(e)!==Number(A)&&(a=A),U(a),V(e);let c=Object(g.fb)(T)._toFixed(t[be[a]].decimal,1);B(Object(g.c)(c)),pe({j:e,i:a,dx:c,checked:oe})},fe=e=>{!se&&ne(!0);let t=oe?N:i;const{valid:a,str:c}=Object(g.V)((""+e).replace(/,/g,""),t[be[A]].decimal);let s=ie&&ie[be[A]]&&Object(g.a)(ie[be[A]].balance).div(t[be[A]].precision)._toFixed(2,1);if(a){if(Object(g.a)(c).lte(0))return B(Object(g.c)(c)),E(0),void Y(r.a.get("buysell.error_msg_1"));Object(g.a)(c).gt(s)&&Y(r.a.get("buysell.error_msg_2")),B(Object(g.c)(c)),pe({dx:c,checked:oe})}},xe=e=>{try{let t="--";return t=e[be[A]].balance,t=Object(g.a)(t).isNaN()?"--":e[be[A]].balance.div(e[be[A]].precision),Object(w.jsx)("span",{children:e&&Object(g.u)(t)})}catch(t){}},he=()=>{try{let{precision:e,balance:t,symbol:a}=ie[be[A]];return t=Object(g.a)(t).div(e),Object(g.fb)(T).eq(0)||Object(g.fb)(T).isNaN()?(Y(r.a.get("error.e1")),!0):Object(g.fb)(T).gt(t)?(Y(r.a.get("error.e2",{token:a})),!0):2===J&&(!G||Number(G)<.1||Number(G)>50)?(Y(r.a.get("error.e5")),!0):(Y(""),!1)}catch(e){return!1}};Object(l.useEffect)((()=>{se&&he()}),[A,F,T,J,G]);const ve=()=>{let e=oe?N:i,t=ie&&Object(g.a)(ie[be[A]].balance).div(e[be[A]].precision);fe(t)},we=()=>Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:Object(w.jsx)(c.a,{checked:oe,onChange:async e=>{let t=e.target.checked,a=t?S:j;le(t);let c=0,s=1,n=Object(g.fb)(T);var o,l;(t||(c=2,s=0),t)?"--"===(null===(o=ce.poolData2[a[c]])||void 0===o?void 0:o.balance)&&(await ce.getBalanceInfo(I,k,"2usdlp"),re(ce.poolData2),de(S)):"--"===(null===(l=ce.poolData1[a[c]])||void 0===l?void 0:l.balance)&&(await ce.getBalanceInfo(I),re(ce.poolData1),de(j));U(c),V(s),B(Object(g.c)(n)),pe({i:c,j:s,dx:n,checked:t,notChangeRate:!0}),Oe({no:1,i:c,j:s,dx:n,checked:t})},children:r.a.get("buysell.".concat("2Pool_2"===D?"2Pool_2lp_swap":"2usdlp_swap"))})}),Object(w.jsxs)("div",{className:"exchang-rate-text mt-20",children:[Object(w.jsxs)("span",{className:"en-US"===window.localStorage.getItem("lang")?"er-en":"",children:[r.a.get("buysell.exchange_rate",{symbol:"3Pool LP"})+" ",Object(w.jsx)(je,{})]}),Object(w.jsx)("img",{style:{cursor:"pointer",margin:"0 6px"},alt:"",src:d.a,onClick:ue}),"(",Object(w.jsxs)("span",{children:[r.a.get("buysell.including_fees"),"): ",-1===H?r.a.get("buysell.not_available"):H]})]})]}),ye=()=>Object(w.jsx)(w.Fragment,{children:X?Object(w.jsx)(h.a,{styleName:"mt-40",type:"single",disabled:!0,info:r.a.get("sell_btn")}):Object(w.jsx)(h.a,{styleName:"mt-40",type:"single",info:r.a.get("sell_btn"),onClick:async()=>{const t=async()=>{if(!X)try{var t,a;let c=2!==J?J:G?Object(g.a)(G).div(100):0,s=Object(g.a)(M).times(Object(g.a)(1).minus(Object(g.a)(c)))._toIntegerDown()._toHex(),n=A,o=F,l=oe?N:i,r=Object(g.fb)(T).times(l[be[n]].precision)._toIntegerDown()._toHex();const b={title:"notification.tip1",title2:"notification.tip1",title3:"notification.tip1",title4:"notification.tip1",obj:{fromValue:Object(g.u)(Object(g.fb)(T)),fromToken:null===(t=y[be[n]])||void 0===t?void 0:t.symbol,toValue:Object(g.u)(Object(g.fb)(K)),toToken:null===(a=y[be[o]])||void 0===a?void 0:a.symbol}};let d="";d=oe?await ae.toExchangeUsdcNew(n,o,r,s,b,[["pool/updateCurrencyData"]],I):await ae.toUsdcExchange(n,o,r,s,b,[["pool/updateCurrencyData"]],I),d&&(setTimeout((()=>{oe?ce.getBalanceInfo(I,k,"2usdlp"):ce.getBalanceInfo(I)}),5e3),e.onSubmit&&e.onSubmit(d))}catch(c){console.log("sellSubmit: ",c)}};if(!te.isConnected)return void Y(r.a.get("buysell.error_msg_3"));if(!se&&ne(!0),!X){if(he())return}if(X)return;let a=oe?N:i;try{let e=(await Object(p.Sb)(window.defaultAccount,[a[be[A]].token],[I]))[I].allowance;const{approveStatus:c}=ie[be[A]];if(e.gt(0)||c)t();else{const e={action:"approve",title:"deposit.approve_token",obj:{value:y[(oe?k:P)[A]].symbol},continuous:!0};let c=a[be[A]].token;if(!await ae.approveToken(c,I,e,[["pool/getBalanceInfo"]]))return;ie[be[A]].approveStatus=2,t()}}catch(c){console.log("exchangeBefore: ",c)}}})}),_e=e=>{!se&&ne(!0),Z(e),2!==e&&Q("")},Se=e=>{!se&&ne(!0);const{valid:t,str:a}=Object(g.V)(e,10);if(t)if(""===a)Q("");else if(Object(g.a)(a).lte(100)){var c;let e=a,t=a.split(".");(null===(c=t[1])||void 0===c?void 0:c.length)>2&&(e="".concat(t[0]+"."+t[1].substr(0,2))),Q(e)}},Ne=e=>{let{direction:t="left"}=e,a=oe?k:P,c=oe?N:i;return Object(w.jsx)("div",{className:"flex start mb-16 pc-input-box",children:a.map((e=>{const a="2usdlp"===e||"2Pool_2"===e?O.a[L]?O.a[L]:b.default:O.a[e]?O.a[e]:b.default,s="left"===t?A:F;return Object(w.jsx)(f.a,{id:e,checked:s===c[e].index,tokenLogo:a,symbol:c[e].symbol,onChange:(a,s)=>{"left"===t?ge(c[e].index):me(c[e].index)}})}))})},Pe=()=>Object(w.jsx)("span",{className:"exchange-alt",onClick:()=>(()=>{!se&&ne(!0);let e=A,t=F,a=K;e!==t&&(U(t),V(e),B(a),pe({i:t,j:e,dx:a,notChangeRate:!0,checked:oe}),Oe({no:1,i:t,j:e,dx:a,checked:oe}))})()}),ke=Object(v.a)(v.b);return Object(w.jsx)(o.a,{children:()=>Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"exchange-box",children:[Object(w.jsx)(Ne,{direction:"left"},"left"),Object(w.jsxs)("div",{className:"input-block",children:[Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)("div",{className:"input-number",children:Object(w.jsx)(s.a,{className:"input",value:T,onChange:e=>fe(e.target.value)})}),Object(w.jsx)("span",{className:"max-btn",onClick:ve,children:r.a.get("sunSwapV3.swap.input_from_max")})]}),Object(w.jsxs)("div",{className:"mt-12 input-bottom-usd",children:[Object(w.jsx)("span",{children:r.a.get("sunSwapV3.swap.input_from_balance")})," ",xe(ie)]})]}),Object(w.jsxs)("div",{className:"flex",children:[Object(w.jsx)(Pe,{}),!ke&&Object(w.jsx)("div",{className:"flex start",children:Object(w.jsx)(x.a,{type:"exchange",slippage:J,customSlippage:G,CUSTOM_SLIPPAGE:_,onChangeSlippage:e=>{_e(Number(e))},onChangeCustomSlippage:e=>{Z(2),Se(e)}})})]}),Object(w.jsx)(Ne,{direction:"right"},"right"),Object(w.jsxs)("div",{className:"input-block",children:[Object(w.jsx)("div",{className:"input-number",children:Object(w.jsx)(s.a,{disabled:!0,className:"input",value:K})}),Object(w.jsxs)("div",{className:"mt-12 input-bottom-usd",children:[Object(w.jsx)("span",{children:r.a.get("sunSwapV3.swap.input_from_balance")})," ",xe(ie)]})]}),Object(w.jsx)(we,{}),ke&&Object(w.jsx)("div",{className:"flex start",children:Object(w.jsx)(x.a,{type:"exchange",slippage:J,customSlippage:G,CUSTOM_SLIPPAGE:_,onChangeSlippage:e=>{_e(Number(e))},onChangeCustomSlippage:e=>{Z(2),Se(e)}})})]}),Object(w.jsx)(ye,{}),X&&Object(w.jsx)("div",{className:"error-content mt-12",children:Object(w.jsx)("div",{className:"error-tip",children:X})})]})})}},1164:function(e,t,a){"use strict";var c=a(1),s=a(8),n=a.n(s),o=a(10),l=a(70),i=a(1947),r=a(1949),b=a(1517),d=a(1043),j=a(188),u=a(268),p=(a(1108),a(1079),a(17)),O=a(0),g=a(3),m=a(98),f=a(1058),x=a(1068),h=(a(1076),a(1104)),v=a(324),w=a(1067),y=a(1060),_=a(5),S=a(122),N=a(33),P=a(1121),k=a(1059),C=a(1063),L=a(1062),D=a(1071),I=a(322),A=a(2);const{usdcInfo:U,defaultSlippage:T,busdCommonPools:B,tokens:F}=g.a,{ALL_FEE:V}=U,K=e=>{const t={};return e.map((e=>{t[e]=""})),t};t.a=e=>{const t=Object(l.d)((()=>m.a.network)),a=Object(l.d)((()=>m.a.system)),{curveConfig:s,initParams:U,pageList:E,tabPaneKey:H}=e;let{busd2PoolPools:q,busdusdPools:M,busd2PoolKeys:R,busdusdPoolKeys:J,busd2PoolContracts:Z,curveSymbol:G,curveLPSymbol:Q,twoPoolUsdLpKey:W="2usdlp",busd2Pool_2CommonPools:z}=s,{USDCDepositer:X,usdcSwap:Y,stablePool:$}=Z;F[W].symbol,F[W].token;const ee="2Pool_2"===W,te=Object(l.d)((()=>Object(N.d)({Stores:m.a,poolType:W,baseStoreName:"busdPool"}))),ae=Object(l.d)((()=>Object(N.d)({Stores:m.a,poolType:W,baseStoreName:"usd2Pool"}))),[ce,se]=Object(c.useState)(!1),[ne,oe]=Object(c.useState)(!0),[le,ie]=Object(c.useState)(!1),[re,be]=Object(c.useState)(!0),[de,je]=Object(c.useState)(!1),[ue,pe]=Object(c.useState)("--"),[Oe,ge]=Object(c.useState)("--"),[me,fe]=Object(c.useState)(!1),[xe,he]=Object(c.useState)(!1),[ve,we]=Object(c.useState)(!1),[ye,_e]=Object(c.useState)(te),[Se,Ne]=Object(c.useState)(R),[Pe,ke]=Object(c.useState)(q),[Ce,Le]=Object(c.useState)((()=>K(R))),[De,Ie]=Object(c.useState)((()=>K(J))),[Ae,Ue]=Object(c.useState)(Ce);let Te=null,Be=null;window.localStorage.getItem("lang");const Fe=ee?z:B;Object(c.useEffect)((()=>{le?(_e(ae),Ne(J),Ue(De),ke(M)):(_e(te),Ne(R),Ue(Ce),ke(q))}),[le]),Object(c.useEffect)((async()=>{await Promise.all([Je(Ae),Ee()]),me&&Me(Ae)}),[Ae]);const Ve=async()=>{if(le)return{success:!0,value:Ae[W]?Object(O.fb)(Ae[W]).times(Pe[W].precision):Object(O.a)(0)};try{const e=[];for(let t in Fe){const{index:a,precision:c}=Fe[t];e[a]=Object(O.fb)(Ae[t]).isNaN()?0:Object(O.fb)(Ae[t]).times(c)._toIntegerDown()._toHex()}return await Object(_.g)($,e)}catch(e){return{success:!1}}},Ke=async c=>{try{e.onSubmit&&e.onSubmit();const s=[];Se.map((e=>{s.push({...ye.poolData[e],inputValue:c[e]?Object(O.fb)(c[e]).times(Pe[e].precision):Object(O.a)(0)})}));let n="".concat(Object(N.a)({poolType:W}),"/getBalanceInfo"),o=X;le&&(n="".concat(Object(N.f)({poolType:W}),"/getBalanceInfo"),o=Y);for(let e=0;e<s.length;e++){let{allowance:c=Object(O.a)(0),inputValue:l,token:i,symbol:r,approveStatus:b,id:d}=s[e];if(console.log("approveAddress",d,c,"allowance",l,c.toFixed(),b,s),Object(S.a)({txid:"".concat(d,"_").concat(c.toFixed(),"_").concat(l.toFixed(),"_").concat(b),category:"debug_busd",waddr:t.defaultAccount}),Object(O.a)(c).lt(l)&&!b){if(!await a.approveToken(i,o,{title:"deposit.approve_token",obj:{value:r},continuous:!0},[[n]]))return;ye.poolData[d].approveStatus=2}}const l=s.sort(((e,t)=>e.index-t.index)),i=l.length,r=l.map((e=>e.inputValue._toIntegerDown()._toHex()))||[];let b=null;if(ye.lpTotalSupply.lte(0)&&await ye.getSwapBalance(),ye.lpTotalSupply.lte(0)){const e=await Ve();if(!e.success)return;b=e.value.div(1e18).plus(Object(O.fb)(c[G]||0))}else{let e={};if(e=le?await Object(_.f)(r,!0,Y):await Object(_.e)(r,!0,X),!e.success)return;b=e.value}b=b.times(Object(O.a)(1).minus(Object(O.a)(V).times(i).div(Object(O.a)(4).times(i-1)).div(1e10)));const d=b.times(1-T)._toIntegerDown()._toHex();let j;if(le){const e={title:"actions.addLiq",obj:{detail:ee?Object(P.a)(c,Q):Object(O.A)(c,Q)}};j=await a.addLiquidityBUSDBy2USD(r,Y,d,e,[["".concat(Object(N.f)({poolType:W}),"/updateCurrencyData")]])}else{const e={title:"actions.addLiq",obj:{detail:ee?Object(P.a)(c,G+"lp"):Object(O.A)(c,G+"lp")}};j=await a.addLiquidityBUSD(r,X,d,e,[["".concat(Object(N.a)({poolType:W}),"/updateCurrencyData")]])}j&&ze()}catch(s){console.log("deposit err: ",s)}},Ee=async()=>{try{const e=[];let t=!1;for(let c in Ae){const{index:a,precision:s}=Pe[c];e[a]=Object(O.fb)(Ae[c]).isNaN()?0:Object(O.fb)(Ae[c]).times(s)._toIntegerDown()._toHex(),Object(O.a)(e[a]).gt(0)&&(t=!0)}if(!t)return void ge(Object(O.a)(0));let a=null;if(ye.lpTotalSupply.lte(0)&&await ye.getSwapBalance(),ye.lpTotalSupply.lte(0)){const e=await Ve();if(!e.success)return;a=e.value.div(1e18).plus(Object(O.fb)(Ae[G]))}else{let t={};if(t=le?await Object(_.f)(e,!0,Y):await Object(_.e)(e,!0,X),!t.success)return;a=t.value.div(1e18)}ge(a)}catch(e){console.log(e)}},He=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(ae.getSwapBalance(),ae.getVirtualPriceBUSD(Y),ae.getVolData(),ae.getPoolInfo()):(te.getSwapBalance(),te.getVirtualPriceBUSD(Y),te.getVolData(),te.getPoolInfo())},qe=async function(){const e={};arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(await ae.getSwapBalance(),ae.getUserLp(),await ae.getBalanceInfo(),J.map((t=>{const{precision:a,balance:c,decimal:s}=ae.poolData[t];e[t]=Object(O.c)(Object(O.a)(c).div(a)._toFixed(s,1))})),Ie(e)):(await te.getSwapBalance(),te.getUserLp(),await te.getBalanceInfo(),R.map((t=>{const{precision:a,balance:c,decimal:s}=te.poolData[t];e[t]=Object(O.c)(Object(O.a)(c).div(a)._toFixed(s,1))})),Le(e),Ue(e)),be(!1),Ue(e),!me&&fe(!0),Te||(Te=setInterval((async()=>{He(),te.getUserLp()}),t.defaultIntervalSec))};Object(c.useEffect)((()=>{!Be&&le&&(Be=setInterval((async()=>{He(!0),await ae.getUserLp()}),t.defaultIntervalSec))}),[le]),Object(c.useEffect)((()=>{const e=Object(o.p)((()=>t.defaultAccount),(()=>{qe(),He()}));return()=>{e()}}),[]),Object(c.useEffect)((()=>{te.resetData(),ae.resetData()}),[]),Object(c.useEffect)((()=>(te.initPage(U),ae.initPage(U),qe(),He(),()=>{clearInterval(Te),clearInterval(Be)})),[t.defaultAccount]);const Me=e=>{const t=Object.keys(e),a=t.length;if(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e),a=t.filter((t=>Object(O.fb)(e[t]).eq(0)||!e[t]));return t.length===a.length}(e))return je(n.a.get("error.e1")),!0;for(let c=0;c<a;c++){const a=t[c],s=e[a];if(!s&&(ce||ne))return je(n.a.get("error.e1")),!0;if(ye.poolData[a]){const{balance:e,precision:t,symbol:c}=ye.poolData[a];if(Object(O.a)(e).div(t).lt(Object(O.fb)(s)))return je(n.a.get("error.e2",{token:c})),!0}}return je(!1),!1},Re=e=>{we(e.target.checked)},Je=async e=>{const t=await ye.calcInclPrice(e);pe(t)},Ze=async(e,t)=>{try{const a=t,c={};c[e]=Object(O.c)(a);const{precision:s,swapBalance:n,balance:o}=ye.poolData[e],{sun3LpBalance:l,sun3TotalSupply:i,balancesUsdc:r}=ye.swapBalanceInfo,b=Object(O.fb)(a).div(n).isNaN()?Object(O.a)(0):Object(O.fb)(a).div(n);if(e===G){if(le){const{swapBalance:e,decimal:t}=ye.poolData[W];return c[W]=Object(O.c)(e.times(b)._toFixed(t,1)),Ue(c)}const t=Se.filter((t=>t!==e)),a=b.times(l).div(i);return t.map((e=>{const{balance:t=Object(O.a)(0),swapBalance:s,precision:n,decimal:o}=ye.poolData[e];c[e]=Object(O.c)(a.times(s)._toFixed(o,1)),t.div(n).lt(Object(O.fb)(c[e]))&&(c[e]=Object(O.c)(t.div(n)._toFixed(o,1)))})),Ue(c)}const d=Se.filter((t=>t!==e&&t!==G)),j={[e]:Object(O.c)(a)};d.map((e=>{const{balance:t=Object(O.a)(0),swapBalance:a,precision:c,decimal:s}=ye.poolData[e];j[e]=Object(O.c)(b.times(a)._toFixed(s,1)),t.div(c).lt(j[e])&&(j[e]=Object(O.c)(t.div(c)._toFixed(s,1)))}));let u=Object(O.a)(0);if(le)t&&(u=Object(O.fb)(t).times(Pe[W].precision));else{const e=[];for(let a in j){const{index:t,precision:c}=Fe[a];e[t]=Object(O.fb)(j[a]).isNaN()?0:Object(O.fb)(j[a]).times(c)._toIntegerDown()._toHex()}const t=await Object(_.g)($,e);if(!t.success)return;u=t.value}const p=Object(O.a)(u).div(Object(O.a)(l).times(g.a.defaultVotePrecision)),m=ye.poolData[G],f=p.isNaN()?0:p.times(r)._toFixed(m.decimal,1);c[G]=m.balance.div(m.precision).lt(f)?Object(O.c)(m.balance.div(m.precision)._toFixed(m.decimal,1)):Object(O.c)(f),Ue({...c,...j})}catch(a){console.log(a)}},Ge=async e=>{try{const t=e.target.checked;se(t),ne&&oe(!t),t&&Ze(Se[0],Object(O.fb)(Ae[Se[0]]))}catch(t){console.log(t)}},Qe=async e=>{try{const t=e.target.checked;oe(t),ce&&se(!t);const a={};Se.map((e=>{const{balance:t=Object(O.a)(0),precision:c,decimal:s}=ye.poolData[e];a[e]=Object(O.a)(t).isNaN()?0:Object(O.c)(t.div(c)._toFixed(s,1))})),Ue(a)}catch(t){console.log(t)}},We=async e=>{try{const t=e.target.checked;ie(t),se(!1),oe(!0),e.target.checked?clearInterval(Te):clearInterval(Be),He(e.target.checked),qe(e.target.checked)}catch(t){console.log(t)}},ze=()=>{we(!1),he(!1)},Xe=Object(I.b)();return Object(A.jsx)(l.a,{children:()=>Object(A.jsxs)(i.a,{...C.a.row,children:[Object(A.jsxs)(r.a,{...C.a.colLeft,children:[Object(A.jsx)(k.a,{list:E,activeKey:H[0]}),Object(A.jsxs)("div",{className:"pool-deposit",children:[e.isSinglePage?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(f.a,{routeName:"usdc/deposit",mountedActions:qe,instantActions:He}),Object(A.jsx)(x.a,{title:n.a.get("buysell.busd_2pool")+" "+n.a.get("banner.title_deposit"),desc:n.a.get("banner.desc_deposit")}),Object(A.jsx)(w.a,{})]}):null,t.isConnected?Object(A.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(A.jsxs)("div",{className:"add-liq",children:[Object(A.jsxs)("fieldset",{className:"currencies",children:[Object(A.jsx)("legend",{children:n.a.get("deposit.currencies")}),Object(A.jsx)("ul",{children:Se.map((e=>{let{symbol:t="",balance:a="--",precision:c,decimal:s}=ye.poolData[e];return a=Object(O.a)(a).div(c),Object(A.jsxs)("li",{children:[Object(A.jsxs)("div",{className:"cur-label",children:[Object(A.jsxs)("span",{className:"icon",children:[e===W?Object(A.jsx)("img",{src:p.a[Q]?p.a[Q]:u.default,alt:"",className:"token-logo"}):Object(A.jsx)("img",{src:p.a[e]?p.a[e]:u.default,alt:"",className:"token-logo"})," ",t]}),Object(A.jsx)("span",{className:"token-max",children:n.a.getHTML("deposit.token_max",{balance:Object(O.u)(a)})})]}),Object(A.jsx)(D.a,{value:Ae[e],onChange:t=>((e,t)=>{ne&&oe(!1);const{decimal:a}=Pe[t],{valid:c,str:s}=Object(O.V)((""+e.target.value).replace(/,/g,""),a);c&&(Ue({...Ae,[t]:Object(O.c)(s)}),ce&&Ze(t,s))})(t,e),onMaxClick:()=>{((e,t,a)=>{if(Object(O.a)(t).isNaN())return;const c=Object(O.a)(t)._toFixed(a,1);Ue({...Ae,[e]:Object(O.c)(c)}),ce&&Ze(e,c)})(e,a,s)}})]},e)}))})]}),!Object(O.a)(ue).isNaN()&&Object(O.ab)(ue,!0),Object(A.jsxs)("div",{className:"deposit-check",children:[Object(A.jsx)(b.a,{checked:ce,disabled:re,onChange:Ge,children:n.a.get("deposit.ch1")}),Object(A.jsx)("br",{}),Object(A.jsx)(b.a,{checked:ne,disabled:re,onChange:Qe,children:n.a.get("deposit.ch2")}),Object(A.jsx)("br",{}),Object(A.jsx)(b.a,{checked:le,disabled:re,onChange:We,children:n.a.get("2usdlp"===W?"deposit.ch5":"deposit.ch6")})]}),de?Object(A.jsx)(y.a,{styleName:"mt-40",type:"single",disabled:!0,info:n.a.get("deposit.action")}):Object(A.jsx)(y.a,{styleName:"mt-40",type:"single",info:Xe?n.a.get("not_available"):n.a.get("deposit.action"),onClick:()=>(async e=>{try{if(!de&&Me(e))return;if(de)return;if(Object(O.a)(ue).abs().gt(10))return he(!0);await Ke(e)}catch(t){console.log(t)}})(Ae),disabled:Xe}),de&&Object(A.jsx)("div",{className:"error-content mt-12",children:Object(A.jsx)("div",{className:"error-tip",children:de})}),Object(O.a)(Oe).gt(0)&&Object(A.jsxs)("div",{className:"error-content mt-12",children:[Object(A.jsxs)("div",{className:"error-tip",children:[n.a.getHTML("deposit.swap_detail",{value:Object(O.u)(Oe,2),symbol:"".concat(G.toUpperCase()," ").concat("2Pool_2"===W?"2Pool_2":"2USD"," LP")})," "]}),Object(A.jsx)("div",{className:"error-tip",children:n.a.get("deposit.exchange_rate",{value:Object(O.u)(ye.virtualPrice,6),symbol:"".concat(G.toUpperCase()," ").concat("2Pool_2"===W?"2Pool_2":"2USD"," LP")})})]})]})}):Object(A.jsx)(L.a,{}),Object(A.jsx)(v.a,{}),Object(A.jsx)(d.a,{title:n.a.get("deposit.high_slippage_title"),open:xe,closable:!0,icon:null,onCancel:ze,footer:null,width:400,className:"common-modal common-bg slippage-modal",children:Object(A.jsxs)("div",{className:"center",children:[Object(A.jsxs)("div",{className:"common-err-bg",children:[Object(A.jsx)("div",{children:n.a.get("deposit.high_tip1")}),Object(A.jsx)("div",{children:n.a.get("deposit.high_tip2",{value:Object(O.u)(Object(O.a)(ue).abs(),3)})})]}),Object(A.jsx)(b.a,{checked:ve,onChange:Re,children:n.a.get("deposit.confirm_slippage",{value:Object(O.u)(Object(O.a)(ue).abs(),3)})}),Object(A.jsx)("br",{}),Object(A.jsxs)("div",{className:"btns flex",children:[Object(A.jsx)(j.a,{onClick:()=>he(!1),type:"primary",children:n.a.get("cancel")}),Object(A.jsx)(j.a,{onClick:()=>Ke(Ae),disabled:!ve,children:n.a.get("deposit.anyway")})]})]})})]})]}),Object(A.jsx)(r.a,{...C.a.colRight,children:Object(A.jsx)(h.a,{type:le?"2usdlp":G,curveConfig:s})})]})})}},1165:function(e,t,a){"use strict";var c=a(1),s=a(8),n=a.n(s),o=a(1947),l=a(1949),i=a(329),r=a(1041),b=a(268),d=a(70),j=a(98),u=a(17),p=a(3),O=a(5),g=a(0),m=a(1104),f=a(1058),x=a(1068),h=(a(1076),a(1067)),v=a(33),w=a(1121),y=a(1064),_=a(1060),S=a(1065),N=a(1059),P=a(1062),k=a(1071),C=a(2);let{usdcInfo:L,tokens:D}=p.a;const{ALL_FEE:I}=L,A="---",U="CUSTOM";t.a=e=>{const t=Object(d.d)((()=>j.a.system)),a=Object(d.d)((()=>j.a.network)),{curveConfig:s,initParams:p,pageList:L,tabPaneKey:T}=e;let{busd2PoolPools:B,busdusdPools:F,busd2PoolKeys:V,busdusdPoolKeys:K,busd2PoolContracts:E,curveSymbol:H,curveLPSymbol:q,twoPoolUsdLpKey:M="2usdlp"}=s;const R=Object(d.d)((()=>Object(v.d)({Stores:j.a,poolType:M,baseStoreName:"busdPool"}))),J=Object(d.d)((()=>Object(v.d)({Stores:j.a,poolType:M,baseStoreName:"usd2Pool"}))),Z=Object(v.f)({poolType:M}),G=Object(v.a)({poolType:M}),Q="2Pool_2"===M;let{USDCDepositer:W,usdcSwap:z,stablePool:X}=E;const Y=D["".concat(H).concat("2Pool_2"===M?"2Pool_2":"2poollp")].token,$="2Pool_2"===M?"2Pool_2LP":"2USDLP",ee="".concat(H).concat($),te=D["2Pool_2"===M?"2Pool_2":"2usdlp"].symbol,ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t={};return V.map((a=>{t[a]=e})),t},[ce=ae("--"),se]=Object(c.useState)(),[ne,oe]=Object(c.useState)("100.00"),[le,ie]=Object(c.useState)(.2),[re,be]=Object(c.useState)(""),[de,je]=Object(c.useState)(!0),[ue,pe]=Object(c.useState)(!1),[Oe,ge]=Object(c.useState)("--"),[me,fe]=Object(c.useState)(!1),[xe=ae(!1),he]=Object(c.useState)(),[ve,we]=Object(c.useState)(!1),[ye,_e]=Object(c.useState)(!1),[Se,Ne]=Object(c.useState)(V),[Pe,ke]=Object(c.useState)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t={};return K.map((a=>{t[a]=e})),t}("--"));let Ce=null,Le=null;Object(c.useEffect)((async()=>{ye&&De()}),[ce,ne,le,re,xe]),Object(c.useEffect)((()=>{Ze(ce,ue)}),[ce]),Object(c.useEffect)((()=>{Ge(Pe,ue)}),[Pe]);const De=()=>ne!==A&&Object(g.fb)(ne).gt(100)?(we(n.a.get("error.e3")),!0):(()=>{const e=me?Pe:ce;for(let t in e)if(Object(g.fb)(e[t]).gt(0)||"--"===e[t])return!1;return!0})()?(we(n.a.get("error.e4")),!0):le===U&&(Te()||ne===A)&&(Object(g.a)(re).lt(.1)||Object(g.a)(re).gt(50)||Object(g.a)(re).isNaN())?(we(n.a.get("error.e5")),!0):(we(!1),!1),Ie=async(e,a)=>{try{const c=e.length,s=e.map((e=>e.inputValue.isNaN()?0:e.inputValue._toIntegerDown()._toHex()))||[];if(me){const e=await Object(O.f)(s,!1,z);if(!e.success)return;let n=e.value.times(Object(g.a)(1).plus(Object(g.a)(I).times(c).div(4*(c-1)).div(1e10)));const o=Object(g.a)(100).plus(a).div(100);if(n=n.times(o)._toIntegerDown(),Object(g.a)(n).gt(R.swapBalanceInfo.userUsdcLpBalance)&&(n=R.swapBalanceInfo.userUsdcLpBalance),de&&Object(g.a)(R.userLpAllowance).lt(n)){if(!await t.approveToken(Y,z,{title:"deposit.approve_token",obj:{value:ee},continuous:!0},[["".concat(Z,"/getUserLp")]]))return;je(!1)}const l=n._toHex(),i={title:"actions.remove",obj:{detail:Q?Object(w.a)(Pe,q):Object(g.A)(Pe,q)}};await t.removeLiqImBalanceBUSD2USD(z,s,l,i,[["".concat(Z,"/updateCurrencyData")]]);return}const n=await Object(O.e)(s,!1,W);if(!n.success)return;let o=n.value.times(Object(g.a)(1).plus(Object(g.a)(I).times(c).div(4*(c-1)).div(1e10)));const l=Object(g.a)(100).plus(a).div(100);if(o=o.times(l)._toIntegerDown(),Object(g.a)(o).gt(R.swapBalanceInfo.userUsdcLpBalance)&&(o=R.swapBalanceInfo.userUsdcLpBalance),de&&Object(g.a)(R.userLpAllowance).lt(o)){if(!await t.approveToken(Y,W,{title:"deposit.approve_token",obj:{value:te},continuous:!0},[["".concat(G,"/getUserLp")]]))return;je(!1)}const i=o._toHex(),r={title:"actions.remove",obj:{detail:Q?Object(w.a)(ce,H+"lp"):Object(g.A)(ce,H+"lp")}};await t.removeLiqImBalanceBUSD(W,s,i,r,[["".concat(G,"/updateCurrencyData")]])}catch(c){console.log("removeLiqImBalance",c)}},Ae=async(e,a)=>{try{if(me){const c=await Ke(a,e,ne);if(!c)return;const{userLpBalance:s,userLpAllowanceUsdcSwap:n,minAmounts:o}=c,l=Object(g.fb)(ne).div(100).times(s)._toIntegerDown();if(de&&Object(g.a)(n).lt(l._toIntegerDown())){if(!await t.approveToken(Y,z,{title:"deposit.approve_token",obj:{value:ee},continuous:!0},[["".concat(Z,"/getUserLp")]]))return;je(!1)}const i={title:"actions.remove",obj:{detail:Q?Object(w.a)(Pe,q):Object(g.A)(Pe,q)}},r=l._toHex();await t.removeLiquidityBUSD2USD(z,r,o,i,[["".concat(Z,"/updateCurrencyData")]])}else{const c=await Ve(a,e,ne);if(!c)return;const{userLpBalance:s,userLpAllowance:n,minAmounts:o}=c,l=Object(g.fb)(ne).div(100).times(s)._toIntegerDown();if(de&&Object(g.a)(n).lt(l._toIntegerDown())){if(!await t.approveToken(Y,W,{title:"deposit.approve_token",obj:{value:te},continuous:!0},[["".concat(G,"/getUserLp")]]))return;je(!1)}const i={title:"actions.remove",obj:{detail:Q?Object(w.a)(ce,H+"lp"):Object(g.A)(ce,H+"lp")}},r=l._toHex();await t.removeLiquidityBUSD(W,r,o,i,[["".concat(G,"/updateCurrencyData")]])}}catch(c){console.log(c)}},Ue=async(e,a,c)=>{try{if(me){const s=await Object(O.rb)(E,a,e,"2Pool_2"===M?M:"2poollp",H);if(!s.success)return;const{balances3pool:n,balancesUsdc:o,sun3LpBalance:l,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:d}=s,j=(Fe({balances3pool:n,balancesUsdc:o,sun3LpBalance:l,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:d,coins:e}),Object(g.fb)(ne).div(100).times(d)._toIntegerDown());if(de&&Object(g.a)(b).lt(j._toIntegerDown())){if(!await t.approveToken(Y,z,{title:"deposit.approve_token",obj:{value:ee},continuous:!0},[["".concat(Z,"/getUserLp")]]))return;je(!1)}const u=j._toHex();let p=!1;for(let e in xe)!0===xe[e]&&(p=F[e].index);const m=await Object(O.r)(u,p,z);if(!m.success)return;const f=m.value,x=e.length,h=f.times(Object(g.a)(1).minus(Object(g.a)(I).times(x).div(4*(x-1)).div(1e10))),v=Object(g.a)(100).div(Object(g.a)(100).plus(c)),y=h.times(v)._toIntegerDown()._toHex(),_={title:"actions.remove",obj:{detail:Q?Object(w.a)(Pe,q):Object(g.A)(Pe,q)}};await t.removeLiqOneCoinBUSD2USD(z,u,p,y,_,[["".concat(Z,"/updateCurrencyData")]]);return}const s=await Object(O.rb)(E,a,e,"2Pool_2"===M?M:"2poollp",H);if(!s.success)return;const{balances3pool:n,balancesUsdc:o,sun3LpBalance:l,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:d}=s,j=(Be({balances3pool:n,balancesUsdc:o,sun3LpBalance:l,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:d,coins:e}),Object(g.fb)(ne).div(100).times(d)._toIntegerDown());if(de&&Object(g.a)(b).lt(j._toIntegerDown())){if(!await t.approveToken(Y,W,{title:"deposit.approve_token",obj:{value:te},continuous:!0},[["".concat(G,"/getUserLp")]]))return;je(!1)}const u=j._toHex();let p=!1;for(let e in xe)!0===xe[e]&&(p=B[e].index);const m=await Object(O.q)(u,p,W);if(!m.success)return;const f=m.value,x=e.length,h=f.times(Object(g.a)(1).minus(Object(g.a)(I).times(x).div(4*(x-1)).div(1e10))),v=Object(g.a)(100).div(Object(g.a)(100).plus(c)),y=h.times(v)._toIntegerDown()._toHex(),_={title:"actions.remove",obj:{detail:Q?Object(w.a)(ce,H+"lp"):Object(g.A)(ce,H+"lp")}};await t.removeLiqOneCoinBUSD(W,u,p,y,_,[["".concat(G,"/updateCurrencyData")]])}catch(s){console.log(s)}},Te=()=>{for(let e in xe)if(xe[e])return e;return!1},Be=function(){let{balances3pool:e,balancesUsdc:t,sun3LpBalance:a,sun3TotalSupply:c,usdcLpTotalSupply:s,userLpAllowance:n,userUsdcLpBalance:o,coins:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const n=[],i=Object(g.a)(o).div(s),r=Object(g.a)(i).times(t),b=Object(g.a)(i).times(a).div(c);return l.map((t=>{const{index:a,precision:c,symbol:s,id:o}=t;let l=Object(g.a)(0);l=o===H?r.div(c):b.times(e[o]).div(c),n[a]=l||Object(g.a)(0)})),n}catch(i){return console.log(i),[]}},Fe=function(){let{balances3pool:e,balancesUsdc:t,sun3LpBalance:a,sun3TotalSupply:c,usdcLpTotalSupply:s,userLpAllowance:n,userUsdcLpBalance:o,coins:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const e=[],c=Object(g.a)(o).div(s),n=Object(g.a)(c).times(t),i=Object(g.a)(c).times(a);return l.map((t=>{const{index:a,precision:c,symbol:s,id:o}=t;let l=Object(g.a)(0);l=o===H?n.div(c):i.div(c),e[a]=l||Object(g.a)(0)})),e}catch(i){return console.log(i),[]}},Ve=async function(e,t,a){let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{const s=await Object(O.rb)(E,e,t,"2Pool_2"===M?M:"2poollp",H);if(!s.success)return;const{balances3pool:n,balancesUsdc:o,sun3LpBalance:l,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:d}=s,j=Be({balances3pool:n,balancesUsdc:o,sun3LpBalance:l,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:d,coins:t}),u=[],p={};return t.map((e=>{const{index:t,id:s,decimal:n,precision:o}=e;let l=Object(g.fb)(a).div(100).times(j[t]);c||(l=Object(g.a)(.98).times(l)),u[t]=l._toIntegerDown()._toHex(),p[s]=Object(g.c)(l._toFixed(n,1))})),{balances:j,userLpAllowance:b,minAmounts:u,amountsStr:p,userLpBalance:d}}catch(s){console.log(s)}},Ke=async function(e,t,a){let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{const s=await Object(O.rb)(E,e,t,"2Pool_2"===M?M:"2poollp",H);if(!s.success)return;const{balances3pool:n,balancesUsdc:o,sun3LpBalance:l,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:d,userLpAllowanceUsdcSwap:j}=s,u=Fe({balances3pool:n,balancesUsdc:o,sun3LpBalance:l,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:d,coins:t}),p=[],m={};return t.map((e=>{const{index:t,id:s,decimal:n,precision:o}=e;let l=Object(g.fb)(a).div(100).times(u[t]);c||(l=Object(g.a)(.98).times(l)),p[t]=l._toIntegerDown()._toHex(),m[s]=l._toFixed(n,1)})),{balances:u,userLpAllowance:b,minAmounts:p,amountsStr:m,userLpBalance:d,userLpAllowanceUsdcSwap:j}}catch(s){console.log(s)}},Ee=async(e,t)=>{try{await R.getUserLp();const{userUsdcLpBalance:a}=R.swapBalanceInfo,{precision:c,decimal:s}=B[e],n=Object(g.fb)(t).div(100).times(a)._toIntegerDown(),o=B[e].index,l=n._toHex(),i=await Object(O.q)(l,o,W);if(!i.success)return!1;const r=i.value;return Object(g.a)(r).div(c)._toFixed(s,1)}catch(a){console.log(a)}},He=async(e,t)=>{try{await J.getUserLp();const{userUsdcLpBalance:a}=J.swapBalanceInfo,{precision:c,decimal:s}=F[e],n=Object(g.fb)(t).div(100).times(a)._toIntegerDown(),o=F[e].index,l=n._toHex(),i=await Object(O.r)(l,o,z);if(!i.success)return!1;const r=i.value;return Object(g.a)(r).div(c)._toFixed(s,1)}catch(a){console.log(a)}},qe=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(J.getSwapBalance(),J.getVirtualPriceBUSD(z),J.getVolData()):(R.getSwapBalance(),R.getVirtualPriceBUSD(z),R.getVolData())},Me=async function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){await Promise.all([J.getSwapBalance(),J.getUserLp(),J.getBalanceInfo()]);const e={};K.map((t=>{const{userSwapBalance:a,decimal:c}=J.poolData[t];e[t]=Object(g.c)(Object(g.a)(a)._toFixed(c,1))})),ke(e)}else{await Promise.all([R.getUserLp(),R.getBalanceInfo()]);const e={};V.map((t=>{const{userSwapBalance:a,decimal:c}=R.poolData[t];e[t]=Object(g.c)(Object(g.a)(a)._toFixed(c,1))})),se(e)}!ye&&_e(!0),Ce||(Ce=setInterval((async()=>{qe(!1),await R.getUserLp()}),a.defaultIntervalSec))};Object(c.useEffect)((()=>{!Le&&me&&(Le=setInterval((async()=>{qe(!0),await J.getUserLp()}),a.defaultIntervalSec))}),[me]),Object(c.useEffect)((()=>(R.initPage(p),Me(),qe(),()=>{clearInterval(Ce),clearInterval(Le)})),[]);const Re=async(e,t)=>{!ye&&_e(!0);let a=ne;const c={},s={},n={};if(me)if(e){pe(!0);for(let e in Pe)e!==t&&(c[e]=!1,n[e]=0);he({...Pe,...c,[t]:e}),(ne===A||Object(g.fb)(ne).lte(0))&&(a="100.00",oe(a)),Object(g.fb)(a).gt(100)&&(a=100);const s=await He(t,a);s&&ke({...Pe,...n,[t]:Object(g.c)(s)})}else oe(A),pe(!1),he({...xe,[t]:e});else if(e){pe(!0);for(let e in xe)e!==t&&(c[e]=!1,s[e]=0);he({...xe,...c,[t]:e}),(ne===A||Object(g.fb)(ne).lte(0))&&(a="100.00",oe(a)),Object(g.fb)(a).gt(100)&&(a=100);const n=await Ee(t,a);n&&se({...ce,...s,[t]:Object(g.c)(n)})}else oe(A),pe(!1),he({...xe,[t]:e})},Je=e=>{oe("100"),e?(Ne(K),clearInterval(Ce)):(Ne(V),clearInterval(Le)),fe(e),pe(!1),he(ae(!1)),qe(e),Me(e)},Ze=async(e,t)=>{const a=await R.calcInclPrice(e,!1,t);ge(a)},Ge=async(e,t)=>{const a=await J.calcInclPrice(e,!1,t);ge(a)},Qe=async e=>{var t;!ye&&_e(!0);let c=e.target.value,s=c.split(".");if((null===(t=s[1])||void 0===t?void 0:t.length)>2&&(c="".concat(s[0]+"."+s[1].substr(0,2))),Object(g.a)(c).gt(100))return;const{valid:n,str:o}=Object(g.V)(c,10);if(ne===A)return me?(()=>{const e={},t={};K.map((a=>{e[a]=0,t[0]=!1})),ke(e),he(xe),oe(0)})():(()=>{const e={},t={};V.map((a=>{e[a]=0,t[0]=!1})),se(e),he(xe),oe(0)})();if(""===c)return oe(""),me?(()=>{const e={};K.map((t=>{e[t]=0})),ke(e)})():(()=>{const e={};V.map((t=>{e[t]=0})),se(e)})();if(n){oe(o);const t=Object(g.a)(o).gt(100)?Object(g.a)(100):Object(g.a)(o);if(t.isNaN())return;if(!a.defaultAccount)return;const s=a.defaultAccount,n=Te();if(me){if(n){const e=await He(n,t);return e&&ke({...Pe,[n]:Object(g.c)(e)})}if(o!==A){const e=[];K.map((t=>{e.push({...F[t]})}));const t=e.sort(((e,t)=>e.index-t.index)),a=await Ke(s,t,o,!0),{amountsStr:c={}}=a;a&&ke(c)}return}if(n){const e=await Ee(n,t);return e&&se({...ce,[n]:Object(g.c)(e)})}if(o!==A){const t=[];V.map((e=>{t.push({...B[e]})}));const a=t.sort(((e,t)=>e.index-t.index)),n=await Ve(s,a,o,!0);if(c===e.target.value){const{amountsStr:e={}}=n;n&&se(e)}}}},We=e=>{!ye&&_e(!0),ie(e),e!==A&&be("")},ze=e=>{const{valid:t,str:a}=Object(g.V)(e,10);if(t)if(""===a)be("");else if(Object(g.a)(a).lte(100)){var c;let e=a,t=a.split(".");(null===(c=t[1])||void 0===c?void 0:c.length)>2&&(e="".concat(t[0]+"."+t[1].substr(0,2))),be(e)}},Xe=e=>Te()||ne===A?Object(C.jsx)("div",{className:"flex start mt-20",children:Object(C.jsx)(S.a,{slippage:e,customSlippage:re,CUSTOM_SLIPPAGE:U,onChangeSlippage:We,onChangeCustomSlippage:ze})}):Object(C.jsx)(C.Fragment,{});return Object(C.jsx)(d.a,{children:()=>Object(C.jsxs)(o.a,{gutter:[{xs:8,sm:16,md:32},20],children:[Object(C.jsxs)(l.a,{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:15},children:[Object(C.jsx)(N.a,{list:L,activeKey:T[0]}),Object(C.jsxs)("div",{className:"pool-deposit",children:[e.isSinglePage?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(f.a,{routeName:"usdc/withdraw",mountedActions:Me,instantActions:qe}),Object(C.jsx)(x.a,{title:n.a.get("buysell.usdc_pool")+" "+n.a.get("banner.title_withdraw"),desc:n.a.get("banner.desc_withdraw")}),Object(C.jsx)(h.a,{})]}):null,a.isConnected?Object(C.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(C.jsxs)("div",{className:"add-liq withdraw-liq",children:[Object(C.jsxs)("div",{className:"flex",children:[n.a.get("withdraw.share_of_liq"),Object(C.jsx)(k.a,{className:"flex-1 ml-20",showMax:!1,placeholder:"100.00",value:ne,onChange:Qe})]}),Object(C.jsxs)("fieldset",{className:"currencies mt-35",children:[Object(C.jsx)("legend",{children:n.a.get("deposit.currencies")}),Object(C.jsx)("ul",{children:Se.map((e=>{const t=me?F[e]:B[e],{symbol:a=""}=t;return Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{className:"cur-label",children:Object(C.jsxs)("span",{className:"icon",children:[e===M?Object(C.jsx)("img",{src:u.a[q]?u.a[q]:b.default,alt:"",className:"token-logo"}):Object(C.jsx)("img",{src:u.a[e]?u.a[e]:b.default,alt:"",className:"token-logo"}),a]})}),Object(C.jsx)(k.a,{showMax:!1,value:me?Pe[e]:ce[e],onChange:t=>{(async(e,t)=>{if(!ye&&_e(!0),me){const{decimal:a}=F[t],{valid:c,str:s}=Object(g.V)((""+e.target.value).replace(/,/g,""),a);c&&ke({...Pe,[t]:Object(g.c)(s)}),oe(A),pe(!1);const n={};for(let e in xe)n[e]=!1;return void he(n)}const{decimal:a}=B[t],{valid:c,str:s}=Object(g.V)((""+e.target.value).replace(/,/g,""),a);c&&se({...ce,[t]:Object(g.c)(s)}),oe(A),pe(!1);const n={};for(let o in xe)n[o]=!1;he(n)})(t,e)}})]},e)}))})]}),Object(g.ab)(Oe),Object(C.jsxs)("fieldset",{children:[Object(C.jsxs)("legend",{className:"flex aic jcs pt20",children:[Object(C.jsx)("span",{className:"mr-10",children:n.a.get("withdraw.withdraw_text")}),Object(C.jsx)(i.a,{title:n.a.get("withdraw.tip"),children:Object(C.jsx)(r.a,{})})]}),Object(C.jsxs)("div",{className:"withdraw-one mt-10",children:[Se.map((e=>{const{symbol:t=""}=me?F[e]:B[e],a=e===M?u.a[q]?u.a[q]:b.default:u.a[e]?u.a[e]:b.default;return Object(C.jsx)(y.a,{id:e,checked:xe[e],tokenLogo:a,symbol:t,onChange:Re})})),Object(C.jsx)(y.a,{checked:me,symbol:n.a.get("withdraw.".concat(Q?"as_2Pool_2_LP":"as_2usd_LP")),onChange:Je})]})]}),Xe(le),ve?Object(C.jsx)(_.a,{styleName:"mt-40",type:"single",disabled:!0,info:n.a.get("withdraw.action")}):Object(C.jsx)(_.a,{styleName:"mt-40",type:"single",info:n.a.get("withdraw.action"),onClick:()=>(async t=>{try{if(!a.defaultAccount)return;if(!ye&&_e(!0),!ve&&De(t))return;if(ve)return;const c=a.defaultAccount,s=[];me?K.map((e=>{s.push({...F[e],inputValue:Object(g.fb)(t[e]).times(F[e].precision)})})):V.map((e=>{s.push({...B[e],inputValue:Object(g.fb)(t[e]).times(B[e].precision)})}));const n=s.sort(((e,t)=>e.index-t.index)),o=le===U?re:le;return e.onSubmit&&e.onSubmit(),ue?await Ue(n,c,o):ne!==A?await Ae(n,c):await Ie(n,o)}catch(c){console.log("\u63d0\u73b0\u5931\u8d25",c)}})(me?Pe:ce)}),ve&&Object(C.jsx)("div",{className:"error-content mt-12",children:Object(C.jsx)("div",{className:"error-tip",children:ve})})]})}):Object(C.jsx)(P.a,{})]})]}),Object(C.jsx)(l.a,{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:9},children:Object(C.jsx)(m.a,{type:me?"2usdlp":H,className:a.isConnected?null:"window-for-tabs-pane",curveConfig:s})})]})})}},1955:function(e,t,a){"use strict";a.r(t);var c=a(1947),s=a(1949),n=a(1973),o=a(70),l=a(1),i=a.n(l),r=a(57),b=a(8),d=a.n(b),j=(a(1077),a(1080),a(3),a(98)),u=a(1125),p=a(1058),O=a(1163),g=a(1104),m=a(1164),f=a(1165),x=a(1082),h=a(56),v=a(33),w=a(1069),y=a(1063),_=a(1059),S=a(1062),N=a(1083),P=a(2);const k={curveSymbol:"usdd",curveLPSymbol:"usdd2pool",busd2PoolKeys:Object(v.c)("2PoolKeys"),busd2PoolPools:Object(v.c)("2PoolPools"),busd2PoolIndex:Object(v.c)("2PoolIndex"),busd2PoolContracts:Object(v.c)("2PoolContracts"),busdusdPoolKeys:Object(v.c)("usdPoolKeys"),busdusdPools:Object(v.c)("usdPools"),busdUsdPoolIndex:Object(v.c)("UsdPoolIndex"),currencyBUSDKeys:Object(v.g)()},{busd2PoolContracts:C,busdusdPoolKeys:L}=k,{tabChangeLog:D,tabSubmitLog:I}=Object(x.a)({childPage:h.h.liquidity_busd2pool}),A=e=>{let{onSubmit:t,curveConfig:a,pageList:n,tabPaneKey:o,isConnected:l}=e;return Object(P.jsxs)(c.a,{...y.a.row,children:[Object(P.jsxs)(s.a,{...y.a.colLeft,children:[Object(P.jsx)(_.a,{list:n,activeKey:o[0]}),l?Object(P.jsx)("div",{className:"window-for-tabs-pane",children:Object(P.jsx)(O.a,{curveConfig:a,onSubmit:t})}):Object(P.jsx)(S.a,{})]}),Object(P.jsx)(s.a,{...y.a.colRight,children:Object(P.jsx)(g.a,{curveConfig:a})})]})},U={1:{title:d.a.get("banner.title_deposit"),content:d.a.get("banner.desc_deposit"),tabTitle:d.a.get("header.deposit")},2:{title:d.a.get("banner.title_withdraw"),content:d.a.get("banner.desc_withdraw"),tabTitle:d.a.get("header.withdraw")},3:{title:d.a.get("banner.title_1"),content:d.a.get("banner.desc_1"),tabTitle:d.a.get("header.swap")}};t.default=()=>{const{pathname:e}=Object(r.h)(),{title:t,tabKey:a}=Object(u.usePoolTab)(),c=Object(o.d)((()=>j.a.busdPool)),s=Object(o.d)((()=>j.a.usd2Pool)),[b,O]=i.a.useState(a),{mountedActions:g,instantActions:x}=(()=>{let e=null;const t=Object(o.d)((()=>j.a.busdPool)),a=Object(o.d)((()=>j.a.usd2Pool)),c=Object(o.d)((()=>j.a.network)),s=async e=>{e||(t.initPage(),a.initPage()),t.getSwapBalance(),t.getVirtualPriceBUSD(C.usdcSwap),t.getVolData()};return i.a.useEffect((()=>()=>{clearInterval(e)}),[]),{mountedActions:async()=>{t.getUserLp(),await t.getBalanceInfo(C.usdcSwap),await t.getBalanceInfo(C.USDCDepositer),e||(e=setInterval((async()=>{s(!0),t.getUserLp(),await t.getBalanceInfo(C.usdcSwap),await t.getBalanceInfo(C.USDCDepositer)}),c.defaultIntervalSec))},instantActions:s}})(),h=window.localStorage.getItem("lang");Object(l.useEffect)((()=>(console.log("pathname usdd",e),c.initPage(),s.initPage(),()=>{c.initPage(),s.initPage()})),[e]);const v=Object(l.useCallback)((e=>{let{value:t}=e;O(t),D(t)}),[]),_=()=>{const e=window.localStorage.getItem("lang")||d.a.options.currentLocale,t=window.location.origin+window.location.pathname;window.location.href=t+"?lang=".concat(e,"#/sunCurve")},S=Object(l.useMemo)((()=>({shouldScroll:!0,navRightMoreShow:!0,navRightMoreClick:_})),[]),L=Object(l.useMemo)((()=>y.b.map((e=>({...e,handler:v})))),[v]),T=Object(o.d)((()=>j.a.network));return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(p.a,{mountedActions:g,instantActions:x,subNavProps:S}),Object(P.jsxs)("div",{className:"main-page-content",children:[Object(P.jsx)(w.a,{title:"".concat(t).concat("en-US"===h?" ":"").concat(d.a.get("buysell.Pool")).concat("en-US"===h?" ":"").concat(U[b[0]].title),subTitle:U[b[0]].content}),Object(P.jsxs)("div",{className:"pool-tabs",children:[Object(P.jsxs)(n.a,{activeKey:b[0],centered:!0,onChange:v,renderTabBar:()=>null,children:[Object(P.jsx)(n.a.TabPane,{tab:Object(u.renderTab)("1"),children:Object(P.jsx)(m.a,{curveConfig:k,onSubmit:()=>I("1"),pageList:L,tabPaneKey:b})},"1"),Object(P.jsx)(n.a.TabPane,{tab:Object(u.renderTab)("2"),children:Object(P.jsx)(f.a,{curveConfig:k,onSubmit:()=>I("2"),pageList:L,tabPaneKey:b})},"2"),Object(P.jsx)(n.a.TabPane,{tab:Object(u.renderTab)("3"),children:Object(P.jsx)(A,{curveConfig:k,onSubmit:e=>I("3",{event_label:e,txid:e}),pageList:L,tabPaneKey:b,isConnected:T.isConnected})},"3")]}),Object(P.jsx)(N.a,{name:"type",cb:v,valueFlag:!0})]})]})]})}}}]);