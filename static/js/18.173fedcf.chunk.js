(this["webpackJsonpfront-js"]=this["webpackJsonpfront-js"]||[]).push([[18],{1e3:function(e,t,s){},1012:function(e,t,s){},1013:function(e,t,s){"use strict";var a=s(1),o=s(3);t.a=e=>{let{visible:t,onChange:s}=e;return Object(a.useEffect)((()=>{t&&s&&s()}),[t,s]),Object(o.jsx)(o.Fragment,{})}},1014:function(e,t,s){},1119:function(e,t,s){},1159:function(e,t,s){"use strict";var a=s(1),o=s(11),n=s.n(o),i=s(95),c=s(74),l=s(303),r=s(875),d=s(17),p=s.n(d),j=s(259),b=s(162),m=(s(1160),s(3));const u=[n.a.get("trade.price_1"),n.a.get("trade.price_2"),n.a.get("trade.price_3")],h=Object(i.a)(window.navigator).any;t.a=e=>{const{transRoutePath:t,activePathIndex:s,showVersion:o=!0}=e,[i,d]=Object(a.useState)(!1),g=Object(j.a)("(max-width: 1080px)"),v=()=>{d(!0)},k=()=>{d(!1)},O=(e,t)=>{var s,a;let o="-0.04%",n=e.version[t];switch(n){case"v1":o="-0.3%";break;case"v2":let n=e.path[t+1].tokenSymbol,i=e.path[t].tokenSymbol;o="-0.3%",("TRX"===i&&"WTRX"===n||"WTRX"===i&&"TRX"===n)&&(o="");break;case"v3":o=(null===(s=e.poolFees)||void 0===s?void 0:s[t])>0?"-".concat((null===(a=e.poolFees)||void 0===a?void 0:a[t])/1e4,"%"):"";break;default:o="-0.04%"}return n.includes("psm")&&(o="0%"),o},x=(e,t)=>{let s=!1;if("v2"===e.version[t]){let a=e.path[t+1].tokenSymbol,o=e.path[t].tokenSymbol;("TRX"===o&&"WTRX"===a||"WTRX"===o&&"TRX"===a)&&(s=!0)}return s},f=e=>Object(m.jsxs)("div",{className:"renderRoutrOuter",children:[!h&&Object(m.jsx)("span",{className:"trade-router-txt",children:n.a.get("swap.trans_route")}),Object(m.jsx)("div",{className:"renderRoutrOuter-r",children:e.map(((t,s)=>Object(m.jsxs)("span",{children:[Object(m.jsx)("img",{src:t.tokenLogoUrl||b.a,onError:e=>{e.target.onerror=null,e.target.src=b.a},alt:""}),Object(m.jsx)("span",{children:Object(m.jsx)("span",{className:"token",children:null===t||void 0===t?void 0:t.tokenSymbol})}),s!==e.length-1&&Object(m.jsx)("span",{className:"tr-arrow"})]},s)))})]}),w=()=>Object(m.jsx)("div",{className:"tr-content",children:Object(m.jsx)("ul",{children:e.tradeRouterPathArr.map(((t,s)=>Object(m.jsxs)("li",{className:p()({"tr-content-li":!0,active:e.activePathIndex===s}),onClick:()=>(t=>{const s=e.tradeRouterDataArr[t]||{};e.onChangeRouteIndex&&e.onChangeRouteIndex(t),e.onChangeRoutePath&&e.onChangeRoutePath(s)})(s),children:[Object(m.jsxs)("div",{className:"tr-content-li-top",children:[Object(m.jsx)("span",{className:"tr-content-li-title",children:u[s]}),Object(m.jsxs)("div",{className:"tr-content-li-top-r",children:[Object(m.jsx)("span",{className:"tr-content-li-top-r-swap",children:n.a.get("trade.swap")}),Object(m.jsxs)("span",{className:"tr-content-li-top-r-num",children:[t.amount,t.symbol]})]})]}),Object(m.jsx)("div",{className:"tr-content-li-down",children:t.path.map(((e,s)=>Object(m.jsxs)("div",{className:"tr-content-li-pair",children:[Object(m.jsxs)("div",{className:"tr-content-li-pair-op",children:[Object(m.jsx)("img",{src:e.tokenLogoUrl||b.a,onError:e=>{e.target.onerror=null,e.target.src=b.a},alt:""}),Object(m.jsx)("span",{className:"token",children:null===e||void 0===e?void 0:e.tokenSymbol}),s!==t.path.length-1&&Object(m.jsx)("span",{children:O(t,s)})]}),s<t.version.length&&Object(m.jsxs)("div",{className:"flex path-pool",children:[o?!x(t,s)&&Object(m.jsx)("span",{className:"tr-pool",children:t.version[s]}):null,Object(m.jsx)("span",{className:"tr-arrow"})]})]},e.tokenAddress)))})]},s)))})}),N=t=>Object(m.jsx)(m.Fragment,{children:t.length?Object(m.jsx)(l.a,{align:{offset:h?[0,0]:e.offset||[60,-10]},getPopupContainer:e=>e.parentElement||document.body,title:w(),overlayClassName:"tr-tooltip",placement:h?"bottomRight":"rightTop",color:"#403858",arrow:!1,children:f(t)}):Object(m.jsx)("span",{})}),T=e=>Object(m.jsx)(m.Fragment,{children:e.length?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{onClick:v,children:f(e)}),Object(m.jsx)(r.a,{closeIcon:Object(m.jsx)(m.Fragment,{}),title:"",closable:!0,open:i,onCancel:k,footer:null,className:"trade-router-modal",width:630,centered:!0,mask:!0,children:w()})]}):Object(m.jsx)("span",{})});return Object(m.jsx)(c.a,{children:()=>Object(m.jsx)("div",{className:"trade-router",children:g?T(t):N(t)})})}},1160:function(e,t,s){},1161:function(e,t,s){"use strict";var a=s(17),o=s.n(a),n=(s(1162),s(3));t.a=e=>{const{children:t,className:s,disabledCanClick:a,disabled:i,onClick:c,...l}=e;return Object(n.jsx)("div",{onClick:e=>{(a&&i||!i)&&c&&c(e)},className:o()("sun-button-primary",{"sun-button-weak":a&&i},s),...l,children:t})}},1162:function(e,t,s){},1356:function(e,t,s){var a={"./3pool.svg":471,"./btc.svg":472,"./btt.svg":473,"./eth.svg":474,"./jst.svg":475,"./nft.svg":476,"./s3p.svg":477,"./sun.svg":478,"./sun3.svg":479,"./trx.svg":480,"./tusd.svg":481,"./usdc.svg":482,"./usdd.svg":483,"./usdj.svg":484,"./usdt.svg":485,"./wbtt.svg":486,"./win.svg":487};function o(e){var t=n(e);return s(t)}function n(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=n,e.exports=o,o.id=1356},1357:function(e,t,s){},1358:function(e,t,s){},1361:function(e,t,s){},1362:function(e,t,s){},1363:function(e,t,s){},1801:function(e,t,s){"use strict";s.r(t);var a=s(74),o=s(1),n=s.n(o),i=s(4),c=s(103),l=s(890),r=s(11),d=s.n(r),p=(s(1119),s(18)),j=s(0),b=s(17),m=s.n(b),u=s.p+"static/media/ico_hot.3df94fdf.svg",h=s.p+"static/media/ico_new_pool.1ce2849e.svg",g=s(938),v=s(3);const k=["htxtrx","sunusdt2","jstusdt2","nftusdt2","bttusdt2"],O=["htxtrx"],x=()=>Object(v.jsxs)("div",{className:"slogan",children:[Object(v.jsx)("div",{className:"title",children:d.a.get("home.section.liquidity_farm")}),Object(v.jsx)("div",{className:"content ".concat("en-US"===window.localStorage.getItem("lang")?" en ":""),children:d.a.get("home.section.featured_pools")})]}),f=()=>Object(v.jsxs)("div",{className:"token-icons",children:[Object(v.jsx)("img",{style:{marginRight:"-8px"},src:Object(p.d)("default"),alt:"default icon"}),Object(v.jsx)("img",{src:Object(p.d)("default"),alt:"default icon"})]}),w=e=>{let{id:t,version:s}=e;return Object(v.jsx)("div",{className:"token-icons",children:Object(v.jsx)("img",{src:Object(p.e)(t,s),alt:"".concat(t," icon")})})},N=(e,t)=>{const s=O;let a=!1;return 1===t&&(a=["twopoollpNew"].includes(e)),2===t&&(a=s.includes(e)),a};var T=()=>{const e=Object(a.d)((()=>c.a.pool)),t=Object(a.d)((()=>c.a.farmStore)),s=Object(a.d)((()=>c.a.network)),[o,i]=n.a.useState({}),[l,r]=n.a.useState({}),[p,b]=n.a.useState(!0);n.a.useEffect((()=>{!async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.stakeVersion;try{await e.getStakeApyDataNew(),i({...e["stakeData"+a]}),await t.getFarmStakeApyData(),r({...t.farmData})}finally{b(!1)}}()}),[]);const T=()=>{let e=Object.values(o).map((e=>{let{id:t,symbol:s,version:a,token:o,lpStaker:n,...i}=e;const c=(e=>{let{thisWeekApy:t,extraRewardApy:s}=e;const a=Object(j.a)(t),o=a.times(.4),n=Object(j.a)(s);let i=o,c=a;return Object(j.a)(s).isNaN()||Object(j.a)(t).isNaN()||(i=n.plus(o),c=n.plus(a)),{minApy:i,maxApy:c}})(i).maxApy;return"twopoollpNew"===t||"usddusdt"===t?"":{id:t,symbol:s,version:a,maxApy:c,apyText:Object(j.t)(c)+"%",token:o,lpStaker:n}})).filter((e=>{let{maxApy:t,id:s}=e;return!!t&&"twopoollpNew"!==s})).sort(((e,t)=>t.maxApy.minus(e.maxApy))),t=Object.values(l).map((e=>{let{id:t,symbol:s,version:a,token:o,lpStaker:n,...i}=e;const c=(e=>{let{flexApy:t,fixApy:s,govApy:a}=e;return{minApy:t,maxApy:Object(j.a)(s).plus(a)}})(i).maxApy||Object(j.a)(0);return{id:t,symbol:s,version:a,maxApy:c,apyText:Object(j.t)(c)+"%",token:o,lpStaker:n}})).filter((e=>{let{id:t}=e;return k.includes(t)})).sort(((e,t)=>t.maxApy.minus(e.maxApy)));e=[...t,...e],e=e.slice(0,5),e.forEach(((t,s)=>{O.includes(t.id)&&(e.splice(s,1),e.unshift(t))}));const s=e=>{let t="";return t=(g.a.filter((t=>t.poolAddress===e))[0]||{}).fontName||"SunCurve",t};return Object(v.jsx)("div",{className:"farm-apy-wrapper",children:e&&5===e.length&&e.map((e=>{let{apyText:t,symbol:a,id:o,version:n,token:i,lpStaker:c}=e;return Object(v.jsxs)("div",{className:m()("farm-apy-item",{"farm-apy-hot":N(o,n)}),children:[Object(v.jsxs)("div",{className:"pc-wrap",children:[Object(v.jsx)("img",{className:"hot-img",src:h,alt:"newPool"}),Object(v.jsx)("div",{className:"farm-apy-name",children:Number.isInteger(n)?"SunSwap V".concat(n):s(c)}),Object(v.jsxs)("div",{className:"apy-upper-part",children:[p?Object(v.jsx)(f,{}):Object(v.jsx)(w,{id:o,version:n}),Object(v.jsxs)("div",{className:"symbol-text",children:["twopoollpNew"===o||"usddusdt"===o?Object(v.jsx)("img",{className:"apy-hot-icon",src:u,alt:"hot"}):"",p?null:a]})]}),Object(v.jsxs)("div",{className:"apy-lower-part",children:[Object(v.jsxs)("div",{className:"apy-up-to-text",children:[Object(v.jsx)("div",{className:"apy-up-to",children:d.a.get("home.section.apy_up_to")}),Object(v.jsx)("div",{className:"apy-text",children:p?null:t})]}),Object(v.jsx)("a",{className:"apy-btn",href:"/#/stake?search=".concat(c),children:d.a.get("home.section.stake_to_earn")})]})]}),Object(v.jsxs)("div",{className:"mobile-wrap",children:[Object(v.jsx)("img",{className:"hot-img",src:h,alt:"newPool"}),Object(v.jsxs)("div",{className:"farm-apy-header",children:[p?Object(v.jsx)(f,{}):Object(v.jsx)(w,{id:o,version:n}),Object(v.jsxs)("div",{className:"symbol-text",children:[p?null:a,"twopoollpNew"===o||"usddusdt"===o?Object(v.jsx)("img",{className:"apy-hot-icon",src:u,alt:"hot"}):""]}),Object(v.jsx)("div",{className:"farm-pool-version",children:Number.isInteger(n)?"SunSwap V".concat(n):s(c)})]}),Object(v.jsxs)("div",{className:"farm-apy-btm",children:[Object(v.jsxs)("div",{className:"farm-apy-btm-l",children:[Object(v.jsx)("div",{className:"apy-up-to",children:d.a.get("home.section.apy_up_to")}),Object(v.jsx)("div",{className:"apy-text",children:p?null:t})]}),Object(v.jsx)("div",{className:"farm-apy-btm-r",children:Object(v.jsx)("a",{className:"apy-btn",href:"/#/stake?search=".concat(c),children:d.a.get("home.section.stake_to_earn")})})]})]})]},o)}))})};return Object(v.jsx)(a.a,{children:()=>Object(v.jsxs)("div",{className:"apy-section",children:[Object(v.jsx)(x,{}),Object(v.jsx)(T,{})]})})},S=s.p+"static/media/bg_gov.72291deb.png";var y=()=>{const e=window.localStorage.getItem("lang")||d.a.options.currentLocale;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"gov",children:Object(v.jsxs)("div",{className:"box",children:[Object(v.jsx)("div",{className:"box-l",children:Object(v.jsx)("img",{src:S,alt:"earch"})}),Object(v.jsxs)("div",{className:"box-r",children:[Object(v.jsx)("div",{className:"title",children:d.a.get("home.section.participate_in_governance")}),Object(v.jsxs)("div",{className:"content",children:[Object(v.jsx)("div",{className:"content-row",children:d.a.get("home.section.mining_speed")}),Object(v.jsx)("div",{className:"content-row",dangerouslySetInnerHTML:{__html:d.a.get("home.section.by_locking_sun")}})]}),Object(v.jsx)("a",{className:"gov-btn",href:"/?lang=".concat(e,"#/governance"),children:d.a.get("toast.warning_tip_more")})]})]})})})},_=s(944),A=s.n(_),D=s(1761),C=s(303),I=s(875),L=s(1348),U=s(1767),F=s(12),P=s(29),M=s.n(P),R=s(36),V=s.n(R),B=s(95),q=s(1159);var E,H=e=>{const t=Object(a.d)((()=>c.a.network)),s=Object(a.d)((()=>c.a.homeTokens)),o=Object(a.d)((()=>c.a.pool)),{swapToken:n}=o,{toToken:i}=n,l=Object(j.fb)(s.inUsd),r=Object(j.fb)(e.fromValue),p=Object(j.fb)(t.liquidityProviderFee),b=l.dividedBy(r),m=Object(j.v)(b.multipliedBy(p),{dp:2});return Object(v.jsx)(a.a,{children:()=>Object(v.jsx)("div",{className:"description-card",children:Object(v.jsxs)("ul",{className:"description-list",children:[Object(v.jsxs)("li",{className:"description-list-item",children:[Object(v.jsxs)("span",{className:"label",children:[d.a.get("swap.detail_min_received"),"\uff1a"]}),Object(v.jsx)("span",{className:"text",children:Object(j.v)(t.dependentValue,{dp:i.tokenDecimal})+" "+i.tokenSymbol})]}),Object(v.jsxs)("li",{className:"description-list-item",children:[Object(v.jsxs)("span",{className:"label",children:[d.a.get("swap.detail_price_impact"),"\uff1a"]}),Object(v.jsx)("span",{className:"text",children:String(t.priceImpact).indexOf("NaN")>-1?"--":(0===+t.priceImpact?t.priceImpact:"-"+Math.abs(t.priceImpact))+"%"})]}),Object(v.jsxs)("li",{className:"description-list-item",children:[Object(v.jsxs)("span",{className:"label",children:[d.a.get("swap.detail_liquidity_fee"),"\uff1a"]}),Object(v.jsxs)("span",{className:"text",children:[(t.liquidityProviderFee||0)+" "+o.swapToken.fromToken.tokenSymbol," / ".concat("--"!==m?m:0," ").concat(d.a.get("swap.usd"))]})]})]})})})},X=s(161),J=s(1341),Z=s(1342),K=s(1809),W=s(1360),G=s(873),z=(s(1357),s(1e3),s(1012),s(22));var Y=Object(X.b)("network")(E=Object(X.c)(E=class extends n.a.Component{constructor(e){super(e),this.changeCheckStatus=e=>{this.setState({checkStatus:e})},this.comfirmContinue=()=>{const{checkStatus:e}=this.state;e&&this.props.cb()},this.componentDidMount=()=>{},this.state={checkStatus:!1}}render(){const{visible:e,dealWarningSymbol:t}=this.props,{checkStatus:s}=this.state;let{symbol:a,slippage:o}=t?i.a.deflationToken[t]:{symbol:"",slippage:""};return Object(v.jsx)(I.a,{title:d.a.getHTML("list.deal_warning_title",{value:a}),closable:!1,open:e,footer:null,style:{marginLeft:Object(j.R)(500)},width:525,className:"list-addtoken-modal deal-warning-modal",centered:!0,children:Object(v.jsxs)("div",{className:"solor-modal-body",children:[Object(v.jsxs)("div",{className:"tips",children:[Object(v.jsx)("div",{className:"tips1",children:d.a.getHTML("list.deal_warning_content_1",{value:a})}),Object(v.jsx)("div",{className:"tips1 yellow",children:d.a.getHTML("list.deal_warning_content_2",{value:o})}),Object(v.jsx)("div",{className:"tips1",children:d.a.getHTML("list.deal_warning_content_3",{value:a})})]}),Object(v.jsx)("div",{className:"check-box"+(s?" checked":""),children:Object(v.jsx)(L.a,{onChange:e=>this.changeCheckStatus(e.target.checked),children:d.a.get("list.i_understand")})}),Object(v.jsx)("div",{className:"btns",children:Object(v.jsx)("button",{onClick:this.comfirmContinue,className:s?"button-active":"",children:d.a.get("list.continue")})})]})})}})||E)||E,Q=s(162),$=s(1359);s(1358);const ee=e=>{const{prefix:t,showPrefix:s,suffix:a,showSuffix:n,enterButton:i,value:c,onSearch:l,...r}=e,d=Object(o.useRef)(null);return Object(v.jsxs)("div",{className:"sun-search-input-wrap",children:[s&&Object(v.jsx)("div",{className:"sun-search-input-prefix",children:t||Object(v.jsx)($.a,{style:{color:"rgba(255, 255, 255, .5)"}})}),Object(v.jsx)("input",{ref:d,type:"text",className:"sun-search-input",value:c,...r}),n&&Object(v.jsx)("div",{className:"sun-search-input-suffix",children:a||(i?Object(v.jsx)("div",{className:"sun-search-input-btn",onClick:()=>{var e;return l&&l(null===(e=d.current)||void 0===e?void 0:e.value)},children:i}):null)})]})};ee.defaultProps={showPrefix:!0,showSuffix:!0};var te,se=Object(o.memo)(ee),ae=s(1161),oe=s(1056),ne=s(1765),ie=s(1013);const ce="REMOVE";let le=Object(X.b)("pool")(te=Object(X.b)("hotTokens")(te=Object(X.c)(te=class extends n.a.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=()=>{const e=window.localStorage.getItem("solor");if(e){let t=JSON.parse(e);window.localStorage.setItem("solor",JSON.stringify(t)),this.props.pool.setData({solor:t})}this.props.hotTokens.getHotCoinList()},this.setInitToken=()=>{this.setState({tokenSort:!1})},this.onTokenStrChange=async function(e){const{exchanges:s={},allExchanges:a={}}=t.props.pool;try{const s=t.props.type,a="object"===typeof e?e.target.value.trim():e.trim(),{tokenSort:o}=t.state;t.setState({tokenStr:a}),1===s||2===s?t.props.pool.setData({swapToken:{...t.props.pool.swapToken,["tokenStr".concat(s)]:a,["tokenSort".concat(s)]:o}}):t.props.pool.setData({liqToken:{...t.props.pool.liqToken,["tokenStr".concat(s)]:a,["tokenSort".concat(s)]:o}}),t.props.pool.searchTokenList(s)}catch(o){console.log("onTokenStrChange: ",o)}},this.onChange=async(e,t)=>{t.stopPropagation();const s=this.props.type;if(1===s||2===s){var a;let t=this.props.pool.swapToken;const o=e.tokenAddress,{fromToken:n,toToken:c}=t;if(1===s&&o===n.tokenAddress||2===s&&o===c.tokenAddress)return;if((1===s||2===s)&&Object.keys(i.a.deflationToken).includes(e.tokenAddress)&&(null===(a=this.props)||void 0===a||!a.hideDealWarning))return void this.setState({modalVisible:!1,dealWarningVisible:!0,callbacks:this.selectSearchCallback,selectSearchItem:e})}this.props.onChangeToken(e)},this.selectSearchCallback=()=>{const{selectSearchItem:e}=this.state;this.setState({dealWarningVisible:!1}),this.props.onChangeToken(e)},this.hideModal=()=>{const{defaultStatus:e}=this.state;1===e?this.setState({modalVisible:!1,customTokenUriLeg:!0,tokenSort:!1}):this.hideListModal()},this.clearStorage=()=>{const{localStorage:e}=i.a;for(const t in e)window.localStorage.removeItem(e[t]);window.location.reload()},this.showListModal=()=>{this.setState({defaultStatus:2})},this.hideListModal=()=>{this.setState({defaultStatus:1})},this.selectTokenList=async e=>{try{const{selectedListUrl:t}=this.props.pool;this.props.pool.setData({selectedListUrl:e}),this.props.pool.setTokensDataIntoLocal(),await this.props.pool.setTokenList(this.props.type),this.setState({defaultStatus:1}),this.props.pool.handleNotifiction(),this.props.pool.setTokensDataIntoLocal()}catch(t){console.log(t)}},this.backTokensCategory=()=>{this.setState({changeStatus:1})},this.onTokenUriChange=e=>{try{const t=e.target.value;this.setState({customTokenUri:t.trim(),errInfo:""})}catch(t){console.log(t)}},this.checkUrl=e=>{const t="";return e||(t=d.a.get("list.err1")),t},this.isListsOver=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>=i.a.maxLists},this.addCustomTokens=async()=>{try{const{customTokenUri:e}=this.state;let t="";if(!Object(j.P)(e))return t=d.a.get("list.add_failed_tip"),void this.setState({errInfo:t});const{byUrl:s={}}=this.props.pool;if(s[e]&&!s[e].rs)return t=d.a.get("list.exists"),void this.setState({errInfo:t});if(this.isListsOver(s))return t=d.a.getHTML("list.lists_over",{value:i.a.maxLists}),void this.setState({errInfo:t});const a=await Object(z.B)(e),{tokens:o=[]}=a;if(o.length>i.a.maxTokens)return t=d.a.getHTML("list.tokens_over",{value:i.a.maxTokens}),void this.setState({errInfo:t});const{key:n="",valid:c=!1}=Object(j.lb)(a);if(!c)return t=d.a.get("list.add_err_tip",{value:n}),void this.setState({errInfo:t});this.props.pool.updateTokensData(e,{...a,uri:e,rs:0}),await this.props.pool.setTokenList(this.props.type),this.setState({defaultStatus:1})}catch(e){const t=d.a.get("list.add_failed_retry");this.setState({errInfo:t}),console.log(e)}},this.updateList=async e=>{const{uri:t}=e,{byUrlNew:s={}}=this.props.pool,a=s[t];Object(j.o)(a,(async()=>{await this.props.pool.updateByUrl(a),this.setState({})}))},this.hideRemoveModal=()=>{this.setState({removeId:"",removeModalVisible:!1,removeText:""})},this.showRemoveModal=e=>{try{this.setState({removeId:e.uri,removeModalVisible:!0})}catch(t){console.log(t)}},this.removeTokens=()=>{try{const{removeId:e,removeText:t}=this.state;if(!e)return;if(t.trim()!=ce)return;const{byUrl:s={}}=this.props.pool,a=s[e],{cst:o=!1,uri:n=""}=a;o?this.props.pool.deleteByUrlById(n):(a.rs=1,this.props.pool.updateByUrl(a)),this.hideRemoveModal()}catch(e){console.log(e)}},this.inputRemoveText=e=>{const t=e.target.value;this.setState({removeText:t})},this.addSolor=async e=>{try{const{solor:t=[]}=this.props.pool;if(V.a.findIndex(t,(t=>t.tokenAddress===e.tokenAddress))>=0)return;t.unshift({...e,cst:2}),this.props.pool.setData({solor:t}),await this.props.pool.setTokenList(this.props.type),window.localStorage.setItem("solor",JSON.stringify(t))}catch(t){console.log(t)}},this.removeSolor=async e=>{try{const{solor:t=[]}=this.props.pool,{tokenAddress:s}=e;V.a.remove(t,(e=>e.tokenAddress===s)),this.props.pool.setData({solor:t}),await this.props.pool.setTokenList(this.props.type),window.localStorage.setItem("solor",JSON.stringify(t))}catch(t){console.log(t)}},this.getKeys=e=>{try{const t=Object.keys(e);return t.sort(((t,s)=>e[t].name>e[s].name?1:-1))}catch(t){return[]}},this.tokenSortByAsCII=async e=>{try{e=!e;let{type:t}=this.props,s=[],a={};const{swapToken:o,liqToken:n}=this.props.pool;if(1!==t&&2!==t||(s=o.tokenList,a=o.tokenMap),3!==t&&4!==t||(s=n.tokenList,a=n.tokenMap),o["tokenSort".concat(this.props.type)]=e,n["tokenSort".concat(this.props.type)]=e,this.props.pool.setData({swapToken:o,liqToken:n}),e){let e=s.sort(((e,t)=>{const s=a[e].tokenSymbol.toLowerCase(),o=a[t].tokenSymbol.toLowerCase();return s<o?-1:s>o?1:0}));const c=V.a.findIndex(e,(e=>e.tokenAddress===i.a.trxFakeAddress));if(c>=0){const t=e.splice(c,1);e.unshift(t[0])}1!==t&&2!==t||(o.tokenList=e),3!==t&&4!==t||(n.tokenList=e)}else await this.props.pool.setTokenList(this.props.type);this.setState({tokenSort:e})}catch(t){console.log(t)}},this.confirmContinue=async()=>{try{const{checkStatus:e}=this.state,{tokenBrief:t,tokenBriefAnother:s}=this.props.pool,a=Object(j.G)("type");if(!e)return;Object.keys(t).length>0&&await this.addSolor(t),Object.keys(s).length>0&&await this.addSolor(s),this.props.pool.setData({solorModalVisible:!1}),Object.keys(t).length>0&&this.props.onChangeToken&&this.props.onChangeToken(t,"swap"===a?1:3),Object.keys(s).length>0&&this.props.onChangeToken&&this.props.onChangeToken(s,"swap"===a?2:4)}catch(e){console.log(e),this.props.pool.setData({solorModalVisible:!1})}},this.changeCheckStatus=e=>{this.setState({checkStatus:e.target.checked})},this.getClassName=(e,t)=>{try{const s=this.props.type;let a={};const o=e.tokenAddress;a=1===s||2===s?this.props.pool.swapToken:this.props.pool.liqToken;const{fromToken:n,toToken:i}=a;if(o===n.tokenAddress||o===i.tokenAddress||t)return"n-list-item-selected"}catch(s){return""}return""},this.isItemSelected=(e,t)=>{try{const s=this.props.type;let a={};const o=e.tokenAddress;a=1===s||2===s?this.props.pool.swapToken:this.props.pool.liqToken;const{fromToken:n,toToken:i}=a;if(o===n.tokenAddress||o===i.tokenAddress||t)return!0}catch(s){return!1}return!1},this.outInputCheck=e=>{try{const t=this.props.type;let s={};const a=e.tokenAddress;s=1===t||2===t?this.props.pool.swapToken:this.props.pool.liqToken;const{fromToken:o,toToken:n}=s;if(a===o.tokenAddress)return" (".concat(d.a.get("tokens.selected_as_input"),")");if(a===n.tokenAddress)return" (".concat(d.a.get("tokens.selected_as_output"),")")}catch(t){return""}},this.renderHotCoin=()=>{const{hotTokenList:e=[],hotTokenMaps:t,isLoading:s}=this.props.hotTokens;return s?Object(v.jsxs)("div",{className:"n-hot-coin",children:[Object(v.jsx)("div",{className:"n-hot-title",children:d.a.get("account_center.popular")}),Object(v.jsx)("div",{className:"loading-hot-list",children:new Array(4).fill(1).map((()=>Object(v.jsx)("div",{className:"loading-hot-item"})))})]}):e.length?Object(v.jsxs)("div",{className:"n-hot-coin",children:[Object(v.jsx)("div",{className:"n-hot-title",children:d.a.get("account_center.popular")}),Object(v.jsx)("div",{className:"n-hot-list",children:e.map((e=>{const s=t[e];return Object(v.jsxs)("div",{className:m()({"n-hot-item":!0,"n-hot-item-selected":this.isItemSelected(s)}),onClick:e=>this.onChange(s,e),children:[Object(v.jsx)("img",{className:"n-hot-icon",src:s.tokenLogoUrl,onError:e=>{e.target.onerror=null,e.target.src=Q.a}}),s.tokenSymbol]})}))})]}):null},this.renderSelectedList=(e,t)=>{let{tokenSort:s}=this.state;const{isMobileStatus:a}=this.props,{swapToken:o,liqToken:n,loadingTokenList:c}=this.props.pool,{fromToken:l,toToken:r}=n;let p=[],b={},u=[];const h=this.props.type;let g="";return 1!==h&&2!==h||(u=o.tokenList,p=o.allTokenList,b=o.tokenMap,g=o["tokenStr".concat(h)]),3!==this.props.type&&4!==this.props.type||(u=n.tokenList,p=n.allTokenList,b=n.tokenMap,g=n["tokenStr".concat(h)]),e&&t&&e[t]?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(se,{placeholder:d.a.get("tokens.select_placeholder_text"),onSearch:this.onTokenStrChange,onChange:this.onTokenStrChange,value:g,enterButton:d.a.get("tokens.search"),showSuffix:!a}),this.renderHotCoin(),Object(v.jsxs)("div",{className:"n-list-title",children:[Object(v.jsx)("span",{className:"n-list-title-text",children:d.a.get("tokens.select_tokenName_title")}),Object(v.jsx)("span",{className:m()({"icon-sort":!0,"icon-sort-active":s}),onClick:()=>this.tokenSortByAsCII(s)})]}),c?Object(v.jsx)("div",{className:"n-list-loading",children:new Array(8).fill(1).map((e=>Object(v.jsxs)("div",{className:"n-list-loading-item",children:[Object(v.jsxs)("div",{className:"n-list-loading-left",children:[Object(v.jsx)("div",{className:"n-list-loading-top"}),Object(v.jsx)("div",{className:"n-list-loading-bottom"})]}),Object(v.jsx)("div",{className:"n-list-loading-right"})]})))}):null,Object(v.jsx)("div",{className:"n-list sun-scroll-bar",children:0===p.length?Object(v.jsx)("div",{className:"n-list-empty",children:d.a.get("tokens.loading_tokens")}):u.length?u.map(((e,t)=>{const s=b[e],a=e===i.a.wtrxAddress&&(3===this.props.type||4===this.props.type);return s&&!a?Object(v.jsxs)("div",{className:m()({"n-list-item":!0,"n-list-item-selected":this.isItemSelected(s)}),onClick:e=>this.onChange(s,e),children:[Object(v.jsx)(oe.a,{className:"n-token-icon",src:s.tokenLogoUrl}),Object(v.jsxs)("div",{className:"n-item-content",children:[Object(v.jsxs)("div",{className:"n-item-title",children:[Object(v.jsxs)("span",{className:"item-content",children:[s.tokenSymbol,this.outInputCheck(s)]}),1===s.cst&&Object(v.jsxs)("div",{className:"item-content solor-detail",children:[Object(v.jsx)("span",{children:d.a.get("list.search_by_addr")}),Object(v.jsxs)("span",{className:"ib",onClick:e=>{e.stopPropagation(),this.addSolor(s)},children:["(",d.a.get("list.add"),")"]})]}),2===s.cst&&Object(v.jsxs)("div",{className:"item-content solor-detail",children:[Object(v.jsx)("span",{children:d.a.get("list.add_by_user")}),Object(v.jsxs)("span",{className:"solor-remove ib",onClick:e=>{e.stopPropagation(),this.removeSolor(s)},children:["(",d.a.get("list.remove_token"),")"]})]})]}),Object(v.jsx)("div",{className:"n-item-address",children:s.tokenAddress===i.a.trxFakeAddress?null:Object(B.a)(window.navigator).any?Object(j.r)(s.tokenAddress,4,4):Object(j.r)(s.tokenAddress,8,10)})]}),Object(v.jsx)("div",{className:"n-item-balance",children:s.tokenAddress===i.a.trxFakeAddress?Object(v.jsx)("div",{children:Object(v.jsx)("p",{children:Object(j.v)(b[s.tokenAddress]?b[s.tokenAddress].balance:s.balance)})}):Object(v.jsx)("div",{children:Object(v.jsx)("p",{children:b[s.tokenAddress]&&!isNaN(b[s.tokenAddress].balance)?Object(j.v)(b[s.tokenAddress].balance):"--"})})})]},s.tokenAddress+t):Object(v.jsx)(v.Fragment,{})})):Object(v.jsx)("div",{className:"no-token-fund",children:d.a.getHTML("list.no_token_found")})}),Object(v.jsx)("div",{className:"n-list-switch-wrap",children:Object(v.jsxs)("div",{className:"n-list-switch",children:[Object(v.jsxs)("div",{className:"n-list-switch-name",children:[Object(v.jsx)("img",{className:"n-list-switch-icon",src:e[t].logoURI,alt:"",onError:e=>{e.target.onerror=null,e.target.src=Q.a}}),Object(v.jsx)("span",{children:e[t].name||""})]}),Object(v.jsx)("button",{className:"n-list-switch-btn",onClick:()=>this.showListModal(),children:d.a.get("list.switch")})]})})]}):Object(v.jsx)(v.Fragment,{})},this.renderUpdateListItem=e=>{const{byUrlNew:t={}}=this.props.pool,{version:s={},uri:a}=e,o=t[a]||{},n=o.version||{},i=Object(j.n)(s,n),{success:c=!1}=Object(j.m)(e,o);return!V.a.isEqual(o,{})&&i&&c&&Object(v.jsx)(J.a.Item,{onClick:()=>{this.updateList(e)},children:d.a.get("list.update")})},this.adjustAndroid=e=>{let t=Object(j.d)(e);this.setState({adjust:t})},this.renderTokensCategory=e=>{const{customTokenUri:t,lang:s,errInfo:a}=this.state,{byUrl:o,selectedListUrl:n}=this.props.pool,c=this.getKeys(o);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"home-select-url-input-wrap",children:[Object(v.jsx)(D.a,{type:"text",className:"home-select-url-input",placeholder:"https://",value:t,onChange:this.onTokenUriChange}),Object(v.jsx)("button",{className:"home-select-url-btn",onClick:this.addCustomTokens,disabled:!t.trim(),children:d.a.get("list.add_list")})]}),!!a&&Object(v.jsxs)("div",{className:"list-add-errTip",children:[Object(v.jsx)("span",{className:"icon",children:"!"}),Object(v.jsx)("span",{className:"text",children:a})]}),Object(v.jsx)("ul",{className:"n-origin-list",style:e?{height:460}:{},children:o&&c.length&&c.map((e=>{const t=o[e];return!t.rs&&Object(v.jsxs)("li",{className:"n-origin-list-item",children:[Object(v.jsxs)("div",{className:"n-origin-list-item-left",children:[Object(v.jsxs)("div",{className:"n-origin-list-item-img-text",children:[Object(v.jsx)("img",{src:t.logoURI,alt:"",className:"n-origin-list-item-logo"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"n-origin-list-item-name",children:t.name}),Object(v.jsx)("div",{className:"n-origin-list-item-source",children:Object(j.B)(t.uri)})]})]}),Object(v.jsx)(Z.a,{trigger:"click",placement:"bottomRight",getPopupContainer:e=>e.parentNode,overlayClassName:"home-select-url-drop",dropdownRender:()=>Object(v.jsx)(J.a,{children:Object(v.jsxs)(J.a.ItemGroup,{title:Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{className:"key",children:d.a.get("list.version")}),Object(v.jsx)("span",{className:"value",children:Object(j.N)(t.version)})]}),children:[Object(v.jsxs)(J.a.Item,{children:[" ",Object(v.jsx)("a",{href:"".concat(i.a.justList,"?lang=").concat(s,"#/detail?uri=").concat(t.uri),target:t.uri||"_blank",children:d.a.get("list.view")})]}),this.renderUpdateListItem(t),t.uri!==n&&Object(v.jsx)(J.a.Item,{onClick:()=>{this.showRemoveModal(t)},children:d.a.get("list.remove")})]})}),children:Object(v.jsx)("a",{className:"n-origin-list-item-drop",onClick:e=>e.preventDefault()})})]}),Object(v.jsx)("div",{className:"n-origin-list-item-right",children:Object(v.jsx)(ae.a,{onClick:()=>this.selectTokenList(e),disabledCanClick:!0,disabled:String(n)===String(t.uri),children:String(n)===String(t.uri)?d.a.get("list.selected"):d.a.get("list.select")})})]},t.name+"_"+e)}))}),Object(v.jsxs)("div",{className:"home-select-url-links",children:[Object(v.jsx)("a",{className:"home-select-url-more",href:"en-US"===s?i.a.moreList.en:i.a.moreList.zh,target:"_blank",children:d.a.get("more.more")}),Object(v.jsx)("a",{className:"home-select-url-home",href:"".concat(i.a.justList,"?lang=").concat(s,"#/home"),target:"justList",children:d.a.get("list.view_list_home")})]})]})},this.hideSolorModal=()=>{this.props.pool.setData({solorModalVisible:!1})},this.onTokenCancel=()=>{this.props.onCancel()},this.renderPCSelectModal=()=>{const{defaultStatus:e,adjust:t}=this.state,{byUrl:s,selectedListUrl:a}=this.props.pool;return Object(v.jsx)(I.a,{title:this.renderSelectModalTitle(),closable:!0,open:this.props.modalVisible,onCancel:()=>this.onTokenCancel(),className:m()({"dark-modal":!0,"token-select-modal":!0,"token-select-list-modal":1!==e}),footer:null,width:405,centered:!0,children:Object(v.jsx)("div",{style:{position:"relative"},children:1===e?this.renderSelectedList(s,a):this.renderTokensCategory()})})},this.renderMobileSelectModal=()=>{const{defaultStatus:e}=this.state,{byUrl:t,selectedListUrl:s}=this.props.pool,{hotTokenList:a=[]}=this.props.hotTokens,o=a.length>4;return Object(v.jsx)(K.a,{onClose:()=>this.onTokenCancel(),rootClassName:m()({"sun-mobile-token-modal":!0,"sun-mobile-token-select-modal":1!==e}),open:this.props.modalVisible,closable:!1,extra:Object(v.jsx)(W.a,{onClick:()=>this.onTokenCancel(),style:{color:"#fff",fontSize:16}}),placement:"bottom",height:o?658:622,title:this.renderSelectModalTitle(),children:1===e?this.renderSelectedList(t,s):Object(v.jsx)("div",{style:{position:"relative",display:"flex",flexDirection:"column",height:"100%"},children:this.renderTokensCategory(o)})})},this.renderSelectModalTitle=()=>{const{defaultStatus:e}=this.state;return Object(v.jsx)("div",{className:"n-token-modal-title",children:1===e?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:d.a.get("tokens.add_choose_select")}),Object(v.jsx)(C.a,{zIndex:1e4,placement:"bottom",title:d.a.get("tokens.add_choose_select_tip"),children:Object(v.jsx)(G.a,{className:"n-token-modal-title-icon",color:"rgba(255, 255, 255, .5)"})})]}):Object(v.jsxs)("div",{className:"list-modal-header",children:[Object(v.jsx)(ne.a,{onClick:()=>this.hideListModal(),style:{marginRight:10}}),Object(v.jsx)("span",{className:"n-add-title",children:d.a.get("list.select_list")})]})})},this.state={lang:window.localStorage.getItem("lang")||d.a.options.currentLocale,tokenStr:"",defaultStatus:1,removeModalVisible:!1,removeText:"",removeId:"",solor:JSON.parse(window.localStorage.getItem("solor")||"[]"),customTokenUri:"",customTokenUriLeg:!0,errInfo:"",tokenSort:!1,checkStatus:!1,dealWarningVisible:!1,selectSearchItem:"",adjust:!1,tokenMap:{},tokenList:[],originalTokenList:[]}}render(){const{removeText:e,removeModalVisible:t,dealWarningVisible:s,callbacks:a,selectSearchItem:o}=this.state,{isMobileStatus:i}=this.props;return Object(v.jsxs)(n.a.Fragment,{children:[Object(v.jsx)(ie.a,{visible:this.props.modalVisible,onChange:this.setInitToken}),i?this.renderMobileSelectModal():this.renderPCSelectModal(),Object(v.jsxs)(I.a,{title:"",closable:!1,open:t,footer:null,style:{marginLeft:Object(j.R)()},width:420,className:"list-remove-modal base-home-swapmodal",transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",centered:!0,children:[Object(v.jsx)("div",{className:"title",children:d.a.get("list.remove_confirm")}),Object(v.jsx)("div",{className:"tips",children:d.a.get("list.remove_confirm_tip")}),Object(v.jsx)("input",{type:"text",className:"list-input w-80",value:e,onChange:this.inputRemoveText}),Object(v.jsxs)("div",{className:"btns",children:[Object(v.jsx)("button",{onClick:this.removeTokens,disabled:e.trim()!==ce,children:d.a.get("list.confirm")}),Object(v.jsx)("button",{onClick:this.hideRemoveModal,children:d.a.get("list.cancel")})]})]}),s&&Object(v.jsx)(Y,{visible:s,cb:a,dealWarningSymbol:o.tokenAddress})]})}})||te)||te)||te;var re=le,de=s(962);s(1361);class pe extends n.a.Component{constructor(e){super(e),this.confirm=()=>{this.props.confirm&&this.props.confirm()},this.cancel=()=>{this.props.cancel&&this.props.cancel()},this.state={}}render(){const e=Object(B.a)(window.navigator).any?0:64;return Object(v.jsxs)(I.a,{footer:null,title:null,closable:!0,maskClosable:!1,open:this.props.visible,className:"unfinished-pop base-home-swapmodal",onCancel:this.cancel,style:{marginLeft:Object(j.F)()+e},width:430,centered:!0,transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",children:[Object(v.jsxs)("div",{className:"title",children:[d.a.get("action.popTitle"),Object(v.jsx)("p",{children:d.a.get("action.popDesc")})]}),Object(v.jsxs)("div",{className:"btns",children:[Object(v.jsx)("button",{onClick:this.confirm,children:d.a.get("action.popQuitBtn")}),Object(v.jsx)("button",{onClick:this.cancel,children:d.a.get("action.popCancelBtn")})]})]})}}var je=pe,be=s(892),me=s(1764),ue=s(872);s(1362);const he=Object(v.jsx)(ue.a,{style:{fontSize:24},spin:!0});var ge=e=>{const{children:t}=e,s=n.a.Children.toArray(t).map(((e,t)=>{const{children:s,status:a,err:o,failed:n}=e.props;let i=s;return"error"===a&&(i=o||s),"pending"===a&&(i=d.a.get("action.doingAct")),"failed"===a&&(i=n||s),Object(v.jsxs)("div",{className:"al_item ".concat(a?"".concat(a):""),children:[Object(v.jsxs)("div",{className:"flex",children:[Object(v.jsx)("span",{className:"al_number",children:t+1}),Object(v.jsx)("span",{className:"al_title".concat(a?" ".concat(a):""),children:i})]}),"pending"===a&&Object(v.jsx)(me.a,{indicator:he,className:"spiny"})]},e.key)}));return Object(v.jsx)("div",{className:"action-line",children:s})};var ve=e=>{let{left:t,placement:s="bottom",toolClass:a,tip:o,titleClass:i,children:c,tail:l}=e;return Object(v.jsx)(n.a.Fragment,{children:t?Object(v.jsxs)("div",{className:"flex between ai-center "+(a||""),children:[Object(v.jsx)(C.a,{title:o,overlayClassName:"tooltip",placement:s,color:"rgba(27,31,38,0.90)",children:Object(v.jsx)("span",{className:"ques",children:"?"})}),Object(v.jsx)("span",{className:i||"",children:c})]}):Object(v.jsxs)("div",{className:"flex "+(l?"between ":"")+(a||""),children:[Object(v.jsx)("span",{className:i||"",children:c}),Object(v.jsx)(C.a,{title:o,overlayClassName:"tooltip",placement:s,color:"rgba(27,31,38,0.90)",children:Object(v.jsx)("span",{className:"ques",children:"?"})})]})})},ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAANCAMAAAB4p3UoAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEJQTFRFAAAASFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlDTbkywAAABZ0Uk5TAIDuQFf/9AFYP9cvsf78ImriLWQuePVMmBkAAABCSURBVHicY2DADRiZmNFEWFhZMYXYcAmxIwAHKysnAwMXKyrgZuABkrwQABLg40cxSIBVUIhEAWFWVhFU14hyQQQA99wCt/58bxkAAAAASUVORK5CYII=",Oe=s.p+"static/media/TransactionSuccess.9be097c2.svg";var xe=e=>{const{swapData:t}=e,s=Object(a.d)((()=>c.a.network)),o=Object(a.d)((()=>c.a.pool)),l=Object(a.d)((()=>c.a.homeTokens)),{swapToken:r}=o,{dependentValue:p}=s,{fromToken:b,toToken:m}=r,{fromValue:u,toValue:h,priceStr:g,priceInverseStr:k,priceImpactColor:O}=t,x=()=>{e.hideSwapModal&&e.hideSwapModal()},f=()=>{e.onRetryAction&&e.onRetryAction()},w=()=>{e.beforeSwapToken&&e.beforeSwapToken()},N=()=>{e.beforeHideSwapModal&&e.beforeHideSwapModal()};return Object(v.jsx)(a.a,{children:()=>Object(v.jsxs)(I.a,{title:null,closable:"success"!==l.actionState,open:e.visible,onCancel:N,footer:null,className:"confirm-swap-modal base-home-swapmodal",style:{marginLeft:Object(j.F)()},width:630,centered:!0,transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",children:["line"===l.actionState&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"title big",children:l.swapPopTitle}),Object(v.jsxs)("div",{className:"ib-parent center trans-modal amount",children:[Object(v.jsxs)("div",{className:"from",children:[Object(v.jsx)("div",{className:"from-value",children:u}),Object(v.jsx)("div",{className:"from-token",children:o.swapToken.fromToken.tokenSymbol})]}),Object(v.jsx)("img",{src:ke,alt:"",className:"plus w10"}),Object(v.jsxs)("div",{className:"to",children:[Object(v.jsx)("div",{className:"to-value",children:h}),Object(v.jsx)("div",{className:"to-token",children:o.swapToken.toToken.tokenSymbol})]})]}),Object(v.jsxs)(ge,{children:[Object(v.jsx)("span",{status:l.approveActionState,err:l.approveActionError,children:l.approveActionTitle}),Object(v.jsx)("span",{status:l.swapActionState,err:l.swapActionError,children:l.swapActionTitle})]}),Object(v.jsx)(be.a,{type:"single",disabled:l.actionDisabled,info:l.actionInfo,onClick:f})]}),"info"===l.actionState&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"title big",children:l.swapPopTitle}),Object(v.jsxs)("div",{className:"ib-parent center tokens amount",children:[Object(v.jsxs)("div",{className:"from",children:[Object(v.jsx)("div",{className:"from-value",children:u}),Object(v.jsxs)("div",{className:"from-token",children:[Object(v.jsx)("img",{src:o.swapToken.fromToken.tokenLogoUrl,alt:""}),Object(v.jsx)("span",{children:o.swapToken.fromToken.tokenSymbol})]})]}),Object(v.jsx)("img",{src:ke,alt:"",className:"plus w10"}),Object(v.jsxs)("div",{className:"to",children:[Object(v.jsx)("div",{className:"to-value",children:h}),Object(v.jsxs)("div",{className:"to-token",children:[Object(v.jsx)("img",{src:o.swapToken.toToken.tokenLogoUrl,alt:""}),Object(v.jsx)("span",{children:o.swapToken.toToken.tokenSymbol})]})]})]}),Object(v.jsxs)("div",{className:"flex justify-content price",children:[Object(v.jsx)("div",{className:"",children:d.a.get("swap.input_from_price")}),Object(v.jsxs)("div",{className:"right",children:[Object(v.jsx)("div",{children:"1 ".concat(o.swapToken.toToken.tokenSymbol," =\n              ").concat(Object(j.v)(g,{dp:o.swapToken.fromToken.tokenDecimal,cutZero:!0,miniTextNoZero:!0,miniText:i.a.minPrice}),"\n              ").concat(o.swapToken.fromToken.tokenSymbol," ")}),Object(v.jsx)("div",{className:"mt3",children:"1 ".concat(o.swapToken.fromToken.tokenSymbol," =\n              ").concat(Object(j.v)(k,{dp:o.swapToken.toToken.tokenDecimal,cutZero:!0,miniTextNoZero:!0,miniText:i.a.minPrice}),"\n              ").concat(o.swapToken.toToken.tokenSymbol," ")})]})]}),"0.5"!==s.settingSlippage?Object(v.jsxs)("div",{className:"flex justify-content detail-slippage",children:[Object(v.jsxs)("div",{children:[d.a.get("swap.detail_slippage")," "]}),Object(v.jsx)("div",{children:(Object(j.a)(s.settingSlippage).lt(.01)?"<0.01":s.settingSlippage)+"%"})]}):null,!l.swapTRXState&&Object(v.jsxs)("div",{className:"detail-list",children:[Object(v.jsx)("div",{className:"flex justify-content detail-item",children:l.receivedFlag?Object(v.jsxs)(n.a.Fragment,{children:[Object(v.jsx)(ve,{tip:d.a.get("swap.detail_min_received_tip"),left:!0,children:d.a.get("swap.detail_min_received")}),Object(v.jsx)("span",{className:"right",children:Object(j.v)(p,{dp:m.tokenDecimal})+" "+o.swapToken.toToken.tokenSymbol})]}):Object(v.jsxs)(n.a.Fragment,{children:[Object(v.jsx)(ve,{tip:d.a.get("swap.detail_max_sold_tip"),left:!0,children:d.a.get("swap.detail_max_sold")}),Object(v.jsx)("span",{className:"right",children:Object(j.v)(p,{dp:b.tokenDecimal})+" "+o.swapToken.fromToken.tokenSymbol})]})}),Object(v.jsxs)("div",{className:"flex justify-content detail-item",children:[Object(v.jsx)(ve,{tip:d.a.get("swap.detail_price_impact_tip"),left:!0,children:d.a.get("swap.detail_price_impact")}),Object(v.jsx)("span",{className:"right "+(["orange","red"].includes(O)?O:"normal"),children:String(s.priceImpact).indexOf("NaN")>-1?"--":(0===+s.priceImpact?"":"-")+Math.abs(s.priceImpact)+"%"})]}),Object(v.jsxs)("div",{className:"flex justify-content detail-item",children:[Object(v.jsx)(ve,{tip:d.a.getHTML("swap.detail_liquidity_fee_tip_v2"),left:!0,children:d.a.get("swap.detail_liquidity_fee")}),Object(v.jsx)("span",{className:"right",children:s.liquidityProviderFee+" "+o.swapToken.fromToken.tokenSymbol})]})]}),Object(v.jsx)("div",{className:"warning",children:l.receivedFlag?Object(v.jsx)("div",{children:d.a.get("swap.confirm_warning_output",{amount:Object(j.v)(p,{dp:m.tokenDecimal}),token:o.swapToken.toToken.tokenSymbol})}):Object(v.jsx)("div",{children:d.a.get("swap.confirm_warning_input",{amount:Object(j.v)(p,{dp:b.tokenDecimal}),token:o.swapToken.fromToken.tokenSymbol})})}),l.swapErrorInfo&&Object(v.jsx)("div",{className:"errorMsg",children:l.swapErrorInfo}),Object(v.jsx)(be.a,{type:"single",btnColor:O,disabled:l.swapPopBtnDisabled,info:l.swapPopBtn,onClick:w})]}),"success"===l.actionState&&Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"modal-success",children:[Object(v.jsx)("img",{src:Oe,alt:""}),Object(v.jsx)("div",{className:"title green",children:d.a.get("action.swapSuccessTitle")}),Object(v.jsxs)("div",{className:"ib-parent center trans-modal mb25",children:[Object(v.jsxs)("div",{className:"from",children:[Object(v.jsx)("div",{className:"from-value",children:l.successFromValue}),Object(v.jsx)("div",{className:"from-token",children:o.swapToken.fromToken.tokenSymbol})]}),Object(v.jsx)("img",{src:ke,alt:"",className:"plus w10"}),Object(v.jsxs)("div",{className:"to",children:[Object(v.jsx)("div",{className:"to-value",children:l.successToValue}),Object(v.jsx)("div",{className:"to-token",children:o.swapToken.toToken.tokenSymbol})]})]}),Object(v.jsx)(be.a,{type:"single",info:d.a.get("action.closeBtn"),onClick:x})]})})]})})},fe=s.p+"static/media/ico_switch.7800d88b.svg";var we=e=>{const[t,s]=Object(o.useState)(!1),n=Object(a.d)((()=>c.a.pool)),{swapToken:l}=n,{fromToken:r,toToken:p}=l,{priceInverseStr:b,priceStr:m}=e,u=async()=>{s(!t)};return Object(v.jsx)(a.a,{children:()=>Object(v.jsxs)("div",{className:"swap-rate",children:[Object(v.jsxs)("span",{className:"swap-rate-label swap-rate-label1",children:[d.a.get("scan.chart.price"),"\uff1a"]}),t?d.a.getHTML("swap.input_from_per",{toToken:r.tokenSymbol,price:Object(j.v)(b,{miniText:i.a.minPrice,miniTextNoZero:!0,separator:!1,dp:p.tokenDecimal,cutZero:!0}),fromToken:p.tokenSymbol}):d.a.getHTML("swap.input_from_per",{toToken:p.tokenSymbol,price:Object(j.v)(m,{miniText:i.a.minPrice,miniTextNoZero:!0,separator:!1,dp:r.tokenDecimal,cutZero:!0}),fromToken:r.tokenSymbol}),Object(v.jsx)("img",{src:fe,className:"purple-switch",onClick:u,alt:""})]})})};var Ne=e=>{const t=Object(a.d)((()=>c.a.network)),s=Object(a.d)((()=>c.a.homeTokens)),{errorTip:o,priceImpactColor:l}=e,r=()=>o===d.a.get("trade.tip_1")?Object(v.jsx)("div",{className:"submit-btn",onClick:()=>(()=>{let e=window.localStorage.getItem("lang");window.open("".concat(i.a.sunSwapV2,"?lang=").concat(e),"_blank")})(),children:o}):Object(v.jsx)("div",{className:"submit-btn disabled",children:o||d.a.get("buysell.swap")}),p=()=>Object(v.jsx)("div",{className:"submit-btn ".concat(l," ").concat(s.isRequesting&&"disabled"),onClick:()=>{e.showSwapModal&&e.showSwapModal()},children:"red"===l?d.a.get("swap.action_high"):d.a.get("buysell.swap")});return Object(v.jsx)(a.a,{children:()=>Object(v.jsx)(n.a.Fragment,{children:t.isConnected?o?Object(v.jsx)(r,{}):Object(v.jsx)(p,{}):Object(v.jsx)("div",{className:"submit-btn",onClick:()=>t.setData({loginModalVisible:!0,loginModalStep:1}),children:d.a.get("header.connect_wallet")})})})};var Te=e=>{const t=Object(a.d)((()=>c.a.pool)),s=Object(a.d)((()=>c.a.homeTokens)),{swapToken:o}=t,{fromToken:n}=o,l=s.swapPool||[],r=e.fromValue;let p=0;l.includes("v1")&&(p+=i.a.swapFeeAmount),l.includes("v2")&&(p+=i.a.swapFeeAmountV2);return Object(v.jsx)(a.a,{children:()=>Object(v.jsx)("div",{children:"TRX"===n.tokenSymbol&&r?Object(j.fb)(n.balance).lt(p)?Object(v.jsx)("div",{className:"safe-amount-tip safe-amount",children:d.a.getHTML("list.trx_tip_3",{value:p})}):Object(j.fb)(n.balance).minus(p).lt(Object(j.fb)(r))?Object(v.jsxs)("div",{className:"safe-amount-tip safe-amount",children:[Object(v.jsxs)("span",{className:"safe-word",children:[d.a.getHTML("list.trx_tip_1",{value:p})," "]}),Object(v.jsx)("span",{className:"safe-btn",onClick:()=>((t,s)=>{e.onSafeMax&&e.onSafeMax(t,s)})("from",p),children:d.a.get("list.trx_tip_2")})]}):null:null})})};class Se extends n.a.Component{constructor(e){super(e)}render(){const{token:e={}}=this.props;return Object(v.jsx)("p",{className:"dragDown "+(this.props.disabled?"no-bg":""),onClick:()=>{this.props.showModal()},children:e.tokenAddress?Object(v.jsxs)("div",{className:"selector",children:[Object(v.jsx)("img",{src:e.tokenLogoUrl||Q.a,alt:"",onError:e=>{e.target.onerror=null,e.target.src=Q.a}}),Object(v.jsx)("span",{children:e.tokenSymbol})]}):Object(v.jsxs)("div",{className:"selector",children:[d.a.get("swap.add_choose_select")," "]})})}}var ye=Se,_e=s.p+"static/media/ico_view_token.5cfb5e2f.svg";var Ae=e=>{const t=Object(a.d)((()=>c.a.pool)),{swapToken:s}=(Object(a.d)((()=>c.a.network)),t),{fromToken:o,toToken:n}=s,{isFrom:l,errorTip:r}=e,p=()=>{window.open("".concat(i.a.tronscanUrl,"/address/").concat(e.token.tokenAddress),"_blank")};return Object(v.jsx)(a.a,{children:()=>Object(v.jsxs)("div",{className:"info-row",children:[Object(v.jsx)("div",{className:"from-text",children:Object(v.jsx)(ye,{showModal:e.showModal,token:e.token})}),Object(v.jsx)("div",{className:"view-token",children:e.token.tokenAddress!==i.a.trxFakeAddress?Object(v.jsx)("img",{onClick:p,src:_e,alt:"viewToken"}):""}),Object(v.jsxs)("div",{className:"balance-wrap",children:[Object(v.jsx)("span",{className:"balance-text",children:d.a.get("buysell.balance")}),Object(v.jsxs)("span",{className:"balance-value",children:[l?Object(j.v)(o.balance,{dp:6,cutZero:!0}):Object(j.v)(n.balance,{dp:6,cutZero:!0}),"\xa0",e.token.tokenSymbol]})]})]})})};var De=e=>{const t=Object(a.d)((()=>c.a.homeTokens)),{isFrom:s}=e,o=()=>{let e=Object(j.fb)(t.inUsd);const s=Object(j.fb)(t.outUsd).minus(e).div(e).times(100),a=Object(j.v)(s);return Object(v.jsxs)("span",{children:["\uff08","Infinity"===a?"--":a,"%\uff09"]})};return Object(v.jsx)(a.a,{children:()=>Object(v.jsx)("div",{className:"input-usd",children:s?Object(v.jsxs)("div",{children:["$",Object(j.v)(t.inUsd)]}):Object(v.jsxs)("div",{children:["$",Object(j.v)(t.outUsd),o()]})})})},Ce=(s(989),s(8));s(45);const Ie=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).tokenAddress,s=e.tokenAddress,{trxFakeAddress:a,wtrxAddress:o}=i.a;return t===a&&s===o||t===o&&s===a},Le=async e=>{try{var t,s,a;const o="btfs",n="test"===o||"qaTest"===o?e.tokenSymbol:e.tokenAddress,{data:i}=await Object(z.C)([n]);return(null===(t=i[n])||void 0===t||null===(s=t.quote)||void 0===s||null===(a=s.USD)||void 0===a?void 0:a.price)||""}catch(o){console.log("get token price error",o)}},{usdcPools:Ue,usddPools:Fe,twoKeyPools:Pe,twoKeyPoolContracts:Me,twoKeyNewPoolContracts:Re}=i.a;var Ve=()=>{const e=Object(a.d)((()=>c.a.homeTokens)),[t,s]=Object(o.useState)(!1),[n,l]=Object(o.useState)({}),[r,d]=Object(o.useState)(""),[p,b]=Object(o.useState)(""),m=async(t,a,o,n)=>{try{const i=M()(10).pow(t.tokenDecimal),c=M()(10).pow(a.tokenDecimal),r=Object(j.fb)(o).gt(0)?Object(j.fb)(o).times(i).div(c)._toFixed(Number(a.tokenDecimal),1):"";l({timestamp:n,amountOut:Object(j.c)(r),fee:"",impact:"",pool:["v2"],tokens:[t.tokenAddress,a.tokenAddress],roadForName:[t.tokenSymbol.toUpperCase(),a.tokenSymbol.toUpperCase()],inUsd:M()(e.trxPrice).times(M()(r)),outUsd:M()(e.trxPrice).times(M()(r))}),s(!1),d("success")}catch(i){console.log("get token price error: ",i)}},u=async(t,s,a)=>{if(!a)return{};const o=M()(10).pow(t.tokenDecimal);try{let n="";e.fromTokenPrice||(n=await Le(t),e.setData({fromTokenPrice:n}));const c=g(a);let l=await Object(z.k)({fromToken:"TRX"===t.tokenSymbol?i.a.trxFakeAddress:t.tokenAddress,toToken:"TRX"===s.tokenSymbol?i.a.trxFakeAddress:s.tokenAddress,amountIn:Object(j.v)(Object(j.fb)(a).times(o),{separator:!1,cutZero:!0}),typeList:c});if(0===l.code){const e=V.a.cloneDeep(null===l||void 0===l?void 0:l.data),t=(null===l||void 0===l?void 0:l.data[0])||{};return t.roadPathArr=e||[],t||{}}d("failed")}catch(n){console.log("get routing error: ",n)}},h=async(e,t,s,a,o)=>{var n,i;if(!a)return{};let c=e.tokenSymbol.toLowerCase(),l=t.tokenSymbol.toLowerCase(),r=s;if(r=Object(j.fb)(r),!r.gt(0))return;let d=w(c,l)?Pe:f(c,l)?Fe:Ue;const p=null===(n=d[c])||void 0===n?void 0:n.index,b=null===(i=d[l])||void 0===i?void 0:i.index;try{var m;const{result:a,dx_precision:n,dy_precision:i,pools:d,type:u}=await v(c,l,r)||{};if(null===a||void 0===a||!a.success)return;const h=s,g=Object(j.c)(null===a||void 0===a?void 0:a.value.div(i)._toFixed(null===(m=d[l])||void 0===m?void 0:m.decimal,1)),k=await x(u,h,g,p,b,n,i);return{amountOut:g,fee:o?Object(j.fb)(s).times(4).div(1e4)._toFixed(Number(e.tokenDecimal),1):0,impact:k,pool:u,roadForAddr:[p,b],roadForName:[e.tokenSymbol,t.tokenSymbol]}}catch(u){console.log("get dy error: ",u)}},g=t=>Object(j.fb)(e.fromTokenPrice).times(Object(j.fb)(t)).gt(5e3)?"":"PSM,CURVE,CURVE_COMBINATION,WTRX,SUNSWAP_V1,SUNSWAP_V2",v=async(e,t,s)=>{if([e,t].includes("usdd")){if([e,t].includes("usdc"));else if([e,t].includes("usdt")){return await k("2pool",e,t,s)}}else if([e,t].includes("usdt")){if([e,t].includes("tusd")){let a=await k("old3pool",e,t,s),o=await k("oldusdcpool",e,t,s);return O([a,o])}if([e,t].includes("usdj"))return await k("old3pool",e,t,s);if([e,t].includes("usdc")){return await k("oldusdcpool",e,t,s)}}else if([e,t].includes("tusd")){if([e,t].includes("usdj"))return await k("old3pool",e,t,s);if([e,t].includes("usdc"))return await k("oldusdcpool",e,t,s)}else if([e,t].includes("usdc")&&[e,t].includes("usdj"))return await k("oldusdcpool",e,t,s)},k=async function(){var e,t,s,a,o,n,i,c,l,r,d,p,b,m,u,h,g,v,k,O,x,f,w,N,T,S,y,_,A;let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"old3pool",C=arguments.length>1?arguments[1]:void 0,I=arguments.length>2?arguments[2]:void 0,L=arguments.length>3?arguments[3]:void 0;try{if(Object(j.fb)(L).isNaN())return;let U=null,F=null,P=null,M=null,R=null,V=null;switch(D){case"old3pool":D="old3pool",R=Ue,P=null===(e=R[C])||void 0===e?void 0:e.precision,F=null===(t=R[I])||void 0===t?void 0:t.precision,M=null===(s=Object(j.fb)(L))||void 0===s||null===(a=s.times(P))||void 0===a||null===(o=a._toIntegerDown())||void 0===o?void 0:o._toHex(),U=await Object(Ce.mb)(null===(n=R[C])||void 0===n?void 0:n.index,null===(i=R[I])||void 0===i?void 0:i.index,M);break;case"3pool":D="3pool",R=Fe,P=null===(c=R[C])||void 0===c?void 0:c.precision,F=null===(l=R[I])||void 0===l?void 0:l.precision,M=null===(r=Object(j.fb)(L))||void 0===r||null===(d=r.times(P))||void 0===d||null===(p=d._toIntegerDown())||void 0===p?void 0:p._toHex(),U=await Object(Ce.T)(null===(b=R[C])||void 0===b?void 0:b.index,null===(m=R[I])||void 0===m?void 0:m.index,M);break;case"old2pool":D="old2pool",R=Pe,P=null===(u=R[C])||void 0===u?void 0:u.precision,F=null===(h=R[I])||void 0===h?void 0:h.precision,M=null===(g=Object(j.fb)(L))||void 0===g||null===(v=g.times(P))||void 0===v||null===(k=v._toIntegerDown())||void 0===k?void 0:k._toHex(),U=await Object(Ce.S)(R[C].index,R[I].index,M,Me.stablePool);break;case"2pool":D="2pool",R=Pe,P=null===(O=R[C])||void 0===O?void 0:O.precision,F=null===(x=R[I])||void 0===x?void 0:x.precision,M=null===(f=Object(j.fb)(L))||void 0===f||null===(w=f.times(P))||void 0===w||null===(N=w._toIntegerDown())||void 0===N?void 0:N._toHex(),U=await Object(Ce.S)(R[C].index,R[I].index,M,Re.stablePool);break;case"oldusdcpool":D="oldusdcpool",R=Ue,P=null===(T=R[C])||void 0===T?void 0:T.precision,F=null===(S=R[I])||void 0===S?void 0:S.precision,M=null===(y=Object(j.fb)(L))||void 0===y||null===(_=y.times(P))||void 0===_||null===(A=_._toIntegerDown())||void 0===A?void 0:A._toHex(),U=await Object(Ce.mb)(R[C].index,R[I].index,M)}return{result:U,dx_precision:P,dy_precision:F,pools:R,type:D,poolData:V}}catch(U){console.log("getAllDy error: "+U)}},O=e=>e.reduce((function(e,t){return M()(e.result.value).div(e.dy_precision).gte(M()(t.result.value).div(t.dy_precision))?e:t})),x=async(e,t,s,a,o,n,i)=>{var c,l,r,d,p,b,m,u,h,g,v,k,O,x,f;let w=M()(1),N=null,T=null;switch(e){case"old3pool":for(3!==o&&0!==o||(w=3===a&&0===o||0===a&&3===o?M()("1"):M()("1000000000000")),N=null===(c=Object(j.fb)(1))||void 0===c||null===(l=c.times(w))||void 0===l||null===(r=l._toIntegerDown())||void 0===r?void 0:r._toHex(),T=await Object(Ce.mb)(a,o,N);M()(0).eq(T.value);){var S,y,_;w=w.times(M()(10)),N=null===(S=Object(j.fb)(1))||void 0===S||null===(y=S.times(w))||void 0===y||null===(_=y._toIntegerDown())||void 0===_?void 0:_._toHex(),T=await Object(Ce.mb)(a,o,N)}break;case"3pool":for(2===o&&(w=M()("1000000000000")),N=null===(d=Object(j.fb)(1))||void 0===d||null===(p=d.times(w))||void 0===p||null===(b=p._toIntegerDown())||void 0===b?void 0:b._toHex(),T=await Object(Ce.T)(a,o,N);M()(0).eq(T.value);){var A,D,C;w=w.times(M()(10)),N=null===(A=Object(j.fb)(1))||void 0===A||null===(D=A.times(w))||void 0===D||null===(C=D._toIntegerDown())||void 0===C?void 0:C._toHex(),T=await Object(Ce.T)(a,o,N)}break;case"old2pool":for(1===o&&(w=M()("1000000000000")),N=null===(m=Object(j.fb)(1))||void 0===m||null===(u=m.times(w))||void 0===u||null===(h=u._toIntegerDown())||void 0===h?void 0:h._toHex(),T=await Object(Ce.S)(a,o,N,Me.stablePool);M()(0).eq(T.value);){var I,L,U;w=w.times(M()(10)),N=null===(I=Object(j.fb)(1))||void 0===I||null===(L=I.times(w))||void 0===L||null===(U=L._toIntegerDown())||void 0===U?void 0:U._toHex(),T=await Object(Ce.S)(a,o,N,Me.stablePool)}break;case"2pool":for(1===o&&(w=M()("1000000000000")),N=null===(g=Object(j.fb)(1))||void 0===g||null===(v=g.times(w))||void 0===v||null===(k=v._toIntegerDown())||void 0===k?void 0:k._toHex(),T=await Object(Ce.S)(a,o,N,Re.stablePool);M()(0).eq(T.value);){var F,P,R;w=w.times(M()(10)),N=null===(F=Object(j.fb)(1))||void 0===F||null===(P=F.times(w))||void 0===P||null===(R=P._toIntegerDown())||void 0===R?void 0:R._toHex(),T=await Object(Ce.S)(a,o,N,Re.stablePool)}break;case"oldusdcpool":for(3!==o&&0!==o||(w=3===a&&0===o||0===a&&3===o?M()("1"):M()("1000000000000")),N=null===(O=Object(j.fb)(1))||void 0===O||null===(x=O.times(w))||void 0===x||null===(f=x._toIntegerDown())||void 0===f?void 0:f._toHex(),T=await Object(Ce.mb)(a,o,N);M()(0).eq(T.value);){var V,B,q;w=w.times(M()(10)),N=null===(V=Object(j.fb)(1))||void 0===V||null===(B=V.times(w))||void 0===B||null===(q=B._toIntegerDown())||void 0===q?void 0:q._toHex(),T=await Object(Ce.mb)(a,o,N)}}const E=Object(j.fb)(t),H=Object(j.fb)(s),X=Object(j.fb)("9996"),J=Object(j.fb)("10000"),Z=Object(j.fb)("1000000000000000000"),K=Object(j.fb)("100000"),W=E.times(X).times(K).times(Z).times(n).div(H).div(i),G=w.times(J).times(K).times(Z).div(T.value),z=E.times(J).times(Z).times(n).div(H).div(i),Y=W.minus(G).div(z);return Object(j.v)(Y.div(M()(10)).div(M()(100)))},f=(e,t)=>[e,t].includes("usdd")&&![e,t].includes("usdc"),w=(e,t)=>i.a.twoKeyPoolKeys.includes(e)&&i.a.twoKeyPoolKeys.includes(t);return{sendRequest:t=>{const{fromToken:a,toToken:o,fromValue:n,receivedFlag:i,timestamp:c}=t;s(!0);const r=Ie(a,o);if(e.setData({swapTRXState:r}),r)return m(a,o,n,c);Promise.allSettled([u(a,o,n),h(a,o,n,!1,i)]).then((e=>{var t;let a=(null===(t=(e.filter((e=>"fulfilled"===e.status&&Object.keys(e.value||{}).length))||[]).sort(((e,t)=>{var s,a;return Object(j.fb)(null===t||void 0===t||null===(s=t.value)||void 0===s?void 0:s.amount)-Object(j.fb)(null===e||void 0===e||null===(a=e.value)||void 0===a?void 0:a.amount)}))[0])||void 0===t?void 0:t.value)||"";a&&(a.timestamp=c,d("success")),l(a||{}),s(!1)}))},loading:t,result:n,requestStatus:r,debugStr:p}},Be=s.p+"static/media/icon_swap.85053dec.svg",qe=s.p+"static/media/icon_swap_active.b9641109.svg";s(1363),s(185);var Ee=s(52);var He=()=>{const e=Object(a.d)((()=>c.a.network)),t=Object(a.d)((()=>c.a.pool)),s=Object(a.d)((()=>c.a.homeTokens)),[n,l]=Object(o.useState)(d.a.get("swap.action_enter_amount")),[r,p]=Object(o.useState)(!1),b="en-US"===window.localStorage.getItem("lang"),[u,h]=Object(o.useState)(""),[g,k]=Object(o.useState)(""),[O,x]=Object(o.useState)(!0),[f,w]=Object(o.useState)(0),[N,T]=Object(o.useState)("-"),[S,y]=Object(o.useState)("-"),[_,A]=Object(o.useState)(""),P=Object(o.useRef)(null),[R,E]=Object(o.useState)(!1),[X,J]=Object(o.useState)(!1),[Z,K]=Object(o.useState)(!1),[W,G]=Object(o.useState)(!1),[Y,$]=Object(o.useState)([]),[ee,te]=Object(o.useState)(!1),[se,ae]=Object(o.useState)(""),oe=Object(B.a)(window.navigator).any;Object(o.useEffect)((()=>(ne(),()=>{f&&clearInterval(f)})),[]),Object(o.useEffect)((()=>{const e=Object(F.p)((()=>t.swapToken.fromToken.tokenAddress),((e,t,s)=>{K(!0)})),a=Object(F.p)((()=>t.swapToken.toToken.tokenAddress),((e,t,s)=>{K(!0)})),o=Object(F.p)((()=>s.swapTxid),(e=>{e&&setTimeout((()=>{const a=e.fromValue,o=e.toValue;h(""),k(""),s.setData({successFromValue:a,successToValue:o,actionRetry:"",actionState:"success",actionStarted:!1}),t.getBalanceAndApprove(),ge()}),5e3)}));return()=>{e(),a(),o()}}),[]);const ne=async()=>{Object(j.Z)(),e.getSettingsData(),t.setData({swapRef:P});try{t.getTokensDataFromLocal(),await t.getTokensCategory(),await t.setTokenList(1),ie(),pe(),t.getBalanceAndApprove(),w(setInterval((()=>{t.getBalanceAndApprove(),ie()}),6e3)),he()}catch(s){}},ie=async()=>{try{var e,t,a;const{data:o}=await Object(z.C)(["TRX"]),n=(null===(e=o.TRX)||void 0===e||null===(t=e.quote)||void 0===t||null===(a=t.USD)||void 0===a?void 0:a.price)||"";s.setData({trxPrice:n})}catch(o){console.log("get trx price error",o)}},ce=async e=>{s.setData({fromTokenPrice:""});const t=await Le(e);s.setData({fromTokenPrice:t})},le=async(e,s)=>{const a=await Object(z.M)(e);if(a.success){const o=a.data;if(o.tokenAddr){const a=window.localStorage.getItem("swapVersion"),n={tokenAddress:e,address:o.exchangeAddr,addressV1:"v1.0"===a?o.exchangeAddr:null,addressV2:"v1.5"===a?o.exchangeAddr:null,tokenSymbol:o.tokenSymbol,tokenLogoUrl:o.tokenLogo,tokenName:o.tokenName,tokenDecimal:o.tokenDecimal,cst:1,balance:"-"};0===s&&t.setData({tokenBrief:n}),1===s&&t.setData({tokenBriefAnother:n}),t.setData({solorModalVisible:!0})}}},pe=()=>{const{liqToken:e,swapToken:s}=t,{toToken:a={},allTokenList:o=[]}=s,n=Object(j.G)("t0"),c=Object(j.G)("t1"),l=Object(j.G)("from"),r=Object(j.G)("type"),d={tokenSymbol:"TRX",tokenAddress:i.a.trxFakeAddress,tokenDecimal:i.a.trxDecimal,trxBalance:new M.a(0),tokenBalance:new M.a(0),trxBalanceV1:new M.a(0),tokenBalanceV1:new M.a(0),balance:"--",approvedAmount:new M.a(Ce.a),tokenLogoUrl:i.a.trxLogoUrl},p=o.find((e=>"USDJ"===e.tokenSymbol.toUpperCase()&&e.tokenAddress===i.a.usdjFakeAddress));try{if("swap"===r&&"scan"===l&&n){const{tokenMap:e}=s;c?e[n]&&e[c]?(Ke(e[n]),We(e[c])):e[n]?e[c]||(Ke(d),le(c,1)):(le(n,0),We(p)):e[n]?n===i.a.usdjFakeAddress?(Ke(p),We(d)):(Ke(e[n]),We(p)):(le(n,0),We(p))}else""===a.tokenSymbol&&p&&(Ke(d),We(p))}catch(b){console.log("set Default token err",b)}},be=e=>Object(v.jsxs)("div",{className:"token-info flex",children:[Object(v.jsx)("div",{className:"logo",children:Object(v.jsx)("img",{src:e.tokenLogoUrl?e.tokenLogoUrl:Q.a})}),Object(v.jsxs)("div",{className:"info",children:[Object(v.jsxs)("div",{className:"symbol",children:[e.tokenName,"(",e.tokenSymbol,")"]}),Object(v.jsxs)("div",{className:"addr",children:[Object(v.jsx)("span",{children:e.tokenAddress}),Object(v.jsx)("span",{className:"pointer",title:e.tokenAddress,id:e.tokenAddress,onClick:t=>{Object(j.p)(t,"5px","".concat(e.tokenAddress))},children:Object(v.jsx)(U.a,{})})]})]})]}),me=e=>{te(e.target.checked)},ue=()=>{try{const{tokenBrief:e,tokenBriefAnother:s}=t;if(!ee)return;(null===e||void 0===e?void 0:e.tokenAddress)&&Ke(e),(null===s||void 0===s?void 0:s.tokenAddress)&&We(s),t.setData({solorModalVisible:!1})}catch(e){console.log(e),t.setData({solorModalVisible:!1})}},he=function(){if(s.isRequesting)return!1;let a="";const o=t.swapToken.fromToken,n=t.swapToken.toToken,i=o.tokenAddress,c=n.tokenAddress,r=M()(o.balance),p=e.dependentValue;if(!i&&!Object(j.G)("t0")||!c&&!Object(j.G)("t1"))return a=d.a.get("swap.action_select_token"),l(a);if(!u)return!s.receivedFlag&&g?M()(g).lte(0)?(a=d.a.get("swap.action_enter_amount"),l(a)):(a=d.a.get("swap.action_insufficient_liquidity"),l(a)):(a=d.a.get("swap.action_enter_amount"),l(a));if(Object(j.fb)(u).lte(0))return a=d.a.get("swap.action_enter_amount"),l(a);if(s.swapTRXState&&r&&r.lt(Object(j.fb)(u)))return a=d.a.get("swap.action_insufficient",{token:o.tokenSymbol}),l(a);if(s.receivedFlag){if(!g)return a=d.a.get("swap.action_insufficient_liquidity"),l(a);if(r&&r.lt(Object(j.fb)(u)))return a=d.a.get("swap.action_insufficient",{token:o.tokenSymbol}),l(a);if(Object(j.fb)(u).gt(o.approvedAmount))return a="",x(!0),l(a)}else{if(!s.swapTRXState&&r.lt(Object(j.fb)(p)))return a=d.a.get("swap.action_insufficient",{token:o.tokenSymbol}),l(a);if(!s.swapTRXState&&M()(p).gt(o.approvedAmount))return a="",x(!0),l(a)}l(a),x(!1)},ge=async()=>{try{const{fromToken:e,toToken:a}=t.swapToken,o=Ie(e,a);if(o)return s.setData({swapTRXState:o}),T(1),y(1),!1;s.setData({swapTRXState:!1}),Fe(),Pe(),Me(),he()}catch(e){console.error(e)}};Object(o.useEffect)((()=>{setTimeout((()=>{ge()}),0),he(),!u&&g&&k(""),g||(s.setTransRoutePath([]),e.setData({priceImpact:""}),e.setData({liquidityProviderFee:""}),s.setData({swapPool:[]}),s.setData({roadForAddr:[]}),s.setData({inUsd:""}),s.setData({outUsd:""}),s.setData({poolFees:[]}),T(""),y(""))}),[g]);const{loading:ve,result:ke,requestStatus:Oe,sendRequest:fe,debugStr:Se}=Ve();Object(o.useEffect)((()=>{if(!ve){if($(Se),Object.keys(ke).length&&"success"===Oe&&se===ke.timestamp){if(s.setData({isRequesting:!1}),!s.swapTRXState)return s.setData({activePathIndex:0}),s.setTransRoutePathArr(ke.roadPathArr),ye(ke.roadPathArr[0]||[]),!1;ye(ke)}"failed"===Oe&&(h(""),k(""))}}),[ve,ke,Oe,se]);const ye=t=>{s.setTransRoutePath(t.tokens||[]),e.setData({priceImpact:t.impact}),e.setData({liquidityProviderFee:t.fee+""}),s.setData({swapPool:t.poolVersions||[]}),s.setData({roadForAddr:t.tokens||[]}),s.setData({inUsd:t.inUsd}),s.setData({outUsd:t.outUsd}),s.setData({poolFees:t.poolFees}),k(t.amountOut||""),Fe(),Pe(),Me(),he(!0)},_e=e=>{s.setData({activePathIndex:e})},Ue=async e=>{const{fromToken:a,toToken:o}=t.swapToken;if(!a.tokenAddress||!o.tokenAddress||!e||0===+e)return k(""),void he();const n=(new Date).getTime();ae(n),k(""),fe({fromToken:a,toToken:o,fromValue:e,receivedFlag:s.receivedFlag,timestamp:n})},Fe=()=>{if(!u||!g)return!1;const{fromToken:e,toToken:s}=t.swapToken;let a="-",o="-",n=Object(j.fb)(u),i=Object(j.fb)(g);const c=n.div(i),l=i.div(n);a=c._toFixed(Number(e.tokenDecimal),1),o=l._toFixed(Number(s.tokenDecimal),1),T(a),y(o)},Pe=()=>{const{fromToken:a,toToken:o}=t.swapToken,n=Ie(a,o),c=new M.a(e.settingSlippage).div(100);let l=new M.a(0),r=i.a.trxDecimal;l=n?Object(j.fb)(g):Object(j.fb)(g).times(M()(1).minus(c)),r=t.swapToken.toToken.tokenDecimal,l=l._toFixed(Number(r),1),e.setData({dependentValue:l}),s.setData({dependentValueSunBig:new M.a(l).times(new M.a(10).pow(r))})},Me=()=>{const t=e.priceImpact,s=M()(t).abs().times(-1);let a="--",o="";a=M()(t).lte(0)&&M()(t).gt(-.01)?"0.00":"".concat(M()(t)._toFixed(2)),e.setData({priceImpact:a}),o=M()(s).lte(-15)?"red":M()(s).gt(-15)&&M()(s).lte(-5)?"orange":"",A(o)},Re=Object(o.useCallback)(V.a.debounce((e=>{(async e=>{e&&s.setData({isRequesting:!0}),await t.getBalanceAndApprove(),await Ue(e)})(e)}),200,{leading:!1,trailing:!0}),[]);Object(o.useEffect)((()=>{Re(u)}),[u]);const He=()=>{const{swapToken:e}=t,{fromToken:a}=e,o=M()(a.balance);if(!M()(o).gte(0))return;let n=o;const i=n.gt(0)?n._toFixed(Number(a.tokenDecimal),1):"0";h(Object(j.c)(i)),0===+i&&k(""),s.setData({receivedFlag:!0})},Xe=(e,a)=>{const{swapToken:o}=t,{fromToken:n}=o;if("from"===e){const e=Object(j.c)(Object(j.fb)(n.balance).minus(a));h(e),s.setData({receivedFlag:!0}),ge()}},Je=async()=>{const e={...t.swapToken.fromToken},s={...t.swapToken.toToken};t.swapToken.fromToken=s,t.swapToken.toToken=e,ce(s),h(g),k(""),x(!1)},Ze=e=>{try{e.tokenDecimal=Number(e.tokenDecimal);const{solor:s=[]}=t,a=V.a.findIndex(s,(t=>t.tokenAddress===e.tokenAddress));a>=0?s.splice(a,1,{...e,cst:2}):s.unshift({...e,cst:2}),t.setData({solor:s}),window.localStorage.setItem("solor",JSON.stringify(s))}catch(s){console.log(s)}},Ke=async e=>{try{const{swapToken:a}=t;if(e.tokenDecimal=Number(e.tokenDecimal),e.tokenAddress===a.fromToken.tokenAddress)return;if(t.showModal(1,!1),e.cst&&Ze(e),e.tokenAddress===a.toToken.tokenAddress)return Je();let o=u;o&&e.tokenDecimal!=a.fromToken.tokenDecimal&&(o=Object(j.fb)(o)._toFixed(Number(e.tokenDecimal),1)),a.fromToken={...e},t.setData({swapToken:a}),ce(a.fromToken),h(Object(j.c)(o)),x(!1);const n=Ie(a.fromToken,a.toToken);s.setData({swapTRXState:n})}catch(a){t.showModal(1,!1),console.log(a)}};Object(o.useEffect)((()=>{!async function(){Z&&u&&(s.setData({isRequesting:!0}),await t.getBalanceAndApprove(),await Ue(u),K(!1))}()}),[u,O,Z]);const We=async e=>{const{swapToken:a}=t;if((null===e||void 0===e?void 0:e.tokenAddress)!==a.toToken.tokenAddress){t.showModal(2,!1),e.cst&&Ze(e);try{if(e.tokenAddress===a.fromToken.tokenAddress)return Je();e.tokenDecimal=Number(e.tokenDecimal);let o=g;o&&e.tokenDecimal!=a.toToken.tokenDecimal&&(o=new M.a(o)._toFixed(Number(e.tokenDecimal),1)),a.toToken={...e},t.setData({swapToken:a});const n=Ie(a.fromToken,a.toToken);s.setData({swapTRXState:n})}catch(o){t.showModal(2,!1),console.error(o)}}},Ge=e=>{let a=e.target.value,o=g;if(a){const{valid:e,str:s}=Object(j.V)(a.replace(/,/g,""),t.swapToken.fromToken.tokenDecimal);if(!e)return;a=s,t.swapToken.fromToken.tokenAddress&&t.swapToken.toToken.tokenAddress||(o="")}else o="";h(Object(j.c)(a)),s.setData({receivedFlag:!0})},ze=()=>{const e=t.swapToken.fromToken,a=t.swapToken.toToken;s.swapTRXState&&x(!1);const o=d.a.get("swap.action_swap"),n=["orange","red"].includes(_)?d.a.get("swap.action_swapStill"):d.a.get("swap.confirm_swap"),i=d.a.get("action.swapAct",{from:e.tokenSymbol,to:a.tokenSymbol}),c=d.a.get("action.swapActErr"),l=!s.swapTRXState&&O;s.setData({swapPopTitle:o,swapPopBtn:n,swapPopBtnDisabled:!1,swapErrorInfo:"",approveActionTitle:d.a.get("action.approveAct",{token:e.tokenSymbol}),approveActionError:d.a.get("action.approveActErr"),approveActionState:"",swapActionTitle:i,swapActionError:c,swapActionState:"",actionInfo:d.a.get("action.startBtn"),actionDisabled:!0,actionRetry:"",actionState:l?"line":"info",actionStarted:!1,successFromValue:"",successToValue:""}),E(!1)},Ye=()=>{if(s.isRequesting)return!1;ze(),G(!0),J(!1)};Object(o.useEffect)((()=>{W&&tt()}),[W]);const Qe=()=>{s.actionStarted?E(!0):$e()},$e=()=>{G(!1),setTimeout((()=>{ze()}),1e3)},et=()=>{s.setData({actionStarted:!0,swapPopBtn:d.a.get("action.startBtn"),swapPopBtnDisabled:!0}),s.swapToken(u,g)},tt=()=>{let e=O,a=s.actionRetry;switch(s.swapTRXState&&(e=!1),!a&&e&&(a="approveToken"),a){case"approveToken":s.setData({approveActionState:"start",actionInfo:d.a.get("action.startBtn"),actionDisabled:!0}),(async()=>{const{fromToken:e,toToken:a}=t.swapToken;if(e&&a&&(e.tokenAddress===i.a.trxFakeAddress&&a.tokenAddress===i.a.wtrxAddress||a.tokenAddress===i.a.trxFakeAddress&&e.tokenAddress===i.a.wtrxAddress))return;const o=t.swapToken.fromToken.tokenAddress,n=i.a.v3Contract.router;await Object(Ce.b)(o,n,{title:"swap.pop_title_approve",obj:{token:t.swapToken.fromToken.tokenSymbol}})?(x(!1),s.setData({approveActionState:"pending",actionInfo:d.a.get("action.doingBtn"),actionDisabled:!0,actionStarted:!0}),setTimeout((()=>{s.setData({approveActionState:"success",actionState:"info"})}),5e3)):s.setData({approveActionState:"error",actionRetry:"approveToken",actionInfo:d.a.get("action.retryBtn"),actionDisabled:!1,actionStarted:!0})})();break;case"swapToken":s.setData({swapActionState:"start",actionInfo:d.a.get("action.startBtn"),actionDisabled:!0}),s.swapToken(u,g)}},st=()=>{E(!1),J(!0)},at=()=>{E(!1)};Object(o.useEffect)((()=>{if(!R&&X){async function e(){O&&await t.getBalanceAndApprove()}$e(),e()}return()=>{}}),[R,X]);const ot=Object(v.jsx)(a.a,{children:()=>Object(v.jsx)("div",{className:"box-tools",children:Object(v.jsx)("p",{className:"box-tool-item",children:Object(v.jsx)(de.a,{network:e,version:"home",onChange:(t,s)=>{e.saveSettings(t,s),ge()}})})})}),nt=()=>ve?Object(v.jsxs)("div",{className:"trade-router-loading",children:[d.a.get("swap.loading_router"),Object(v.jsx)("span",{className:"price-loading-img"})]}):Object(v.jsx)(v.Fragment,{children:s.swapTRXState?"":Object(v.jsx)(q.a,{swapPool:s.swapPool,swapTRXState:s.swapTRXState,onChangeRoutePath:ye,onChangeRouteIndex:_e,activePathIndex:s.activePathIndex,transRoutePath:s.transRoutePath,tradeRouterPathArr:s.tradeRouterPathArr,tradeRouterDataArr:s.tradeRouterDataArr},s.activePathIndex)}),it=e=>{Object(Ee.a)({action:e,event_category:Ee.j.home})};return Object(v.jsx)(a.a,{children:()=>Object(v.jsxs)("div",{className:"home-swap-box",id:"swap-box",ref:P,children:[Object(v.jsxs)("div",{className:"hero-swap-box-card",children:[Object(v.jsxs)("div",{className:"header-box",children:[Object(v.jsx)("div",{className:"box-header",children:d.a.get("header.swap")}),Object(v.jsx)("div",{className:"header-advanced",children:ot})]}),Object(v.jsx)("div",{className:"box-body",children:Object(v.jsxs)("div",{className:"swap-body",children:[Object(v.jsxs)("div",{className:"input-part from-input",children:[Object(v.jsx)(Ae,{showModal:()=>{t.showModal(1),it(Ee.h.from_token)},isFrom:!0,errorTip:n,setMaxFrom:He,token:t.swapToken.fromToken}),Object(v.jsxs)("div",{className:m()("swap-input-wrap",{"max-input-wrap":e.isConnected}),children:[Object(v.jsx)(D.a,{placeholder:r?"":d.a.get("buysell.enter_amount"),className:"from-input ".concat(b?"en":""),onFocus:()=>{p(!0)},onBlur:()=>!u&&!(null!==u&&void 0!==u&&u.length)&&p(!1),value:u,onChange:Ge}),e.isConnected?Object(v.jsx)("span",{className:"max-btn ".concat(n?" disabled ":""),onClick:He,children:d.a.get("buysell.max")}):null,ve?Object(v.jsxs)("div",{className:"bottom-price-loading",children:[d.a.get("swap.calc_usd_loading"),Object(v.jsx)("span",{className:"price-loading-img"})]}):""!==s.inUsd&&Object(v.jsx)(De,{isFrom:!0}),Object(v.jsx)(re,{modalVisible:t.modalVisibleInfo.visible1,onCancel:()=>t.showModal(1,!1),type:1,isMobileStatus:s.isMobileStatus,onChangeToken:e=>{Ke(e)}})]})]}),s.swapPool&&s.swapPool.some((e=>i.a.safePoolConfig.includes(e)))?Object(v.jsx)(Te,{fromValue:u,onSafeMax:Xe}):"",Object(v.jsxs)("div",{className:"box-control",children:[Object(v.jsxs)("div",{className:"swap-ico-wrap",children:[Object(v.jsx)("img",{src:Be,className:"swap-ico swap-ico-default",onClick:()=>Je(),alt:"switch"}),Object(v.jsx)("img",{src:qe,className:"swap-ico swap-ico-active",onClick:()=>Je(),alt:"switch"})]}),Object(v.jsx)(nt,{})]}),Object(v.jsxs)("div",{className:"input-part",children:[Object(v.jsx)(Ae,{showModal:()=>{t.showModal(2),it(Ee.h.to_token)},token:t.swapToken.toToken,isFrom:!1,errorTip:n}),Object(v.jsxs)("div",{className:"swap-input-wrap",children:[Object(v.jsx)(C.a,{arrow:!1,title:g,placement:"bottomLeft",align:{offset:oe?[10,-5]:[16,-10]},getPopupContainer:e=>e.parentElement||document.body,overlayClassName:"swap-input-wrap-tooltip",children:Object(v.jsx)(D.a,{placeholder:"0",style:{caretColor:"transparent"},className:"wallet to-input ".concat(b?"en":""),value:g})}),ve?Object(v.jsxs)("div",{className:"bottom-price-loading",children:[d.a.get("swap.calc_usd_loading"),Object(v.jsx)("span",{className:"price-loading-img"})]}):""!==s.outUsd&&Object(v.jsx)(De,{isFrom:!1}),Object(v.jsx)(re,{modalVisible:t.modalVisibleInfo.visible2,onCancel:()=>t.showModal(2,!1),type:2,isMobileStatus:s.isMobileStatus,onChangeToken:e=>{We(e)}})]})]})]})}),Object(v.jsxs)("div",{className:"box-footer",children:[Object(v.jsx)("div",{className:"footer-info-row",children:Object(v.jsx)(we,{priceInverseStr:S,priceStr:N})}),"0.5"===e.settingSlippage||s.swapTRXState?null:Object(v.jsx)("div",{className:"description-list",children:Object(v.jsxs)("div",{className:"description-list-item first",children:[Object(v.jsxs)("span",{className:"label",children:[d.a.get("swap.detail_slippage"),"\uff1a"]}),Object(v.jsx)("span",{className:"text",children:(M()(e.settingSlippage).lt(.01)?"<0.01":e.settingSlippage)+"%"})]})}),u&&g&&t.swapToken.fromToken.tokenAddress&&t.swapToken.toToken.tokenAddress&&!s.swapTRXState?Object(v.jsx)("div",{className:"box-description",children:Object(v.jsx)(H,{fromValue:u})}):null,Object(v.jsx)(Ne,{errorTip:n,priceImpactColor:_,showSwapModal:Ye}),n===d.a.get("trade.tip_1")?Object(v.jsx)("div",{className:"error-text",children:d.a.get("trade.tip_2")}):""]})]}),Object(v.jsx)(xe,{visible:W,swapData:{fromValue:u,toValue:g,priceStr:N,priceInverseStr:S,priceImpactColor:_,miniPopVisible:!1},hideSwapModal:$e,onRetryAction:tt,beforeSwapToken:et,beforeHideSwapModal:Qe}),Object(v.jsx)(je,{visible:R,confirm:st,cancel:at}),Object(v.jsx)(I.a,{title:d.a.get("list.add_token"),closable:!1,open:t.solorModalVisible,footer:null,width:500,className:"list-addtoken-modal base-home-swapmodal",centered:!0,transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",children:Object(v.jsxs)("div",{className:"solor-modal-body",children:[Object(v.jsxs)("div",{className:"tips",children:[Object(v.jsx)("div",{className:"tips1",children:d.a.get("list.add_token_tip1")}),Object(v.jsx)("div",{className:"tips1",children:d.a.get("list.add_token_tip2")}),Object(v.jsx)("div",{className:"tips1",children:d.a.get("list.add_token_tip3")})]}),Object.keys(t.tokenBrief).length>0&&be(t.tokenBrief),Object.keys(t.tokenBriefAnother).length>0&&be(t.tokenBriefAnother),Object(v.jsx)("div",{className:"check-box"+(ee?" checked":""),children:Object(v.jsx)(L.a,{onChange:me,children:d.a.get("list.add_token_tip4")})}),Object(v.jsx)("div",{className:"btns",children:Object(v.jsx)("button",{onClick:ue,className:ee?"button-active":"",children:d.a.get("list.continue")})})]})}),Object(v.jsx)(v.Fragment,{})]})})},Xe=s.p+"static/media/bg_tvl1.1e2187ca.svg",Je=s.p+"static/media/bg_tvl2.9cd58cac.svg",Ze=s.p+"static/media/bg_tvl3.685136ad.svg",Ke=s.p+"static/media/bg_tvl4.77e0e7cd.svg",We=s.p+"static/media/banner_sun.bb99f7d0.png",Ge=s.p+"static/media/ico_sun.588d297f.gif";const ze=e=>e&&Object(v.jsx)(A.a,{className:"tvl-count-up",end:Number(Object(j.gb)(e,0)),duration:1,prefix:"$",separator:","}),Ye=()=>Object(v.jsxs)("div",{className:"hero-intro-card",children:[Object(v.jsx)("div",{className:"title",children:d.a.get("home.section.sun_ecosystem")}),Object(v.jsx)("div",{className:"content",children:d.a.get("banner.desc_home")}),Object(v.jsx)("div",{className:"content",children:d.a.get("homeLegal.title")}),Object(v.jsxs)("div",{className:"banner-wrap",children:[Object(v.jsx)("img",{className:"banner-wrap-icon",src:Ge,alt:"sun"}),Object(v.jsx)("img",{className:"banner-wrap-bg",src:We,alt:"banner"})]})]}),Qe=()=>{const e=Object(a.d)((()=>c.a.pool)),t=Object(a.d)((()=>c.a.home)),[s,o]=n.a.useState({});return n.a.useEffect((()=>{(async()=>{await e.getHomePageBottomApy(),await e.getVolumeData();const{allSwaps:s,miningPools:a,stableCoins:o,totalTvl:n}=await t.getAllTvlData();return{allSwaps:s,miningPools:a,stableCoins:o,totalTvl:n}})().then(o)}),[]),n.a.useEffect((()=>{const e=["totalTvl","stableCoins","allSwaps","miningPools"],t=setInterval((()=>{var a;const o=document.querySelectorAll(".tvl-count-up");(null===(a=o[0])||void 0===a?void 0:a.innerHTML)==="$"+Object(j.c)(Object(j.gb)(s[e[0]],0))&&clearInterval(t),o.forEach(((t,a)=>{t.innerHTML="$"+Object(j.c)(Object(j.gb)(s[e[a]],0))}))}),1e3);return()=>{clearInterval(t)}}),[s]),Object(v.jsx)(a.a,{children:()=>Object(v.jsx)("div",{className:"tvl-card-wrap",children:[{title:d.a.get("banner.total_value"),content:ze(s.totalTvl),icon:Xe},{title:d.a.get("banner.total_value_stable"),content:ze(s.stableCoins),icon:Je},{title:d.a.get("banner.total_value_sunswap"),content:ze(s.allSwaps),icon:Ze},{title:d.a.get("banner.total_value_mining"),content:ze(s.miningPools),icon:Ke}].map((e=>{let{title:t,content:s,icon:a}=e;return Object(v.jsxs)("div",{className:"tvl-card-item",children:[Object(v.jsx)("div",{className:"tvl-card-title",children:t}),Object(v.jsx)("div",{className:"tvl-card-text",children:s}),Object(v.jsx)("img",{className:"tvl-card-img",src:a,alt:"icon"})]})}))})})};var $e=()=>Object(v.jsx)(a.a,{children:()=>Object(v.jsxs)("div",{className:"hero-bg",children:[Object(v.jsxs)("div",{className:"hero",children:[Object(v.jsx)(He,{}),Object(v.jsx)(Ye,{})]}),Object(v.jsx)(Qe,{})]})});t.default=()=>{let e=null;const t=Object(a.d)((()=>c.a.pool)),s=Object(a.d)((()=>c.a.usdcPool)),o=Object(a.d)((()=>c.a.usdc2Pool)),r=Object(a.d)((()=>c.a.tusdPool)),d=Object(a.d)((()=>c.a.usddPool)),p=Object(a.d)((()=>c.a.twoKeyPool)),j=Object(a.d)((()=>c.a.twoKeyNewPool)),b=Object(a.d)((()=>c.a.network)),m=async()=>{await Promise.all([t.getHomePageBottomApy(),t.getVolumeData()])};return n.a.useEffect((()=>(window.scrollTo(0,0),e||(e=setInterval((async()=>{await m()}),b.defaultIntervalSec)),()=>{clearInterval(e)})),[]),Object(v.jsxs)("div",{className:"home-page",children:[Object(v.jsx)(l.a,{routeName:"home",instantActions:m,mountedActions:async()=>{await Promise.all([t.getBalanceAndApprove(),t.getBalanceInfo(),s.getBalanceInfo(i.a.usdcContracts.usdcSwap),t.getSwapBalance(),d.getBalanceInfo(),d.getSwapBalance(),p.getBalanceInfo(),p.getSwapBalance(),j.getBalanceInfo(),j.getSwapBalance(),o.getBalanceInfo(),o.getSwapBalance(),r.getBalanceInfo(),r.getSwapBalance()])}}),Object(v.jsxs)("div",{className:"home-page-content",children:[Object(v.jsx)($e,{}),Object(v.jsx)(T,{}),Object(v.jsx)(y,{})]})]})}},892:function(e,t,s){"use strict";var a=s(1),o=s.n(a),n=(s(988),s(3));class i extends o.a.Component{constructor(e){super(e),this.onClick=()=>{this.props.disabled||this.props.state||this.props.onClick&&this.props.onClick()},this.onLeftClick=()=>{this.props.lDisabled||this.props.lState||this.props.onLeftClick&&this.props.onLeftClick()},this.onMiddleClick=()=>{this.props.mDisabled||this.props.mState||this.props.onMiddleClick&&this.props.onMiddleClick()},this.onRightClick=()=>{this.props.rDisabled||this.props.rState||this.props.onRightClick&&this.props.onRightClick()};const{styleName:t=""}=e;this.state={}}render(){let e=null;switch(this.props.type){case"trisection":e=Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"trisection "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick,children:this.props.lInfo}),Object(n.jsx)("button",{className:"trisection "+(this.props.mDisabled?"gray":this.props.mState?this.props.mState:"blue"),onClick:this.onMiddleClick,children:this.props.mInfo}),Object(n.jsx)("button",{className:"trisection "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick,children:this.props.rInfo})]});break;case"half":e=Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"half "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick,children:this.props.lInfo}),Object(n.jsx)("button",{className:"half "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick,children:this.props.rInfo})]});break;default:e=Object(n.jsx)("button",{className:"single "+(this.props.disabled?"single-disabled":this.props.state?this.props.state:this.props.btnColor?this.props.btnColor:"blue"),onClick:this.onClick,children:this.props.info})}return Object(n.jsx)("div",{className:"sun-action-btns "+this.props.styleName||!1,children:e})}}t.a=i},907:function(e,t,s){e.exports={setting_wrap:"style_setting_wrap__L7ld9",setting_label:"style_setting_label__3qQrG",setting_btns:"style_setting_btns__zH_61",setting_btn_wrap:"style_setting_btn_wrap__uxT1B",setting_input:"style_setting_input__kvJzs",active:"style_active__10VTC",module_important:"style_module_important__PuwNO",info_text:"style_info_text__3K73H",setting_minutes:"style_setting_minutes__1mIXw"}},938:function(e,t,s){"use strict";var a=s(445),o=s(443),n=s(442),i=s(444),c=s(450),l=s(446),r=s(452),d=s(454),p=s(448),j=s(455),b=s(451),m=s(453),u=s(449),h=s(447),g=s(52);const v=[{poolAddress:"TS8d3ZrSxiGZkqhJqMzFKHEC1pjaowFMBJ",poolIcon:j.default,fontName:"2pool",poolTokens:["TUSD","USDT"],routeName:"usdt_tusd",stableLp:"TW1UvgYQZdZmHaT3UeWiJ9owNw2xffVnA5",decimals:18,category:g.j.liquidity_usdttusd},{poolAddress:"TLssvTsY4YZeDPwemQvUzLdoqhFCbVxDGo",poolIcon:b.default,fontName:"USDD Pool",poolTokens:["USDD","TUSD","USDT"],routeName:"usdd_usdt_tusd_2pool",stableLp:"THiz24TyXvyUXRjZHW3gW2PMBRzfNLuJdT",decimals:18,category:g.j.liquidity_oldusdc},{poolAddress:"TKBqNLyGJRQbpuMhaT49qG7adcxxmFaVxd",poolIcon:m.default,fontName:"USDJ Pool",poolTokens:["USDJ","TUSD","USDT"],routeName:"usdj_usdt_tusd_2pool",stableLp:"TM9UdzBnK7iETZie4H9moTojDXSBfqi12d",decimals:18,category:g.j.liquidity_oldusdc},{poolAddress:"TE7SB1v9vRbYRe5aJMWQWp9yfE2k9hnn3s",poolIcon:u.default,fontName:"USDC Pool",poolTokens:["USDC","TUSD","USDT"],routeName:"usdc_usdt_tusd_2pool",stableLp:"THPuVJt3oa67Erk6Akg5pjEaSN91FExqMT",decimals:18,category:g.j.liquidity_oldusdc},{poolAddress:"TExeaZuD5YPi747PN5yEwk3Ro9eT2jJfB6",poolIcon:c.default,fontName:"USDC 2pool",poolTokens:["USDC","USDT"],routeName:"usdc_2pool",stableLp:"TYEsj7fELLVwj85ZUMge227Af7iySk11zg",decimals:18,category:g.j.liquidity_usdc2pool},{poolAddress:"TNTfaTpkdd4AQDeqr8SGG7tgdkdjdhbP5c",poolIcon:n.default,fontName:"USDD 2pool",poolTokens:["USDD","USDT"],routeName:"usdd_2pool",stableLp:"TYKoYhjEpqazFLyQzn6BCigLnDL9c8Nhz8",decimals:18,category:g.j.liquidity_2pool},{poolAddress:"TNU9LfegfzLcJo2ZxTQXDYE2uh7JuxZfnP",poolIcon:r.default,fontName:"Old USDD Pool",poolTokens:["USDD","USDC","USDT"],routeName:"usdd_usd_2pool",stableLp:"TXAqvHp8qojeKDkKagGhmB3e9VyEH9qjMj",decimals:18,category:g.j.liquidity_usdd2pool},{poolAddress:"TLZacPrPKfrfbsimu5dDdrgMT16m9cnpL9",poolIcon:p.default,fontName:"Old TUSD Pool",poolTokens:["TUSD","USDC","USDT"],routeName:"tusd_2pool",stableLp:"TVjLZhmYbJ9zJiDL4ti2nWC44149J9toYa",decimals:18,category:g.j.liquidity_tusd2pool},{poolAddress:"TSbahrnT5sJwjCzN6LPa1pE5d9pdVwRQ1E",poolIcon:d.default,fontName:"Old USDJ Pool",poolTokens:["USDJ","USDC","USDT"],routeName:"usdj_2pool",stableLp:"TJxb5j38qc6PexwodjisvRvR7Uo6fJoq9A",decimals:18,category:g.j.liquidity_usdj2pool},{poolAddress:"TGG5AWMNjssDtLgsHg2QSN8CTwVTCHQMF6",poolIcon:l.default,fontName:"Old BUSD Pool",poolTokens:["BUSD","USDC","USDT"],routeName:"busd_2pool",stableLp:"TK5DFyaudUAjKP9iFscf4eNnjUDHSe9umC",decimals:18,category:g.j.liquidity_busd2pool},{poolAddress:"TKcEU8ekq2ZoFzLSGFYCUY6aocJBX9X31b",poolIcon:a.default,fontName:"Old 3pool",poolTokens:["USDJ","TUSD","USDT"],routeName:"3pool",stableLp:"TD3et9gS2pYz46ZC2mkCfYcKQGNwrnBLef",decimals:18,category:g.j.liquidity_old3pool},{poolAddress:"TQx6CdLHqjwVmJ45ecRzodKfVumAsdoRXH",poolIcon:h.default,fontName:"Old USDC",poolTokens:["USDC","USDJ","TUSD","USDT"],routeName:"usdc",stableLp:"TQ4i5sdj1VGYGFcivyqFW9NXqzpaP6X8BA",decimals:18,category:g.j.liquidity_oldusdc},{poolAddress:"TKVsYedAY23WFchBniU7kcx1ybJnmRSbGt",poolIcon:i.default,fontName:"3pool",poolTokens:["USDD","TUSD","USDT"],routeName:"usdd_3pool",stableLp:"TA1TVZdERDRDGi9QXNdLVfPxbymmi8xFyc",decimals:18,category:g.j.liquidity_3pool},{poolAddress:"TAUGwRhmCP518Bm4VBqv7hDun9fg8kYjC4",poolIcon:o.default,fontName:"Old 2pool",poolTokens:["USDD","USDT"],routeName:"usdd_old_2pool",stableLp:"TXcJ6pCEGKeLEYXrVnLhqpCVuKfV6wgsfC",decimals:18,category:g.j.liquidity_old2pool}];j.default,g.j.liquidity_usdttusd,b.default,g.j.liquidity_oldusdc,m.default,g.j.liquidity_oldusdc,u.default,g.j.liquidity_oldusdc,c.default,g.j.liquidity_usdc2pool,n.default,g.j.liquidity_2pool,r.default,g.j.liquidity_usdd2pool,p.default,g.j.liquidity_tusd2pool,d.default,g.j.liquidity_usdj2pool,l.default,g.j.liquidity_busd2pool,a.default,g.j.liquidity_old3pool,h.default,g.j.liquidity_oldusdc,i.default,g.j.liquidity_3pool,o.default,g.j.liquidity_old2pool;let k;k=v,t.a=k},962:function(e,t,s){"use strict";var a=s(1347),o=s(1766),n=s(974),i=(s(1014),s(3));const c={V3:"V3",V2:"V2",V1:"",home:"",Migrate:"Migrate"};t.a=e=>{const{onChange:t,network:s={},version:l="v1",placement:r="bottomRight"}=e,d=s["settingSlippage".concat(c[l])],p=s["settingDeadline".concat(c[l])];return Object(i.jsx)(a.a,{trigger:"click",overlayClassName:"setting_popover",placement:r,content:Object(i.jsx)(n.a,{showType:"popover",slippage:d,deadline:p,onChange:function(e){t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}}),title:"",children:Object(i.jsx)(o.a,{className:"new_setting_icon"})})}},974:function(e,t,s){"use strict";var a=s(1),o=s(11),n=s.n(o),i=s(1761),c=s(17),l=s.n(c),r=s(211),d=s(0),p=s(907),j=s(3);t.a=e=>{const{showType:t="",slippage:s,deadline:o}=e,[c,b]=Object(a.useState)("0.5"),[m,u]=Object(a.useState)("1"),[h,g]=Object(a.useState)("0.5"),[v,k]=Object(a.useState)("1"),[O,x]=Object(a.useState)("");Object(a.useEffect)((()=>{f(s,o)}),[]),Object(a.useEffect)((()=>{(h||v)&&w()}),[h,v]);const f=(e,t)=>{b(e),u(t),g(e),k(t),T()},w=()=>{b(c),u(m),T(),e.onChange&&e.onChange(h,v)},N=e=>{const t=e.target.value,{valid:s,str:a}=Object(d.V)(t,2);s&&g(a)},T=()=>{h&&(Number(h)<.5?x(n.a.get("settings.slippage_info_1")):Number(h)>5&&Number(h)<50?x(n.a.get("settings.slippage_info_2")):Number(h)>=50?x(n.a.get("settings.slippage_info_3")):x(""))};return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:l()({"flex start wrap":""===t}),children:[Object(j.jsx)(r.a,{toolClass:p.setting_wrap,tip:e.slippate_tip||n.a.get("settings.slippage_tip"),children:Object(j.jsx)("span",{className:p.setting_label,children:n.a.get("settings.slippage")})}),Object(j.jsxs)("div",{className:l()(p.setting_btns),children:[Object(j.jsxs)("div",{className:p.setting_btn_wrap,children:[Object(j.jsx)("button",{className:l()("0.1"===h?p.active:""),onClick:()=>N({target:{value:"0.1"}}),children:"0.1%"}),Object(j.jsx)("button",{className:l()("0.5"===h?p.active:""),onClick:()=>N({target:{value:"0.5"}}),children:"0.5%"}),Object(j.jsx)("button",{className:l()("1"===h?p.active:""),onClick:()=>N({target:{value:"1"}}),children:"1%"})]}),Object(j.jsx)(i.a,{className:l()(p.setting_input,p.module_important,["ml-20"]),suffix:"%",value:h,onChange:N,onBlur:()=>{Number(h)>=50?g(h.slice(0,1)):0!==Number(h)||g("0.01")}})]})]}),O?Object(j.jsx)("div",{className:p.info_text,children:O}):null,Object(j.jsxs)("div",{className:l()({"flex start":""===t}),children:[Object(j.jsx)("div",{style:{marginBottom:"popover"===t?"12px":0},children:Object(j.jsx)(r.a,{toolClass:p.setting_wrap,tip:n.a.get("settings.deadline_tip"),children:Object(j.jsx)("span",{className:p.setting_label,children:n.a.get("settings.deadline")})})}),Object(j.jsxs)("div",{className:"flex",children:[Object(j.jsx)(i.a,{className:l()(p.setting_input,p.module_important),value:v,onChange:e=>{const t=e.target.value,{valid:s,str:a}=Object(d.V)(t,0);if(t){if(s){let e=a;Number(a)>1e4&&(e=1e4),k(e)}}else k(t)},onBlur:()=>{let e=Number(v);0===+v&&(e=1),k(e)}}),Object(j.jsx)("div",{className:l()(p.setting_minutes,["ml-10"]),children:n.a.get("settings.deadline_minutes")})]})]})]})}},988:function(e,t,s){},989:function(e,t,s){}}]);