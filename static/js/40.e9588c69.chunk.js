(this["webpackJsonpfront-js"]=this["webpackJsonpfront-js"]||[]).push([[40],{1352:function(e,t,n){"use strict";t.a=n.p+"static/media/white-triangle-down.86bd9763.svg"},1389:function(e,t,n){},1408:function(e,t,n){"use strict";n(299),n(301),n(168),n(302),n(308),n(309),n(303),n(289),n(310),n(297),n(290),n(311),n(298),n(300),n(314),n(315)},1409:function(e,t,n){"use strict";t.a=n.p+"static/media/gear.6b7c6b22.svg"},1410:function(e,t,n){"use strict";t.a=n.p+"static/media/rocket.1cd56501.svg"},1411:function(e,t,n){"use strict";t.a=n.p+"static/media/purple-switch.115b9645.svg"},1658:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(3),o=n(57),s=n(2),r=n.n(s),l=n(6),i=n(127),u=n(649),d=n(45),b=n(5),j=n(21),p=n(1592),v=n(16),x=n.n(v),O=(n(1389),n(1408),n(26)),f=n(1),m=(n(305),n(306),n(312),n(313),n(316),n(307),n(9)),g=["id","symbol","version","token"],h=["id","symbol","version","token"],k=function(){return Object(m.jsxs)("div",{className:"slogan",children:[Object(m.jsx)("div",{className:"title",children:x.a.get("home.section.liquidity_farm")}),Object(m.jsx)("div",{className:"content ".concat("en-US"===window.localStorage.getItem("lang")?" en ":""),children:x.a.get("home.section.featured_pools")})]})},w=function(){return Object(m.jsxs)("div",{className:"token-icons",children:[Object(m.jsx)("img",{style:{marginRight:"-8px"},src:Object(O.c)("default"),alt:"default icon"}),Object(m.jsx)("img",{src:Object(O.c)("default"),alt:"default icon"})]})},y=function(e){try{return n(317)("./".concat(e,".svg")).default}catch(t){return Object(O.c)("default")}},N=function(e){var t=e.id,n=e.version;return Object(m.jsx)("div",{className:"token-icons",children:Object(m.jsx)("img",{src:Object(O.d)(t,n),alt:"".concat(t," icon")})})},_=function(){var e=Object(o.d)((function(){return i.a.pool})),t=Object(o.d)((function(){return i.a.farmStore})),n=Object(o.d)((function(){return i.a.network})),s=r.a.useState({}),l=Object(j.a)(s,2),u=l[0],v=l[1],O=r.a.useState({}),y=Object(j.a)(O,2),_=y[0],C=y[1],D=r.a.useState(!0),S=Object(j.a)(D,2),I=S[0],P=S[1];r.a.useEffect((function(){var o=function(){var o=Object(c.a)(Object(a.a)().mark((function c(){var o,s=arguments;return Object(a.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=s.length>0&&void 0!==s[0]?s[0]:n.stakeVersion,a.prev=1,a.next=4,e.getStakeApyDataNew();case 4:return v(Object(b.a)({},e["stakeData"+o])),a.next=7,t.getFarmStakeApyData();case 7:C(Object(b.a)({},t.farmData));case 8:return a.prev=8,P(!1),a.finish(8);case 11:case"end":return a.stop()}}),c,null,[[1,,8,11]])})));return function(){return o.apply(this,arguments)}}();o()}),[]);var B=function(){var e,t,n=null,a=null;Object.values(_).map((function(e){var t=e.id,c=e.symbol,o=e.version,s=e.token,r=function(e){var t=e.flexApy,n=e.fixApy,a=e.govApy;return{minApy:t,maxApy:Object(f.a)(n).plus(a)}}(Object(d.a)(e,g)).maxApy;"twopoollpNew"===t&&(n={id:t,symbol:c,version:o,maxApy:r,apyText:Object(f.s)(r)+"%",token:s}),"usddusdt"===t&&(a={id:t,symbol:c,version:o,maxApy:r,apyText:Object(f.s)(r)+"%",token:s})}));var c=Object.values(u).map((function(e){var t=e.id,n=e.symbol,a=e.version,c=e.token,o=function(e){var t=e.thisWeekApy,n=e.extraRewardApy,a=Object(f.a)(t),c=a.times(.4),o=Object(f.a)(n),s=c,r=a;return Object(f.a)(n).isNaN()||Object(f.a)(t).isNaN()||(s=o.plus(c),r=o.plus(a)),{minApy:s,maxApy:r}}(Object(d.a)(e,h)).maxApy;return"twopoollpNew"===t||"usddusdt"===t?"":{id:t,symbol:n,version:a,maxApy:o,apyText:Object(f.s)(o)+"%",token:c}})).filter((function(e){var t=e.maxApy,n=e.id;return!!t&&"twopoollpNew"!==n})).sort((function(e,t){return t.maxApy.minus(e.maxApy)})).slice(0,3);return null!==(e=a)&&void 0!==e&&e.maxApy&&c.unshift(a),null!==(t=n)&&void 0!==t&&t.maxApy&&c.unshift(n),Object(m.jsx)("div",{className:"gradient-border-wrapper",children:c&&5===c.length&&c.map((function(e){var t=e.apyText,n=e.symbol,a=e.id,c=e.version,o=e.token;return Object(m.jsxs)("div",{className:"gradient-border"+("twopoollpNew"===a||"usddusdt"===a?" hot":""),children:[Number.isInteger(c)?Object(m.jsxs)("div",{className:"version-corner version"+c,children:["V",c]}):null,Object(m.jsxs)("div",{className:"apy-upper-part",children:[I?Object(m.jsx)(w,{}):Object(m.jsx)(N,{id:a,version:c}),Object(m.jsx)("div",{className:"symbol-text",children:I?null:n})]}),Object(m.jsx)(p.a,{}),Object(m.jsxs)("div",{className:"apy-lower-part",children:[Object(m.jsxs)("div",{className:"apy-up-to-text",children:[Object(m.jsxs)("div",{className:"apy-up-to",children:[x.a.get("home.section.apy_up_to"),Object(m.jsx)("span",{className:"hide-for-mobile",children:":"})]}),Object(m.jsx)("div",{className:"apy-text",children:I?null:t})]}),Object(m.jsx)("a",{className:"apy-btn",href:"/#/stake?search=".concat(o),children:x.a.get("home.section.stake_to_earn")})]})]},a)}))})};return Object(m.jsx)(o.a,{children:function(){return Object(m.jsxs)("div",{className:"apy-section",children:[Object(m.jsx)(k,{}),Object(m.jsx)(B,{})]})}})},C=n(1593),D=n(1594),S=n(1409),I=n(1410),P=function(){var e=window.localStorage.getItem("lang")||x.a.options.currentLocale,t=function(){return Object(m.jsx)("div",{className:"hide-for-pc",children:Object(m.jsxs)("div",{className:"gov",children:[Object(m.jsx)("div",{className:"title",children:x.a.get("home.section.participate_in_governance")}),Object(m.jsx)("div",{className:"box",children:Object(m.jsxs)(C.a,{justify:"space-between",align:"middle",children:[Object(m.jsxs)(D.a,{children:[Object(m.jsx)("div",{className:"content",style:{textAlign:"left"},children:x.a.get("home.section.mining_speed")}),Object(m.jsx)("div",{className:"content",dangerouslySetInnerHTML:{__html:x.a.get("home.section.by_locking_sun")}})]}),Object(m.jsx)(D.a,{children:Object(m.jsxs)(C.a,{justify:"space-between",align:"middle",children:[Object(m.jsx)(D.a,{children:Object(m.jsx)("a",{className:"gov-btn",href:"/?lang=".concat(e,"#/governance"),children:x.a.get("toast.warning_tip_more")})}),Object(m.jsx)(D.a,{children:Object(m.jsx)("img",{src:I.a})})]})})]})})]})})},n=function(){return Object(m.jsx)("div",{className:"hide-for-mobile",children:Object(m.jsxs)("div",{className:"gov",children:[Object(m.jsx)("div",{className:"title",children:x.a.get("home.section.participate_in_governance")}),Object(m.jsxs)("div",{className:"box",children:[Object(m.jsx)("div",{className:"content2",style:{textAlign:"left"},dangerouslySetInnerHTML:{__html:"<div>\n                    <div>\n                      ".concat(x.a.get("home.section.mining_speed"),"\n                    </div>\n                    <div>\n                      ").concat(x.a.get("home.section.by_locking_sun"),"\n                    </div>\n                  </div>")}}),Object(m.jsxs)("div",{className:"gov-more",children:[Object(m.jsx)("img",{src:S.a}),Object(m.jsx)("a",{className:"gov-btn",href:"/?lang=".concat(e,"#/governance"),children:x.a.get("toast.warning_tip_more")}),Object(m.jsx)("img",{src:I.a,width:110})]})]})]})})};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(t,{}),Object(m.jsx)(n,{})]})},B=n(679),A=n.n(B),Y=n(191),H=n(23),T=n(1320),K=n(1308),F=n(29),E=n.n(F),V=n(38),U=n(1411),M=n(1352),L=n(15),R=l.a.pools,z=l.a.usdcPools,J=l.a.poolKeys,W=l.a.usdcPoolKeys,Z=l.a.stablePool,q=l.a.usdcContracts,$=l.a.usddPools,G=l.a.usddContracts,Q=l.a.twoKeyPools,X=l.a.twoKeyPoolContracts,ee=l.a.twoKeyNewPoolContracts,te=(l.a.usdc2Pools,l.a.tusdPools,l.a.usdc2PoolContracts,l.a.tusdPoolContracts,Object(b.a)(Object(b.a)({},$),z)),ne=[].concat(Object(H.a)(W),["usdd"]),ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t={};return e.map((function(e){t[e]=""})),t},ce=function(){var e=null,t=Object(o.d)((function(){return i.a.system})),n=Object(o.d)((function(){return i.a.network})),l=Object(o.d)((function(){return i.a.pool})),u=Object(o.d)((function(){return i.a.usdcPool})),d=Object(o.d)((function(){return i.a.usdc2Pool})),p=Object(o.d)((function(){return i.a.tusdPool})),v=Object(o.d)((function(){return i.a.usddPool})),O=Object(o.d)((function(){return i.a.twoKeyPool})),g=Object(o.d)((function(){return i.a.twoKeyNewPool})),h=ae(),k=ae(W);Object(s.useEffect)((function(){return nt(),e||(e=setInterval(Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$e({rageChange:!0});case 1:case"end":return e.stop()}}),e)}))),n.defaultIntervalSec)),function(){clearInterval(e),tt.cancel()}}),[]);var w=Object(s.useState)("usdt"),N=Object(j.a)(w,2),_=N[0],C=N[1],D=Object(s.useState)(null),S=Object(j.a)(D,2),I=S[0],P=S[1],B=Object(s.useState)("usdj"),A=Object(j.a)(B,2),Y=A[0],H=A[1],F=Object(s.useState)(null),J=Object(j.a)(F,2),ce=J[0],oe=J[1],se=Object(s.useState)("--"),re=Object(j.a)(se,2),le=re[0],ie=re[1],ue=Object(s.useState)(!1),de=Object(j.a)(ue,2),be=de[0],je=de[1],pe=Object(s.useState)(1),ve=Object(j.a)(pe,2),xe=ve[0],Oe=ve[1],fe=Object(s.useState)(!1),me=Object(j.a)(fe,2),ge=(me[0],me[1],Object(s.useState)(!1)),he=Object(j.a)(ge,2),ke=(he[0],he[1],Object(s.useState)(!1)),we=Object(j.a)(ke,2),ye=(we[0],we[1],Object(s.useState)(!1)),Ne=Object(j.a)(ye,2),_e=(Ne[0],Ne[1],Object(s.useState)("old3pool")),Ce=Object(j.a)(_e,2),De=Ce[0],Se=Ce[1],Ie=Object(s.useState)({newPools:z,poolData:{}}),Pe=Object(j.a)(Ie,2),Be=(Pe[0],Pe[1],Object(s.useState)(!1)),Ae=Object(j.a)(Be,2),Ye=Ae[0],He=Ae[1],Te=Object(s.useState)(!1),Ke=Object(j.a)(Te,2),Fe=Ke[0],Ee=Ke[1],Ve=r.a.useRef(null),Ue=I&&""===I.replace(/0/g,"").replace(".",""),Me=ce&&""===ce.replace(/0/g,"").replace(".",""),Le="en-US"===window.localStorage.getItem("lang"),Re=6===(Object(f.K)(_,Y)?Q[Y]:Object(f.M)(_,Y)?$[Y]:z[Y]).decimal,ze=I&&!Ue?Me?"0":Object(f.t)(ce?ce.replace(/,/g,""):0,{miniText:Re?0:1e-6,dp:Re&&Object(f.Y)(ce).lt(1e-6)?0:6,cutZero:!0}):null,Je=function(e){return e.reduce((function(e,t){return E()(e.result.value).div(e.dy_precision).gte(E()(t.result.value).div(t.dy_precision))?e:t}))},We={old3pool:{pools:R,poolData:l.poolData,contract:Z,approveCallback:[["pool/getBalanceInfo"]],exchangeCallback:[["pool/getBalanceInfo"],["pool/getStakeApyData"],["pool/getVolumeData"],["pool/getStatsData"]]},"3pool":{pools:$,poolData:v.poolData,contract:G.stablePool,approveCallback:[["usddPool/getBalanceInfo"]],exchangeCallback:[["usddPool/updateCurrencyData"]]},old2pool:{pools:Q,poolData:O.poolData,contract:X.stablePool,approveCallback:[["twoKeyPool/getBalanceInfo"]],exchangeCallback:[["twoKeyPool/updateCurrencyData"]]},"2pool":{pools:Q,poolData:g.poolData,contract:ee.stablePool,approveCallback:[["twoKeyNewPool/getBalanceInfo"]],exchangeCallback:[["twoKeyNewPool/updateCurrencyData"]]},oldusdcpool:{pools:z,poolData:Object(b.a)(Object(b.a)({},u.poolData),u.poolData1),contract:q.usdcSwap,approveCallback:[["usdcPool/getBalanceInfo"]],exchangeCallback:[["usdcPool/updateCurrencyData"]]}},Ze=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n,c,o,s,r,l,i,u,d,b,j,p,v,x,O,m,g,h,k,w,y,N,C,D,S,I,P,B,A,H,T,K,F,E,V,U,M,R,J=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A=J.length>0&&void 0!==J[0]?J[0]:"old3pool",H=J.length>1&&void 0!==J[1]?J[1]:_,T=J.length>2&&void 0!==J[2]?J[2]:Y,K=J.length>3?J[3]:void 0,e.prev=4,!Object(f.Y)(K).isNaN()){e.next=7;break}return e.abrupt("return");case 7:F=null,E=null,V=null,U=null,M=null,R=null,e.t0=A,e.next="old3pool"===e.t0?16:"3pool"===e.t0?25:"old2pool"===e.t0?34:"2pool"===e.t0?43:"oldusdcpool"===e.t0?53:62;break;case 16:return A="old3pool",V=null===(t=(M=z)[H])||void 0===t?void 0:t.precision,E=null===(n=M[T])||void 0===n?void 0:n.precision,U=null===(c=Object(f.Y)(K))||void 0===c||null===(o=c.times(V))||void 0===o||null===(s=o._toIntegerDown())||void 0===s?void 0:s._toHex(),e.next=23,Object(L.hb)(null===(r=M[H])||void 0===r?void 0:r.index,null===(l=M[T])||void 0===l?void 0:l.index,U);case 23:return F=e.sent,e.abrupt("break",62);case 25:return A="3pool",V=null===(i=(M=$)[H])||void 0===i?void 0:i.precision,E=null===(u=M[T])||void 0===u?void 0:u.precision,U=null===(d=Object(f.Y)(K))||void 0===d||null===(b=d.times(V))||void 0===b||null===(j=b._toIntegerDown())||void 0===j?void 0:j._toHex(),e.next=32,Object(L.O)(null===(p=M[H])||void 0===p?void 0:p.index,null===(v=M[T])||void 0===v?void 0:v.index,U);case 32:return F=e.sent,e.abrupt("break",62);case 34:return A="old2pool",V=null===(x=(M=Q)[H])||void 0===x?void 0:x.precision,E=null===(O=M[T])||void 0===O?void 0:O.precision,U=null===(m=Object(f.Y)(K))||void 0===m||null===(g=m.times(V))||void 0===g||null===(h=g._toIntegerDown())||void 0===h?void 0:h._toHex(),e.next=41,Object(L.N)(M[H].index,M[T].index,U,X.stablePool);case 41:return F=e.sent,e.abrupt("break",62);case 43:return A="2pool",V=null===(k=(M=Q)[H])||void 0===k?void 0:k.precision,E=null===(w=M[T])||void 0===w?void 0:w.precision,U=null===(y=Object(f.Y)(K))||void 0===y||null===(N=y.times(V))||void 0===N||null===(C=N._toIntegerDown())||void 0===C?void 0:C._toHex(),console.log(M[H].index,M[T].index,U,ee.stablePool),e.next=51,Object(L.N)(M[H].index,M[T].index,U,ee.stablePool);case 51:return F=e.sent,e.abrupt("break",62);case 53:return A="oldusdcpool",V=null===(D=(M=z)[H])||void 0===D?void 0:D.precision,E=null===(S=M[T])||void 0===S?void 0:S.precision,U=null===(I=Object(f.Y)(K))||void 0===I||null===(P=I.times(V))||void 0===P||null===(B=P._toIntegerDown())||void 0===B?void 0:B._toHex(),e.next=60,Object(L.hb)(M[H].index,M[T].index,U);case 60:return F=e.sent,e.abrupt("break",62);case 62:return e.abrupt("return",{result:F,dx_precision:V,dy_precision:E,pools:M,type:A,poolData:R});case 65:e.prev=65,e.t1=e.catch(4),console.log("getAllDy error: "+e.t1);case 68:case"end":return e.stop()}}),e,null,[[4,65]])})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n,c,o,s,r,l,i,u=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:_,n=u.length>1&&void 0!==u[1]?u[1]:Y,c=u.length>2?u[2]:void 0,![t,n].includes("usdd")){e.next=14;break}if(![t,n].includes("usdc")){e.next=7;break}e.next=12;break;case 7:if(![t,n].includes("usdt")){e.next=12;break}return e.next=10,Ze("2pool",t,n,c);case 10:return o=e.sent,e.abrupt("return",o);case 12:case 37:case 50:e.next=57;break;case 14:if(![t,n].includes("usdt")){e.next=39;break}if(![t,n].includes("tusd")){e.next=26;break}return e.next=18,Ze("old3pool",t,n,c);case 18:return s=e.sent,e.next=21,Ze("oldusdcpool",t,n,c);case 21:return r=e.sent,l=Je([s,r]),e.abrupt("return",l);case 26:if(![t,n].includes("usdj")){e.next=32;break}return e.next=29,Ze("old3pool",t,n,c);case 29:case 43:case 49:case 56:return e.abrupt("return",e.sent);case 32:if(![t,n].includes("usdc")){e.next=37;break}return e.next=35,Ze("oldusdcpool",t,n,c);case 35:return i=e.sent,e.abrupt("return",i);case 39:if(![t,n].includes("tusd")){e.next=52;break}if(![t,n].includes("usdj")){e.next=46;break}return e.next=43,Ze("old3pool",t,n,c);case 46:if(![t,n].includes("usdc")){e.next=50;break}return e.next=49,Ze("oldusdcpool",t,n,c);case 52:if(![t,n].includes("usdc")){e.next=57;break}if(![t,n].includes("usdj")){e.next=57;break}return e.next=56,Ze("oldusdcpool",t,n,c);case 57:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n,c,o,s,r,l,i,u,d,b,j,p,v,x,O,m,g,h=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:{},n=t.i,c=void 0===n?_:n,o=t.j,s=void 0===o?Y:o,r=t.dx_base,l=void 0===r?I:r,i=t.rageChange,u=void 0!==i&&i,(l=Object(f.Y)(l)).gt(0)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,qe(c,s,l);case 7:if(b=e.sent,j=b.result,p=b.dy_precision,v=b.pools,x=b.type,j.success){e.next=14;break}return e.abrupt("return");case 14:Se(x),oe(Object(f.c)(j.value.div(p)._toFixed(null===(d=v[s])||void 0===d?void 0:d.decimal,1))),u&&(O=j,1===xe?(m=O.value.div(p).div(l),E()(m).gt(0)?ie(m):ie("--")):(g=E()(1).div(O.value.div(p).div(l)._toFixed(4,1)),E()(g).gt(0)?ie(g):ie("--"))),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),console.log("get dy error: ",e.t0);case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){}),[De]);var Ge=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var n,c,o,s,r,l,i,u,d,j,p,v,x,O;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=(n=We[De]).pools,o=n.poolData,s=n.contract,r=n.approveCallback,e.prev=1,be){e.next=6;break}if(!nt()){e.next=6;break}return e.abrupt("return");case 6:if(!be){e.next=8;break}return e.abrupt("return");case 8:if(l=o,i=Object(b.a)({},h),(u=[_,Y].includes("usdc"))&&(i=Object(b.a)({},k)),d=l[_],j=d.allowance,p=d.precision,j=E()(j).div(p),!Object(f.Y)(I).gt(j)||i[_]){e.next=24;break}return O={action:"approve",title:"deposit.approve_token",obj:{value:null===(v=c[_])||void 0===v?void 0:v.symbol},continuous:!0},e.next=18,t.approveToken(null===(x=c[_])||void 0===x?void 0:x.token,s,O,r);case 18:if(!e.sent){e.next=23;break}u?k[_]=2:h[_]=2,e.next=24;break;case 23:return e.abrupt("return");case 24:Qe(),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(1),console.log(e.t0);case 30:case"end":return e.stop()}}),e,null,[[1,27]])})));return function(){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var n,c,o,s,r,i,b,j,x,m,g,h,k,w,y;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(r=We[De]).pools,r.poolData,b=r.contract,r.approveCallback,j=r.exchangeCallback,x=null===(n=i[_])||void 0===n?void 0:n.index,m=null===(c=i[Y])||void 0===c?void 0:c.index,g=Object(f.Y)(I),h=Object(f.Y)(ce),k=null===(o=i[_])||void 0===o?void 0:o.precision,w=null===(s=i[Y])||void 0===s?void 0:s.precision,y={title:"notification.tip1",obj:{fromValue:Object(f.t)(g),fromToken:_.toUpperCase(),toValue:Object(f.t)(h),toToken:Y.toUpperCase()}},e.prev=8,![_,Y].includes("usdc")){e.next=15;break}return e.next=12,t.toUsdcExchange(x,m,g.times(k)._toIntegerDown()._toHex(),h.times(w).times(.995)._toIntegerDown()._toHex(),y,j,b);case 12:e.t0=e.sent,e.next=39;break;case 15:if("old2pool"!==De){e.next=21;break}return e.next=18,t.toExchange(x,m,g.times(k)._toIntegerDown()._toHex(),h.times(w).times(.995)._toIntegerDown()._toHex(),y,j,b);case 18:e.t1=e.sent,e.next=38;break;case 21:if("2pool"!==De){e.next=27;break}return e.next=24,t.toExchange(x,m,g.times(k)._toIntegerDown()._toHex(),h.times(w).times(.995)._toIntegerDown()._toHex(),y,j,b);case 24:e.t2=e.sent,e.next=37;break;case 27:if("3pool"!==De){e.next=33;break}return e.next=30,t.toExchange(x,m,g.times(k)._toIntegerDown()._toHex(),h.times(w).times(.995)._toIntegerDown()._toHex(),y,j,b);case 30:e.t3=e.sent,e.next=36;break;case 33:return e.next=35,t.toExchange(x,m,g.times(k)._toIntegerDown()._toHex(),h.times(w).times(.995)._toIntegerDown()._toHex(),y,j);case 35:e.t3=e.sent;case 36:e.t2=e.t3;case 37:e.t1=e.t2;case 38:e.t0=e.t1;case 39:e.t0&&setTimeout((function(){l.getBalanceInfo(),u.getBalanceInfo(q.usdcSwap),v.getBalanceInfo(),v.getSwapBalance(),O.getBalanceInfo(),O.getSwapBalance(),d.getBalanceInfo(),d.getSwapBalance(),p.getBalanceInfo(),p.getSwapBalance()}),5e3),e.next=46;break;case 43:e.prev=43,e.t4=e.catch(8),console.log("exchange error: ",e.t4);case 46:case"end":return e.stop()}}),e,null,[[8,43]])})));return function(){return e.apply(this,arguments)}}(),Xe=function(){var e,t=We[De],n=t.pools;t.poolData,t.contract,t.approveCallback,t.exchangeCallback;(!Ye&&He(!0),C(Y),H(_),null!==I&&""!==I)&&(P(Object(f.c)(Object(f.Y)(ce)._toFixed(null===(e=n[Y])||void 0===e?void 0:e.decimal),1)),tt({i:Y,j:_,dx_base:ce,rageChange:!0}));Oe(1)},et=function(e){var t=We[De],n=t.pools,a=t.poolData;t.contract,t.approveCallback,t.exchangeCallback;tt.cancel(),Ve.current.focus(),!Ye&&He(!0);var c=n[_],o=c.decimal,s=(c.symbol,Object(f.P)((""+e).replace(/,/g,""),o)),r=s.valid,l=s.str;if(r){if("0"===l)return P("0"),void oe("0");Ue&&oe("0");var i=a[_],u=i.precision,d=i.balance;d=E()(d).div(u),P(Object(f.c)(l)),tt({dx_base:E()(l),rageChange:!0})}},tt=r.a.useMemo((function(){return Object(V.debounce)($e,200,{leading:!1,trailing:!0,maxWait:1e3})}),[xe,_,Y,I]);Object(s.useEffect)((function(){var e="";[_,Y].includes("usdd")?[_,Y].includes("usdc")||[_,Y].includes("usdt")&&(I||ce||(Se("2pool"),e="2pool")):[_,Y].includes("usdt")?[_,Y].includes("usdj")?(Se("old3pool"),e="old3pool"):[_,Y].includes("usdc")&&(I||ce||(Se("oldusdcpool"),e="oldusdcpool")):[_,Y].includes("tusd")?[_,Y].includes("usdj")?(Se("old3pool"),e="old3pool"):[_,Y].includes("usdc")&&(Se("oldusdcpool"),e="oldusdcpool"):[_,Y].includes("usdc")&&[_,Y].includes("usdj")&&(Se("oldusdcpool"),e="oldusdcpool"),Ye&&nt(e)}),[_,Y,I,ce,le]);var nt=function(e){try{var t=We[e||De],a=(t.pools,t.poolData),c=(t.contract,t.approveCallback,t.exchangeCallback,a[_]),o=c.precision,s=c.balance,r=c.symbol;return s=E()(s).div(o),Object(f.Y)(I).lte(0)||Object(f.Y)(I).isNaN()?(je(x.a.get("buysell.enter_amount")),!0):Object(f.Y)(I).gt(s)?(je(x.a.get("error.e2",{token:r})),!0):n.isConnected?(je(!1),!1):(je(x.a.get("buysell.error_msg_3")),!0)}catch(l){console.log("checkInput error: "+l)}},at=function(){var e=Object(c.a)(Object(a.a)().mark((function e(t){var n,c,o,s,r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=(n=We[De]).pools,n.poolData,n.contract,n.approveCallback,n.exchangeCallback,!Ye&&He(!0),C(t),null!==I&&""!==I&&(P(Object(f.c)(Object(f.Y)(I)._toFixed(null===(o=c[t])||void 0===o?void 0:o.decimal),1)),tt({i:t,rageChange:!0}),r=Object(f.Y)(I)._toFixed(null===(s=c[t])||void 0===s?void 0:s.decimal,1),P(Object(f.c)(r)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(e){!Ye&&He(!0),H(e),tt({j:e,rageChange:!0})},ot=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){var t,n,c,o,s,r;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Ye&&He(!0),t=[_,Y],Oe(1!==xe?1:2),E()(le).gt(0)){e.next=7;break}return ie("--"),e.abrupt("return");case 7:return c=(n=We[De]).pools,n.poolData,n.contract,n.approveCallback,n.exchangeCallback,o=c[t[1]].precision,s=Object(f.Y)(I),e.next=12,Ze(De,t[0],t[1],s);case 12:r=e.sent,ie(1!==xe?r.result.value.div(o).div(Object(f.Y)(I)):E()(1).div(r.result.value.div(o).div(Object(f.Y)(I))._toFixed(4,1))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log("changeOrder error: "+e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),st=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var t=We[De],a=(t.pools,t.poolData),c=(t.contract,t.approveCallback,t.exchangeCallback,a[_]),o=a[Y],s=E()(null===c||void 0===c?void 0:c.balance).isNaN()?"--":E()(c.balance).div(c.precision)._toFixed(6,1),r=E()(null===o||void 0===o?void 0:o.balance).isNaN()?"--":E()(o.balance).div(o.precision)._toFixed(6,1);return Object(m.jsxs)("div",{className:"info-row",children:[Object(m.jsx)("div",{className:"from-text",children:e?x.a.get("buysell.from"):x.a.get("buysell.to")}),Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)("span",{className:"balance-text",children:x.a.get("buysell.balance")}),Object(m.jsxs)("span",{className:"balance-value",children:[Object(f.c)(e?s:r)||"--"," ",(e?_:Y).toUpperCase()]}),e&&n.isConnected?Object(m.jsx)("span",{onClick:function(){return et(s)},className:"max-btn ".concat(be?" disabled ":""),children:x.a.get("buysell.max")}):null]})]})}catch(l){console.log(l)}},rt=function(){var e,t,n,a,c="--"===le?"--":le._toFixed(4,1);E()(c).lt(1e-4)?c="<0.0001":isFinite(c)?E()(c).gt(9999999.9999)&&(c=">9999999.9999"):c="--";var o=We[De],s=o.pools;o.poolData,o.contract,o.approveCallback,o.exchangeCallback;return Object(m.jsxs)("div",{className:"swap-rate",children:[x.a.get("buysell.per_token",{amount_1:I&&c||"--",token_1:1===xe?null===(e=s[Y])||void 0===e?void 0:e.symbol:null===(t=s[_])||void 0===t?void 0:t.symbol,token_2:1!==xe?null===(n=s[Y])||void 0===n?void 0:n.symbol:null===(a=s[_])||void 0===a?void 0:a.symbol}),Object(m.jsx)("img",{src:U.a,className:"purple-switch",onClick:ot})]})},lt=function(e,t){return[_,Y].includes(t)||[e,t].includes("usdd")&&[e,t].includes("usdj")||[e,t].includes("usdd")&&[e,t].includes("usdc")||[e,t].includes("usdd")&&[e,t].includes("tusd")};return Object(m.jsx)(o.a,{children:function(){return Object(m.jsx)("div",{className:"gradient-border2",children:Object(m.jsxs)("div",{className:"hero-swap-box-card",children:[Object(m.jsx)("div",{className:"box-header",children:x.a.get("header.swap")}),Object(m.jsxs)("div",{className:"box-body",children:[Object(m.jsx)("span",{className:"swap-box-arrow",onClick:Xe}),Object(m.jsxs)("div",{className:"input-part from-input",children:[st(!0),Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)(T.a,{placeholder:Fe?"":x.a.get("buysell.enter_amount"),className:"from-input ".concat(Le?"en":""),onFocus:function(){return Ee(!0)},onBlur:function(){return!I&&!(null!==I&&void 0!==I&&I.length)&&Ee(!1)},value:I,ref:Ve,onChange:function(e){return et(e.target.value)}}),Object(m.jsx)(K.a,{onChange:at,value:_,suffixIcon:Object(m.jsx)("img",{src:M.a}),children:ne.map((function(e){var t=te[e],n=t.symbol,a=t.id;return Object(m.jsxs)(K.a.Option,{value:a,disabled:lt(Y,a),children:[Object(m.jsx)("img",{src:y(a),alt:a+" icon",className:"token-logo"}),n]},a)}))})]})]}),Object(m.jsxs)("div",{className:"input-part",children:[st(!1),Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)(T.a,{placeholder:"0",style:{caretColor:"transparent"},className:"wallet to-input ".concat(Le?"en":""),value:ze}),Object(m.jsx)(K.a,{onChange:ct,value:Y,suffixIcon:Object(m.jsx)("img",{src:M.a}),children:ne.map((function(e){var t=te[e],n=t.symbol,a=t.id;return Object(m.jsxs)(K.a.Option,{value:a,disabled:lt(_,a),children:[Object(m.jsx)("img",{src:y(a),alt:a+" icon",className:"token-logo"}),n]},a)}))})]})]})]}),Object(m.jsxs)("div",{className:"box-footer",children:[Object(m.jsxs)("div",{className:"footer-info-row",children:[Object(m.jsx)(rt,{}),Object(m.jsxs)("div",{className:"via-pool",children:[Object(m.jsx)("span",{className:"via",children:x.a.get("buysell.via")}),"oldusdcpool"===De?x.a.get("buysell.usdc_pool"):"old2pool"===De?x.a.get("buysell.usdd_pool_new"):"2pool"===De?x.a.get("buysell.2pool"):"3pool"===De?"3pool":"old3pool"===De?"Old 3pool":""]})]}),Object(m.jsx)("div",{className:"submit-btn ".concat(be&&n.isConnected?" disabled ":""),onClick:function(){return n.isConnected?Ge():n.setData({loginModalVisible:!0,loginModalStep:1})},children:n.isConnected?be||x.a.get("buysell.swap"):x.a.get("header.connect_wallet")})]})]})})}})},oe=n.p+"static/media/usdd-link-en.1caeaae4.png",se=n.p+"static/media/usdd-link-zh.2f5d3739.png",re=n.p+"static/media/usdd-link-tc.cfec65c1.png",le=function(e){return e&&Object(m.jsx)(A.a,{end:Number(Object(f.Z)(e,0)),duration:1,prefix:"$ ",separator:","})},ie=function(e){var t=e.children;return Object(m.jsxs)("div",{className:"hero-tvl-card",children:[Object(m.jsx)("div",{className:"bg-tvl-card2"}),Object(m.jsx)("div",{className:"bg-tvl-card1"}),Object(m.jsx)("div",{className:"coin-bg",children:t})]})},ue=function(){var e=window.localStorage.getItem("lang")||x.a.options.currentLocale;return Object(m.jsxs)("div",{className:"hero-intro-card",children:[Object(m.jsx)("div",{className:"title",children:x.a.get("home.section.sun_ecosystem")}),Object(m.jsx)("div",{className:"content",children:x.a.get("banner.desc_home")}),Object(m.jsx)(Y.b,{to:"/usdd_2pool?tab=swap",children:Object(m.jsx)("img",{className:"usdd-link",src:"en-US"===e?oe:"zh-CN"===e?se:re})})]})},de=function(){var e=Object(o.d)((function(){return i.a.pool})),t=Object(o.d)((function(){return i.a.home})),n=r.a.useState({}),s=Object(j.a)(n,2),l=s[0],u=s[1],d=function(){var n=Object(c.a)(Object(a.a)().mark((function n(){var c,o,s,r,l;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getHomePageBottomApy();case 2:return n.next=4,e.getVolumeData();case 4:return n.next=6,t.getAllTvlData();case 6:return c=n.sent,o=c.allSwaps,s=c.miningPools,r=c.stableCoins,l=c.totalTvl,n.abrupt("return",{allSwaps:o,miningPools:s,stableCoins:r,totalTvl:l});case 12:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return r.a.useEffect((function(){d().then(u)}),[]),Object(m.jsx)(o.a,{children:function(){return Object(m.jsxs)(ie,{children:[Object(m.jsx)("div",{className:"title",children:x.a.get("banner.total_value")}),Object(m.jsx)("div",{className:"content",onClick:d,children:le(l.totalTvl)}),[{title:x.a.get("banner.total_value_stable"),content:le(l.stableCoins)},{title:x.a.get("banner.total_value_sunswap"),content:le(l.allSwaps)},{title:x.a.get("banner.total_value_mining"),content:le(l.miningPools)}].map((function(e){var t=e.title,n=e.content;return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"title2",children:t}),Object(m.jsx)("div",{className:"content2",children:n})]},t)}))]})}})},be=function(){return Object(m.jsxs)("div",{className:"hero-bg",children:[Object(m.jsx)("div",{className:"hide-for-pc",children:Object(m.jsxs)("div",{className:"hero",children:[Object(m.jsxs)("div",{className:"left-content",children:[Object(m.jsx)(ue,{}),Object(m.jsx)(de,{})]}),Object(m.jsx)(ce,{})]})}),Object(m.jsx)("div",{className:"hide-for-mobile",children:Object(m.jsxs)("div",{className:"hero",children:[Object(m.jsx)(ue,{}),Object(m.jsx)(ce,{}),Object(m.jsx)(de,{})]})})]})};t.default=function(){var e=null,t=Object(o.d)((function(){return i.a.pool})),n=Object(o.d)((function(){return i.a.usdcPool})),s=Object(o.d)((function(){return i.a.usdc2Pool})),d=Object(o.d)((function(){return i.a.tusdPool})),b=Object(o.d)((function(){return i.a.usddPool})),j=Object(o.d)((function(){return i.a.twoKeyPool})),p=Object(o.d)((function(){return i.a.twoKeyNewPool})),v=Object(o.d)((function(){return i.a.network})),x=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.getHomePageBottomApy(),t.getVolumeData()]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.getBalanceInfo(),n.getBalanceInfo(l.a.usdcContracts.usdcSwap),t.getSwapBalance(),b.getBalanceInfo(),b.getSwapBalance(),j.getBalanceInfo(),j.getSwapBalance(),p.getBalanceInfo(),p.getSwapBalance(),s.getBalanceInfo(),s.getSwapBalance(),d.getBalanceInfo(),d.getSwapBalance()]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.useEffect((function(){return e||(e=setInterval(Object(c.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:case"end":return e.stop()}}),e)}))),v.defaultIntervalSec)),function(){clearInterval(e)}}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)(u.a,{routeName:"home",instantActions:x,mountedActions:O}),Object(m.jsxs)("div",{className:"home-content",children:[Object(m.jsx)(be,{}),Object(m.jsx)(_,{}),Object(m.jsx)(P,{})]})]})}}}]);