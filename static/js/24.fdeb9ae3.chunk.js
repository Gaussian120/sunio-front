(this["webpackJsonpfront-js"]=this["webpackJsonpfront-js"]||[]).push([[24,27,37,39],{1055:function(e,t,a){"use strict";a(1068);var c=a(15),s=a.n(c),n=a(2);t.a=e=>Object(n.jsx)("div",{className:"tempalte-pageTab-nav",children:e.list.map((t=>Object(n.jsx)("div",{className:s()("tempalte-pageTab-nav-item",{"tempalte-pageTab-nav-active":e.activeKey===t.value}),onClick:()=>t.handler(t),children:t.label},t.value)))})},1059:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o}));var c=a(8),s=a.n(c);const n={row:{gutter:[{xs:8,sm:16,md:32},20]},colLeft:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:15}},colRight:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:9}}},l={1:{title:s.a.get("banner.title_deposit"),content:s.a.get("banner.desc_deposit"),tabTitle:s.a.get("header.deposit")},2:{title:s.a.get("banner.title_withdraw"),content:s.a.get("banner.desc_withdraw"),tabTitle:s.a.get("header.withdraw")},3:{title:s.a.get("banner.title_1"),content:s.a.get("banner.desc_1"),tabTitle:s.a.get("header.swap")}},o=[{label:l[1].tabTitle,value:"1"},{label:l[2].tabTitle,value:"2"},{label:l[3].tabTitle,value:"3"}]},1060:function(e,t,a){"use strict";var c=a(15),s=a.n(c),n=a(1082),l=a(2);t.a=e=>{const{checked:t,tokenLogo:a,symbol:c="",onChange:o,id:i=""}=e;return Object(l.jsxs)("div",{className:s()({[n.sun_check_button]:!0,[n.sun_check_active_button]:t}),onClick:()=>{o&&o(!t,i)},children:[a&&Object(l.jsx)("img",{src:a,alt:"",className:"token-logo"}),Object(l.jsx)("span",{children:c})]})}},1061:function(e,t,a){"use strict";var c=a(8),s=a.n(c),n=a(15),l=a.n(n),o=a(1926),i=a(1071),r=a(2);const b=[{key:.2,label:"0.2%"},{key:3,label:"3%"}],j=[{key:.005,label:"0.5%"},{key:.01,label:"1%"}];t.a=e=>{const{slippage:t,customSlippage:a,CUSTOM_SLIPPAGE:c,type:n="withdraw"}=e,d="withdraw"===n?b:j;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"mr-10",children:s.a.get("withdraw.slippage")}),Object(r.jsxs)("div",{className:l()(i.setting_btns),children:[Object(r.jsx)("div",{className:i.setting_btn_wrap,children:d.map((a=>Object(r.jsx)("button",{className:l()(t===a.key?i.active:""),onClick:()=>{return t=a.key,void(e.onChangeSlippage&&e.onChangeSlippage(t));var t},children:a.label})))}),Object(r.jsx)(o.a,{className:l()(i.setting_input,i.module_important,["ml-20"]),suffix:"%",value:a,onFocus:()=>{a||e.onChangeSlippage&&e.onChangeSlippage(c)},onBlur:()=>{a||e.onChangeSlippage&&e.onChangeSlippage(String(d[0].key))},onChange:t=>{e.onChangeCustomSlippage&&e.onChangeCustomSlippage(t.target.value)}})]})]})}},1065:function(e,t,a){"use strict";var c=a(1),s=a(15),n=a.n(s),l=a(1069),o=a(2);const i=e=>{const{title:t,subTitle:a,isRevert:c}=e,s="string"===typeof t;return Object(o.jsxs)("div",{className:l.page_title_wrap,children:[c&&a&&Object(o.jsx)("div",{className:l.page_title_sub,children:a}),t&&Object(o.jsx)("div",{className:n()({[l.page_title]:!0,[l.page_title_revert]:c,[l.page_title_ele]:!s}),children:s?t.split("").map(((e,t)=>Object(o.jsx)("span",{className:l.page_title_ele,children:e},t))):t}),a&&!c&&Object(o.jsx)("div",{className:l.page_title_sub,children:a})]})};t.a=Object(c.memo)(i)},1068:function(e,t,a){},1069:function(e,t,a){e.exports={page_title:"style_page_title__dfZPh",page_title_wrap:"style_page_title_wrap__7dtV_",page_title_ele:"style_page_title_ele__Tktf1",page_title_sub:"style_page_title_sub__1IUsF",page_title_revert:"style_page_title_revert__18HMS"}},1071:function(e,t,a){e.exports={setting_wrap:"style_setting_wrap__L7ld9",setting_label:"style_setting_label__3qQrG",setting_btns:"style_setting_btns__zH_61",setting_btn_wrap:"style_setting_btn_wrap__uxT1B",setting_input:"style_setting_input__kvJzs",active:"style_active__10VTC",module_important:"style_module_important__PuwNO",info_text:"style_info_text__3K73H",setting_minutes:"style_setting_minutes__1mIXw"}},1073:function(e,t,a){},1074:function(e,t,a){"use strict";a(1);var c=a(8),s=a.n(c),n=a(70),l=a(3),o=a(98),i=a(0),r=(a(1075),a(1090)),b=a(1088),j=a(2);const{Fee:d,A:u,ADMIN_FEE:p,poolKeys:O,pools:g}=l.a;t.a=e=>{const t=Object(n.d)((()=>o.a.pool)),a=Object(n.d)((()=>o.a.network)),c=(e,t)=>{const a=Object(i.a)(e).times(t).div(1e18);return a.isNaN()?"--":Object(i.u)(a,2)},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=Object(i.a)(0);for(let c in e){const{userSwapBalance:s,priceKey:n}=e[c],l=t?t[n]:"--";a=a.plus(Object(i.a)(s).times(l))}return Object(i.u)(a)}catch(a){return console.log(a),"--"}},m=O.map((e=>t.poolData[e])).filter((e=>e)),h=t.volData?t.volData["3pvol24Hours"]:"",x="Old 3Pool ".concat(s.a.get("pool.pool2_contract")),f="3SUN ".concat(s.a.get("pool.token_contract2"));return Object(j.jsx)(n.a,{children:()=>Object(j.jsxs)("div",{children:[Object(j.jsx)(r.a,{poolTokens:m,totalSwapBalance:t.totalSwapBalance,adminFee:p,fee:d,virtualPrice:t.virtualPrice,dailyVol:h,poolContract:l.a.stablePool,poolName:x,lpTokenAddress:l.a.stableLp,lpTokenName:f,aValue:u}),a.isConnected&&Object(i.a)(t.sharePer).gt(0)&&Object(j.jsx)(b.a,{sharePer:t.sharePer,usdBalance:g(t.poolData,t.volData),avgUsdBalance:c(t.userLpBalance,t.virtualPrice),userTotalBalance:t.userTotalBalance,myPoolTokens:m})]})})}},1076:function(e,t,a){},1077:function(e,t,a){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAAA/JJREFUWEfVWctqFUEQPeX7/X5tXIkIouBa/AkxgkYXgrhwIQiufaCuxYXoQsSNGkHFnxDXgiKIuHJlTIwmMYmJ8ci5Voe+k3tneuaOIVMwhCTT3aerTlWdnjb0YCQNwHIAKwEsA7AEwFL/qZn/AJj1n78B/AIwY2asuqwWLG0kBXCVPwJZxrSJKT1mpg2UslKASa4AsMG9GhaSBwVgJuNR/T/2uCKhTSoCwTRm1MymU1EnASapcK/3BUOoJ9xLWjTZSAbgayLqaMNjZiba5FohYA//ZgB6V9z7qcfMFNrKRlLeX+tPmHukiCa5gElqQlFAJi8ofKJAbUZSFNEaootMa8gpHa0rYJIbAShssnE9vWR33g692qwDoEc2YWY/Oo3pCDjj2e9mNlmbS3MmIrkawKY8T88D7Jzd4oMWDGzYRwb0tyyn2wB7NdjmCSYKjC2EZ7NrkFRFEj2U5ENx9cgCVjUQ+ZVg8m6pjkTyMIA9AAZSSlQ3ZzinRY0WFjMbCe/OAfamsNV39bVMNSCp5LwN4JxPfMPMrvQSHa8e2z3aw6G5xIBFBRX1UlQgeRDAUwD7I4A9A9ZcETWkP4b0txbgKNHUDOTdpKZA8jyAW1EN1XQDAM7WUVm8ucjLajKtBAyAxReVlCTvkhTXHwA4GnlVxf6CmT3shQo5CdiqzeYE3+G7UEbmagOSRwA8AbA7mvwNgBNm9qFOsB590VR0VdQHBVgKTMk2a2aDBR3pMoCrGcWljnTPtW4VvB/lgLyKRFIOVQsfFuBQ8yRoRnNKzTEAz6sgShhz2swe56wtrSFdMy7AofbmdjWSfQCeJSxe5ZUiwKFlTwmw6CBazGuDHRJAoA9UQZQzJoUSOuFILkwLcOCHylmhgK4ZbNJ0LhlU3mYFeJfX4y+p9TdplRpf8nq8Uy2jkYAbR4mkpPMG0w9gb43R1lTvzCy3XEbSoZV0qWXtFIBHNYMN0x3PAx2J+lZZS20c/xNwn5m9SG0cSa25Bkqolkrd6XAbTCfwa2Z2s0AStLVmKbZk8VOFEiT3uWY+FI3/DKDfzF4VgG0XP66IwpE+SV6WAU3yDIA7rgXC0JeumeeOPjl0CJT9Jy8dcGh9pQR8gWfU/6WZT0bv6ax4yczupmy6q4B30JWOSDmeuQ5AcjTYe9fMb1PAOqbg3fYjkv8zJJ9OyqUOoZ0AkIwB3wdw0cz0ATHJCg+hDrqnY36MxAWL6PDJzF4nofSXko75DlifVZvzISWTgPp1cX+qCmFr1MfACHRzPrd28fTi/qAdgVZTacaVQQS6OZcymdrajGuvbNH3E4C0guhS5WJRF4qTRTdGnZpN4bVXgcBZ8Kvbv7gRNO3rhp7CAAAAAElFTkSuQmCC"},1078:function(e,t,a){"use strict";var c=a(56);t.a=e=>{let{childPage:t}=e;const a=["deposit","withdraw","swap"],s=function(e,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=a[e-1],o=c.g[s?"".concat(s,"_").concat(l):l];o&&Object(c.a)({action:o(t),event_category:t,...n})};return{tabChangeLog:e=>s(e,"tab"),tabSubmitLog:(e,t)=>s(e,null,t)}}},1079:function(e,t,a){"use strict";var c=a(1),s=a(0),n=a(2);t.a=e=>{let{name:t,cb:a,valueFlag:l}=e;return Object(c.useEffect)((()=>{const e=Object(s.G)(t),c="withdraw"===e?"2":"1";if(console.log("====cbIndex===",c),e){a&&a(l?{value:c}:c)}}),[]),Object(n.jsx)(n.Fragment,{})}},1082:function(e,t,a){e.exports={sun_check_button:"style_sun_check_button__5diEB",sun_check_active_button:"style_sun_check_active_button__28IzL"}},1096:function(e,t,a){"use strict"},1104:function(e,t,a){},1108:function(e,t,a){"use strict";var c=a(1),s=a(8),n=a.n(s),l=a(70),o=a(1943),i=a(1945),r=a(1513),b=a(1039),j=a(188),d=a(268),u=a(17),p=a(0),O=a(3),g=a(98),m=a(1054),h=a(1064),x=(a(1072),a(1074)),f=a(324),v=a(1063),w=a(1056),y=a(5),_=a(1055),S=a(1059),N=a(1058),k=a(1067),C=a(322),L=a(2);const{pools:D,poolKeys:A,ALL_FEE:P,defaultSlippage:I,stablePool:T}=O.a;t.a=e=>{const{pageList:t,tabPaneKey:a}=e,s=Object(l.d)((()=>g.a.network)),O=Object(l.d)((()=>g.a.system)),U=Object(l.d)((()=>g.a.pool)),[B,F]=Object(c.useState)((()=>{const e={};return A.map((t=>{e[t]=""})),e})()),[V,E]=Object(c.useState)(!1),[K,H]=Object(c.useState)(!0),[M,q]=Object(c.useState)(!1),[R,J]=Object(c.useState)("--"),[Q,Z]=Object(c.useState)("--"),[G,W]=Object(c.useState)(!1),[z,X]=Object(c.useState)(!1),[Y,$]=Object(c.useState)(!1);let ee=null;Object(c.useEffect)((async()=>{await Promise.all([oe(B),ae()]),G&&ne(B)}),[B]);const te=async t=>{try{const a=[];e.onSubmit&&e.onSubmit(),A.map((e=>{a.push({...U.poolData[e],inputValue:t[e]?Object(p.fb)(t[e]).times(D[e].precision):Object(p.a)(0)})}));for(let e=0;e<a.length;e++){const{allowance:t=Object(p.a)(0),inputValue:c,token:s,symbol:n,approveStatus:l,id:o}=a[e];if(Object(p.a)(t).lt(c)&&!l){if(!await O.approveToken(s,T,{title:"deposit.approve_token",obj:{value:n},continuous:!0},[["pool/getBalanceInfo"]]))return;U.poolData[o].approveStatus=2}}const c=a.sort(((e,t)=>e.index-t.index)),s=c.length,n=c.map((e=>e.inputValue._toIntegerDown()._toHex()))||[];let l=null;if(U.lpTotalSupply.lte(0)&&await U.getUserLp(),U.lpTotalSupply.lte(0))l=Object(p.a)(1);else{const e=await Object(y.d)(n);if(!e.success)return;l=e.value}l=l.times(Object(p.a)(1).minus(Object(p.a)(P).times(s).div(Object(p.a)(4).times(s-1)).div(1e10)));const o=l.times(1-I)._toFixed(0,1),i={title:"actions.addLiq",obj:{detail:Object(p.A)(t)}};await O.addLiquidity(n,o,i,[["pool/updateCurrencyData"]])&&je()}catch(a){console.log("deposit err: ",a)}},ae=async()=>{const e=[];for(let a in B){const{index:t,precision:c}=D[a],s=B[a].replace(/,/g,"");e[t]=Object(p.a)(s).isNaN()?0:Object(p.a)(s).times(c)._toIntegerDown()._toHex()}let t=null;if(U.lpTotalSupply.lte(0)&&await U.getUserLp(),U.lpTotalSupply.lte(0))t=Object(p.a)(1);else{const a=await Object(y.d)(e);if(!a.success)return;t=a.value.div(1e18)}Z(t)},ce=async()=>{await Promise.all([U.getSwapBalance(),U.getVirtualPrice(),U.getVolData()])},se=async()=>{await Promise.all([U.getUserLp(),U.getBalanceInfo()]);const e={};A.map((t=>{const{precision:a,balance:c,decimal:s}=U.poolData[t];e[t]=Object(p.c)(Object(p.a)(c).div(a)._toFixed(s,1))})),F(e),!G&&W(!0),ee||(ee=setInterval((async()=>{ce(),U.getUserLp()}),s.defaultIntervalSec))};Object(c.useEffect)((async()=>(await Promise.all([se(),ce()]),()=>{clearInterval(ee)})),[s.defaultAccount]);const ne=e=>{const t=Object.keys(e),a=t.length;if(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e),a=t.filter((t=>Object(p.fb)(e[t]).eq(0)||!e[t]));return t.length===a.length}(e))return q(n.a.get("error.e1")),!0;for(let c=0;c<a;c++){const a=t[c],s=e[a];if(!s&&(V||K))return q(n.a.get("error.e1")),!0;const{balance:l,precision:o,symbol:i}=U.poolData[a];if(Object(p.a)(l).div(o).lt(Object(p.fb)(s)))return q(n.a.get("error.e2",{token:i})),!0}return q(!1),!1},le=e=>{$(e.target.checked)},oe=async e=>{const t=await U.calcInclPrice(e);J(t)},ie=(e,t)=>{const a=t,c={};c[e]=Object(p.c)(String(a).replace(/,/g,""));const{precision:s,swapBalance:n,balance:l}=U.poolData[e],o=Object(p.fb)(a).div(n).isNaN()?Object(p.a)(0):Object(p.fb)(a).div(n);A.filter((t=>t!==e)).map((e=>{const{balance:t=Object(p.a)(0),swapBalance:a,precision:s,decimal:n}=U.poolData[e];c[e]=Object(p.c)(o.times(a)._toFixed(n,1)),t.div(s).lt(Object(p.fb)(c[e]))&&(c[e]=Object(p.c)(t.div(s)._toFixed(n,1)))})),F(c)},re=async e=>{try{const t=e.target.checked;E(t),K&&H(!t),t&&ie(A[0],B[A[0]])}catch(t){console.log(t)}},be=async e=>{try{const t=e.target.checked;H(t),V&&E(!t);const a={};A.map((e=>{const{balance:t,precision:c,decimal:s}=U.poolData[e];a[e]=Object(p.a)(t).isNaN()?0:Object(p.c)(t.div(c)._toFixed(s,1))})),F(a)}catch(t){console.log(t)}},je=()=>{$(!1),X(!1)},de=Object(C.b)();return Object(L.jsx)(l.a,{children:()=>Object(L.jsxs)(o.a,{...S.a.row,children:[Object(L.jsx)(i.a,{...S.a.colLeft,children:Object(L.jsxs)("div",{className:"pool-deposit",children:[Object(L.jsx)(_.a,{list:t,activeKey:a[0]}),e.isSinglePage?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(m.a,{routeName:"3pool/deposit",mountedActions:se,instantActions:ce}),Object(L.jsx)(h.a,{title:"3pool "+n.a.get("banner.title_deposit"),desc:n.a.get("banner.desc_deposit")}),Object(L.jsx)(v.a,{})]}):null,s.isConnected?Object(L.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(L.jsxs)("div",{className:"add-liq",children:[Object(L.jsxs)("fieldset",{className:"currencies",children:[Object(L.jsx)("legend",{children:n.a.get("deposit.currencies")}),Object(L.jsx)("ul",{children:A.map((e=>{let{symbol:t="",balance:a="--",precision:c,decimal:s}=U.poolData[e];return a=Object(p.a)(a).div(c),Object(L.jsxs)("li",{children:[Object(L.jsxs)("div",{className:"cur-label",children:[Object(L.jsxs)("span",{className:"icon",children:[Object(L.jsx)("img",{src:u.a[e]?u.a[e]:d.default,alt:"",className:"token-logo"})," ",t]}),Object(L.jsx)("span",{className:"token-max",children:n.a.getHTML("deposit.token_max",{balance:Object(p.u)(a)})})]}),Object(L.jsx)(k.a,{onMaxClick:()=>{((e,t,a)=>{if(Object(p.a)(t).isNaN())return;const c=Object(p.a)(t)._toFixed(a,1);F({...B,[e]:Object(p.c)(c)}),V&&ie(e,c)})(e,a,s)},value:B[e],onChange:t=>((e,t)=>{K&&H(!1);const{decimal:a}=D[t],{valid:c,str:s}=Object(p.V)((""+e.target.value).replace(/,/g,""),a);c&&(F({...B,[t]:Object(p.c)(s)}),V&&ie(t,s))})(t,e)})]},e)}))})]}),!Object(p.a)(R).isNaN()&&Object(p.ab)(R,!0),Object(L.jsxs)("div",{className:"deposit-check",children:[Object(L.jsx)(r.a,{checked:V,onChange:re,children:n.a.get("deposit.ch1")}),Object(L.jsx)("br",{}),Object(L.jsx)(r.a,{checked:K,onChange:be,children:n.a.get("deposit.ch2")})]}),M?Object(L.jsx)(w.a,{styleName:"mt-40",type:"single",disabled:!0,info:n.a.get("deposit.action")}):Object(L.jsx)(w.a,{styleName:"mt-40",type:"single",info:de?n.a.get("not_available"):n.a.get("deposit.action"),onClick:()=>(async e=>{try{if(!M&&ne(e))return;if(M)return;if(Object(p.a)(R).abs().gt(10))return X(!0);await te(e)}catch(t){console.log(t)}})(B),disabled:de}),M&&Object(L.jsx)("div",{className:"error-content mt-12",children:Object(L.jsx)("div",{className:"error-tip",children:M})}),Object(p.a)(Q).gt(0)&&Object(L.jsxs)("div",{className:"error-content mt-12",children:[Object(L.jsxs)("div",{className:"error-tip",children:[n.a.getHTML("deposit.swap_detail",{value:Object(p.u)(Q,2),symbol:"Old 3pool LP"})," "]}),Object(L.jsx)("div",{className:"error-tip",children:n.a.get("deposit.exchange_rate",{value:Object(p.u)(U.virtualPrice,6),symbol:"Old 3pool LP"})})]})]})}):Object(L.jsx)(N.a,{}),Object(L.jsx)(f.a,{}),Object(L.jsx)(b.a,{title:n.a.get("deposit.high_slippage_title"),open:z,closable:!0,icon:null,onCancel:je,footer:null,width:400,className:"common-modal common-bg slippage-modal",children:Object(L.jsxs)("div",{className:"center",children:[Object(L.jsxs)("div",{className:"common-err-bg",children:[Object(L.jsx)("div",{children:n.a.get("deposit.high_tip1")}),Object(L.jsx)("div",{children:n.a.get("deposit.high_tip2",{value:Object(p.u)(Object(p.a)(R).abs(),3)})})]}),Object(L.jsx)(r.a,{checked:Y,onChange:le,children:n.a.get("deposit.confirm_slippage",{value:Object(p.u)(Object(p.a)(R).abs(),3)})}),Object(L.jsx)("br",{}),Object(L.jsxs)("div",{className:"btns flex",children:[Object(L.jsx)(j.a,{onClick:()=>X(!1),type:"primary",children:n.a.get("cancel")}),Object(L.jsx)(j.a,{onClick:()=>te(B),disabled:!Y,children:n.a.get("deposit.anyway")})]})]})})]})}),Object(L.jsx)(i.a,{...S.a.colRight,children:Object(L.jsx)(x.a,{className:s.isConnected?null:"window-for-tabs-pane"})})]})})}},1110:function(e,t,a){"use strict";var c=a(1),s=a(8),n=a.n(s),l=a(1943),o=a(1945),i=a(329),r=a(1037),b=a(268),j=a(70),d=a(98),u=a(17),p=a(3),O=a(5),g=a(0),m=a(1074),h=a(1054),x=a(1064),f=(a(1072),a(1063)),v=(a(34),a(1060)),w=a(1056),y=a(1061),_=a(1059),S=a(1055),N=a(1058),k=a(1067),C=a(2);const{pools:L,poolKeys:D,stableLp:A,ALL_FEE:P,stablePool:I,tokens:T}=p.a,U="---",B="CUSTOM",F=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t={};return D.map((a=>{t[a]=e})),t};t.a=e=>{const{pageList:t,tabPaneKey:a}=e,[s=F("--"),p]=Object(c.useState)(),[V,E]=Object(c.useState)("100.00"),[K,H]=Object(c.useState)(.2),[M,q]=Object(c.useState)(""),[R,J]=Object(c.useState)(!0),[Q,Z]=Object(c.useState)(!1),[G,W]=Object(c.useState)("--"),[z=F(!1),X]=Object(c.useState)(),[Y,$]=Object(c.useState)(!1),[ee,te]=Object(c.useState)(!1),ae=Object(j.d)((()=>d.a.system)),ce=Object(j.d)((()=>d.a.pool)),se=Object(j.d)((()=>d.a.network));let ne=null;Object(c.useEffect)((async()=>{ee&&le()}),[s,V,K,M,z]),Object(c.useEffect)((()=>{ge(s,Q)}),[s]);const le=()=>V!==U&&Object(g.fb)(V).gt(100)?($(n.a.get("error.e3")),!0):(()=>{for(let e in s)if(Object(g.fb)(s[e]).gt(0)||"--"===s[e])return!1;return!0})()?($(n.a.get("error.e4")),!0):K===B&&(be()||V===U)&&(Object(g.a)(M).lt(.1)||Object(g.a)(M).gt(50)||Object(g.a)(M).isNaN())?($(n.a.get("error.e5")),!0):($(!1),!1),oe=async(e,t)=>{try{const a=e.length,c=e.map((e=>e.inputValue.isNaN()?0:e.inputValue._toIntegerDown()._toHex()))||[],n=await Object(O.d)(c,!1);if(!n.success)return;let l=n.value.times(Object(g.a)(1).plus(Object(g.a)(P).times(a).div(4*(a-1))));const o=Object(g.a)(100).plus(t).div(100);if(l=l.times(o)._toIntegerDown(),R&&Object(g.a)(ce.userLpAllowance).lt(l)){if(!await ae.approveToken(A,I,{title:"deposit.approve_token",obj:{value:T.thrpoollp.symbol},continuous:!0},[["pool/getUserLp"]]))return;J(!1)}const i=l._toHex(),r={title:"actions.remove",obj:{detail:Object(g.A)(s)}};await ae.removeLiqImBalance(c,i,r,[["pool/updateCurrencyData"]])}catch(a){console.log(a)}},ie=async(e,t)=>{try{const a=await je(t,e,Object(g.fb)(V));if(!a)return;const{userLpBalance:c,lpTotalSupply:n,balances:l,userLpAllowance:o,minAmounts:i}=a,r=Object(g.fb)(V).div(100).times(c)._toIntegerDown();if(R&&Object(g.a)(o).lt(r._toIntegerDown())){if(!await ae.approveToken(A,I,{title:"deposit.approve_token",obj:{value:T.thrpoollp.symbol},continuous:!0},[["pool/getUserLp"]]))return;J(!1)}const b={title:"actions.remove",obj:{detail:Object(g.A)(s)}},j=r._toHex();await ae.removeLiquidity(j,i,b,[["pool/updateCurrencyData"]])}catch(a){console.log(a)}},re=async(e,t,a)=>{try{const c=await Object(O.qb)(t,e);if(!c.success)return;const{userLpBalance:n,userLpAllowance:l}=c,o=Object(g.fb)(V).div(100).times(n)._toIntegerDown();if(R&&Object(g.a)(l).lt(o._toIntegerDown())){if(!await ae.approveToken(A,I,{title:"deposit.approve_token",obj:{value:T.thrpoollp.symbol},continuous:!0},[["pool/getUserLp"]]))return;J(!1)}const i=o._toHex();let r=!1;for(let e in z)!0===z[e]&&(r=L[e].index);const b=await Object(O.p)(i,r);if(!b.success)return;const j=b.value,d=e.length,u=j.times(Object(g.a)(1).minus(Object(g.a)(P).times(d).div(4*(d-1)).div(1e10))),p=Object(g.a)(100).div(Object(g.a)(100).plus(a)),m=u.times(p)._toIntegerDown()._toHex(),h={title:"actions.remove",obj:{detail:Object(g.A)(s)}};await ae.removeLiqOneCoin(i,r,m,h,[["pool/updateCurrencyData"]])}catch(c){console.log(c)}},be=()=>{for(let e in z)if(z[e])return e;return!1},je=async function(e,t,a){let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{const s=await Object(O.qb)(e,t);if(!s.success)return;const{userLpBalance:n,lpTotalSupply:l,balances:o,userLpAllowance:i}=s,r=[],b={};return t.map((e=>{const{index:t,id:s,decimal:i,precision:j}=e;let d=Object(g.fb)(a).div(100).times(o[t]);c||(d=Object(g.a)(.98).times(d)),r[t]=d.times(n).div(l)._toIntegerDown()._toHex(),b[s]=Object(g.c)(d.times(n).div(l).div(j)._toFixed(i,1))})),{userLpBalance:n,lpTotalSupply:l,balances:o,userLpAllowance:i,minAmounts:r,amountsStr:b}}catch(s){console.log(s)}},de=async(e,t)=>{try{await ce.getUserLp();const{userLpBalance:a}=ce,{precision:c,decimal:s}=L[e],n=Object(g.fb)(t).div(100).times(a)._toIntegerDown(),l=L[e].index,o=n._toHex(),i=await Object(O.p)(o,l);if(!i.success)return!1;const r=i.value;return Object(g.a)(r).div(c)._toFixed(s,1)}catch(a){console.log(a)}},ue=()=>{ce.getSwapBalance(),ce.getVirtualPrice(),ce.getVolData()},pe=async()=>{await Promise.all([ce.getUserLp(),ce.getBalanceInfo()]);const e={};D.map((t=>{const{userSwapBalance:a,decimal:c}=ce.poolData[t];e[t]=Object(g.c)(Object(g.a)(a)._toFixed(c,1))})),p(e),ne||(ne=setInterval((async()=>{ue(),await ce.getUserLp()}),se.defaultIntervalSec))};Object(c.useEffect)((()=>(pe(),ue(),()=>{clearInterval(ne)})),[]);const Oe=async(e,t)=>{!ee&&te(!0);let a=Object(g.fb)(V);const c={},n={};if(e){Z(!0);for(let e in z)e!==t&&(c[e]=!1,n[e]=0);X({...z,...c,[t]:e}),(V===U||Object(g.fb)(V).lte(0))&&(a="100.00",E(a)),Object(g.a)(a).gt(100)&&(a=100);const l=await de(t,a);l&&p({...s,...n,[t]:Object(g.c)(l)})}else E(U),Z(!1),X({...z,[t]:e})},ge=async(e,t)=>{const a=await ce.calcInclPrice(e,!1,t);W(a)},me=async e=>{var t;!ee&&te(!0);let a=e.target.value,c=a.split(".");if((null===(t=c[1])||void 0===t?void 0:t.length)>2&&(a="".concat(c[0]+"."+c[1].substr(0,2))),Object(g.a)(a).gt(100))return;const{valid:n,str:l}=Object(g.V)(a,10);if(V===U)return(()=>{const e={},t={};D.map((a=>{e[a]=0,t[0]=!1})),p(e),X(z),E(0)})();if(""===a)return E(""),(()=>{const e={};D.map((t=>{e[t]=0})),p(e)})();if(n){E(Object(g.c)(l));const t=Object(g.a)(l).gt(100)?Object(g.a)(100):Object(g.a)(l);if(t.isNaN())return;if(!se.defaultAccount)return;const c=se.defaultAccount,n=be();if(n){const e=await de(n,t);return e&&p({...s,[n]:Object(g.c)(e)})}if(l!==U){const t=[];D.map((e=>{t.push({...L[e]})}));const s=t.sort(((e,t)=>e.index-t.index)),n=await je(c,s,l,!0);if(a===e.target.value){const{amountsStr:e={}}=n;n&&p(e)}}}},he=e=>{!ee&&te(!0),H(e),e!==U&&q("")},xe=e=>{const{valid:t,str:a}=Object(g.V)(e,10);if(t)if(""===a)q("");else if(Object(g.a)(a).lte(100)){var c;let e=a,t=a.split(".");(null===(c=t[1])||void 0===c?void 0:c.length)>2&&(e="".concat(t[0]+"."+t[1].substr(0,2))),q(e)}},fe=e=>be()||V===U?Object(C.jsx)("div",{className:"flex start mt-20",children:Object(C.jsx)(y.a,{slippage:e,customSlippage:M,CUSTOM_SLIPPAGE:B,onChangeSlippage:he,onChangeCustomSlippage:xe})}):Object(C.jsx)(C.Fragment,{});return Object(C.jsx)(j.a,{children:()=>Object(C.jsxs)(l.a,{..._.a.row,children:[Object(C.jsxs)(o.a,{..._.a.colLeft,children:[Object(C.jsx)(S.a,{list:t,activeKey:a[0]}),Object(C.jsxs)("div",{className:"pool-deposit",children:[e.isSinglePage?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(h.a,{routeName:"3pool/withdraw",mountedActions:pe,instantActions:ue}),Object(C.jsx)(x.a,{title:"3pool "+n.a.get("banner.title_withdraw"),desc:n.a.get("banner.desc_withdraw")}),Object(C.jsx)(f.a,{})]}):null,se.isConnected?Object(C.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(C.jsxs)("div",{className:"add-liq withdraw-liq",children:[Object(C.jsxs)("div",{className:"flex",children:[n.a.get("withdraw.share_of_liq"),Object(C.jsx)(k.a,{className:"flex-1 ml-20",showMax:!1,placeholder:"100.00",value:V,onChange:me})]}),Object(C.jsxs)("fieldset",{className:"currencies mt-35",children:[Object(C.jsx)("legend",{children:n.a.get("deposit.currencies")}),Object(C.jsx)("ul",{children:D.map((e=>{const t=L[e],{symbol:a=""}=t;return Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{className:"cur-label",children:Object(C.jsxs)("span",{className:"icon",children:[Object(C.jsx)("img",{src:u.a[e]?u.a[e]:b.default,alt:"",className:"token-logo"}),a]})}),Object(C.jsx)(k.a,{showMax:!1,value:s[e],onChange:t=>{(async(e,t)=>{!ee&&te(!0);const{decimal:a}=L[t],{valid:c,str:n}=Object(g.V)((""+e.target.value).replace(/,/g,""),a);c&&p({...s,[t]:Object(g.c)(n)}),E(U),Z(!1);const l={};for(let s in z)l[s]=!1;X(l)})(t,e)}})]},e)}))})]}),Object(g.ab)(G),Object(C.jsxs)("fieldset",{children:[Object(C.jsxs)("legend",{className:"flex aic jcs pt20",children:[Object(C.jsx)("span",{className:"mr-10",children:n.a.get("withdraw.withdraw_text")}),Object(C.jsx)(i.a,{title:n.a.get("withdraw.tip"),children:Object(C.jsx)(r.a,{})})]}),Object(C.jsx)("div",{className:"withdraw-one",children:D.map((e=>{const{symbol:t=""}=L[e];return Object(C.jsx)(v.a,{id:e,checked:z[e],tokenLogo:u.a[e]?u.a[e]:b.default,symbol:t,onChange:Oe})}))})]}),fe(K),Y?Object(C.jsx)(w.a,{styleName:"mt-40",type:"single",disabled:!0,info:n.a.get("withdraw.action")}):Object(C.jsx)(w.a,{styleName:"mt-40",type:"single",info:n.a.get("withdraw.action"),onClick:()=>(async t=>{try{if(!se.defaultAccount)return;if(!ee&&te(!0),!Y&&le(t))return;if(Y)return;const a=se.defaultAccount,c=[];D.map((e=>{c.push({...L[e],inputValue:Object(g.fb)(t[e]).times(L[e].precision)})}));const s=c.sort(((e,t)=>e.index-t.index)),n=K===B?M:K;return e.onSubmit&&e.onSubmit(),Q?await re(s,a,n):V!==U?await ie(s,a):await oe(s,n)}catch(a){console.log(a)}})(s),disabled:Y}),Y&&Object(C.jsx)("div",{className:"error-content mt-12",children:Object(C.jsx)("div",{className:"error-tip",children:Y})})]})}):Object(C.jsx)(N.a,{})]})]}),Object(C.jsx)(o.a,{..._.a.colRight,children:Object(C.jsx)(m.a,{className:se.isConnected?null:"window-for-tabs-pane"})})]})})}},1121:function(e,t,a){"use strict";a.r(t),a.d(t,"renderTab",(function(){return F})),a.d(t,"usePoolTab",(function(){return H}));var c=a(1943),s=a(1945),n=a(1969),l=a(70),o=a(1),i=a.n(o),r=a(8),b=a.n(r),j=(a(1073),a(1076),a(98)),d=a(1054),u=(a(1927),a(1926)),p=(a(1509),a.p,a(268)),O=a(1077),g=a(3),m=a(5),h=a(17),x=a(0),f=a(1060),v=a(1061),w=a(1056),y=a(270),_=a(2);function S(e){const[t,a]=Object(o.useState)(2),[c,s]=Object(o.useState)(1),[n,i]=Object(o.useState)(0),[r,d]=Object(o.useState)(1),[S,N]=Object(o.useState)(-1),[k,C]=Object(o.useState)(1),[L,D]=Object(o.useState)(.005),[A,P]=Object(o.useState)(""),[I,T]=Object(o.useState)(!0),[U,B]=Object(o.useState)(""),[F,V]=Object(o.useState)(!1),{pools:E,poolIndex:K,stablePool:H,poolKeys:M}=g.a,q=Object(l.d)((()=>j.a.network)),R=Object(l.d)((()=>j.a.system)),J=Object(l.d)((()=>j.a.pool)),[Q,Z]=Object(o.useState)(!1);Object(o.useEffect)((()=>{z({i:t,j:n,dx:c})}),[]);const G=()=>{!Q&&Z(!0);let e=t,c=n,l=r;e!==c&&(a(c),i(e),s(l),z({i:c,j:e,dx:l,notChangeRate:!0}),X({no:1,i:c,j:e,dx:l}))},W=e=>{let{...t}=e;V(!F),X({...t,exchangeFlags:!F})},z=async e=>{let{...a}=e;try{let e=void 0===a.i?t:a.i,s=void 0===a.j?n:a.j,l=void 0===a.dx?Object(x.fb)(c):Object(x.fb)(a.dx);if(!Object(x.a)(l).gt(0))return void d(0);let o=Object(x.a)(l).times(E[K[e]].precision)._toIntegerDown()._toHex(),i=null;if(i=await Object(m.Q)(e,s,o),i.success){let e=Object(x.a)(i.value).div(E[K[s]].precision);d(Object(x.c)(Object(x.a)(e)._toFixed(E[K[s]].decimal,1))),C(Object(x.a)(i.value))}else d(0),C(1);a.notChangeRate||X({i:e,j:s,dx:l})}catch(s){console.log("getDyData: ",s)}},X=async e=>{let{...a}=e;try{let e=void 0===a.i?t:a.i,s=void 0===a.j?n:a.j,l=void 0===a.dx?Object(x.fb)(c):Object(x.fb)(a.dx),o=void 0===a.exchangeFlags?F:a.exchangeFlags,i=Object(x.a)(l).times(E[K[e]].precision)._toIntegerDown()._toHex(),r=null;if(!Object(x.a)(l).gt(0))return;if(r=await Object(m.Q)(e,s,i),r.success){let e=Object(x.a)(r.value).div(E[K[s]].precision).div(l);N(o?Object(x.a)(1).div(Object(x.a)(e)._toFixed(4,1))._toFixed(4,1):e._toFixed(4,1))}}catch(s){console.log("getRateData: ",s)}},Y=e=>{let l=t;Number(e)!==Number(n)&&(l=n),i(l),a(e);let o=Object(x.fb)(c)._toFixed(E[K[e]].decimal,1);s(Object(x.c)(o)),z({i:e,j:l,dx:o})},$=e=>{let l=n;Number(e)!==Number(t)&&(l=t),a(l),i(e);let o=Object(x.fb)(c)._toFixed(E[K[l]].decimal,1);s(Object(x.c)(o)),z({j:e,i:l,dx:o})},ee=e=>{!Q&&Z(!0);const{valid:a,str:c}=Object(x.V)((""+e).replace(/,/g,""),E[K[t]].decimal);let n=J.poolData&&Object(x.a)(J.poolData[K[t]].balance).div(E[K[t]].precision)._toFixed(2,1);if(a){if(Object(x.a)(c).lte(0))return s(Object(x.c)(c)),d(0),void B(b.a.get("buysell.error_msg_1"));Object(x.a)(c).gt(n)&&B(b.a.get("buysell.error_msg_2")),s(Object(x.c)(c)),z({dx:c})}},te=e=>{let a="--";return a=J.poolData[K[t]].balance,a=Object(x.a)(a).isNaN()?"--":J.poolData[K[t]].balance.div(J.poolData[K[t]].precision),Object(_.jsx)("span",{children:J.poolData&&Object(x.u)(a)})},ae=()=>{let{precision:e,balance:a,symbol:s}=J.poolData[K[t]];return a=Object(x.a)(a).div(e),Object(x.fb)(c).eq(0)||Object(x.fb)(c).isNaN()?(B(b.a.get("error.e1")),!0):Object(x.fb)(c).gt(a)?(B(b.a.get("error.e2",{token:s})),!0):2===L&&(!A||Number(A)<.1||Number(A)>50)?(B(b.a.get("error.e5")),!0):(B(""),!1)};Object(o.useEffect)((()=>{Q&&ae()}),[t,n,c,L,A]);const ce=()=>{let e=J.poolData&&Object(x.a)(J.poolData[K[t]].balance).div(E[K[t]].precision);ee(e)},se=e=>{!Q&&Z(!0),D(e),2!==e&&P("")},ne=e=>{!Q&&Z(!0);const{valid:t,str:a}=Object(x.V)(e,10);if(t)if(""===a)P("");else if(Object(x.a)(a).lte(100)){var c;let e=a,t=a.split(".");(null===(c=t[1])||void 0===c?void 0:c.length)>2&&(e="".concat(t[0]+"."+t[1].substr(0,2))),P(e)}},le=()=>{const e=()=>{let e=t,a=n;return F&&([e,a]=[a,e]),Object(_.jsx)(_.Fragment,{children:K[e].toUpperCase()+"/"+K[a].toUpperCase()})};return Object(_.jsxs)("p",{className:"exchang-rate-text mt-20",children:[Object(_.jsxs)("span",{className:"en-US"===window.localStorage.getItem("lang")?"er-en":"",children:[b.a.get("buysell.exchange_rate",{symbol:"3pool LP"})+" ",Object(_.jsx)(e,{})]}),Object(_.jsx)("img",{style:{cursor:"pointer",margin:"0 6px"},className:"exchange-img",alt:"",src:O.a,onClick:W}),Object(_.jsxs)("span",{children:["(",b.a.get("buysell.including_fees"),"): ",-1===S?b.a.get("buysell.not_available"):S]})]})},oe=()=>{const a=async()=>{if(!U)try{let a=2!==L?L:A?Object(x.a)(A).div(100):0,s=Object(x.a)(k).times(Object(x.a)(1).minus(Object(x.a)(a)))._toIntegerDown()._toHex(),l=t,o=n,i=Object(x.fb)(c).times(E[K[l]].precision)._toIntegerDown()._toHex();const b={title:"notification.tip1",title2:"notification.tip1",title3:"notification.tip1",title4:"notification.tip1",obj:{fromValue:Object(x.u)(Object(x.fb)(c)),fromToken:K[l].toUpperCase(),toValue:Object(x.u)(Object(x.fb)(r)),toToken:K[o].toUpperCase()}};let j=await R.toExchange(l,o,i,s,b,[["pool/updateCurrencyData"]]);j&&(setTimeout((()=>{J.getBalanceInfo()}),5e3),e.onSubmit&&e.onSubmit(j))}catch(a){console.log("sellSubmit: ",a)}};return Object(_.jsx)(_.Fragment,{children:U?Object(_.jsx)(w.a,{styleName:"mt-40",type:"single",disabled:!0,info:b.a.get("sell_btn")}):Object(_.jsx)(w.a,{styleName:"mt-40",type:"single",info:b.a.get("sell_btn"),onClick:async()=>{if(q.isConnected){if(!Q&&Z(!0),!U){if(ae())return}if(!U)try{let e=(await Object(m.Sb)(window.defaultAccount,[E[K[t]].token],[H]))[H].allowance;const{approveStatus:c}=J.poolData[K[t]];if(e.gt(0)||c)a();else{const e={action:"approve",title:"deposit.approve_token",obj:{value:M[t].toUpperCase()},continuous:!0};if(!await R.approveToken(E[K[t]].token,H,e,[["pool/getBalanceInfo"]]))return;J.poolData[K[t]].approveStatus=2,a()}}catch(e){console.log("exchangeBefore: ",e)}}else B(b.a.get("buysell.error_msg_3"))}})})},ie=e=>{let{direction:a="left"}=e,c=M;return Object(_.jsx)("div",{className:"flex start mb-16 pc-input-box",children:c.map((e=>{const c=h.a[e]||p.default,s="left"===a?t:n;return Object(_.jsx)(f.a,{id:e,checked:s===E[e].index,tokenLogo:c,symbol:E[e].symbol,onChange:(t,c)=>{"left"===a?Y(E[e].index):$(E[e].index)}})}))})},re=()=>Object(_.jsx)("span",{className:"exchange-alt",onClick:()=>G()}),be=Object(y.a)(y.b);return Object(_.jsx)(l.a,{children:()=>Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"exchange-box",children:[Object(_.jsx)(ie,{direction:"left"},"left"),Object(_.jsxs)("div",{className:"input-block",children:[Object(_.jsxs)("div",{className:"flex",children:[Object(_.jsx)("div",{className:"input-number",children:Object(_.jsx)(u.a,{className:"input",value:c,onChange:e=>ee(e.target.value)})}),Object(_.jsx)("span",{className:"max-btn",onClick:ce,children:b.a.get("sunSwapV3.swap.input_from_max")})]}),Object(_.jsxs)("div",{className:"mt-12 input-bottom-usd",children:[Object(_.jsx)("span",{children:b.a.get("sunSwapV3.swap.input_from_balance")})," ",te(J.poolData)]})]}),Object(_.jsxs)("div",{className:"flex",children:[Object(_.jsx)(re,{}),!be&&Object(_.jsx)("div",{className:"flex start",children:Object(_.jsx)(v.a,{type:"exchange",slippage:L,customSlippage:A,CUSTOM_SLIPPAGE:2,onChangeSlippage:e=>{se(Number(e))},onChangeCustomSlippage:e=>{D(2),ne(e)}})})]}),Object(_.jsx)(ie,{direction:"right"},"right"),Object(_.jsxs)("div",{className:"input-block",children:[Object(_.jsx)("div",{className:"input-number",children:Object(_.jsx)(u.a,{disabled:!0,className:"input",value:r})}),Object(_.jsxs)("div",{className:"mt-12 input-bottom-usd",children:[Object(_.jsx)("span",{children:b.a.get("sunSwapV3.swap.input_from_balance")})," ",te(J.poolData)]})]}),Object(_.jsx)(le,{}),be&&Object(_.jsx)("div",{className:"flex start",children:Object(_.jsx)(v.a,{type:"exchange",slippage:L,customSlippage:A,CUSTOM_SLIPPAGE:2,onChangeSlippage:e=>{se(Number(e))},onChangeCustomSlippage:e=>{D(2),ne(e)}})})]}),Object(_.jsx)(oe,{}),U&&Object(_.jsx)("div",{className:"error-content mt-12",children:Object(_.jsx)("div",{className:"error-tip",children:U})})]})})}var N=a(1074),k=a(1108),C=a(1110),L=a(1078),D=a(56),A=a(1065),P=a(1059),I=a(1055),T=a(1058),U=a(1079);const B=e=>{let{onSubmit:t,pageList:a,tabPaneKey:n,isConnected:l}=e;return Object(_.jsxs)(c.a,{...P.a.row,children:[Object(_.jsxs)(s.a,{...P.a.colLeft,children:[Object(_.jsx)(I.a,{list:a,activeKey:n[0]}),l?Object(_.jsx)("div",{className:"window-for-tabs-pane",children:Object(_.jsx)(S,{onSubmit:t})}):Object(_.jsx)(T.a,{})]}),Object(_.jsx)(s.a,{...P.a.colRight,children:Object(_.jsx)(N.a,{})})]})},F=e=>Object(_.jsx)("span",{children:K[e].tabTitle}),{tabChangeLog:V,tabSubmitLog:E}=Object(L.a)({childPage:D.h.liquidity_old3pool}),K={1:{title:b.a.get("banner.title_deposit"),content:b.a.get("banner.desc_deposit"),tabTitle:b.a.get("header.deposit")},2:{title:b.a.get("banner.title_withdraw"),content:b.a.get("banner.desc_withdraw"),tabTitle:b.a.get("header.withdraw")},3:{title:b.a.get("banner.title_1"),content:b.a.get("banner.desc_1"),tabTitle:b.a.get("header.swap")}},H=e=>{let[,t,a]=window.location.hash.split("/");const c=window.localStorage.getItem("lang");return t.includes("usdc")&&(t="en-US"===c?"USDC Old":"Old USDC"),t.includes("3pool")&&(t="Old 3pool"),t.includes("busd")&&(t="en-US"===c?"Old BUSD":b.a.get("buysell.busd_2pool")),t.includes("usdd_usd_2pool")&&(t="en-US"===c?"Old USDD":b.a.get("buysell.usdd_2pool")),t.includes("usdj_2pool")&&(t="en-US"===c?"Old USDJ":b.a.get("buysell.usdj_2pool")),t.includes("tusd_2pool")&&(t="en-US"===c?"Old TUSD":b.a.get("buysell.tusd_2pool")),{title:t,tabKey:[{deposit:"1",withdraw:"2",swap:"3"}[a]||"1"]}};t.default=()=>{const{title:e,tabKey:t}=H(),[a,c]=i.a.useState(t),{mountedActions:s,instantActions:r}=(()=>{let e=null;const t=Object(l.d)((()=>j.a.pool)),a=Object(l.d)((()=>j.a.network)),c=()=>{t.getSwapBalance(),t.getVirtualPrice(),t.getVolData()};return i.a.useEffect((()=>()=>{clearInterval(e)}),[]),{mountedActions:async()=>{t.getUserLp(),await t.getBalanceInfo(),e||(e=setInterval((async()=>{c(),t.getUserLp(),await t.getBalanceInfo()}),a.defaultIntervalSec))},instantActions:c}})(),u=Object(o.useCallback)((e=>{let{value:t}=e;c(t),V(t)}),[]),p=()=>{const e=window.localStorage.getItem("lang")||b.a.options.currentLocale,t=window.location.origin+window.location.pathname;window.location.href=t+"?lang=".concat(e,"#/sunCurve")},O=Object(o.useMemo)((()=>({shouldScroll:!0,navRightMoreShow:!0,navRightMoreClick:p})),[]),g=Object(o.useMemo)((()=>P.b.map((e=>({...e,handler:u})))),[u]),m=Object(l.d)((()=>j.a.network));return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(d.a,{mountedActions:s,instantActions:r,subNavProps:O}),Object(_.jsxs)("div",{className:"main-page-content",children:[Object(_.jsx)(A.a,{title:"".concat(e," ").concat(K[a[0]].title),subTitle:K[a[0]].content}),Object(_.jsxs)("div",{className:"pool-tabs",children:[Object(_.jsxs)(n.a,{activeKey:a[0],centered:!0,onChange:u,renderTabBar:()=>null,children:[Object(_.jsx)(n.a.TabPane,{tab:F("1"),children:Object(_.jsx)(k.a,{onSubmit:()=>E("1"),pageList:g,tabPaneKey:a})},"1"),Object(_.jsx)(n.a.TabPane,{tab:F("2"),children:Object(_.jsx)(C.a,{onSubmit:()=>E("2"),pageList:g,tabPaneKey:a})},"2"),Object(_.jsx)(n.a.TabPane,{tab:F("3"),children:Object(_.jsx)(B,{onSubmit:e=>E("3",{event_label:e,txid:e}),pageList:g,tabPaneKey:a,isConnected:m.isConnected})},"3")]}),Object(_.jsx)(U.a,{name:"type",cb:u,valueFlag:!0})]})]})]})}},1127:function(e,t,a){"use strict";a.p},1200:function(e,t,a){"use strict";var c=a(70),s=a(1),n=a(8),l=a.n(n),o=(a(1075),a(1127),a(3)),i=a(98),r=a(0),b=(a(1109),a(2));var j=a(1090),d=a(1088);const{usdcInfo:u,usdtPools:p,currencyKeys:O}=o.a,{Fee:g,A:m,ADMIN_FEE:h}=u;t.a=e=>{const t=Object(c.d)((()=>i.a.network)),a=Object(c.d)((()=>i.a.usdcPool)),n=Object(c.d)((()=>i.a.thrSunPool)),[u,p]=Object(s.useState)(a);Object(s.useEffect)((()=>{p("sun3"===e.type?n:a)}));const x=(e,t)=>{const a=Object(r.a)(e).times(t).div(1e18);return a.isNaN()?"--":Object(r.u)(a,2)},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=Object(r.a)(0);for(let c in e){const{userSwapBalance:s,priceKey:n}=e[c],l=t?t[n]:"--";a=a.plus(Object(r.a)(s).times(l))}return Object(r.u)(a)}catch(a){return console.log(a),"--"}},v=window.localStorage.getItem("lang"),w=O.map((e=>u.currencyData[e])).filter((e=>e)),y="".concat("en-US"===v?"USDC Old":"Old USDC"," ").concat(l.a.get("pool.pool_contract")),_="USDC3SUN ".concat(l.a.get("pool.token_contract2")),S=u.volData?u.volData.usdcpvol24Hours:"";return Object(b.jsx)(c.a,{children:()=>Object(b.jsxs)("div",{children:[Object(b.jsx)(j.a,{curveLPSymbol:"sun3",poolTokens:w,totalSwapBalance:u.totalSwapBalance,adminFee:h,fee:g,virtualPrice:u.virtualPrice,dailyVol:S,poolContract:o.a.usdcContracts.usdcSwap,poolName:y,lpTokenAddress:o.a.tokens.thrsunlp.token,lpTokenName:_,aValue:m}),t.isConnected&&Object(r.a)(u.sharePer).gt(0)&&Object(b.jsx)(d.a,{sharePer:u.sharePer,usdBalance:f(u.poolData,u.volData),avgUsdBalance:x(u.swapBalanceInfo.userUsdcLpBalance,u.virtualPrice),userTotalBalance:u.swapBalanceInfo.userTotalBalance,myPoolTokens:w})]})})}},1408:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a(8),n=a.n(s),l=a(70),o=a(1943),i=a(1945),r=a(1513),b=a(1039),j=a(188),d=a(268),u=(a(1104),a(1075),a(17)),p=a(0),O=a(3),g=a(98),m=a(1054),h=a(1064),x=(a(1072),a(1200)),f=a(324),v=a(1063),w=a(1056),y=a(5),_=a(1059),S=a(1055),N=a(1058),k=a(1067),C=a(322),L=a(2);const{usdcPools:D,usdcPoolKeys:A,usdcInfo:P,defaultSlippage:I,usdcContracts:T,pools:U,thrSunPoolKeys:B,thrSunPools:F,tokens:V}=O.a,E=V.thrsunlp.symbol,{ALL_FEE:K}=P,{USDCDepositer:H,usdcSwap:M}=T,q=e=>{const t={};return e.map((e=>{t[e]=""})),t};t.default=e=>{const{tabPaneKey:t,pageList:a}=e,s=Object(l.d)((()=>g.a.network)),P=Object(l.d)((()=>g.a.system)),T=Object(l.d)((()=>g.a.usdcPool)),V=Object(l.d)((()=>g.a.thrSunPool)),[R,J]=Object(c.useState)(!1),[Q,Z]=Object(c.useState)(!0),[G,W]=Object(c.useState)(!1),[z,X]=Object(c.useState)(!1),[Y,$]=Object(c.useState)("--"),[ee,te]=Object(c.useState)("--"),[ae,ce]=Object(c.useState)(!1),[se,ne]=Object(c.useState)(!1),[le,oe]=Object(c.useState)(!1),[ie,re]=Object(c.useState)(T),[be,je]=Object(c.useState)(A),[de,ue]=Object(c.useState)(D),[pe,Oe]=Object(c.useState)((()=>q(A))),[ge,me]=Object(c.useState)((()=>q(B))),[he,xe]=Object(c.useState)(pe);let fe=null,ve=null,we=window.localStorage.getItem("lang");Object(c.useEffect)((()=>{G?(re(V),je(B),xe(ge),ue(F)):(re(T),je(A),xe(pe),ue(D))}),[G]),Object(c.useEffect)((async()=>{await Promise.all([De(he),Se()]),ae&&Ce(he)}),[he]);const ye=async()=>{if(G)return{success:!0,value:he.sun3?Object(p.fb)(he.sun3).times(de.sun3.precision):Object(p.a)(0)};try{const e=[];for(let t in U){const{index:a,precision:c}=U[t];e[a]=Object(p.fb)(he[t]).isNaN()?0:Object(p.fb)(he[t]).times(c)._toIntegerDown()._toHex()}return await Object(y.d)(e)}catch(e){return{success:!1}}},_e=async t=>{try{e.onSubmit&&e.onSubmit();const a=[];be.map((e=>{a.push({...ie.poolData[e],inputValue:t[e]?Object(p.fb)(t[e]).times(de[e].precision):Object(p.a)(0)})}));let c="usdcPool/getBalanceInfo",s=H;G&&(c="thrSunPool/getBalanceInfo",s=M);for(let e=0;e<a.length;e++){const{allowance:t=Object(p.a)(0),inputValue:n,token:l,symbol:o,approveStatus:i,id:r}=a[e];if(Object(p.a)(t).lt(n)&&!i){if(!await P.approveToken(l,s,{title:"deposit.approve_token",obj:{value:o},continuous:!0},[[c]]))return;ie.poolData[r].approveStatus=2}}const n=a.sort(((e,t)=>e.index-t.index)),l=n.length,o=n.map((e=>e.inputValue._toIntegerDown()._toHex()))||[];let i=null;if(ie.lpTotalSupply.lte(0)&&await ie.getSwapBalance(),ie.lpTotalSupply.lte(0)){const e=await ye();if(!e.success)return;i=e.value.div(1e18).plus(Object(p.fb)(t.usdc))}else{let e={};if(e=G?await Object(y.n)(o):await Object(y.k)(o),!e.success)return;i=e.value}i=i.times(Object(p.a)(1).minus(Object(p.a)(K).times(l).div(Object(p.a)(4).times(l-1)).div(1e10)));const r=i.times(1-I)._toIntegerDown()._toHex();let b;if(G){const e={title:"actions.addLiq",obj:{detail:Object(p.A)(t,"sun3")}};b=await P.addLiquidityUsdcBySun3(o,r,e,[["thrSunPool/updateCurrencyData"]])}else{const e={title:"actions.addLiq",obj:{detail:Object(p.A)(t,"usdc")}};b=await P.addLiquidityUsdc(o,r,e,[["usdcPool/updateCurrencyData"]])}b&&Ue()}catch(a){console.log("deposit err: ",a)}},Se=async()=>{try{const e=[];let t=!1;for(let c in he){const{index:a,precision:s}=de[c];e[a]=Object(p.fb)(he[c]).isNaN()?0:Object(p.fb)(he[c]).times(s)._toIntegerDown()._toHex(),Object(p.a)(e[a]).gt(0)&&(t=!0)}if(!t)return void te(Object(p.a)(0));let a=null;if(ie.lpTotalSupply.lte(0)&&await ie.getSwapBalance(),ie.lpTotalSupply.lte(0)){const e=await ye();if(!e.success)return;a=e.value.div(1e18).plus(Object(p.fb)(he.usdc))}else{let t={};if(t=G?await Object(y.n)(e):await Object(y.k)(e),!t.success)return;a=t.value.div(1e18)}te(a)}catch(e){console.log(e)}},Ne=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(V.getSwapBalance(),V.getVirtualPriceUSDC(),V.getVolData()):(T.getSwapBalance(),T.getVirtualPriceUSDC(),T.getVolData())},ke=async function(){const e={};arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(await V.getSwapBalance(),V.getUserLp(),await V.getBalanceInfo(),B.map((t=>{const{precision:a,balance:c,decimal:s}=V.poolData[t];e[t]=Object(p.c)(Object(p.a)(c).div(a)._toFixed(s,1))})),me(e)):(await T.getSwapBalance(),T.getUserLp(),await T.getBalanceInfo(),A.map((t=>{const{precision:a,balance:c,decimal:s}=T.poolData[t];e[t]=Object(p.c)(Object(p.a)(c).div(a)._toFixed(s,1))})),Oe(e)),xe(e),!ae&&ce(!0),fe||(fe=setInterval((async()=>{Ne(),T.getUserLp()}),s.defaultIntervalSec))};Object(c.useEffect)((()=>{!ve&&G&&(ve=setInterval((async()=>{Ne(!0),await V.getUserLp()}),s.defaultIntervalSec))}),[G]),Object(c.useEffect)((()=>(ke(),Ne(),()=>{clearInterval(fe),clearInterval(ve)})),[]);const Ce=e=>{const t=Object.keys(e),a=t.length;if(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e),a=t.filter((t=>Object(p.fb)(e[t]).eq(0)||!e[t]));return t.length===a.length}(e))return X(n.a.get("error.e1")),!0;for(let c=0;c<a;c++){const a=t[c],s=e[a];if(!s&&(R||Q))return X(n.a.get("error.e1")),!0;if(ie.poolData[a]){const{balance:e,precision:t,symbol:c}=ie.poolData[a];if(Object(p.a)(e).div(t).lt(Object(p.fb)(s)))return X(n.a.get("error.e2",{token:c})),!0}}return X(!1),!1},Le=e=>{oe(e.target.checked)},De=async e=>{const t=await ie.calcInclPrice(e);$(t)},Ae=async(e,t)=>{try{const a=t,c={};c[e]=Object(p.c)(a);const{precision:s,swapBalance:n,balance:l}=ie.poolData[e],{sun3LpBalance:o,sun3TotalSupply:i,balancesUsdc:r}=ie.swapBalanceInfo,b=Object(p.fb)(a).div(n).isNaN()?Object(p.a)(0):Object(p.fb)(a).div(n);if("usdc"===e){if(G){const{swapBalance:e,decimal:t}=ie.poolData.sun3;return c.sun3=Object(p.c)(e.times(b)._toFixed(t,1)),xe(c)}const t=be.filter((t=>t!==e)),a=b.times(o).div(i);return t.map((e=>{const{balance:t=Object(p.a)(0),swapBalance:s,precision:n,decimal:l}=ie.poolData[e];c[e]=Object(p.c)(a.times(s)._toFixed(l,1)),t.div(n).lt(Object(p.fb)(c[e]))&&(c[e]=Object(p.c)(t.div(n)._toFixed(l,1)))})),xe(c)}const j=be.filter((t=>t!==e&&"usdc"!==t)),d={[e]:Object(p.c)(a)};j.map((e=>{const{balance:t=Object(p.a)(0),swapBalance:a,precision:c,decimal:s}=ie.poolData[e];d[e]=Object(p.c)(b.times(a)._toFixed(s,1)),t.div(c).lt(d[e])&&(d[e]=Object(p.c)(t.div(c)._toFixed(s,1)))}));let u=Object(p.a)(0);if(G)t&&(u=Object(p.fb)(t).times(de.sun3.precision));else{const e=[];for(let a in d){const{index:t,precision:c}=U[a];e[t]=Object(p.fb)(d[a]).isNaN()?0:Object(p.fb)(d[a]).times(c)._toIntegerDown()._toHex()}const t=await Object(y.d)(e);if(!t.success)return;u=t.value}const g=Object(p.a)(u).div(Object(p.a)(o).times(O.a.defaultVotePrecision)),m=ie.poolData.usdc,h=g.isNaN()?0:g.times(r)._toFixed(m.decimal,1);c.usdc=m.balance.div(m.precision).lt(h)?Object(p.c)(m.balance.div(m.precision)._toFixed(m.decimal,1)):Object(p.c)(h),xe({...c,...d})}catch(a){console.log(a)}},Pe=async e=>{try{const t=e.target.checked;J(t),Q&&Z(!t),t&&Ae(be[0],Object(p.fb)(he[be[0]]))}catch(t){console.log(t)}},Ie=async e=>{try{const t=e.target.checked;Z(t),R&&J(!t);const a={};be.map((e=>{const{balance:t=Object(p.a)(0),precision:c,decimal:s}=ie.poolData[e];a[e]=Object(p.a)(t).isNaN()?0:Object(p.c)(t.div(c)._toFixed(s,1))})),xe(a)}catch(t){console.log(t)}},Te=async e=>{try{const t=e.target.checked;W(t),J(!1),Z(!0),e.target.checked?clearInterval(fe):clearInterval(ve),Ne(e.target.checked),ke(e.target.checked)}catch(t){console.log(t)}},Ue=()=>{oe(!1),ne(!1)},Be=Object(C.b)();return Object(L.jsx)(l.a,{children:()=>Object(L.jsxs)(o.a,{..._.a.row,children:[Object(L.jsxs)(i.a,{..._.a.colLeft,children:[Object(L.jsx)(S.a,{list:a,activeKey:t[0]}),Object(L.jsxs)("div",{className:"pool-deposit",children:[e.isSinglePage?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(m.a,{routeName:"usdc/deposit",mountedActions:ke,instantActions:Ne}),Object(L.jsx)(h.a,{title:n.a.get("buysell.usdc_pool")+" "+n.a.get("banner.title_deposit"),desc:n.a.get("banner.desc_deposit")}),Object(L.jsx)(v.a,{})]}):null,s.isConnected?Object(L.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(L.jsxs)("div",{className:"add-liq",children:[Object(L.jsxs)("fieldset",{className:"currencies",children:[Object(L.jsx)("legend",{children:n.a.get("deposit.currencies")}),Object(L.jsx)("ul",{children:be.map((e=>{let{symbol:t="",balance:a="--",precision:c,decimal:s}=ie.poolData[e];return a=Object(p.a)(a).div(c),Object(L.jsxs)("li",{children:[Object(L.jsxs)("div",{className:"cur-label",children:[Object(L.jsxs)("span",{className:"icon",children:[Object(L.jsx)("img",{src:u.a[e]?u.a[e]:d.default,alt:"",className:"token-logo"})," ",t]}),Object(L.jsx)("span",{className:"token-max",children:n.a.getHTML("deposit.token_max",{balance:Object(p.u)(a)})})]}),Object(L.jsx)(k.a,{value:he[e],onChange:t=>((e,t)=>{Q&&Z(!1);const{decimal:a}=de[t],{valid:c,str:s}=Object(p.V)((""+e.target.value).replace(/,/g,""),a);c&&(xe({...he,[t]:Object(p.c)(s)}),R&&Ae(t,s))})(t,e),onMaxClick:()=>{((e,t,a)=>{if(Object(p.a)(t).isNaN())return;const c=Object(p.a)(t)._toFixed(a,1);xe({...he,[e]:Object(p.c)(c)}),R&&Ae(e,c)})(e,a,s)}})]},e)}))})]}),!Object(p.a)(Y).isNaN()&&Object(p.ab)(Y,!0),Object(L.jsxs)("div",{className:"deposit-check",children:[Object(L.jsx)(r.a,{checked:R,onChange:Pe,children:n.a.get("deposit.ch1")}),Object(L.jsx)("br",{}),Object(L.jsx)(r.a,{checked:Q,onChange:Ie,children:n.a.get("deposit.ch2")}),Object(L.jsx)("br",{}),Object(L.jsx)(r.a,{checked:G,onChange:Te,children:n.a.get("deposit.ch3")})]}),z?Object(L.jsx)(w.a,{styleName:"mt-40",type:"single",disabled:!0,info:n.a.get("deposit.action")}):Object(L.jsx)(w.a,{styleName:"mt-40",type:"single",info:Be?n.a.get("not_available"):n.a.get("deposit.action"),onClick:()=>(async e=>{try{if(!z&&Ce(e))return;if(z)return;if(Object(p.a)(Y).abs().gt(10))return ne(!0);await _e(e)}catch(t){console.log(t)}})(he),disabled:Be}),z&&Object(L.jsx)("div",{className:"error-content mt-12",children:Object(L.jsx)("div",{className:"error-tip",children:z})}),Object(p.a)(ee).gt(0)&&Object(L.jsxs)("div",{className:"error-content mt-12",children:[Object(L.jsxs)("div",{className:"error-tip",children:[n.a.getHTML("deposit.swap_detail",{value:Object(p.u)(ee,2),symbol:"en_US"===we?E:"Old USDC LP"})," "]}),Object(L.jsx)("div",{className:"error-tip",children:n.a.get("deposit.exchange_rate",{value:Object(p.u)(ie.virtualPrice,6),symbol:"en_US"===we?E:"Old USDC LP"})})]})]})}):Object(L.jsx)(N.a,{}),Object(L.jsx)(f.a,{}),Object(L.jsx)(b.a,{title:n.a.get("deposit.high_slippage_title"),open:se,closable:!0,icon:null,onCancel:Ue,footer:null,width:400,className:"common-modal common-bg slippage-modal",children:Object(L.jsxs)("div",{className:"center",children:[Object(L.jsxs)("div",{className:"common-err-bg",children:[Object(L.jsx)("div",{children:n.a.get("deposit.high_tip1")}),Object(L.jsx)("div",{children:n.a.get("deposit.high_tip2",{value:Object(p.u)(Object(p.a)(Y).abs(),3)})})]}),Object(L.jsx)(r.a,{checked:le,onChange:Le,children:n.a.get("deposit.confirm_slippage",{value:Object(p.u)(Object(p.a)(Y).abs(),3)})}),Object(L.jsx)("br",{}),Object(L.jsxs)("div",{className:"btns flex",children:[Object(L.jsx)(j.a,{onClick:()=>ne(!1),type:"primary",children:n.a.get("cancel")}),Object(L.jsx)(j.a,{onClick:()=>_e(he),disabled:!le,children:n.a.get("deposit.anyway")})]})]})})]})]}),Object(L.jsx)(i.a,{..._.a.colRight,children:Object(L.jsx)(x.a,{type:G?"sun3":"usdc",className:s.isConnected?null:"window-for-tabs-pane"})})]})})}},1409:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a(8),n=a.n(s),l=a(1943),o=a(1945),i=a(329),r=a(1037),b=a(268),j=a(70),d=a(98),u=a(17),p=a(3),O=a(5),g=a(0),m=a(1200),h=a(1054),x=a(1064),f=(a(1072),a(1063)),v=a(1060),w=a(1056),y=a(1061),_=a(1059),S=a(1055),N=a(1058),k=a(1067),C=a(2);const{usdcPools:L,thrSunPools:D,usdcPoolKeys:A,thrSunPoolKeys:P,usdcContracts:I,usdcInfo:T,tokens:U}=p.a,{ALL_FEE:B}=T,F=U.thrsunlp.token,V="3SUN LP",E=U.thrsunlp.symbol,{USDCDepositer:K,usdcSwap:H}=I,M="---",q="CUSTOM",R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t={};return A.map((a=>{t[a]=e})),t};t.default=e=>{const{tabPaneKey:t,pageList:a}=e,[s=R("--"),p]=Object(c.useState)(),[I,T]=Object(c.useState)("100.00"),[U,J]=Object(c.useState)(.2),[Q,Z]=Object(c.useState)(""),[G,W]=Object(c.useState)(!0),[z,X]=Object(c.useState)(!1),[Y,$]=Object(c.useState)("--"),[ee,te]=Object(c.useState)(!1),[ae=R(!1),ce]=Object(c.useState)(),[se,ne]=Object(c.useState)(!1),[le,oe]=Object(c.useState)(!1),[ie,re]=Object(c.useState)(A),[be,je]=Object(c.useState)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t={};return P.map((a=>{t[a]=e})),t}("--")),de=Object(j.d)((()=>d.a.system)),ue=Object(j.d)((()=>d.a.usdcPool)),pe=Object(j.d)((()=>d.a.network)),Oe=Object(j.d)((()=>d.a.thrSunPool));let ge=null,me=null;Object(c.useEffect)((async()=>{le&&he()}),[s,I,U,Q,ae]),Object(c.useEffect)((()=>{Ie(s,z)}),[s]),Object(c.useEffect)((()=>{Te(be,z)}),[be]);const he=()=>I!==M&&Object(g.fb)(I).gt(100)?(ne(n.a.get("error.e3")),!0):(()=>{const e=ee?be:s;for(let t in e)if(Object(g.fb)(e[t]).gt(0)||"--"===e[t])return!1;return!0})()?(ne(n.a.get("error.e4")),!0):U===q&&(we()||I===M)&&(Object(g.a)(Q).lt(.1)||Object(g.a)(Q).gt(50)||Object(g.a)(Q).isNaN())?(ne(n.a.get("error.e5")),!0):(ne(!1),!1),xe=async(e,t)=>{try{const a=e.length,c=e.map((e=>e.inputValue.isNaN()?0:e.inputValue._toIntegerDown()._toHex()))||[];if(ee){const e=await Object(O.n)(c,!1);if(!e.success)return;let s=e.value.times(Object(g.a)(1).plus(Object(g.a)(B).times(a).div(4*(a-1)).div(1e10)));const n=Object(g.a)(100).plus(t).div(100);if(s=s.times(n)._toIntegerDown(),Object(g.a)(s).gt(ue.swapBalanceInfo.userUsdcLpBalance)&&(s=ue.swapBalanceInfo.userUsdcLpBalance),G&&Object(g.a)(ue.userLpAllowance).lt(s)){if(!await de.approveToken(F,H,{title:"deposit.approve_token",obj:{value:V},continuous:!0},[["thrSunPool/getUserLp"]]))return;W(!1)}const l=s._toHex(),o={title:"actions.remove",obj:{detail:Object(g.A)(be,"sun3")}};await de.removeLiqImBalanceSUN3(c,l,o,[["thrSunPool/updateCurrencyData"]]);return}const n=await Object(O.k)(c,!1);if(!n.success)return;let l=n.value.times(Object(g.a)(1).plus(Object(g.a)(B).times(a).div(4*(a-1)).div(1e10)));const o=Object(g.a)(100).plus(t).div(100);if(l=l.times(o)._toIntegerDown(),Object(g.a)(l).gt(ue.swapBalanceInfo.userUsdcLpBalance)&&(l=ue.swapBalanceInfo.userUsdcLpBalance),G&&Object(g.a)(ue.userLpAllowance).lt(l)){if(!await de.approveToken(F,K,{title:"deposit.approve_token",obj:{value:E},continuous:!0},[["usdcPool/getUserLp"]]))return;W(!1)}const i=l._toHex(),r={title:"actions.remove",obj:{detail:Object(g.A)(s,"usdc")}};await de.removeLiqImBalanceUSDC(c,i,r,[["usdcPool/updateCurrencyData"]])}catch(a){console.log(a)}},fe=async(e,t)=>{try{if(ee){const a=await Ne(t,e,I);if(!a)return;const{userLpBalance:c,userLpAllowanceUsdcSwap:s,minAmounts:n}=a,l=Object(g.fb)(I).div(100).times(c)._toIntegerDown();if(G&&Object(g.a)(s).lt(l._toIntegerDown())){if(!await de.approveToken(F,H,{title:"deposit.approve_token",obj:{value:V},continuous:!0},[["thrSunPool/getUserLp"]]))return;W(!1)}const o={title:"actions.remove",obj:{detail:Object(g.A)(be,"sun3")}},i=l._toHex();await de.removeLiquiditySUN3(i,n,o,[["thrSunPool/updateCurrencyData"]])}else{const a=await Se(t,e,I);if(!a)return;const{userLpBalance:c,userLpAllowance:n,minAmounts:l}=a,o=Object(g.fb)(I).div(100).times(c)._toIntegerDown();if(G&&Object(g.a)(n).lt(o._toIntegerDown())){if(!await de.approveToken(F,K,{title:"deposit.approve_token",obj:{value:E},continuous:!0},[["usdcPool/getUserLp"]]))return;W(!1)}const i={title:"actions.remove",obj:{detail:Object(g.A)(s,"usdc")}},r=o._toHex();await de.removeLiquidityUSDC(r,l,i,[["usdcPool/updateCurrencyData"]])}}catch(a){console.log(a)}},ve=async(e,t,a)=>{try{if(ee){const c=await Object(O.ub)(t,e);if(!c.success)return;const{balances3pool:s,balancesUsdc:n,sun3LpBalance:l,sun3TotalSupply:o,usdcLpTotalSupply:i,userLpAllowance:r,userUsdcLpBalance:b}=c,j=(_e({balances3pool:s,balancesUsdc:n,sun3LpBalance:l,sun3TotalSupply:o,usdcLpTotalSupply:i,userLpAllowance:r,userUsdcLpBalance:b,coins:e}),Object(g.fb)(I).div(100).times(b)._toIntegerDown());if(G&&Object(g.a)(r).lt(j._toIntegerDown())){if(!await de.approveToken(F,H,{title:"deposit.approve_token",obj:{value:V},continuous:!0},[["thrSunPool/getUserLp"]]))return;W(!1)}const d=j._toHex();let u=!1;for(let e in ae)!0===ae[e]&&(u=D[e].index);const p=await Object(O.s)(d,u);if(!p.success)return;const m=p.value,h=e.length,x=m.times(Object(g.a)(1).minus(Object(g.a)(B).times(h).div(4*(h-1)).div(1e10))),f=Object(g.a)(100).div(Object(g.a)(100).plus(a)),v=x.times(f)._toIntegerDown()._toHex(),w={title:"actions.remove",obj:{detail:Object(g.A)(be,"sun3")}};await de.removeLiqOneCoinSUN3(d,u,v,w,[["thrSunPool/updateCurrencyData"]]);return}const c=await Object(O.ub)(t,e);if(!c.success)return;const{balances3pool:n,balancesUsdc:l,sun3LpBalance:o,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:j}=c,d=(ye({balances3pool:n,balancesUsdc:l,sun3LpBalance:o,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:j,coins:e}),Object(g.fb)(I).div(100).times(j)._toIntegerDown());if(G&&Object(g.a)(b).lt(d._toIntegerDown())){if(!await de.approveToken(F,K,{title:"deposit.approve_token",obj:{value:E},continuous:!0},[["usdcPool/getUserLp"]]))return;W(!1)}const u=d._toHex();let p=!1;for(let e in ae)!0===ae[e]&&(p=L[e].index);const m=await Object(O.u)(u,p);if(!m.success)return;const h=m.value,x=e.length,f=h.times(Object(g.a)(1).minus(Object(g.a)(B).times(x).div(4*(x-1)).div(1e10))),v=Object(g.a)(100).div(Object(g.a)(100).plus(a)),w=f.times(v)._toIntegerDown()._toHex(),y={title:"actions.remove",obj:{detail:Object(g.A)(s,"usdc")}};await de.removeLiqOneCoinUSDC(u,p,w,y,[["usdcPool/updateCurrencyData"]])}catch(c){console.log(c)}},we=()=>{for(let e in ae)if(ae[e])return e;return!1},ye=function(){let{balances3pool:e,balancesUsdc:t,sun3LpBalance:a,sun3TotalSupply:c,usdcLpTotalSupply:s,userLpAllowance:n,userUsdcLpBalance:l,coins:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const n=[],i=Object(g.a)(l).div(s),r=Object(g.a)(i).times(t),b=Object(g.a)(i).times(a).div(c);return o.map((t=>{const{index:a,precision:c,symbol:s,id:l}=t;let o=Object(g.a)(0);o="usdc"===l?r.div(c):b.times(e[l]).div(c),n[a]=o||Object(g.a)(0)})),n}catch(i){return console.log(i),[]}},_e=function(){let{balances3pool:e,balancesUsdc:t,sun3LpBalance:a,sun3TotalSupply:c,usdcLpTotalSupply:s,userLpAllowance:n,userUsdcLpBalance:l,coins:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const e=[],c=Object(g.a)(l).div(s),n=Object(g.a)(c).times(t),i=Object(g.a)(c).times(a);return o.map((t=>{const{index:a,precision:c,symbol:s,id:l}=t;let o=Object(g.a)(0);o="usdc"===l?n.div(c):i.div(c),e[a]=o||Object(g.a)(0)})),e}catch(i){return console.log(i),[]}},Se=async function(e,t,a){let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{const s=await Object(O.ub)(e,t);if(!s.success)return;const{balances3pool:n,balancesUsdc:l,sun3LpBalance:o,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:j}=s,d=ye({balances3pool:n,balancesUsdc:l,sun3LpBalance:o,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:j,coins:t}),u=[],p={};return t.map((e=>{const{index:t,id:s,decimal:n,precision:l}=e;let o=Object(g.fb)(a).div(100).times(d[t]);c||(o=Object(g.a)(.98).times(o)),u[t]=o._toIntegerDown()._toHex(),p[s]=Object(g.c)(o._toFixed(n,1))})),{balances:d,userLpAllowance:b,minAmounts:u,amountsStr:p,userLpBalance:j}}catch(s){console.log(s)}},Ne=async function(e,t,a){let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{const s=await Object(O.ub)(e,t);if(!s.success)return;const{balances3pool:n,balancesUsdc:l,sun3LpBalance:o,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:j,userLpAllowanceUsdcSwap:d}=s,u=_e({balances3pool:n,balancesUsdc:l,sun3LpBalance:o,sun3TotalSupply:i,usdcLpTotalSupply:r,userLpAllowance:b,userUsdcLpBalance:j,coins:t}),p=[],m={};return t.map((e=>{const{index:t,id:s,decimal:n,precision:l}=e;let o=Object(g.fb)(a).div(100).times(u[t]);c||(o=Object(g.a)(.98).times(o)),p[t]=o._toIntegerDown()._toHex(),m[s]=o._toFixed(n,1)})),{balances:u,userLpAllowance:b,minAmounts:p,amountsStr:m,userLpBalance:j,userLpAllowanceUsdcSwap:d}}catch(s){console.log(s)}},ke=async(e,t)=>{try{await ue.getUserLp();const{userUsdcLpBalance:a}=ue.swapBalanceInfo,{precision:c,decimal:s}=L[e],n=Object(g.fb)(t).div(100).times(a)._toIntegerDown(),l=L[e].index,o=n._toHex(),i=await Object(O.u)(o,l);if(!i.success)return!1;const r=i.value;return Object(g.a)(r).div(c)._toFixed(s,1)}catch(a){console.log(a)}},Ce=async(e,t)=>{try{await Oe.getUserLp();const{userUsdcLpBalance:a}=Oe.swapBalanceInfo,{precision:c,decimal:s}=D[e],n=Object(g.fb)(t).div(100).times(a)._toIntegerDown(),l=D[e].index,o=n._toHex(),i=await Object(O.s)(o,l);if(!i.success)return!1;const r=i.value;return Object(g.a)(r).div(c)._toFixed(s,1)}catch(a){console.log(a)}},Le=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(Oe.getSwapBalance(),Oe.getVirtualPriceUSDC(),Oe.getVolData()):(ue.getSwapBalance(),ue.getVirtualPriceUSDC(),ue.getVolData())},De=async function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){await Promise.all([Oe.getSwapBalance(),Oe.getUserLp(),Oe.getBalanceInfo()]);const e={};P.map((t=>{const{userSwapBalance:a,decimal:c}=Oe.poolData[t];e[t]=Object(g.c)(Object(g.a)(a)._toFixed(c,1))})),je(e)}else{await Promise.all([ue.getUserLp(),ue.getBalanceInfo()]);const e={};A.map((t=>{const{userSwapBalance:a,decimal:c}=ue.poolData[t];e[t]=Object(g.c)(Object(g.a)(a)._toFixed(c,1))})),p(e)}!le&&oe(!0),ge||(ge=setInterval((async()=>{Le(!1),await ue.getUserLp()}),pe.defaultIntervalSec))};Object(c.useEffect)((()=>{!me&&ee&&(me=setInterval((async()=>{Le(!0),await Oe.getUserLp()}),pe.defaultIntervalSec))}),[ee]),Object(c.useEffect)((()=>(De(),Le(),()=>{clearInterval(ge),clearInterval(me)})),[]);const Ae=async(e,t)=>{!le&&oe(!0);let a=I;const c={},n={},l={};if(ee)if(e){X(!0);for(let e in be)e!==t&&(c[e]=!1,l[e]=0);ce({...be,...c,[t]:e}),(I===M||Object(g.fb)(I).lte(0))&&(a="100.00",T(a)),Object(g.fb)(a).gt(100)&&(a=100);const s=await Ce(t,a);s&&je({...be,...l,[t]:Object(g.c)(s)})}else T(M),X(!1),ce({...ae,[t]:e});else if(e){X(!0);for(let e in ae)e!==t&&(c[e]=!1,n[e]=0);ce({...ae,...c,[t]:e}),(I===M||Object(g.fb)(I).lte(0))&&(a="100.00",T(a)),Object(g.fb)(a).gt(100)&&(a=100);const l=await ke(t,a);l&&p({...s,...n,[t]:Object(g.c)(l)})}else T(M),X(!1),ce({...ae,[t]:e})},Pe=e=>{T("100"),e?(re(P),clearInterval(ge)):(re(A),clearInterval(me)),te(e),X(!1),ce(R(!1)),Le(e),De(e)},Ie=async(e,t)=>{const a=await ue.calcInclPrice(e,!1,t);$(a)},Te=async(e,t)=>{const a=await Oe.calcInclPrice(e,!1,t);$(a)},Ue=async e=>{var t;!le&&oe(!0);let a=e.target.value,c=a.split(".");if((null===(t=c[1])||void 0===t?void 0:t.length)>2&&(a="".concat(c[0]+"."+c[1].substr(0,2))),Object(g.a)(a).gt(100))return;const{valid:n,str:l}=Object(g.V)(a,10);if(I===M)return ee?(()=>{const e={},t={};P.map((a=>{e[a]=0,t[0]=!1})),je(e),ce(ae),T(0)})():(()=>{const e={},t={};A.map((a=>{e[a]=0,t[0]=!1})),p(e),ce(ae),T(0)})();if(""===a)return T(""),ee?(()=>{const e={};P.map((t=>{e[t]=0})),je(e)})():(()=>{const e={};A.map((t=>{e[t]=0})),p(e)})();if(n){T(l);const t=Object(g.a)(l).gt(100)?Object(g.a)(100):Object(g.a)(l);if(t.isNaN())return;if(!pe.defaultAccount)return;const c=pe.defaultAccount,n=we();if(ee){if(n){const e=await Ce(n,t);return e&&je({...be,[n]:Object(g.c)(e)})}if(l!==M){const e=[];P.map((t=>{e.push({...D[t]})}));const t=e.sort(((e,t)=>e.index-t.index)),a=await Ne(c,t,l,!0),{amountsStr:s={}}=a;a&&je(s)}return}if(n){const e=await ke(n,t);return e&&p({...s,[n]:Object(g.c)(e)})}if(l!==M){const t=[];A.map((e=>{t.push({...L[e]})}));const s=t.sort(((e,t)=>e.index-t.index)),n=await Se(c,s,l,!0);if(a===e.target.value){const{amountsStr:e={}}=n;n&&p(e)}}}},Be=e=>{!le&&oe(!0),J(e),e!==M&&Z("")},Fe=e=>{const{valid:t,str:a}=Object(g.V)(e,10);if(t)if(""===a)Z("");else if(Object(g.a)(a).lte(100)){var c;let e=a,t=a.split(".");(null===(c=t[1])||void 0===c?void 0:c.length)>2&&(e="".concat(t[0]+"."+t[1].substr(0,2))),Z(e)}},Ve=e=>we()||I===M?Object(C.jsx)("div",{className:"flex start mt-20",children:Object(C.jsx)(y.a,{slippage:e,customSlippage:Q,CUSTOM_SLIPPAGE:q,onChangeSlippage:Be,onChangeCustomSlippage:Fe})}):Object(C.jsx)(C.Fragment,{});return Object(C.jsx)(j.a,{children:()=>Object(C.jsxs)(l.a,{..._.a.row,children:[Object(C.jsxs)(o.a,{..._.a.colLeft,children:[Object(C.jsx)(S.a,{list:a,activeKey:t[0]}),Object(C.jsxs)("div",{className:"pool-deposit",children:[e.isSinglePage?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(h.a,{routeName:"usdc/withdraw",mountedActions:De,instantActions:Le}),Object(C.jsx)(x.a,{title:n.a.get("buysell.usdc_pool")+" "+n.a.get("banner.title_withdraw"),desc:n.a.get("banner.desc_withdraw")}),Object(C.jsx)(f.a,{})]}):null,pe.isConnected?Object(C.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(C.jsxs)("div",{className:"add-liq withdraw-liq",children:[Object(C.jsxs)("div",{className:"flex",children:[n.a.get("withdraw.share_of_liq"),Object(C.jsx)(k.a,{showMax:!1,placeholder:"100.00",value:I,onChange:Ue,className:"flex-1 ml-20"})]}),Object(C.jsxs)("fieldset",{className:"currencies mt-35",children:[Object(C.jsx)("legend",{children:n.a.get("deposit.currencies")}),Object(C.jsx)("ul",{children:ie.map((e=>{const t=ee?D[e]:L[e],{symbol:a=""}=t;return Object(C.jsxs)("li",{children:[Object(C.jsx)("div",{className:"cur-label",children:Object(C.jsxs)("span",{className:"icon",children:[Object(C.jsx)("img",{src:u.a[e]?u.a[e]:b.default,alt:"",className:"token-logo"}),a]})}),Object(C.jsx)(k.a,{showMax:!1,value:ee?be[e]:s[e],onChange:t=>{(async(e,t)=>{if(!le&&oe(!0),ee){const{decimal:a}=D[t],{valid:c,str:s}=Object(g.V)((""+e.target.value).replace(/,/g,""),a);c&&je({...be,[t]:Object(g.c)(s)}),T(M),X(!1);const n={};for(let e in ae)n[e]=!1;return void ce(n)}const{decimal:a}=L[t],{valid:c,str:n}=Object(g.V)((""+e.target.value).replace(/,/g,""),a);c&&p({...s,[t]:Object(g.c)(n)}),T(M),X(!1);const l={};for(let s in ae)l[s]=!1;ce(l)})(t,e)}})]},e)}))})]}),Object(g.ab)(Y),Object(C.jsxs)("fieldset",{children:[Object(C.jsxs)("legend",{className:"flex aic jcs pt20",children:[Object(C.jsx)("span",{className:"mr-10",children:n.a.get("withdraw.withdraw_text")}),Object(C.jsx)(i.a,{title:n.a.get("withdraw.tip"),children:Object(C.jsx)(r.a,{})})]}),Object(C.jsxs)("div",{className:"withdraw-one mt-10",children:[ie.map((e=>{const{symbol:t=""}=ee?D[e]:L[e];return Object(C.jsx)(v.a,{id:e,checked:ae[e],tokenLogo:u.a[e]?u.a[e]:b.default,symbol:t,onChange:Ae})})),Object(C.jsx)(v.a,{checked:ee,symbol:n.a.get("withdraw.as_3sun"),onChange:Pe})]})]}),Ve(U),se?Object(C.jsx)(w.a,{styleName:"mt-40",type:"single",disabled:!0,info:n.a.get("withdraw.action")}):Object(C.jsx)(w.a,{styleName:"mt-40",type:"single",info:n.a.get("withdraw.action"),onClick:()=>(async t=>{try{if(!pe.defaultAccount)return;if(!le&&oe(!0),!se&&he(t))return;if(se)return;const a=pe.defaultAccount,c=[];ee?P.map((e=>{c.push({...D[e],inputValue:Object(g.fb)(t[e]).times(D[e].precision)})})):A.map((e=>{c.push({...L[e],inputValue:Object(g.fb)(t[e]).times(L[e].precision)})}));const s=c.sort(((e,t)=>e.index-t.index)),n=U===q?Q:U;return e.onSubmit&&e.onSubmit(),z?await ve(s,a,n):I!==M?await fe(s,a):await xe(s,n)}catch(a){console.log(a)}})(ee?be:s)}),se&&Object(C.jsx)("div",{className:"error-content mt-12",children:Object(C.jsx)("div",{className:"error-tip",children:se})})]})}):Object(C.jsx)(N.a,{})]})]}),Object(C.jsx)(o.a,{..._.a.colRight,children:Object(C.jsx)(m.a,{type:ee?"sun3":"usdc",className:pe.isConnected?null:"window-for-tabs-pane"})})]})})}},1990:function(e,t,a){"use strict";a.r(t);var c=a(1943),s=a(1945),n=a(1969),l=a(70),o=a(1),i=a.n(o),r=a(8),b=a.n(r),j=(a(1073),a(1076),a(3)),d=a(98),u=a(1121),p=a(1054),O=(a(1509),a(1926)),g=a(1513),m=a(91),h=(a(1096),a(268)),x=a(1077),f=a(5),v=a(17),w=a(0),y=a(1060),_=a(1061),S=a(1056),N=a(270),k=a(2);function C(e){const[t,a]=Object(o.useState)(3),[c,s]=Object(o.useState)(1),[n,i]=Object(o.useState)(1),[r,u]=Object(o.useState)(1),[p,C]=Object(o.useState)(-1),[L,D]=Object(o.useState)(1),[A,P]=Object(o.useState)(.005),[I,T]=Object(o.useState)(""),[U,B]=Object(o.useState)(!0),[F,V]=Object(o.useState)(""),[E,K]=Object(o.useState)(!1),{usdcPools:H,usdcPoolIndex:M,thrSunPoolIndex:q,usdcPoolKeys:R,usdcContracts:J,thrSunPoolKeys:Q,thrSunPools:Z,stablePool:G,tokens:W}=(Object(m.a)(window.navigator).any,j.a),{usdcSwap:z}=J,X=Object(l.d)((()=>d.a.network)),Y=Object(l.d)((()=>d.a.system)),$=Object(l.d)((()=>d.a.usdcPool)),[ee,te]=Object(o.useState)(!1),[ae,ce]=Object(o.useState)(!1),[se,ne]=Object(o.useState)($.poolData1),[le,oe]=Object(o.useState)(M);Object(o.useEffect)((()=>{be({i:t,j:n,dx:c,checked:ae})}),[]),Object(o.useEffect)((()=>{ae?(ne($.poolData2),oe(q)):(ne($.poolData1),oe(M))}),[ae,$.poolData1,$.poolData2]);const ie=()=>{try{let e=t,a=n;return E&&([e,a]=[a,e]),Object(k.jsx)(k.Fragment,{children:W[le[e]].symbol+"/"+W[le[a]].symbol})}catch(e){return Object(k.jsx)(k.Fragment,{})}},re=e=>{let{...t}=e;K(!E),je({...t,exchangeFlags:!E,checked:ae})},be=async e=>{let{...a}=e;try{let e=void 0===a.i?t:a.i,s=void 0===a.j?n:a.j,l=void 0===a.dx?c:a.dx,o=a.checked?q:M,i=a.checked?Z:H;if(!Object(w.fb)(l).gt(0))return void u(0);let r=Object(w.fb)(l).times(i[o[e]].precision)._toIntegerDown()._toHex(),b=null;if(b=a.checked?await Object(f.Q)(e,s,r,z):await Object(f.mb)(e,s,r),b.success){let e=Object(w.a)(b.value).div(i[o[s]].precision);u(Object(w.c)(Object(w.a)(e)._toFixed(i[o[s]].decimal,1))),D(Object(w.a)(b.value))}else u(0),D(1);a.notChangeRate||je({i:e,j:s,dx:l,checked:a.checked})}catch(s){console.log("getDyData: ",s)}},je=async e=>{let{...a}=e;try{let e=void 0===a.i?t:a.i,s=void 0===a.j?n:a.j,l=void 0===a.dx?c:a.dx,o=void 0===a.exchangeFlags?E:a.exchangeFlags,i=a.checked?q:M,r=a.checked?Z:H,b=Object(w.fb)(l).times(r[i[e]].precision)._toIntegerDown()._toHex(),j=null;if(!Object(w.fb)(l).gt(0))return;if(j=a.checked?await Object(f.Q)(e,s,b,z):await Object(f.mb)(e,s,b),j.success){let e=Object(w.a)(j.value).div(r[i[s]].precision).div(Object(w.fb)(l));C(o?Object(w.a)(1).div(Object(w.a)(e)._toFixed(4,1))._toFixed(4,1):e._toFixed(4,1))}}catch(s){console.log("getRateData: ",s)}},de=e=>{let l=ae?Z:H,o=t;Number(e)!==Number(n)&&(o=n),i(o),a(e);let r=Object(w.fb)(c)._toFixed(l[le[e]].decimal,1);s(Object(w.c)(r)),be({i:e,j:o,dx:r,checked:ae})},ue=e=>{let l=ae?Z:H,o=n;Number(e)!==Number(t)&&(o=t),a(o),i(e);let r=Object(w.fb)(c)._toFixed(l[le[o]].decimal,1);s(Object(w.c)(r)),be({j:e,i:o,dx:r,checked:ae})},pe=e=>{!ee&&te(!0);let a=ae?Z:H;const{valid:c,str:n}=Object(w.V)((""+e).replace(/,/g,""),a[le[t]].decimal);let l=se&&se[le[t]]&&Object(w.a)(se[le[t]].balance).div(a[le[t]].precision)._toFixed(2,1);if(c){if(Object(w.a)(n).lte(0))return s(Object(w.c)(n)),u(0),void V(b.a.get("buysell.error_msg_1"));Object(w.a)(n).gt(l)&&V(b.a.get("buysell.error_msg_2")),s(Object(w.c)(n)),be({dx:n,checked:ae})}},Oe=e=>{try{let a="--";return a=e[le[t]].balance,a=Object(w.a)(a).isNaN()?"--":e[le[t]].balance.div(e[le[t]].precision),Object(k.jsx)("span",{children:e&&Object(w.u)(a)})}catch(a){}},ge=()=>{try{let{precision:e,balance:a,symbol:s}=se[le[t]];return a=Object(w.a)(a).div(e),Object(w.fb)(c).eq(0)||Object(w.fb)(c).isNaN()?(V(b.a.get("error.e1")),!0):Object(w.fb)(c).gt(a)?(V(b.a.get("error.e2",{token:s})),!0):2===A&&(!I||Number(I)<.1||Number(I)>50)?(V(b.a.get("error.e5")),!0):(V(""),!1)}catch(e){return!1}};Object(o.useEffect)((()=>{ee&&ge()}),[t,n,c,A,I]);const me=()=>{let e=ae?Z:H,a=se&&Object(w.a)(se[le[t]].balance).div(e[le[t]].precision);pe(a)},he=()=>Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{children:Object(k.jsx)(g.a,{checked:ae,onChange:async e=>{let t=e.target.checked,n=t?q:M;ce(t);let l=0,o=1,r=Object(w.fb)(c);t||(l=3,o=1),t?"--"===$.poolData2[n[l]].balance&&(await $.getBalanceInfo(z,Q,"3sun"),ne($.poolData2),oe(q)):"--"===$.poolData1[n[l]].balance&&(await $.getBalanceInfo(z),ne($.poolData1),oe(M)),a(l),i(o),s(Object(w.c)(r)),be({i:l,j:o,dx:r,checked:t,notChangeRate:!0}),je({no:1,i:l,j:o,dx:r,checked:t})},children:b.a.get("buysell.sun3_swap")})}),Object(k.jsxs)("div",{className:"exchang-rate-text mt-20",children:[Object(k.jsxs)("span",{className:"en-US"===window.localStorage.getItem("lang")?"er-en":"",children:[b.a.get("buysell.exchange_rate",{symbol:"3Pool LP"})+" ",Object(k.jsx)(ie,{})]}),Object(k.jsx)("img",{style:{cursor:"pointer",margin:"0 6px"},className:"exchange-img",alt:"",src:x.a,onClick:re}),"(",Object(k.jsxs)("span",{children:[b.a.get("buysell.including_fees"),"): ",-1===p?b.a.get("buysell.not_available"):p]})]})]}),xe=()=>Object(k.jsx)(k.Fragment,{children:F?Object(k.jsx)(S.a,{styleName:"mt-40",type:"single",disabled:!0,info:b.a.get("sell_btn")}):Object(k.jsx)(S.a,{styleName:"mt-40",type:"single",info:b.a.get("sell_btn"),onClick:async()=>{const a=async()=>{if(!F)try{let a=2!==A?A:I?Object(w.a)(I).div(100):0,s=Object(w.a)(L).times(Object(w.a)(1).minus(Object(w.a)(a)))._toIntegerDown()._toHex(),l=t,o=n,i=ae?Z:H,b=Object(w.fb)(c).times(i[le[l]].precision)._toIntegerDown()._toHex();const j={title:"notification.tip1",title2:"notification.tip1",title3:"notification.tip1",title4:"notification.tip1",obj:{fromValue:Object(w.u)(Object(w.fb)(c)),fromToken:W[le[l]].symbol,toValue:Object(w.u)(Object(w.fb)(r)),toToken:W[le[o]].symbol}};let d="";d=ae?await Y.toExchangeUsdcNew(l,o,b,s,j,[["pool/updateCurrencyData"]],z):await Y.toUsdcExchange(l,o,b,s,j,[["pool/updateCurrencyData"]]),d&&(setTimeout((()=>{ae?$.getBalanceInfo(z,Q,"3sun"):$.getBalanceInfo(z)}),5e3),e.onSubmit&&e.onSubmit(d))}catch(a){console.log("sellSubmit: ",a)}};if(!X.isConnected)return void V(b.a.get("buysell.error_msg_3"));if(!ee&&te(!0),!F){if(ge())return}if(F)return;let s=ae?Z:H;try{let e=(await Object(f.Sb)(window.defaultAccount,[s[le[t]].token],[z]))[z].allowance;const{approveStatus:c}=se[le[t]];if(e.gt(0)||c)a();else{const e={action:"approve",title:"deposit.approve_token",obj:{value:W[(ae?Q:R)[t]].symbol},continuous:!0};if(!await Y.approveToken(s[le[t]].token,z,e,[["pool/getBalanceInfo"]]))return;se[le[t]].approveStatus=2,a()}}catch(l){console.log("exchangeBefore: ",l)}}})}),fe=e=>{!ee&&te(!0),P(e),2!==e&&T("")},ve=e=>{!ee&&te(!0);const{valid:t,str:a}=Object(w.V)(e,10);if(t)if(""===a)T("");else if(Object(w.a)(a).lte(100)){var c;let e=a,t=a.split(".");(null===(c=t[1])||void 0===c?void 0:c.length)>2&&(e="".concat(t[0]+"."+t[1].substr(0,2))),T(e)}};const we=e=>{let{direction:a="left"}=e,c=ae?Q:R,s=ae?Z:H;return Object(k.jsx)("div",{className:"flex start mb-16 pc-input-box",children:c.map((e=>{const c=v.a[e]||h.default,l="left"===a?t:n;return Object(k.jsx)(y.a,{id:e,checked:l===s[e].index,tokenLogo:c,symbol:s[e].symbol,onChange:(t,c)=>{"left"===a?de(s[e].index):ue(s[e].index)}})}))})},ye=()=>Object(k.jsx)("span",{className:"exchange-alt",onClick:()=>(()=>{!ee&&te(!0);let e=t,c=n,l=r;e!==c&&(a(c),i(e),s(l),be({i:c,j:e,dx:l,notChangeRate:!0,checked:ae}),je({no:1,i:c,j:e,dx:l,checked:ae}))})()}),_e=Object(N.a)(N.b);return Object(k.jsx)(l.a,{children:()=>Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"exchange-box",children:[Object(k.jsx)(we,{direction:"left"},"left"),Object(k.jsxs)("div",{className:"input-block",children:[Object(k.jsxs)("div",{className:"flex",children:[Object(k.jsx)("div",{className:"input-number",children:Object(k.jsx)(O.a,{className:"input",value:c,onChange:e=>pe(e.target.value)})}),Object(k.jsx)("span",{className:"max-btn",onClick:me,children:b.a.get("sunSwapV3.swap.input_from_max")})]}),Object(k.jsxs)("div",{className:"mt-12 input-bottom-usd",children:[Object(k.jsx)("span",{children:b.a.get("sunSwapV3.swap.input_from_balance")})," ",Oe(se)]})]}),Object(k.jsxs)("div",{className:"flex",children:[Object(k.jsx)(ye,{}),!_e&&Object(k.jsx)("div",{className:"flex start",children:Object(k.jsx)(_.a,{type:"exchange",slippage:A,customSlippage:I,CUSTOM_SLIPPAGE:2,onChangeSlippage:e=>{fe(Number(e))},onChangeCustomSlippage:e=>{P(2),ve(e)}})})]}),Object(k.jsx)(we,{direction:"right"},"right"),Object(k.jsxs)("div",{className:"input-block",children:[Object(k.jsx)("div",{className:"input-number",children:Object(k.jsx)(O.a,{disabled:!0,className:"input",value:r})}),Object(k.jsxs)("div",{className:"mt-12 input-bottom-usd",children:[Object(k.jsx)("span",{children:b.a.get("sunSwapV3.swap.input_from_balance")})," ",Oe(se)]})]}),Object(k.jsx)(he,{}),_e&&Object(k.jsx)("div",{className:"flex start",children:Object(k.jsx)(_.a,{type:"exchange",slippage:A,customSlippage:I,CUSTOM_SLIPPAGE:2,onChangeSlippage:e=>{fe(Number(e))},onChangeCustomSlippage:e=>{P(2),ve(e)}})})]}),Object(k.jsx)(xe,{}),F&&Object(k.jsx)("div",{className:"error-content mt-12",children:Object(k.jsx)("div",{className:"error-tip",children:F})})]})})}var L=a(1200),D=a(1408),A=a(1409),P=a(1078),I=a(56),T=a(1065),U=a(1059),B=a(1055),F=a(1058),V=a(1079);const{tabChangeLog:E,tabSubmitLog:K}=Object(P.a)({childPage:I.h.liquidity_oldusdc}),H=e=>{let{onSubmit:t,pageList:a,tabPaneKey:n,isConnected:l}=e;return Object(k.jsxs)(c.a,{...U.a.row,children:[Object(k.jsxs)(s.a,{...U.a.colLeft,children:[Object(k.jsx)(B.a,{list:a,activeKey:n[0]}),l?Object(k.jsx)("div",{className:"window-for-tabs-pane",children:Object(k.jsx)(C,{onSubmit:t})}):Object(k.jsx)(F.a,{})]}),Object(k.jsx)(s.a,{...U.a.colRight,children:Object(k.jsx)(L.a,{})})]})},M={1:{title:b.a.get("banner.title_deposit"),content:b.a.get("banner.desc_deposit"),tabTitle:b.a.get("header.deposit")},2:{title:b.a.get("banner.title_withdraw"),content:b.a.get("banner.desc_withdraw"),tabTitle:b.a.get("header.withdraw")},3:{title:b.a.get("banner.title_1"),content:b.a.get("banner.desc_1"),tabTitle:b.a.get("header.swap")}};t.default=()=>{const{title:e,tabKey:t}=Object(u.usePoolTab)(),[a,c]=i.a.useState(t),{mountedActions:s,instantActions:r}=(()=>{let e=null;const t=Object(l.d)((()=>d.a.usdcPool)),a=Object(l.d)((()=>d.a.network)),{thrSunPoolKeys:c,usdcContracts:s}=j.a,n=async()=>{t.getSwapBalance(),t.getVirtualPriceUSDC(),t.getVolData()};return i.a.useEffect((()=>()=>{clearInterval(e)}),[]),{mountedActions:async()=>{t.getUserLp(),await t.getBalanceInfo(s.usdcSwap),await t.getBalanceInfo(s.USDCDepositer),e||(e=setInterval((async()=>{n(),t.getUserLp(),await t.getBalanceInfo(s.usdcSwap),await t.getBalanceInfo(s.USDCDepositer)}),a.defaultIntervalSec))},instantActions:n}})(),O=window.localStorage.getItem("lang"),g=Object(o.useCallback)((e=>{let{value:t}=e;c(t),E(t)}),[]),m=()=>{const e=window.localStorage.getItem("lang")||b.a.options.currentLocale,t=window.location.origin+window.location.pathname;window.location.href=t+"?lang=".concat(e,"#/sunCurve")},h=Object(o.useMemo)((()=>({shouldScroll:!0,navRightMoreShow:!0,navRightMoreClick:m})),[]),x=Object(o.useMemo)((()=>U.b.map((e=>({...e,handler:g})))),[g]),f=Object(l.d)((()=>d.a.network));return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(p.a,{mountedActions:s,instantActions:r,subNavProps:h}),Object(k.jsxs)("div",{className:"main-page-content",children:[Object(k.jsx)(T.a,{title:"".concat(e).concat("en-US"===O?" ":"").concat(b.a.get("buysell.Pool")).concat("en-US"===O?" ":"").concat(M[a[0]].title),subTitle:M[a[0]].content}),Object(k.jsxs)("div",{className:"pool-tabs",children:[Object(k.jsxs)(n.a,{activeKey:a[0],centered:!0,renderTabBar:()=>null,children:[Object(k.jsx)(n.a.TabPane,{tab:Object(u.renderTab)("1"),children:Object(k.jsx)(D.default,{onSubmit:()=>K("1"),pageList:x,tabPaneKey:a})},"1"),Object(k.jsx)(n.a.TabPane,{tab:Object(u.renderTab)("2"),children:Object(k.jsx)(A.default,{onSubmit:()=>K("2"),pageList:x,tabPaneKey:a})},"2"),Object(k.jsx)(n.a.TabPane,{tab:Object(u.renderTab)("3"),children:Object(k.jsx)(H,{onSubmit:e=>K("3",{event_label:e,txid:e}),pageList:x,tabPaneKey:a,isConnected:f.isConnected})},"3")]}),Object(k.jsx)(V.a,{name:"type",cb:g,valueFlag:!0})]})]})]})}}}]);