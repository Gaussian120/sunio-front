(this["webpackJsonpfront-js"]=this["webpackJsonpfront-js"]||[]).push([[15],{1054:function(e,t,s){"use strict";s(1067);var a=s(16),n=s.n(a),i=s(2);t.a=e=>Object(i.jsx)("div",{className:"tempalte-pageTab-nav",children:e.list.map((t=>Object(i.jsx)("div",{className:n()("tempalte-pageTab-nav-item",{"tempalte-pageTab-nav-active":e.activeKey===t.value}),onClick:()=>t.handler(t),children:t.label},t.value)))})},1055:function(e,t,s){"use strict";var a=s(1),n=s.n(a),i=(s(1146),s(2));class o extends n.a.Component{constructor(e){super(e),this.onClick=()=>{this.props.disabled||this.props.state||this.props.onClick&&this.props.onClick()},this.onLeftClick=()=>{this.props.lDisabled||this.props.lState||this.props.onLeftClick&&this.props.onLeftClick()},this.onMiddleClick=()=>{this.props.mDisabled||this.props.mState||this.props.onMiddleClick&&this.props.onMiddleClick()},this.onRightClick=()=>{this.props.rDisabled||this.props.rState||this.props.onRightClick&&this.props.onRightClick()};const{styleName:t=""}=e;this.state={}}render(){let e=null;switch(this.props.type){case"trisection":e=Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{className:"trisection "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick,children:this.props.lInfo}),Object(i.jsx)("button",{className:"trisection "+(this.props.mDisabled?"gray":this.props.mState?this.props.mState:"blue"),onClick:this.onMiddleClick,children:this.props.mInfo}),Object(i.jsx)("button",{className:"trisection "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick,children:this.props.rInfo})]});break;case"half":e=Object(i.jsxs)("div",{children:[Object(i.jsx)("button",{className:"half "+(this.props.lDisabled?"gray":this.props.lState?this.props.lState:"blue"),onClick:this.onLeftClick,children:this.props.lInfo}),Object(i.jsx)("button",{className:"half "+(this.props.rDisabled?"gray":this.props.rState?this.props.rState:"blue"),onClick:this.onRightClick,children:this.props.rInfo})]});break;default:e=Object(i.jsx)("button",{className:"single "+(this.props.disabled?"single-disabled":this.props.state?this.props.state:this.props.btnColor?this.props.btnColor:"blue"),onClick:this.onClick,children:this.props.info})}return Object(i.jsx)("div",{className:"sun-action-btns "+this.props.styleName||!1,children:e})}}t.a=o},1058:function(e,t,s){"use strict";var a=s(1),n=s(1101),i=s(9),o=s.n(i),c=s(69),r=s(126),l=s(1113),d=s(1174),p=s(2);const h=()=>{const e=Object(c.d)((()=>r.a.network));return Object(p.jsx)(n.a,{img:l.a,emptyText:o.a.get("buysell.error_msg_3"),btnText:o.a.get("header.connect_wallet"),onClick:()=>e.setData({loginModalVisible:!0,loginModalStep:1}),className:d.wallet_not_connect})};t.a=Object(a.memo)(h)},1064:function(e,t,s){"use strict";var a=s(1),n=s(16),i=s.n(n),o=s(1068),c=s(2);const r=e=>{const{title:t,subTitle:s,isRevert:a}=e,n="string"===typeof t;return Object(c.jsxs)("div",{className:o.page_title_wrap,children:[a&&s&&Object(c.jsx)("div",{className:o.page_title_sub,children:s}),t&&Object(c.jsx)("div",{className:i()({[o.page_title]:!0,[o.page_title_revert]:a,[o.page_title_ele]:!n}),children:n?t.split("").map(((e,t)=>Object(c.jsx)("span",{className:o.page_title_ele,children:e},t))):t}),s&&!a&&Object(c.jsx)("div",{className:o.page_title_sub,children:s})]})};t.a=Object(a.memo)(r)},1067:function(e,t,s){},1068:function(e,t,s){e.exports={page_title:"style_page_title__dfZPh",page_title_wrap:"style_page_title_wrap__7dtV_",page_title_ele:"style_page_title_ele__Tktf1",page_title_sub:"style_page_title_sub__1IUsF",page_title_revert:"style_page_title_revert__18HMS"}},1070:function(e,t,s){e.exports={setting_wrap:"style_setting_wrap__L7ld9",setting_label:"style_setting_label__3qQrG",setting_btns:"style_setting_btns__zH_61",setting_btn_wrap:"style_setting_btn_wrap__uxT1B",setting_input:"style_setting_input__kvJzs",active:"style_active__10VTC",module_important:"style_module_important__PuwNO",info_text:"style_info_text__3K73H",setting_minutes:"style_setting_minutes__1mIXw"}},1090:function(e,t,s){"use strict";var a=s(39),n=s(1946),i=s(1),o=s(93),c=s(1110),r=s(1111),l=(s(1115),s(2));const d=Object(o.a)(window.navigator).any,p=Object(i.memo)((e=>{const{className:t="",pagination:s,tableTheme:i={},...o}=e;return Object(l.jsx)(a.a,{theme:{components:{Spin:{colorPrimary:"#9482f8",colorBgContainer:"#251F32",controlHeightLG:60},Table:{colorPrimary:"#9482f8",colorFillAlter:"rgba(37,31,50,.3)",colorFillSecondary:"rgba(37,31,50,.3)",colorFillContent:"rgba(37,31,50,.3)",colorBgContainer:"#362D4A",colorBorderSecondary:"rgba(255, 255, 255, .1)",colorText:"#fff",colorTextHeading:"#fff",colorIcon:"#bfbfbf",colorIconHover:"#bfbfbf",padding:d?10:20,borderRadiusLG:20,borderRadius:20,...i},Pagination:{borderRadiusLG:5,borderRadius:5,itemSize:24}}},children:Object(l.jsx)(n.a,{className:t?t+" pure-comp dark-table-container":"pure-comp dark-table-container",pagination:!!s&&{position:["bottomCenter"],className:"pure-comp",showSizeChanger:!1,itemRender:(e,t,s)=>"prev"===t?Object(l.jsx)("img",{alt:"pre",src:c.a}):"next"===t?Object(l.jsx)("img",{alt:"next",src:r.a}):s,...s},...o})})}));t.a=p},1113:function(e,t,s){"use strict";t.a=s.p+"static/media/big_connect_wallet.8e467f71.svg"},1115:function(e,t,s){},1123:function(e,t,s){"use strict";var a=s(1502),n=s(1917),i=s(1135),o=(s(1172),s(2));const c={V3:"V3",V2:"V2",V1:"",home:"",Migrate:"Migrate"};t.a=e=>{const{onChange:t,network:s={},version:r="v1",placement:l="bottomRight"}=e,d=s["settingSlippage".concat(c[r])],p=s["settingDeadline".concat(c[r])];return Object(o.jsx)(a.a,{trigger:"click",overlayClassName:"setting_popover",placement:l,content:Object(o.jsx)(i.a,{showType:"popover",slippage:d,deadline:p,onChange:function(e){t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")}}),title:"",children:Object(o.jsx)(n.a,{className:"new_setting_icon"})})}},1127:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return o}));var a=s(1128);const n=e=>{let{tokenAddress:t,t0:s,t1:a,version:n,type:i,from:o}=e;const c={t0:s,t1:a,type:i,from:o,tokenAddress:t},r=[];return Object.keys(c).forEach((e=>{c[e]&&r.push("".concat(e,"=").concat(c[e]))})),"#/sun_swap/".concat(n||"v1","?").concat(r.join("&"))},i=e=>{const{version:t,t0:s,t1:i,tokenAddress:o}=e;let c="";switch(t){case"stable":c=(e=>{let{t0:t,t1:s,type:a,from:n}=e;if("swap"===a){const e={t0:t,t1:s,type:a,from:n},i=[];return Object.keys(e).forEach((t=>{e[t]&&i.push("".concat(t,"=").concat(e[t]))})),"#/home?".concat(i.join("&"))}return"#/usdd_2pool"})(e);break;case"v1":case"v2":c=n(e);break;default:c=(e=>{let{t0:t,t1:s,type:n,feeAmount:i,from:o}=e;if("swap"===n){const e={t0:t,t1:s,type:n,from:o},a=[];return Object.keys(e).forEach((t=>{e[t]&&a.push("".concat(t,"=").concat(e[t]))})),"?".concat(a.join("&"),"#/v3/swap")}if("add"===n){let e="#/v3/pools/add/";return t?(e+=t,s?(e+="/".concat(s),"".concat(e,"/").concat(i||a.b)):e):e}if("pool"===n)return"#/v3/pools/add/TRX"})(e)}c&&(window.location.href=window.location.origin+window.location.pathname+c)},o=e=>{e&&(e.t0||e.t1||e.tokenAddress)&&i(e)}},1128:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return o}));var a=s(221),n=s(142);const i=s.n(n).a.BigInt(0),o=a.FeeAmount.MEDIUM},1129:function(e,t,s){"use strict";var a=s(15),n=s(1978),i=s(6),o=s(1255),c=s(160),r=s(2);t.a=e=>{let{token:t,showTokenName:s=!1,styleName:l="",showTrx:d=!1}=e;return Object(r.jsxs)("span",{className:l,children:[s?Object(r.jsxs)("span",{className:o.token_logo_icon,children:[Object(r.jsx)("img",{alt:"",src:t.tokenLogoUrl||c.a,onError:e=>{e.target.src!==c.a&&(e.target.src=c.a)}}),t.tokenSymbol]}):"",t.tokenAddress&&(t.tokenAddress!==a.a.trxFakeAddress||d)?Object(r.jsx)(r.Fragment,{children:Object(i.G)(Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(n.a,{className:o.token_view_icon})}),t.tokenAddress)}):null]})}},1135:function(e,t,s){"use strict";var a=s(1),n=s(9),i=s.n(n),o=s(1910),c=s(16),r=s.n(c),l=s(223),d=s(0),p=s(1070),h=s(2);t.a=e=>{const{showType:t="",slippage:s,deadline:n}=e,[c,m]=Object(a.useState)("0.5"),[u,b]=Object(a.useState)("1"),[j,k]=Object(a.useState)("0.5"),[g,w]=Object(a.useState)("1"),[x,S]=Object(a.useState)("");Object(a.useEffect)((()=>{O(s,n)}),[]),Object(a.useEffect)((()=>{(j||g)&&v()}),[v,j,g]);const O=(e,t)=>{m(e),b(t),k(e),w(t),f()},v=()=>{m(c),b(u),f(),e.onChange&&e.onChange(j,g)},_=e=>{const t=e.target.value,{valid:s,str:a}=Object(d.V)(t,2);s&&k(a)},f=()=>{j&&(Number(j)<.5?S(i.a.get("settings.slippage_info_1")):Number(j)>5&&Number(j)<50?S(i.a.get("settings.slippage_info_2")):Number(j)>=50?S(i.a.get("settings.slippage_info_3")):S(""))};return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:r()({"flex start wrap":""===t}),children:[Object(h.jsx)(l.a,{toolClass:p.setting_wrap,tip:e.slippate_tip||i.a.get("settings.slippage_tip"),children:Object(h.jsx)("span",{className:p.setting_label,children:i.a.get("settings.slippage")})}),Object(h.jsxs)("div",{className:r()(p.setting_btns),children:[Object(h.jsxs)("div",{className:p.setting_btn_wrap,children:[Object(h.jsx)("button",{className:r()("0.1"===j?p.active:""),onClick:()=>_({target:{value:"0.1"}}),children:"0.1%"}),Object(h.jsx)("button",{className:r()("0.5"===j?p.active:""),onClick:()=>_({target:{value:"0.5"}}),children:"0.5%"}),Object(h.jsx)("button",{className:r()("1"===j?p.active:""),onClick:()=>_({target:{value:"1"}}),children:"1%"})]}),Object(h.jsx)(o.a,{className:r()(p.setting_input,p.module_important,["ml-20"]),suffix:"%",value:j,onChange:_,onBlur:()=>{Number(j)>=50?k(j.slice(0,1)):0!==Number(j)||k("0.01")}})]})]}),x?Object(h.jsx)("div",{className:p.info_text,children:x}):null,Object(h.jsxs)("div",{className:r()({"flex start":""===t}),children:[Object(h.jsx)("div",{style:{marginBottom:"popover"===t?"12px":0},children:Object(h.jsx)(l.a,{toolClass:p.setting_wrap,tip:i.a.get("settings.deadline_tip"),children:Object(h.jsx)("span",{className:p.setting_label,children:i.a.get("settings.deadline")})})}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)(o.a,{className:r()(p.setting_input,p.module_important),value:g,onChange:e=>{const t=e.target.value,{valid:s,str:a}=Object(d.V)(t,0);if(t){if(s){let e=a;Number(a)>1e4&&(e=1e4),w(e)}}else w(t)},onBlur:()=>{let e=Number(g);0===+g&&(e=1),w(e)}}),Object(h.jsx)("div",{className:r()(p.setting_minutes,["ml-10"]),children:i.a.get("settings.deadline_minutes")})]})]})]})}},1136:function(e,t,s){"use strict";var a=s(1),n=s.n(a),i=s(189),o=s(2);const c=e=>{let{url:t,...s}=e;return Object(o.jsx)("img",{src:t||i.a,onError:e=>{e.target.src!==i.a&&(e.target.src=i.a)},alt:"mint-icon",...s})};t.a=n.a.memo(c)},1141:function(e,t,s){"use strict";var a=s(1),n=s(16),i=s.n(n),o=s(1186),c=s.n(o),r=s(2);const l=e=>{const{items:t,bordered:s=!0,responsive:a,responsiveLayout:n="v",style:l={}}=e;return Object(r.jsx)("div",{className:i()(o.info_box,{[o.info_box_no_border]:!s,[o.info_box_responsive]:a,[c.a.info_box_responsive_h]:"h"===n,[c.a.info_box_responsive_v]:"h"!==n}),style:l,children:t.map(((e,t)=>Object(r.jsxs)("div",{className:o.info_box_item,children:[Object(r.jsx)("div",{className:o.info_box_label,children:e.label}),Object(r.jsx)("div",{className:o.info_box_value,children:e.value})]},t)))})};t.a=Object(a.memo)(l)},1142:function(e,t,s){"use strict";t.a=s.p+"static/media/TransactionSuccess.9be097c2.svg"},1146:function(e,t,s){},1147:function(e,t,s){},1148:function(e,t,s){"use strict";var a=s(1),n=s(16),i=s.n(n),o=s(1173),c=s(272),r=s(2);const l=e=>{const{className:t,fullFilled:s,...a}=e;return s?Object(r.jsx)("img",{className:i()(o.question_img,t),alt:"",src:c.a,...a}):Object(r.jsx)("span",{className:i()(o.question_icon,t),...a,children:"?"})};t.a=Object(a.memo)(l)},1158:function(e,t,s){},1165:function(e,t,s){"use strict";var a=s(1),n=s.n(a),i=s(93),o=s(9),c=s.n(o),r=s(1038),l=s(6),d=(s(1363),s(2));class p extends n.a.Component{constructor(e){super(e),this.confirm=()=>{this.props.confirm&&this.props.confirm()},this.cancel=()=>{this.props.cancel&&this.props.cancel()},this.state={}}render(){const e=Object(i.a)(window.navigator).any?0:64;return Object(d.jsxs)(r.a,{footer:null,title:null,closable:!0,maskClosable:!1,open:this.props.visible,className:"unfinished-pop sun-swap-modal",onCancel:this.cancel,style:{marginLeft:Object(l.o)()+e},width:430,centered:!0,transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",children:[Object(d.jsxs)("div",{className:"title",children:[c.a.get("sunSwap.action.popTitle"),Object(d.jsx)("p",{children:c.a.get("sunSwap.action.popDesc")})]}),Object(d.jsxs)("div",{className:"btns",children:[Object(d.jsx)("button",{onClick:this.confirm,children:c.a.get("sunSwap.action.popQuitBtn")}),Object(d.jsx)("button",{onClick:this.cancel,children:c.a.get("sunSwap.action.popCancelBtn")})]})]})}}t.a=p},1170:function(e,t,s){},1171:function(e,t,s){"use strict";var a=s(1),n=s(2);t.a=e=>{let{visible:t,onChange:s}=e;return Object(a.useEffect)((()=>{t&&s&&s()}),[t,s]),Object(n.jsx)(n.Fragment,{})}},1172:function(e,t,s){},1173:function(e,t,s){e.exports={question_icon:"style_question_icon__3ZWoP",question_img:"style_question_img__1bgzg"}},1174:function(e,t,s){e.exports={wallet_not_connect:"style_wallet_not_connect__2Qekr"}},1175:function(e,t,s){"use strict";var a=s(270),n=s(16),i=s.n(n),o=(s(1176),s(9)),c=s.n(o),r=s(223),l=s(2);t.a=e=>{let{pageList:t,activePage:s,onPageChange:n}=e;return Object(l.jsx)("div",{className:"page-panel-wrap",id:"swap-tab",children:Object(l.jsx)("div",{className:"panel-header",children:t.map(((e,t)=>Object(l.jsxs)("div",{className:i()({"panel-header-item":!0,"panel-header-item-active":e.key===s,flex:!0}),children:[e.path?Object(l.jsx)(a.b,{to:e.path,children:e.textKey?c.a.get("sunSwapV3.panelHeader.".concat(e.textKey)):e.text}):Object(l.jsx)("span",{onClick:()=>n&&n(t,e),className:"page-item-text",children:e.textKey?c.a.get("sunSwapV3.panelHeader.".concat(e.textKey)):e.text}),e.tips&&Object(l.jsx)(r.a,{tip:e.tips})]},e.key)))})})}},1176:function(e,t,s){},1186:function(e,t,s){e.exports={"page-head":"style_page-head__Q5_41",link:"style_link__gpGN-","gradient-title":"style_gradient-title__3TOPy",animateTitle:"style_animateTitle__JszRT","dim-content":"style_dim-content__3_Ul3",uppercase:"style_uppercase__PmEs8","window-for-tabs-pane":"style_window-for-tabs-pane__1V2Lv","dark-btn":"style_dark-btn__DQL_s","purple-btn":"style_purple-btn__2SawB","cur-input":"style_cur-input__37INw","max-btn":"style_max-btn__npQR2",info_box:"style_info_box__1963G",info_box_no_border:"style_info_box_no_border__W8LQy",info_box_item:"style_info_box_item__3JfS2",info_box_label:"style_info_box_label__f3QFH",info_box_value:"style_info_box_value__1v2mN",info_box_responsive:"style_info_box_responsive__3jNYY",info_box_responsive_h:"style_info_box_responsive_h__3eg33"}},1187:function(e,t,s){"use strict";var a=s(1941),n=s(1123),i=s(223),o=(s(1266),s(2));t.a=e=>{const{title:t,tip:s,onBack:c,showSetting:r=!1,onSettingChange:l,network:d,version:p}=e;return Object(o.jsxs)("div",{className:"v3-sub-nav",children:[Object(o.jsx)(a.a,{className:"v3-sub-nav-left-arrow",onClick:c}),Object(o.jsxs)("div",{className:"flex",children:[Object(o.jsx)("span",{className:"v3-sub-nav-title",children:t}),s&&Object(o.jsx)(i.a,{tip:s})]}),Object(o.jsx)("div",{className:"v3-sub-nav-right",children:r&&Object(o.jsx)(n.a,{onChange:l,network:d,version:p})})]})}},1210:function(e,t,s){"use strict";var a=s(1),n=s.n(a),i=s(9),o=s.n(i),c=s(1915),r=s(1033),l=(s(1362),s(2));const d=Object(l.jsx)(r.a,{style:{fontSize:24},spin:!0});class p extends n.a.Component{constructor(e){super(e),this.state={}}render(){const{children:e}=this.props,t=n.a.Children.toArray(e).map(((e,t)=>{const{children:s,status:a,err:n,failed:i}=e.props;let r=s;return"error"===a&&(r=n||s),"pending"===a&&(r=o.a.get("sunSwap.action.doingAct")),"failed"===a&&(r=i||s),Object(l.jsxs)("div",{className:"al_item ".concat(a?"".concat(a):""),children:[Object(l.jsxs)("div",{className:"flex",children:[Object(l.jsx)("span",{className:"al_number",children:t+1}),Object(l.jsx)("span",{className:"al_title".concat(a?" ".concat(a):""),children:r})]}),"pending"===a&&Object(l.jsx)(c.a,{indicator:d,className:"spiny"})]},e.key)}));return Object(l.jsx)("div",{className:"action-line",children:t})}}t.a=p},1250:function(e,t,s){"use strict";var a=s(16),n=s.n(a),i=(s(1251),s(2));t.a=e=>{const{children:t,className:s,disabledCanClick:a,disabled:o,onClick:c,...r}=e;return Object(i.jsx)("div",{onClick:e=>{(a&&o||!o)&&c&&c(e)},className:n()("sun-button-primary",{"sun-button-weak":a&&o},s),...r,children:t})}},1251:function(e,t,s){},1252:function(e,t,s){"use strict";var a=s(1511),n=s(1),i=(s(1253),s(2));const o=e=>{const{prefix:t,showPrefix:s,suffix:o,showSuffix:c,enterButton:r,value:l,onSearch:d,...p}=e,h=Object(n.useRef)(null);return Object(i.jsxs)("div",{className:"sun-search-input-wrap",children:[s&&Object(i.jsx)("div",{className:"sun-search-input-prefix",children:t||Object(i.jsx)(a.a,{style:{color:"rgba(255, 255, 255, .5)"}})}),Object(i.jsx)("input",{ref:h,type:"text",className:"sun-search-input",value:l,...p}),c&&Object(i.jsx)("div",{className:"sun-search-input-suffix",children:o||(r?Object(i.jsx)("div",{className:"sun-search-input-btn",onClick:()=>{var e;return d&&d(null===(e=h.current)||void 0===e?void 0:e.value)},children:r}):null)})]})};o.defaultProps={showPrefix:!0,showSuffix:!0},t.a=Object(n.memo)(o)},1253:function(e,t,s){},1254:function(e,t,s){},1255:function(e,t,s){e.exports={token_view_icon:"style_token_view_icon__2mRa-",token_logo_icon:"style_token_logo_icon__2_bsW"}},1256:function(e,t,s){e.exports={remove_liq_title:"style_remove_liq_title__Nrq_E",remove_liq_fee:"style_remove_liq_fee___gp6i",remove_liq_num:"style_remove_liq_num__XhztX",remove_liq_btn:"style_remove_liq_btn__1wZsk",remove_liq_active_btn:"style_remove_liq_active_btn__Lo8Al",remove_liq_token:"style_remove_liq_token__3J2um",remove_liq_value:"style_remove_liq_value__18eCU",remove_liq_price:"style_remove_liq_price__1uAT9"}},1257:function(e,t,s){},1258:function(e,t,s){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAAA/JJREFUWEfVWctqFUEQPeX7/X5tXIkIouBa/AkxgkYXgrhwIQiufaCuxYXoQsSNGkHFnxDXgiKIuHJlTIwmMYmJ8ci5Voe+k3tneuaOIVMwhCTT3aerTlWdnjb0YCQNwHIAKwEsA7AEwFL/qZn/AJj1n78B/AIwY2asuqwWLG0kBXCVPwJZxrSJKT1mpg2UslKASa4AsMG9GhaSBwVgJuNR/T/2uCKhTSoCwTRm1MymU1EnASapcK/3BUOoJ9xLWjTZSAbgayLqaMNjZiba5FohYA//ZgB6V9z7qcfMFNrKRlLeX+tPmHukiCa5gElqQlFAJi8ofKJAbUZSFNEaootMa8gpHa0rYJIbAShssnE9vWR33g692qwDoEc2YWY/Oo3pCDjj2e9mNlmbS3MmIrkawKY8T88D7Jzd4oMWDGzYRwb0tyyn2wB7NdjmCSYKjC2EZ7NrkFRFEj2U5ENx9cgCVjUQ+ZVg8m6pjkTyMIA9AAZSSlQ3ZzinRY0WFjMbCe/OAfamsNV39bVMNSCp5LwN4JxPfMPMrvQSHa8e2z3aw6G5xIBFBRX1UlQgeRDAUwD7I4A9A9ZcETWkP4b0txbgKNHUDOTdpKZA8jyAW1EN1XQDAM7WUVm8ucjLajKtBAyAxReVlCTvkhTXHwA4GnlVxf6CmT3shQo5CdiqzeYE3+G7UEbmagOSRwA8AbA7mvwNgBNm9qFOsB590VR0VdQHBVgKTMk2a2aDBR3pMoCrGcWljnTPtW4VvB/lgLyKRFIOVQsfFuBQ8yRoRnNKzTEAz6sgShhz2swe56wtrSFdMy7AofbmdjWSfQCeJSxe5ZUiwKFlTwmw6CBazGuDHRJAoA9UQZQzJoUSOuFILkwLcOCHylmhgK4ZbNJ0LhlU3mYFeJfX4y+p9TdplRpf8nq8Uy2jkYAbR4mkpPMG0w9gb43R1lTvzCy3XEbSoZV0qWXtFIBHNYMN0x3PAx2J+lZZS20c/xNwn5m9SG0cSa25Bkqolkrd6XAbTCfwa2Z2s0AStLVmKbZk8VOFEiT3uWY+FI3/DKDfzF4VgG0XP66IwpE+SV6WAU3yDIA7rgXC0JeumeeOPjl0CJT9Jy8dcGh9pQR8gWfU/6WZT0bv6ax4yczupmy6q4B30JWOSDmeuQ5AcjTYe9fMb1PAOqbg3fYjkv8zJJ9OyqUOoZ0AkIwB3wdw0cz0ATHJCg+hDrqnY36MxAWL6PDJzF4nofSXko75DlifVZvzISWTgPp1cX+qCmFr1MfACHRzPrd28fTi/qAdgVZTacaVQQS6OZcymdrajGuvbNH3E4C0guhS5WJRF4qTRTdGnZpN4bVXgcBZ8Kvbv7gRNO3rhp7CAAAAAElFTkSuQmCC"},1259:function(e,t,s){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAABjJJREFUaEPdW0moXEUUPcd5ivM8gKJBxYUriRsHHHCI4EJQFEGMw8aNbpw2JhuHla6NmoWiKG4ERxwwujELFy5ERUXBIZp5TjSJR07+rU7997v7Vb1+0dAXmub9rqp3T91Td3rvEz2LJAI4GMAhAA6KzwEA/PFvFgH4Jz67APjzN4CdJP1bb5JuONGCAepQAIcD8HfXdQ3uLwDb/d0H2K6KzJhhxlpHAjiqAWp3KJqs42tbLFnH82zRAzMre2N8ncRjtwDYOgnQTgADmK01LxS1Ugbjnd9O0oCqRZIBel1/TG+LN2ZzrFtN32qAkg4LYEmBnVaApKnVm0iyRb2BPs9pA32fHTU3KQYYVvMNTUmLreQb2mr7TCQlpiT6bo37FlmzCKAkn5djw4EYjCkz0dmo2ZHsrHuDLWbLBpKm71hpBSjJVDwuzoR3bX3fdGxTMv0etLUu1ttn3rr4e6SMBRjgTghHUrRgqbJdxzU23BZcOw7kSIBBS4OzBR2EvVutlOiqeM280M2WdDLhjTfIoboNBRic9wL2ZGMXqFGsz7ENA/hM2gBzHM8ogEeHt/SENW0871PxmrWCrifGmbTT29ScPwdgxDlbz7Lu/3IopUDD8Rwf423FWXFyFsCgpnfE584xzqnSfi+SnCo6hPg4mXEDqjYBHgHgmAjiq2tyQEnOOK4AcFHEzNYQ1Ng5K7UBwNcAlpN0hlQkYZiTIpfdSHJbmjhQIgadHCHBQbQ4Q5F0HYClAM4q0qh90C8A7iP5QfvQmRGR8TgZsTddlYyTA0xmdk22pmLhpwE8Ujq+ctwzJB8tnSPJx8tMGhyvPQDDeqeENyp2LJJuAPBupsDvAD4E8HOpUo1xZwO4FsDp2d9vJPleyXqZwzHd/7QVE0BXCPacu0iuLlzMQfanTJk3ASwi6Ty1s0iys1gG4JZYxJt2DkknG60iyWfRTnKPR00ADc4giz1nnLv3446/AriwL68bXvEbAGfG+teXnsfMo+4guZ4NevpwFhWrkh4E8GwosIzkotbtrRgg6SUAd8eUh0g+VzI9imY7yxmaSjLVnHPuJrmqZJE4t4sBPBHjl5D0dW8iKV9/McklpYtLMkDXj2sNMHnPbSQ3liwiydR5GcAlWQHcnLoSwKcAHiZpCldJA2DVBkpyLHdM32yAjh2umjeRdLU8VgLcVwBSetQ2ZR2Ai2tBTgjQXQfn09sNMMWOovAg6VUAt7ehavz+Gsk7auZMCNBVkA2w0wATX52aja2O4+zZbZ8Wyi4kmcfBAQZJCwG8HX9YSTKPba1YJwToMOFwsdsAT40A78DYWtBK2pvIkm0dgaKxkq4GcBuAywGcEehdFZhdltoz6B6SExcZYLLGHyXJdZ8AJc2PHNZJ+jj50seC5Petpt+bmdlw6AIwp+hNJN8ZdtM2ikq6DMBbkUGV6L0ewM0kP28bHLF9ALCWohM7mbDcigycqfwCgBejXDIGl133ALg3eyxgkAvaLBntjAFFa52MY+BEYUKS42OipePlnSQ/GcGEqwC8kjk214pXjrNitDIGTqYqTIQn7Rzow6F8FAractckcJLOBZDyW+efP8b9DNJzklPznI9Hgcyqij1hoirQp0UlOU1L6Vmxl5P0vIvZWGcpyfuzNR8D8GRcP07yqey3kfOaQCXNCvTVqVrsaqdkW9K3AM4PpS4luSIsdysAdwYSdZcDcEX/hi0paQGAL2LedyQvGGPBWala12TbylSXS5JcL3pTLfNcYkmy+z9vhMI/kJwfOXOqNbeQTM8p5kxrJtvmdarma8qlTgXvvgY4p1wKulUXvDGvS8vigSxD6Z2icwreULS6ZZEd/kmaTr07mVEti5ymRVVFTvwJ2oa9homRTaewYqe2YWbJmsbvXQDcQbP0FuhHtg0DoK3YqfE7yl2PceNOsntN1VobvwGyc+u+A8jeku2i1n1mxf/s4UtFueSg71b+0HKp+OFLw6P6strh1Foy7jms4P0NwGcAXi/MO73U+MdnmcOY3gegGVWn9xF2gHRfYzpfQsio6u7UdL5G0gA5nS8CZSCn91WuDKQznel8Ga+RWE/n65QNkLbmdL4QOwTo9L3S3EzHpval9GF55/72bwX/ApHa3TI9wHVxAAAAAElFTkSuQmCC"},1260:function(e,t,s){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAAXNSR0IArs4c6QAABn9JREFUaEPdm1usXGMUx3+rp3VtlbpTQWhU+uCF8EJdKi6VtDUTUpGIUi9eeMGbeuOJZ7c+EEJmtE1co2h50YQHD40Kgiil9H6l51jy32ftyT5zzsz+9syUZr5kMpmzv2/t9f/+6/rtfYwBD3c3YAZwHDA9PtMAfXRNw4F/4jMK6PM3cMTMdG1gI79hXwID1PHAiYC+e5UrcH8Bh/Q9CLC9KjJOwzhbJwMz20CNhaI5O/otxnJ2tE6MjhRY1sbodz40dz9woB+gPQEMYGJrVigqpQRGO3/IzASo8nB3AZRcfWTeGtqYfSG3svlWBujuJwSwXIEjUsDMZFoDG+4uRrWB8ud8A3Wfw1VukgwwWNMNZZIaYkk3FGtHbbh7bim5+R6I+yaxmQTQ3eUvp0YAERiZTF++UWVHCr6uDdaQtew2M5lv11EK0N1liqeFT2jXdg3aHMuUzK+H2UoX6S2fly767ji6Agxwp0cgSRKYqmyv89o2XAzu6AayI8AwS4ETg0rC2q1Sk+hV8SrrQjcxqWJCGy+QU+o2JcCweQlQJOsqoIpig5zbRoB8UgRMCjydAJ4S0VIL/iyz80EqXkVWmOsZ4ZMKenvb108CGHlO7Gns/L8CSirQCDxzYr5YnJAnJwAM09SOyO+U41QqHfPD3VUqKoXInWRxLVNtB3gSMDuS+B9VakD/ghn8xEKcBViWM0tTUNvOOc5ujM1cyEa7ElVISSOIOTNq2T1mdjBf2FIiJp0VKUFJNLlC8Qa3YLyAc0GSRmWTjJ9xVlqdD8qm5tej4tHGKppuz8kpAsxpVk/2Z7LgJk/jPJ46v9I84xmr8UTqGneXe6l2bblXBjDYOzvMKjmw+BpuY4x3WwoYv+J8iPFjqlIT5jkXYdyMc17r7yPcbst4L0VeIeDIB38XizlAdQiKnKNm9keSsM0cxxZ+aCljNJjOCluS1ak9D1/HLEZZjVPLhGjT5nOxLciKjdLh7vJFBcksouYABU4gkyNn5nfwfiixlTlcbjdkDWrfwz9hJjv5GmduCLs11R8LEfWwme2yNvOUcyY1q97kEZxnA+Bqq7Gib2QFAd7kZZz7Q/6jVuO5FPnRNCtYjpupu6ueU805ZmbbU4RkfttkFc6TocBTVmNV6tqUeW3yV1mNp1LWZbq5C6D6xx0CmEfPg2a2J0WIN5mL8wpwVaEBnrjU2IazAeMxq7E1RW5xTj8b6O7K5crp+wRQuUNd814zU7fcdQS4r4C8PCpbshPjiqog+wSoUwfV04cEMM8dSenBG7wGLC9D1Xb9datzT5U1fQJUFyQCjghgbq8qzbp2x+F7ynXnhrKLrV7IgxODxGKct8NHt1mtkNsSkPYJUGlC6WJMAM+JBK/EWNrQeqN1tonVu9ebqXN9DTcxxt3AdcD5sSmHcWRdyoWVglj0iipcXABzNn5LKa5Tlc7YLtkMbzAvatiFXUk1vsRZbnW+TSA/r8xEHNUBNrNybHxTjDusxjtT3dSbdDVRX8u1jLEOzyqo8mHsYoQltpTPyiZHbm8BrGqifQeZYG5TC5yhVulFpvMSs9mcAdjDAkZ5AONBPFxBIJ2ry5hsN9GqQUY5sK804U024IybpfKlca/dycdTWsJb3IjzasFqNlqN67uxGEcZrSBTKU1EJO050UdAWR/gxM2iTuByED4Ocn2LyREW2TI+6gSy0FVkaaJSom/dtMmTeJRnFaKcN3geWBlyXrA6D5X5VASs5HXuPiHRVy7VgsWeim1vsAW4LAM1nWtsKZt8DZfwD3cVHg3kmP9iGm/aMr73tVzNKJ/HhW+szvwuDE4o1Xortntsl7yR9YvaVJX4s9RieSML/5d2UPg7qzMva6F2tHrN/VbPDpmmHO3FtnrCvJtPb5d6bHiPNsBJ7VJmbu6VG95sXW9HFg+3KpSjYKKTGt4AWPnIohBs+jl0GniQ6XRkUTTTpK6iaPw9HxsqwQ8wTXQ8dAoWezo2bDFZ7eD3PnSCNuBE3/HYMACKxZ4OflPyWBvjKrIHWqqVHvwGyJ6P7iuDHGCxnXR0X2DxP3v4UqFd2hhH+VO2S8kPX9oiqn5WDjhVmYx0M7nhhV+ATxnhjcS6U6K6Pz5rBQz34X0AWjDV4X2EHSD1bsxwvoRQMFWdTg3nayRtIIfzRaACyOF9lasAUpXOcL6MN6HMGtbXKdtAis3hfCF2CqDD90pzezk2tC+lT1V3Hmv/VvAvO9naMpPiOwsAAAAASUVORK5CYII="},1261:function(e,t,s){"use strict"},1262:function(e,t,s){"use strict";var a=s(1),n=s(39),i=s(167),o=s(1263),c=s(9),r=s.n(c),l=s(2);const d=e=>{const{showMigrate:t,showAdd:s,showRemove:a,className:c,onMigrate:d,onAdd:p,onRemove:h,removeDisabled:m}=e;return Object(l.jsxs)("div",{className:c,style:{textAlign:"right"},children:[t&&Object(l.jsx)(n.a,{theme:{token:{colorText:"#5A14E1",colorBgContainer:"#DECDFF",colorPrimary:"#5A14E1",colorPrimaryHover:"#5A14E1",controlHeight:30}},children:Object(l.jsx)(i.a,{style:{border:"none"},className:o.liquidity_btn_migrate+" pure-comp",onClick:()=>d&&d(),children:r.a.get("sunSwap.migrate.title")})}),s&&Object(l.jsx)(n.a,{theme:{token:{colorText:"#fff",colorBgContainer:"#8C51FF",colorPrimary:"#fff",colorPrimaryHover:"#fff",controlHeight:30}},children:Object(l.jsx)(i.a,{style:{border:"none"},className:"pure-comp",onClick:()=>p&&p(),children:r.a.get("sunSwap.pool.base_increase_link")})}),a&&Object(l.jsx)(n.a,{theme:{token:{colorText:"#C1A0FF",colorPrimaryHover:"#C1A0FF",controlHeight:30,colorTextDisabled:"rgba(255, 255, 255, 0.5)"}},children:Object(l.jsx)(i.a,{disabled:m,onClick:()=>h&&h(),className:o.liquidity_btn_remove+" pure-comp",type:"text",children:r.a.get("sunSwap.pool.base_remove_link")})})]})};t.a=Object(a.memo)(d)},1263:function(e,t,s){e.exports={liquidity_btn_remove:"style_liquidity_btn_remove__2AFYU",liquidity_btn_migrate:"style_liquidity_btn_migrate__UEXPP"}},1264:function(e,t,s){e.exports={wallet_not_connect:"style_wallet_not_connect__2Wm9c"}},1265:function(e,t,s){e.exports={"page-head":"style_page-head__1BLAB",link:"style_link__3S1dj","gradient-title":"style_gradient-title__3MHT8",animateTitle:"style_animateTitle__2WZFP","dim-content":"style_dim-content__12T8T",uppercase:"style_uppercase__3-6jb","window-for-tabs-pane":"style_window-for-tabs-pane__4neP4","dark-btn":"style_dark-btn__2oICp","purple-btn":"style_purple-btn__30BiF","cur-input":"style_cur-input__1R2iF","max-btn":"style_max-btn__2xtc9",sun_swap_content:"style_sun_swap_content__1pfSB",sun_swap_content_detail:"style_sun_swap_content_detail__3O12x",page_tab_wrap:"style_page_tab_wrap__3N5Xm",page_tab_nav_wrap:"style_page_tab_nav_wrap__lRKwD",v3_new_icon:"style_v3_new_icon__3xLDJ"}},1266:function(e,t,s){},1267:function(e,t,s){},1269:function(e,t,s){"use strict";var a=s(1),n=s(9),i=s.n(n),o=s(1103),c=s.n(o),r=s(16),l=s.n(r),d=s(1053),p=s(1064),h=s(6),m=s(104),u=s(1054),b=s(1175),j=s(1123),k=s(1265),g=s(1187),w=s.p+"static/media/v3_new.ebab458d.png",x=s(2);const S=e=>{const{routeName:t,version:s,onVersionChange:n,onSettingChange:o,isDetailPage:r,children:S,detailPage:O={},network:v,..._}=e,[f,A]=Object(a.useState)(0);Object(a.useEffect)((()=>{Object(m.b)().then((e=>{const{allSwaps:t}=e.data||{};A(t)}))}),[]);const y=Object(a.useMemo)((()=>Object(x.jsx)(c.a,{start:0,redraw:!0,end:Number(Object(h.a)(f).toFixed(0,1)),duration:1,prefix:"$ ",separator:","})),[f]);return Object(x.jsxs)("div",{children:[Object(x.jsx)(d.a,{routeName:1321,mountedActions:()=>{},instantActions:()=>{}}),Object(x.jsxs)("div",{className:"main-page-content",children:[Object(x.jsx)(p.a,{title:y,subTitle:i.a.get("sunSwap.total_stake"),isRevert:!0}),!r&&Object(x.jsxs)("div",{className:k.page_tab_nav_wrap,children:[Object(x.jsx)("img",{src:w,alt:"new",className:k.v3_new_icon}),Object(x.jsx)(u.a,{list:[{label:"V3",value:"V3",route:"v3/swap",handler:n},{label:"V2",value:"V2",route:"sun_swap/v2",handler:n},{label:"V1",value:"V1",route:"sun_swap/v1",handler:n}],activeKey:s?s.toUpperCase():"V3"})]}),!r&&Object(x.jsxs)("div",{className:k.page_tab_wrap,children:[Object(x.jsx)(b.a,{..._}),Object(x.jsx)(j.a,{onChange:o,network:v,version:s})]}),Object(x.jsxs)("section",{className:l()({[k.sun_swap_content]:!0,[k.sun_swap_content_detail]:r}),children:[r&&Object(x.jsx)(g.a,{...O}),S]})]})]})};t.a=Object(a.memo)(S)},1271:function(e,t,s){"use strict";var a=s(1),n=s.p+"static/media/loading_chry.cbf82baf.svg",i=s(16),o=s.n(i),c=s(2);const r=e=>{const{className:t,style:s,size:a=20}=e;return Object(c.jsx)("div",{className:o()("infinite-loading",t),style:s,children:Object(c.jsx)("img",{className:"infinite-loading-circle",style:{width:a,height:a},src:n,alt:"loading"})})};t.a=Object(a.memo)(r)},1272:function(e,t,s){"use strict";var a=s(1),n=s(1101),i=s(9),o=s.n(i),c=s.p+"static/media/table_no_data.fbf13c8c.png",r=s(1264),l=s(2);const d=()=>Object(l.jsx)(n.a,{img:c,emptyText:o.a.get("sunSwap.pool.base_noLiquidity_tip"),className:r.wallet_not_connect});t.a=Object(a.memo)(d)},1273:function(e,t,s){"use strict";var a=s(189),n=s.p+"static/media/token_loading.df40235f.svg",i=s(1),o=s(16),c=s.n(o),r=(s(1254),s(2));const l=e=>{let{src:t,defaultSrc:s,className:o,...l}=e;const[d,p]=Object(i.useState)(n),h=t||s||a.a;return Object(i.useEffect)((()=>{let e=new Image;e.src=h,e.onload=()=>{p(h),e=null},e.onerror=()=>{p(a.a),e=null}}),[h]),Object(r.jsx)("img",{src:d,...l,alt:"logo",className:c()("sun-icon-img",o)})};t.a=Object(i.memo)(l)},1300:function(e,t,s){"use strict";var a,n=s(1),i=s.n(n),o=s(187),c=s(9),r=s.n(c),l=s(1038),d=s(1500),p=s(6),h=s(15),m=s(2);let u=Object(o.b)("sunSwapNetwork")(a=Object(o.c)(a=class extends i.a.Component{constructor(e){super(e),this.changeCheckStatus=e=>{this.setState({checkStatus:e})},this.comfirmContinue=()=>{const{checkStatus:e}=this.state;e&&this.props.cb()},this.componentDidMount=()=>{},this.state={checkStatus:!1}}render(){const{visible:e,dealWarningSymbol:t}=this.props,{checkStatus:s}=this.state;let{symbol:a,slippage:n}=t?h.a.deflationToken[t]:{symbol:"",slippage:""};return Object(m.jsx)(l.a,{title:r.a.getHTML("list.deal_warning_title",{value:a}),closable:!1,open:e,footer:null,style:{marginLeft:Object(p.v)(500)},width:525,className:"list-addtoken-modal deal-warning-modal sun-swap-modal",centered:!0,transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",children:Object(m.jsxs)("div",{className:"solor-modal-body",children:[Object(m.jsxs)("div",{className:"tips",children:[Object(m.jsx)("div",{className:"tips1",children:r.a.getHTML("list.deal_warning_content_1",{value:a})}),Object(m.jsx)("div",{className:"tips1 yellow",children:r.a.getHTML("list.deal_warning_content_2",{value:n})}),Object(m.jsx)("div",{className:"tips1",children:r.a.getHTML("list.deal_warning_content_3",{value:a})})]}),Object(m.jsx)("div",{className:"check-box"+(s?" checked":""),children:Object(m.jsx)(d.a,{onChange:e=>this.changeCheckStatus(e.target.checked),children:r.a.get("sunSwap.list.i_understand")})}),Object(m.jsx)("div",{className:"btns",children:Object(m.jsx)("button",{onClick:this.comfirmContinue,className:s?"button-active":"",children:r.a.get("sunSwap.list.continue")})})]})})}})||a)||a;t.a=u},1301:function(e,t,s){"use strict";var a=s(1),n=s(1364),i=s(2);const o=e=>{const{title:t,content:s}=e;return Object(i.jsxs)("div",{className:n.warning_tip,children:[t&&Object(i.jsx)("h4",{className:n.warning_tip_title,children:t}),s&&Object(i.jsx)("div",{className:n.warning_tip_content,children:s})]})};o.defaultProps={},t.a=Object(a.memo)(o)},1362:function(e,t,s){},1363:function(e,t,s){},1364:function(e,t,s){e.exports={warning_tip:"style_warning_tip__3dgbE",warning_tip_title:"style_warning_tip_title__3J0wk",warning_tip_content:"style_warning_tip_content__fTsNT"}},1365:function(e,t,s){e.exports={"swap-block":"style_swap-block__3xRpJ","sunswap-chose-token":"style_sunswap-chose-token__1LIsY","select-token-top":"style_select-token-top__1xNRr",dragDown:"style_dragDown__17tRO","token-detail":"style_token-detail__Bez9o","input-block":"style_input-block__1Jmxi","input-number":"style_input-number__1lhaz","swap-balance":"style_swap-balance__m1Zwe","max-btn":"style_max-btn__1yKnZ","media-trade-router-pc":"style_media-trade-router-pc__3z-07","media-trade-router-mobile":"style_media-trade-router-mobile__1kjoQ",root:"style_root__3pGMk",flex:"style_flex__2Qw9R",pool_info_title:"style_pool_info_title__1py-K",pool_logo:"style_pool_logo__28EZc"}},1366:function(e,t,s){"use strict";t.a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAANCAMAAAB4p3UoAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEJQTFRFAAAASFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlSFDlDTbkywAAABZ0Uk5TAIDuQFf/9AFYP9cvsf78ImriLWQuePVMmBkAAABCSURBVHicY2DADRiZmNFEWFhZMYXYcAmxIwAHKysnAwMXKyrgZuABkrwQABLg40cxSIBVUIhEAWFWVhFU14hyQQQA99wCt/58bxkAAAAASUVORK5CYII="},1367:function(e,t,s){"use strict";var a=s(1),n=s(1928),i=s(1930),o=s(328),c=s(1368),r=s(1148),l=s(2);const d=e=>{const{title:t,tip:s,value:a}=e;return Object(l.jsxs)(n.a,{className:c.list_header,align:"middle",justify:"space-between",children:[Object(l.jsxs)(i.a,{span:12,children:[Object(l.jsx)("span",{children:t}),s&&Object(l.jsx)(o.a,{title:s,overlayClassName:"tooltip",color:"rgba(27,31,38,0.90)",children:Object(l.jsx)(r.a,{className:c.list_header_icon})})]}),Object(l.jsx)(i.a,{span:12,style:{textAlign:"right"},children:a&&Object(l.jsx)("div",{children:a})})]})};d.defaultProps={},t.a=Object(a.memo)(d)},1368:function(e,t,s){e.exports={list_header:"style_list_header__3pl6p",list_header_icon:"style_list_header_icon__2amZ7"}},1369:function(e,t,s){e.exports={"page-head":"pool_page-head__3PMYt",link:"pool_link__17GqF","gradient-title":"pool_gradient-title__2-sgq",animateTitle:"pool_animateTitle__aNJp5","dim-content":"pool_dim-content__3yQA5",uppercase:"pool_uppercase__1uPY9","window-for-tabs-pane":"pool_window-for-tabs-pane__2bVrW","dark-btn":"pool_dark-btn__3U_Eu","purple-btn":"pool_purple-btn__1C5ek","cur-input":"pool_cur-input__1dDZC","max-btn":"pool_max-btn__3LEa6",pool_list:"pool_pool_list__2ardF",pool_list_logo:"pool_pool_list_logo__fy9pI",pool_list_logo_right:"pool_pool_list_logo_right__3OXOL",pool_list_btns_add:"pool_pool_list_btns_add__1h9sM",pool_list_btns_remove:"pool_pool_list_btns_remove__1TllO"}},1370:function(e,t,s){"use strict";var a=s(1),n=s(16),i=s.n(n),o=s(1136),c=s(1371),r=s(1102),l=s(2);const d=e=>{const{token0:t,token1:s,pool_share:a,pool_tokens:n,onAdd:d,onRemove:p,onMigrate:h,showMigrate:m,disableRemove:u,originItem:b,toScan:j}=e;return Object(l.jsxs)("div",{className:c.liquidity_item_wrap,children:[Object(l.jsxs)("div",{className:c.liquidity_item_header,children:[Object(l.jsx)(o.a,{url:null===t||void 0===t?void 0:t.tokenLogo,className:c.liquidity_item_token_icon}),Object(l.jsx)(o.a,{url:null===s||void 0===s?void 0:s.tokenLogo,className:c.liquidity_item_token_icon,style:{marginLeft:-6}}),Object(l.jsx)(r.a,{className:c.liquidity_item_name,href:j,children:"".concat(null===t||void 0===t?void 0:t.tokenSymbol,"/").concat(null===s||void 0===s?void 0:s.tokenSymbol)}),m&&Object(l.jsx)("div",{className:c.liquidity_item_migrate_btn,onClick:()=>h&&h(b),children:"Migrate to V2"})]}),Object(l.jsxs)("div",{className:c.liquidity_item_content,children:[Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:c.liquidity_item_info,children:[Object(l.jsx)("div",{className:c.liquidity_item_info_info_label,children:"Pool Share:"}),Object(l.jsx)("div",{className:c.liquidity_item_info_info_value,children:a})]}),Object(l.jsxs)("div",{className:c.liquidity_item_info,children:[Object(l.jsx)("div",{className:c.liquidity_item_info_info_label,children:"Pool Tokens:"}),Object(l.jsx)("div",{className:c.liquidity_item_info_info_value,children:n})]})]}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:c.liquidity_item_info,children:[Object(l.jsx)(o.a,{url:null===t||void 0===t?void 0:t.tokenLogo,className:c.liquidity_item_token_icon,style:{marginRight:8}}),Object(l.jsx)("div",{className:c.liquidity_item_info_info_label,children:Object(l.jsx)("span",{children:null===t||void 0===t?void 0:t.tokenSymbol})}),Object(l.jsx)("div",{className:c.liquidity_item_info_info_value,children:null===t||void 0===t?void 0:t.amount})]}),Object(l.jsxs)("div",{className:c.liquidity_item_info,children:[Object(l.jsx)(o.a,{url:null===s||void 0===s?void 0:s.tokenLogo,className:c.liquidity_item_token_icon,style:{marginRight:8}}),Object(l.jsx)("div",{className:c.liquidity_item_info_info_label,children:Object(l.jsx)("span",{children:null===s||void 0===s?void 0:s.tokenSymbol})}),Object(l.jsx)("div",{className:c.liquidity_item_info_info_value,children:null===s||void 0===s?void 0:s.amount})]})]})]}),Object(l.jsxs)("div",{className:c.liquidity_item_footer,children:[Object(l.jsx)("div",{className:c.liquidity_item_footer_btn,onClick:()=>d&&d(b),children:"Add"}),Object(l.jsx)("div",{className:i()({[c.liquidity_item_footer_btn]:!0,[c.liquidity_item_footer_btn_disable]:u}),onClick:()=>p&&!u&&p(b),children:"Remove"})]})]})};d.defaultProps={},t.a=Object(a.memo)(d)},1371:function(e,t,s){e.exports={liquidity_item_wrap:"style_liquidity_item_wrap__XXhD-",liquidity_item_header:"style_liquidity_item_header__1R8kN",liquidity_item_name:"style_liquidity_item_name__1puyp",liquidity_item_content:"style_liquidity_item_content__2d0V5",liquidity_item_info:"style_liquidity_item_info__2ncHM",liquidity_item_info_info_label:"style_liquidity_item_info_info_label__1ljmD",liquidity_item_info_info_value:"style_liquidity_item_info_info_value__2zdic",liquidity_item_footer:"style_liquidity_item_footer__2XP79",liquidity_item_footer_btn:"style_liquidity_item_footer_btn__1ADm2",liquidity_item_footer_btn_disable:"style_liquidity_item_footer_btn_disable__Ei6Nu",liquidity_item_migrate_btn:"style_liquidity_item_migrate_btn__2FlCN",liquidity_item_token_icon:"style_liquidity_item_token_icon__DqzHd"}},1372:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return n}));const a="v1.0",n="v2.0"},1861:function(e,t,s){},1962:function(e,t,s){"use strict";s.r(t);var a,n=s(1),i=s.n(n),o=s(9),c=s.n(o),r=s(187),l=s(13),d=s.n(l),p=s(93),h=s(1928),m=s(1930),u=s(1038),b=s(16),j=s.n(b),k=s(15),g=s(35),w=s.n(g),x=s(1495),S=s(1910),O=s(1496),v=s(328),_=s(1500),f=s(83),A=s(1918),y=s(6),T=s(326),N=s(333),V=s(122),D=s(1300),B=s(1250),C=s(1252),P=s(1273),L=s(1036),F=s(1916),I=s(160),R=s(1171),q=(s(1158),s(1170),s(2));const E="REMOVE";let M=Object(r.b)("sunSwapPool","sunswapHotTokens")(a=class extends i.a.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=()=>{const e=window.localStorage.getItem("solor");if(e){let t=JSON.parse(e);window.localStorage.setItem("solor",JSON.stringify(t)),this.props.sunSwapPool.setData({solor:t})}this.props.sunswapHotTokens.getHotCoinList()},this.setInitToken=()=>{this.setState({tokenSort:!1},(()=>{const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}})}))},this.setTokenList=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const{byUrl:s={},selectedListUrl:a="",solor:n=[]}=t.props.sunSwapPool,i=window.localStorage.getItem("swapVersion");let o=s[a].tokens||[];w.a.uniqBy(o,"address").length!=o.length&&(o=[]);let c=s[a].isToken;void 0===c&&(c=await V.a.isToken(o.map((e=>e.address))),s[a].isToken=Number(c),await t.props.sunSwapPool.updateByUrl(s[a])),2===Number(c)&&(o=[]);const r={tokenAddress:k.a.trxFakeAddress,address:"",addressV1:"",addressV2:"",tokenSymbol:"TRX",tokenLogoUrl:N.a,tokenName:"TRX",tokenDecimal:k.a.trxDecimal,balance:"-"},{exchanges:l={},allExchanges:d={}}=t.props.sunSwapPool;let p=[];t.props.swap?o.map((e=>{e.address&&l[e.address]&&l[e.address].e&&p.push({tokenAddress:e.address,address:l[e.address]?l[e.address].e:null,addressV1:d&&d[0]&&d[0][e.address]?d[0][e.address].e:null,addressV2:d&&d[1]&&d[1][e.address]?d[1][e.address].e:null,tokenSymbol:e.symbol||"",tokenLogoUrl:e.logoURI||T.a,tokenName:e.name||"",tokenDecimal:Number(l[e.address].d),balance:"-"})})):o.map((e=>{e.address&&p.push({tokenAddress:e.address,address:"",addressV1:"",addressV2:"",tokenSymbol:e.symbol||"",tokenLogoUrl:e.logoURI||T.a,tokenName:e.name||"",tokenDecimal:l[e.address]&&l[e.address].d?Number(l[e.address].d):e.decimals,balance:"-"})})),n.map((e=>{e.addressV1=d&&d[0]&&d[0][e.tokenAddress]?d[0][e.tokenAddress].e:null,e.addressV2=d&&d[1]&&d[1][e.tokenAddress]?d[1][e.tokenAddress].e:null,e.address="v1.0"===i?d&&d[0]&&d[0][e.tokenAddress]?d[0][e.tokenAddress].e:null:d&&d[1]&&d[1][e.tokenAddress]?d[1][e.tokenAddress].e:null}));const h=n.slice();n.map((e=>{w.a.findIndex(p,(t=>t.tokenAddress===e.tokenAddress))>=0&&w.a.remove(h,(t=>t.tokenAddress===e.tokenAddress))})),p=[r].concat(h,p);const m=[],u=[],b={};p.map((e=>{m.push(e),u.push(e),b[e.tokenAddress]=e})),t.state.tokenMap=b,t.setState({allTokenList:m,tokenList:u},(()=>{t.getTokenBalance(),e&&e()}))}catch(s){console.log(s)}},this.getTokenBalance=async()=>{const e=window.defaultAccount,{tokenList:t,tokenMap:s}=this.state,a=[];t.map((e=>{a.push(e.tokenAddress)})),e&&(await Object(f.k)(e,a,s),this.setState({}))},this.showModal=async()=>{if(!this.props.disabled)try{this.props.sunSwapPool.getTokensDataFromLocal(),await this.setTokenList((()=>{const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}},(()=>{this.setState({modalVisible:!0,defaultStatus:1})}))}))}catch(e){console.log("tokenModal err",e),this.setState({modalVisible:!0}),this.getTokenBalance()}},this.calcItem=async e=>{const t=window.localStorage.getItem("swapVersion"),{allExchanges:s={}}=this.props.sunSwapPool,a=k.a.contract.factory,n=k.a.sunContract.factory;let i=null,o=null;try{i=s[0][e.tokenAddress]&&s[0][e.tokenAddress].e||null}catch(c){i=null}try{o=s[1][e.tokenAddress]&&s[1][e.tokenAddress].e||null}catch(c){o=null}if(!i){const s=await Object(f.l)(e.tokenAddress,a);s?(e.addressV1=s,e.notCreatedV1=!1,"v1.0"===t&&(e.address=s,await this.removeSolor(e),await this.addSolor(e))):e.tokenAddress!==k.a.trxFakeAddress&&(e.notCreatedV1=!0)}if(e.addressV1&&2===e.cst){(await Object(f.v)(e.addressV1)).gt(0)||e.tokenAddress===k.a.trxFakeAddress?e.notCreatedV1=!1:e.notCreatedV1=!0}if(!o){const s=await Object(f.l)(e.tokenAddress,n);s?(e.addressV2=s,e.notCreatedV2=!1,"v1.5"===t&&(e.address=s,await this.removeSolor(e),await this.addSolor(e))):e.tokenAddress!==k.a.trxFakeAddress&&(e.notCreatedV2=!0)}if(e.addressV2&&2===e.cst){(await Object(f.v)(e.addressV2)).gt(0)||e.tokenAddress===k.a.trxFakeAddress?e.notCreatedV2=!1:e.notCreatedV2=!0}return e},this.setTokenAddressCallback=()=>{const{selectSearchItem:e}=this.state;this.setState({dealWarningVisible:!1}),this.props.onChange&&this.props.onChange(this.state.tokenMap[e.tokenAddress])},this.setTokenAddress=async(e,t,s)=>{const{exchanges:a={},allExchanges:n={}}=this.props.sunSwapPool;if(e&&this.state.tokenMap[e]){if("swap"===s&&Object.keys(k.a.deflationToken).includes(e))return void this.setState({dealWarningVisible:!0,callbacks:this.setTokenAddressCallback,selectSearchItem:{tokenAddress:e}});this.props.onChange&&this.props.onChange(this.state.tokenMap[e])}else if(Object(y.t)(e)&&t){const t=await V.a.tokenBrief(e);if(t.success){const s=t.data;if(s.tokenAddr){const t={tokenAddress:e,address:a[s.tokenAddr]&&a[s.tokenAddr].e||null,addressV1:n[0][s.tokenAddr]&&n[0][s.tokenAddr].e||null,addressV2:n[1][s.tokenAddr]&&n[1][s.tokenAddr].e||null,tokenSymbol:s.tokenSymbol,tokenLogoUrl:s.tokenLogo,tokenName:s.tokenName,tokenDecimal:s.tokenDecimal,cst:1,balance:"-"},i=await this.calcItem(t);this.setState({tokenBrief:i,solorModalVisible:!0})}}}else if(Object(y.t)(e)){const t=await V.a.tokenBrief(e);if(t.success){const s=t.data;if(s.tokenAddr){const t=window.localStorage.getItem("swapVersion"),a={tokenAddress:e,address:s.exchangeAddr,addressV1:"v1.0"===t?s.exchangeAddr:null,addressV2:"v1.5"===t?s.exchangeAddr:null,tokenSymbol:s.tokenSymbol,tokenLogoUrl:s.tokenLogo,tokenName:s.tokenName,tokenDecimal:s.tokenDecimal,cst:1,balance:"-"},n=await this.calcItem(a);this.setState({tokenBrief:n,solorModalVisible:!0})}}}},this.onChange=async(e,t)=>{if(t.stopPropagation(),e.tokenAddress===this.props.value)return;if(this.props.fromPool&&e.tokenAddress===k.a.trxFakeAddress)return;const s=this.props.type;if((1===s||2===s)&&Object.keys(k.a.deflationToken).includes(e.tokenAddress))return void this.setState({modalVisible:!1,dealWarningVisible:!0,callbacks:this.selectSearchCallback,selectSearchItem:e});const a=await this.calcItem(e);this.setState({modalVisible:!1}),this.props.onChange&&this.props.onChange(a)},this.selectSearchCallback=async()=>{const{selectSearchItem:e}=this.state,t=await this.calcItem(e);this.setState({dealWarningVisible:!1}),this.props.onChange&&this.props.onChange(t)},this.hideModal=()=>{this.setState({modalVisible:!1,customTokenUriLeg:!0,tokenSort:!1})},this.onTokenStrChange=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{exchanges:a={},allExchanges:n={}}=t.props.sunSwapPool;try{const i=e.target.value,o=t.state.allTokenList;let c=[];const{tokenSort:r}=t.state;if(i.length>1)if(Object(y.t)(i)){if(c=o.filter((e=>e.tokenAddress===i.trim())),0===c.length){const e=await V.a.tokenBrief(i);if(e.success){const s=window.defaultAccount,r=e.data;let l="-";s&&(l=await Object(f.A)(s,[i],t.state.tokenMap));const d={tokenAddress:i,address:a[r.tokenAddr]&&a[r.tokenAddr].e||null,addressV1:n[0][r.tokenAddr]&&n[0][r.tokenAddr].e||null,addressV2:n[1][r.tokenAddr]&&n[1][r.tokenAddr].e||null,tokenSymbol:r.tokenSymbol,tokenLogoUrl:r.tokenLogo,tokenName:r.tokenName,tokenDecimal:r.tokenDecimal,cst:1,balance:"-"==l?"-":Object(y.k)(l,2)};c.push(d),o.push(d)}}}else c=o.filter((e=>e.tokenSymbol.toLowerCase().indexOf(i.toLowerCase())>-1&&1!==Number(e.cst))),r&&(c=c.sort(((e,t)=>{const s=e.tokenSymbol.toLowerCase(),a=t.tokenSymbol.toLowerCase();return s<a?-1:s>a?1:0})));else c=o.slice().filter((e=>1!==Number(e.cst))),r&&(c=c.sort(((e,t)=>{const s=e.tokenSymbol.toLowerCase(),a=t.tokenSymbol.toLowerCase();return s<a?-1:s>a?1:0})));t.setState({tokenStr:i,tokenList:c},(()=>{s&&s(),t.getTokenBalance()}))}catch(i){console.log("onTokenStrChange: ",i)}},this.clearStorage=()=>{const{localStorage:e}=k.a;for(const t in e)window.localStorage.removeItem(e[t]);window.location.reload()},this.showListModal=()=>{this.setState({defaultStatus:2})},this.hideListModal=()=>{this.setState({defaultStatus:1})},this.selectTokenList=async e=>{try{const{selectedListUrl:t}=this.props.sunSwapPool;this.props.sunSwapPool.setData({selectedListUrl:e}),this.props.sunSwapPool.setTokensDataIntoLocal(),await this.setTokenList((()=>{this.setState({defaultStatus:1});const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}})})),this.props.sunSwapPool.handleNotifiction(),this.props.sunSwapPool.setTokensDataIntoLocal()}catch(t){console.log(t)}},this.backTokensCategory=()=>{this.setState({changeStatus:1})},this.onTokenUriChange=e=>{try{const t=e.target.value;this.setState({customTokenUri:t.trim(),errInfo:""})}catch(t){console.log(t)}},this.checkUrl=e=>{const t="";return e||(t=c.a.get("sunSwap.list.err1")),t},this.isListsOver=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>=k.a.maxLists},this.addCustomTokens=async()=>{try{const{customTokenUri:e}=this.state;let t="";if(!Object(y.u)(e))return t=c.a.get("sunSwap.list.add_failed_tip"),void this.setState({errInfo:t});const{byUrl:s={}}=this.props.sunSwapPool;if(s[e]&&!s[e].rs)return t=c.a.get("sunSwap.list.exists"),void this.setState({errInfo:t});if(this.isListsOver(s))return t=c.a.getHTML("list.lists_over",{value:k.a.maxLists}),void this.setState({errInfo:t});const a=await V.a.getTokenListJson(e),{tokens:n=[]}=a;if(n.length>k.a.maxTokens)return t=c.a.getHTML("list.tokens_over",{value:k.a.maxTokens}),void this.setState({errInfo:t});const{key:i="",valid:o=!1}=Object(y.I)(a);if(!o)return t=c.a.get("sunSwap.list.add_err_tip",{value:i}),void this.setState({errInfo:t});this.props.sunSwapPool.updateTokensData(e,{...a,uri:e,rs:0}),await this.setTokenList((()=>{this.setState({defaultStatus:1,customTokenUri:""});const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}})}))}catch(e){const t=c.a.get("sunSwap.list.add_failed_retry");this.setState({errInfo:t}),console.log(e)}},this.updateList=async e=>{const{uri:t}=e,{byUrlNew:s={}}=this.props.sunSwapPool,a=s[t];Object(y.g)(a,(async()=>{await this.props.sunSwapPool.updateByUrl(a),this.setState({})}))},this.hideRemoveModal=()=>{this.setState({removeId:"",removeModalVisible:!1,removeText:""})},this.showRemoveModal=e=>{try{this.setState({removeId:e.uri,removeModalVisible:!0})}catch(t){console.log(t)}},this.removeTokens=()=>{try{const{removeId:e,removeText:t}=this.state;if(!e)return;if(t.trim()!=E)return;const{byUrl:s={}}=this.props.sunSwapPool,a=s[e],{cst:n=!1,uri:i=""}=a;n?this.props.sunSwapPool.deleteByUrlById(i):(a.rs=1,this.props.sunSwapPool.updateByUrl(a)),this.hideRemoveModal()}catch(e){console.log(e)}},this.inputRemoveText=e=>{const t=e.target.value;this.setState({removeText:t})},this.addSolor=async e=>{try{const{solor:t=[]}=this.props.sunSwapPool;if(w.a.findIndex(t,(t=>t.tokenAddress===e.tokenAddress))>=0)return;t.unshift({...e,cst:2}),this.props.sunSwapPool.setData({solor:t}),await this.setTokenList((()=>{const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}},(()=>{this.getTokenBalance()}))})),window.localStorage.setItem("solor",JSON.stringify(t))}catch(t){console.log(t)}},this.removeSolor=async e=>{try{if(e.tokenAddress===this.props.value||e.tokenAddress===this.props.switchValue)return;const{solor:t=[]}=this.props.sunSwapPool,{tokenAddress:s}=e;w.a.remove(t,(e=>e.tokenAddress===s)),this.props.sunSwapPool.setData({solor:t}),await this.setTokenList((()=>{const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}},(()=>{this.getTokenBalance()}))})),window.localStorage.setItem("solor",JSON.stringify(t))}catch(t){console.log(t)}},this.getKeys=e=>{try{const t=Object.keys(e);return t.sort(((t,s)=>e[t].name>e[s].name?1:-1))}catch(t){return[]}},this.tokenSortByAsCII=e=>{try{let{tokenList:t}=this.state;if(e=!e){let e=t.sort(((e,t)=>{const s=e.tokenSymbol.toLowerCase(),a=t.tokenSymbol.toLowerCase();return s<a?-1:s>a?1:0}));this.setState({tokenList:e})}else this.setTokenList((()=>{const{tokenStr:e}=this.state;this.onTokenStrChange({target:{value:e}},(()=>{this.getTokenBalance()}))}));this.setState({tokenSort:e})}catch(t){console.log(t)}},this.comfirmContinue=async()=>{try{const{tokenBrief:e,checkStatus:t}=this.state;if(!t)return;if(Object.keys(k.a.deflationToken).includes(e.tokenAddress))return void this.setState({solorModalVisible:!1,dealWarningVisible:!0,callbacks:this.dealWarningCallback});await this.addSolor(e),this.setState({solorModalVisible:!1}),this.props.onChange&&this.props.onChange(e)}catch(e){console.log(e),this.setState({dealWarningVisible:!1,solorModalVisible:!1})}},this.dealWarningCallback=async()=>{try{this.setState({dealWarningVisible:!1});const{tokenBrief:e}=this.state;await this.addSolor(e),this.setState({solorModalVisible:!1}),this.props.onChange&&this.props.onChange(e)}catch(e){console.log(e),this.setState({dealWarningVisible:!1,solorModalVisible:!1})}},this.changeCheckStatus=e=>{this.setState({checkStatus:e.target.checked})},this.renderHotCoin=()=>{const{hotTokenList:e=[],hotTokenMaps:t,isLoading:s}=this.props.sunswapHotTokens;return s?Object(q.jsxs)("div",{className:"n-hot-coin",children:[Object(q.jsx)("div",{className:"n-hot-title",children:c.a.get("account_center.popular")}),Object(q.jsx)("div",{className:"loading-hot-list",children:new Array(4).fill(1).map((()=>Object(q.jsx)("div",{className:"loading-hot-item"})))})]}):e.length?Object(q.jsxs)("div",{className:"n-hot-coin",children:[Object(q.jsx)("div",{className:"n-hot-title",children:c.a.get("account_center.popular")}),Object(q.jsx)("div",{className:"n-hot-list",children:e.map((e=>{const s=t[e];return Object(q.jsxs)("div",{className:j()({"n-hot-item":!0,"n-hot-item-selected":s.tokenAddress===this.props.value||s.tokenAddress===this.props.switchValue}),onClick:e=>this.onChange(s,e),children:[Object(q.jsx)("img",{className:"n-hot-icon",src:s.tokenLogoUrl,onError:e=>{e.target.onerror=null,e.target.src=I.a}}),s.tokenSymbol]})}))})]}):null},this.renderSelectedList=(e,t,s,a,n)=>{let{tokenSort:i,tokenMap:o}=this.state;const{isMobileStatus:r}=this.props;return e&&t&&e[t]?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(C.a,{placeholder:c.a.get("sunSwap.tokens.select_placeholder_text"),onSearch:this.onTokenStrChange,onChange:this.onTokenStrChange,value:s,enterButton:c.a.get("tokens.search"),showSuffix:!r}),this.renderHotCoin(),Object(q.jsxs)("div",{className:"n-list-title",children:[Object(q.jsx)("span",{className:"n-list-title-text",children:c.a.get("sunSwap.tokens.select_tokenName_title")}),Object(q.jsx)("span",{className:j()({"icon-sort":!0,"icon-sort-active":i}),onClick:()=>this.tokenSortByAsCII(i)})]}),Object(q.jsx)("div",{className:"n-list sun-scroll-bar",children:0===n.length?Object(q.jsx)("div",{className:"n-list-empty",children:c.a.get("sunSwap.tokens.loading_tokens")}):a.length?a.map(((e,t)=>Object(q.jsxs)("div",{className:j()({"n-list-item":!0,"n-list-item-selected":e.tokenAddress===this.props.value||e.tokenAddress===this.props.switchValue}),onClick:t=>this.onChange(e,t),children:[Object(q.jsx)(P.a,{className:"n-token-icon",src:e.tokenLogoUrl}),Object(q.jsxs)("div",{className:"n-item-content",children:[Object(q.jsxs)("div",{className:"n-item-content",children:[Object(q.jsxs)("span",{className:"item-content",children:[e.tokenSymbol,this.props.fromPool?"":this.props.asInput?e.tokenAddress===this.props.value&&" (".concat(c.a.get("sunSwap.tokens.selected_as_input"),")")||e.tokenAddress===this.props.switchValue&&" (".concat(c.a.get("sunSwap.tokens.selected_as_output"),")"):e.tokenAddress===this.props.value&&" (".concat(c.a.get("sunSwap.tokens.selected_as_output"),")")||e.tokenAddress===this.props.switchValue&&" (".concat(c.a.get("sunSwap.tokens.selected_as_input"),")")]}),1===e.cst&&Object(q.jsxs)("div",{className:"item-content solor-detail",children:[Object(q.jsx)("span",{children:c.a.get("sunSwap.list.search_by_addr")}),Object(q.jsxs)("span",{className:"ib",onClick:t=>{t.stopPropagation(),this.addSolor(e)},children:["(",c.a.get("sunSwap.list.add"),")"]})]}),2===e.cst&&Object(q.jsxs)("div",{className:"item-content solor-detail",children:[Object(q.jsx)("span",{children:c.a.get("sunSwap.list.add_by_user")}),Object(q.jsxs)("span",{className:"solor-remove ib",onClick:t=>{t.stopPropagation(),this.removeSolor(e)},children:["(",c.a.get("sunSwap.list.remove_token"),")"]})]})]}),Object(q.jsx)("div",{className:"n-item-address",children:e.tokenAddress===k.a.trxFakeAddress?null:Object(p.a)(window.navigator).any?Object(y.j)(e.tokenAddress,4,4):Object(y.j)(e.tokenAddress,8,10)})]}),Object(q.jsx)("div",{className:"n-item-balance",children:e.tokenAddress===k.a.trxFakeAddress?Object(q.jsx)("div",{children:Object(q.jsx)("p",{children:Object(y.l)(o[e.tokenAddress]?o[e.tokenAddress].balance:e.balance)})}):Object(q.jsx)("div",{className:"inline-flex balanceAndAddr",children:Object(q.jsx)("p",{children:o[e.tokenAddress]&&!isNaN(o[e.tokenAddress].balance)?Object(y.l)(o[e.tokenAddress].balance):"--"})})})]},e.tokenAddress+t))):Object(q.jsx)("div",{className:"no-token-fund",children:c.a.getHTML("list.no_token_found")})}),Object(q.jsx)("div",{className:"n-list-switch-wrap",children:Object(q.jsxs)("div",{className:"n-list-switch",children:[Object(q.jsxs)("div",{className:"n-list-switch-name",children:[Object(q.jsx)("img",{className:"n-list-switch-icon",src:e[t].logoURI,alt:"",onError:e=>{e.target.onerror=null,e.target.src=I.a}}),Object(q.jsx)("span",{children:e[t].name||""})]}),Object(q.jsx)("button",{className:"n-list-switch-btn",onClick:()=>this.showListModal(),children:c.a.get("sunSwap.list.switch")})]})})]}):Object(q.jsx)(q.Fragment,{})},this.renderUpdateListItem=e=>{const{byUrlNew:t={}}=this.props.sunSwapPool,{version:s={},uri:a}=e,n=t[a]||{},i=n.version||{},o=Object(y.f)(s,i),{success:r=!1}=Object(y.e)(e,n);return!w.a.isEqual(n,{})&&o&&r&&Object(q.jsx)(x.a.Item,{onClick:()=>{this.updateList(e)},children:c.a.get("sunSwap.list.update")})},this.adjustAndroid=e=>{let t=Object(y.d)(e);this.setState({adjust:t})},this.renderTokensCategory=()=>{const{customTokenUri:e,lang:t,errInfo:s}=this.state,{byUrl:a,selectedListUrl:n}=this.props.sunSwapPool,i=this.getKeys(a);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"home-select-url-input-wrap",children:[Object(q.jsx)(S.a,{type:"text",className:"home-select-url-input",placeholder:"https://",value:e,onChange:this.onTokenUriChange,onFocus:()=>this.adjustAndroid(!0),onBlur:()=>this.adjustAndroid(!1)}),Object(q.jsx)("button",{className:"home-select-url-btn",onClick:this.addCustomTokens,disabled:!e.trim(),children:c.a.get("sunSwap.list.add_list")})]}),!!s&&Object(q.jsxs)("div",{className:"list-add-errTip",children:[Object(q.jsx)("span",{className:"icon",children:"!"}),Object(q.jsx)("span",{className:"text",children:s})]}),Object(q.jsx)("ul",{className:"n-origin-list",children:a&&i.length&&i.map((e=>{const s=a[e];return!s.rs&&Object(q.jsxs)("li",{className:"n-origin-list-item",children:[Object(q.jsxs)("div",{className:"n-origin-list-item-left",children:[Object(q.jsxs)("div",{className:"n-origin-list-item-img-text",children:[Object(q.jsx)("img",{src:s.logoURI,alt:"",className:"n-origin-list-item-logo"}),Object(q.jsxs)("div",{children:[Object(q.jsx)("div",{className:"n-origin-list-item-name",children:s.name}),Object(q.jsx)("div",{className:"n-origin-list-item-source",children:Object(y.n)(s.uri)})]})]}),Object(q.jsx)(O.a,{trigger:"click",placement:"bottomRight",overlayClassName:"home-select-url-drop",overlay:Object(q.jsx)(x.a,{children:Object(q.jsxs)(x.a.ItemGroup,{title:Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"key",children:c.a.get("sunSwap.list.version")}),Object(q.jsx)("span",{className:"value",children:Object(y.s)(s.version)})]}),children:[Object(q.jsxs)(x.a.Item,{children:[" ",Object(q.jsx)("a",{href:"".concat(k.a.justList,"?lang=").concat(t,"#/detail?uri=").concat(s.uri),target:s.uri||"_blank",children:c.a.get("sunSwap.list.view")})]}),this.renderUpdateListItem(s),s.uri!==n&&Object(q.jsx)(x.a.Item,{onClick:()=>{this.showRemoveModal(s)},children:c.a.get("sunSwap.list.remove")})]})}),children:Object(q.jsx)("a",{className:"n-origin-list-item-drop",onClick:e=>e.preventDefault()})})]}),Object(q.jsx)("div",{className:"n-origin-list-item-right",children:Object(q.jsx)(B.a,{onClick:()=>this.selectTokenList(e),disabledCanClick:!0,disabled:String(n)===String(s.uri),children:String(n)===String(s.uri)?c.a.get("sunSwap.list.selected"):c.a.get("sunSwap.list.select")})})]},s.name+"_"+e)}))}),Object(q.jsxs)("div",{className:"home-select-url-links",children:[Object(q.jsx)("a",{className:"home-select-url-more",href:"en-US"===t?k.a.moreList.en:k.a.moreList.zh,target:"_blank",children:c.a.get("sunSwap.more.more")}),Object(q.jsx)("a",{className:"home-select-url-home",href:"".concat(k.a.justList,"?lang=").concat(t,"#/home"),target:"justList",children:c.a.get("sunSwap.list.view_list_home")})]})]})},this.hideSolorModal=()=>{this.setState({solorModalVisible:!1})},this.state={lang:window.localStorage.getItem("lang")||c.a.options.currentLocale,modalVisible:!1,tokenStr:"",allTokenList:[],tokenList:[],tokenMap:{[k.a.trxFakeAddress]:{tokenAddress:k.a.trxFakeAddress,address:"",addressV1:"",addressV2:"",tokenSymbol:"TRX",tokenLogoUrl:N.a,tokenName:"TRX",tokenDecimal:k.a.trxDecimal,removeText:""}},defaultStatus:1,removeModalVisible:!1,removeText:"",removeId:"",solor:JSON.parse(window.localStorage.getItem("solor")||"[]"),customTokenUri:"",customTokenUriLeg:!0,errInfo:"",tokenSort:!1,solorModalVisible:!1,tokenBrief:{},checkStatus:!1,dealWarningVisible:!1,selectSearchItem:""}}render(){const{tokenList:e,tokenMap:t,tokenStr:s,allTokenList:a,defaultStatus:n,removeText:o,removeModalVisible:r,adjust:l,solorModalVisible:d,tokenBrief:p,checkStatus:h,dealWarningVisible:m,callbacks:b,selectSearchItem:k}=this.state,{value:g,tokenInfo:w}=this.props,{byUrl:x,selectedListUrl:S}=this.props.sunSwapPool;return Object(q.jsxs)(i.a.Fragment,{children:[Object(q.jsx)(R.a,{visible:this.state.modalVisible,onChange:this.setInitToken}),Object(q.jsx)("p",{className:"dragDown "+(this.props.disabled?"no-bg":""),onClick:this.showModal,children:g&&w?Object(q.jsxs)(i.a.Fragment,{children:[Object(q.jsx)("img",{src:w.tokenLogoUrl||T.a,alt:"",onError:e=>{e.target.onerror=null,e.target.src=T.a}}),Object(q.jsx)("span",{children:w.tokenSymbol})]}):c.a.get("sunSwap.tokens.add_choose_select")}),this.props.disabled?null:Object(q.jsx)(u.a,{title:1===n?Object(q.jsxs)("div",{className:"n-token-modal-title",children:[Object(q.jsx)("span",{children:c.a.get("sunSwap.tokens.add_choose_select")}),Object(q.jsx)(v.a,{zIndex:1e4,placement:"bottomLeft",title:c.a.get("tokens.add_choose_select_tip"),children:Object(q.jsx)(L.a,{className:"n-token-modal-title-icon",color:"rgba(255, 255, 255, .5)"})})]}):Object(q.jsx)("div",{className:"n-token-modal-title",children:Object(q.jsxs)("div",{className:"list-modal-header",children:[Object(q.jsx)(F.a,{onClick:()=>this.hideListModal(),style:{marginRight:10}}),Object(q.jsx)("span",{className:"add-title",children:c.a.get("sunSwap.list.select_list")})]})}),closable:!0,open:this.state.modalVisible,onCancel:this.hideModal,className:j()({"dark-modal":!0,"token-select-modal":!0,"token-select-list-modal":1!==n}),footer:null,width:405,centered:!0,children:1===n?this.renderSelectedList(x,S,s,e,a):this.renderTokensCategory()}),Object(q.jsxs)(u.a,{title:"",closable:!1,open:r,footer:null,style:{marginLeft:Object(y.v)()},width:420,className:"list-remove-modal sun-swap-modal",transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",children:[Object(q.jsx)("div",{className:"title",children:c.a.get("sunSwap.list.remove_confirm")}),Object(q.jsx)("div",{className:"tips",children:c.a.get("sunSwap.list.remove_confirm_tip")}),Object(q.jsx)("input",{type:"text",className:"list-input w-80",value:o,onChange:this.inputRemoveText}),Object(q.jsxs)("div",{className:"btns",children:[Object(q.jsx)("button",{onClick:this.removeTokens,disabled:o.trim()!==E,children:c.a.get("sunSwap.list.confirm")}),Object(q.jsx)("button",{onClick:this.hideRemoveModal,children:c.a.get("sunSwap.list.cancel")})]})]}),Object(q.jsx)(u.a,{title:c.a.get("sunSwap.list.add_token"),closable:!1,open:d,footer:null,style:{marginLeft:Object(y.v)(500)},width:525,className:"list-addtoken-modal sun-swap-modal",centered:!0,transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",children:Object(q.jsxs)("div",{className:"solor-modal-body",children:[Object(q.jsxs)("div",{className:"tips",children:[Object(q.jsx)("div",{className:"tips1",children:c.a.get("sunSwap.list.add_token_tip1")}),Object(q.jsx)("div",{className:"tips1",children:c.a.get("sunSwap.list.add_token_tip2")}),Object(q.jsx)("div",{className:"tips1",children:c.a.get("sunSwap.list.add_token_tip3")})]}),Object(q.jsxs)("div",{className:"token-info flex",children:[Object(q.jsx)("div",{className:"logo",children:Object(q.jsx)("img",{src:p.tokenLogoUrl?p.tokenLogoUrl:T.a})}),Object(q.jsxs)("div",{className:"info",children:[Object(q.jsxs)("div",{className:"symbol",children:[p.tokenName,"(",p.tokenSymbol,")"]}),Object(q.jsxs)("div",{className:"addr",children:[Object(q.jsx)("span",{children:p.tokenAddress}),Object(q.jsx)("span",{className:"pointer",title:p.tokenAddress,id:"copySpan",onClick:e=>{Object(y.i)(e,"5px","copySpan")},children:Object(q.jsx)(A.a,{})})]})]})]}),Object(q.jsx)("div",{className:"check-box"+(h?" checked":""),children:Object(q.jsx)(_.a,{onChange:this.changeCheckStatus,children:c.a.get("sunSwap.list.add_token_tip4")})}),Object(q.jsx)("div",{className:"btns",children:Object(q.jsx)("button",{onClick:this.comfirmContinue,className:h?"button-active":"",children:c.a.get("sunSwap.list.continue")})})]})}),m&&Object(q.jsx)(D.a,{visible:m,cb:b,dealWarningSymbol:p.tokenAddress||k.tokenAddress})]})}})||a;var U,X=M,H=s(1055),W=s(1210),Z=s(1165),J=s(1129),z=s(1301),Y=s(1141),Q=s(1142),K=s(1365),G=s(322);let $=Object(r.b)("sunSwapNetwork")(U=Object(r.b)("sunSwapPool")(U=Object(r.b)("network")(U=Object(r.c)(U=class extends i.a.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=async()=>{try{this.props.sunSwapPool.setData({addRef:this.toTokenRef});const e=setInterval((()=>{this.props.network.isConnected&&(this.timer=setInterval((()=>{this.selectedToken(this.props.sunSwapPool.tokenInfo,!0)}),6e3),this.selectedToken(this.props.sunSwapPool.tokenInfo,!1),clearInterval(e))}),1e3);this.getTokenBalance();const t=Object(p.a)(window.navigator).apple.device;this.setState({appleDevice:t}),await this.toTokenRef.current.setTokenList(),this.toTokenRef.current.setTokenAddress(this.props.sunSwapPool.tokenInfo.tokenAddress)}catch(e){}},this.componentWillUnmount=()=>{clearInterval(this.timer)},this.initInputData=()=>{this.setState({tokenOneValueStr:"",tokenTwoValueStr:"",tokenOneValue:new y.a(0),tokenTwoValue:new y.a(0),versionChanged:!0},(()=>{this.selectedToken(this.props.sunSwapPool.tokenInfo)}))},this.getTokenBalance=async()=>{if(this.props.network.isConnected){const{tokenInfo:e}=this.props.sunSwapPool,t=this.props.network.defaultAccount,{fromToken:s}=this.state,a=(await Object(f.i)(t,[s.tokenAddress]))[0].div(new y.a(10).pow(s.tokenDecimal));if(a.eq(this.state.fromBalance)||this.setState({fromBalance:a,fromBalanceStr:a._toFixed(6,1)},(()=>{this.calcEh()})),e.tokenAddress){const s=(await Object(f.i)(t,[e.tokenAddress]))[0].div(new y.a(10).pow(e.tokenDecimal));isNaN(s.toNumber())||s.eq(this.state.toBalance)||this.setState({toBalance:s,toBalanceStr:s._toFixed(6,1)},(()=>{this.calcEh()}))}}},this.setInsufficient=(e,t,s)=>{e<=t?this.setState({insufficientBalance:""}):this.setState({insufficientBalance:s})},this.calcEh=()=>{const{tokenInfo:e,tokenDetail:t,selectTokenOne:s,tokenTwoFixed:a}=this.props.sunSwapPool,{fromBalance:n,toBalance:i,noPoolBalance:o}=this.state;let c=Object(y.D)(document.querySelector(".token-sec-input-1").value),r=Object(y.D)(document.querySelector(".token-sec-input-2").value);if(c.gt(n)||c.lt(k.a.firstTRXLimit)&&0!==o&&!a?this.setState({insufficientBalance:s.tokenSymbol}):r.gt(i)||isNaN(i.toNumber())?this.setState({insufficientBalance:e.tokenSymbol}):this.setState({insufficientBalance:""}),c.gt(0)&&t.exTrx.gt(0)){let e=t.exTrx;this.setState({calcStatus:!0,shareOfPool:c.div(c.plus(e)).times(100)},(()=>{}))}else"--"===t.price1&&c.toNumber()>0&&r.toNumber()>0?this.setState({calcStatus:!0,shareOfPool:new y.a(100)}):this.setState({calcStatus:!1,shareOfPool:new y.a(0)})},this.setInputValue=(e,t,s)=>{let a;a=t?{num:new y.a(t.num),str:t.str,baseTwo:!1}:{num:new y.a(-1),str:"",baseTwo:!0};const{tokenInfo:n,tokenDetail:i}=this.props.sunSwapPool,{tokenTwoValue:o,tokenOneValue:c,needCreate:r}=this.state;if(n.tokenAddress&&""!==n.tokenAddress&&"--"!==i.price1){if(2===e){let e=o;a.num.eq(-1)||(e=a.num);let t=e.times(i.price1)._toFixed(k.a.trxDecimal,1);const{fromBalance:n}=this.state;Object(y.D)(t).gt(n)&&s?this.setMaxFrom("TRX"):this.setState({tokenTwoValue:e,tokenTwoValueStr:Object(y.b)(a.str||o.toString()),tokenOneValue:Object(y.D)(t),tokenOneValueStr:Object(y.b)(t)},(()=>{this.calcEh()}))}else if(1===e){let e=c;a.num.eq(-1)||(e=a.num);let t=e.div(i.price1),o="";t.gt(0)&&(o=t._toFixed(Number(n.tokenDecimal),1));let r=a.str||c.toString();const{toBalance:l}=this.state;Object(y.D)(o).gt(l)&&s?this.setMaxFrom("token"):this.setState({tokenOneValue:e,tokenOneValueStr:Object(y.b)(r),tokenTwoValue:Object(y.D)(o),tokenTwoValueStr:Object(y.b)(o)},(()=>{this.calcEh()}))}}else 1===e&&this.setState({tokenOneValue:a.num,tokenOneValueStr:Object(y.b)(a.str)},(()=>{this.calcEh()})),2===e&&this.setState({tokenTwoValue:a.num,tokenTwoValueStr:Object(y.b)(a.str)},(()=>{this.calcEh()}))},this.initTokenDetail=e=>{this.props.sunSwapPool.setData({tokenDetail:{trx:new y.a(0),value:new y.a(0),tokens:new y.a(0),price1:"--",price2:"--",exTrx:new y.a(0),totalSupply:new y.a(0)}}),"createdNoBalance"!==e&&this.setState({createTxt:c.a.get("sunSwap.pool.create_pair_btn"),createState:"",approveTxt:c.a.get("sunSwap.pool.add_approve_btn"),approveState:"",supplyTxt:c.a.get("sunSwap.pool.add_supply_btn"),supplyState:""})},this.selectedToken=async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.tokenAddress)return;const a={...e};let{fromOrTo:n,tokenOneValue:i,tokenOneValueStr:o,tokenTwoValue:c,tokenTwoValueStr:r}=t.state;if(s||(n=0,i=new y.a(0),c=new y.a(0),o="",r="",t.setState({tokenOneValueStr:o,tokenTwoValueStr:r,tokenOneValue:i,tokenTwoValue:c,fromOrTo:0,calcStatus:!1}),t.props.sunSwapPool.setData({tokenInfo:{...a,address:""}})),1!==n||t.state.versionChanged){if(2===n&&!t.state.versionChanged&&!c.gt(0))return}else if(!i.gt(0))return;if(!t.props.network.isConnected)return;const l=t.props.network.defaultAccount,{exchangeAddr:d,allowance:p,exTokenBalance:h,exTrxBalance:m,totalLiquidity:u,userLiquidity:b,userTrxBalance:j,userTokenBalance:g,success:w}=await Object(f.m)(l,a.tokenAddress);if(s||t.props.sunSwapPool.setData({tokenInfo:{...a,address:d}}),w)if(d){if(t.setState({networkError:!1}),s){let e=!0;t.state.approvedAmount.gte(t.state.tokenTwoValue)&&(e=!1),t.setState({poolIsExist:0,needApprove:e})}else t.setState({poolIsExist:0,noPoolBalance:0,needCreate:!1}),t.setState({poolIsExist:0,approvedAmount:p.div(new y.a(10).pow(a.tokenDecimal))});let e="--",n="--";if(u.gt(0)){const i=m.div(new y.a(10).pow(k.a.trxDecimal)),o=h.div(new y.a(10).pow(a.tokenDecimal));e=i.div(o),n=o.div(i),s&&t.setInputValue(t.state.fromOrTo);let{tokenInfo:c}=t.props.sunSwapPool;(c.address===d||t.state.versionChanged)&&(t.setState({noPoolBalance:0}),t.props.sunSwapPool.setData({tokenDetail:{trx:new y.a(j).div(new y.a(10).pow(k.a.trxDecimal)),value:new y.a(g).div(new y.a(10).pow(a.tokenDecimal)),tokens:new y.a(b).div(new y.a(10).pow(k.a.trxDecimal)),totalSupply:new y.a(u).div(new y.a(10).pow(k.a.trxDecimal)),price1:e,price2:n,exTrx:i,exToken:o}}))}else t.setState({noPoolBalance:1}),s||t.initTokenDetail("createdNoBalance")}else t.setState({networkError:!1}),t.setState({poolIsExist:1,noPoolBalance:-1,needCreate:!0}),s||t.initTokenDetail();else t.setState({networkError:!0});t.getTokenBalance()},this.judgeIssues=async(e,t,s)=>{this.state.fromOrTo=t;const{fromBalanceStr:a}=this.state;let{selectTokenOne:n,tokenInfo:i}=this.props.sunSwapPool,o={};if(e){let s=6;s=1===t?6:i.tokenDecimal;const{valid:a,str:n}=Object(y.w)((""+e).replace(/,/g,""),s);if(!a)return;e=n,o.num=n,o.str=e}let c=a;""!==e?""===i.tokenSymbol?(1===t&&(this.setState({tokenTwoValue:new y.a(0),tokenOneValue:new y.a(o.num),tokenOneValueStr:Object(y.b)(e),tokenTwoValueStr:""}),this.setInsufficient(o.num,c,n.tokenSymbol)),2===t&&this.setState({tokenOneValue:new y.a(0),tokenTwoValue:new y.a(o.num),tokenTwoValueStr:Object(y.b)(e),tokenOneValueStr:""})):(1===t&&this.setState({tokenOneValue:new y.a(o.num),tokenOneValueStr:Object(y.b)(e)}),2===t&&this.setState({tokenTwoValue:new y.a(o.num),tokenTwoValueStr:Object(y.b)(e)}),this.setInputValue(t,o,s)):(this.setState({calcStatus:!1,shareOfPool:new y.a(0)}),this.setState({tokenTwoValue:new y.a(0),tokenOneValue:new y.a(0),tokenOneValueStr:"",tokenTwoValueStr:""}))},this.setMaxFrom=e=>{let{fromBalance:t,toBalance:s,poolIsExist:a,noPoolBalance:n,needCreate:i}=this.state;const{tokenInfo:o}=this.props.sunSwapPool;let c=t;c.gt(0)&&s.gt(0)||(c=Object(y.a)(0),s=Object(y.a)(0)),"TRX"===e?((1!==a&&1!==n||""===o.tokenAddress)&&this.setState({tokenTwoValue:s,tokenTwoValueStr:Object(y.b)(s.toString())}),this.setState({tokenOneValue:c,tokenOneValueStr:Object(y.b)(c.toString())},(()=>{this.calcEh()})),s.gt(0)&&this.judgeIssues(c,1,!0)):"token"===e&&((1!==a&&1!==n||""===o.tokenAddress)&&this.setState({tokenOneValue:c,tokenOneValueStr:Object(y.b)(c.toString())}),this.setState({tokenTwoValue:s,tokenTwoValueStr:Object(y.b)(s.toString())},(()=>{this.calcEh()})),s.gt(0)&&this.judgeIssues(s,2,!0))},this.exchangeInfo=e=>{const{poolIsExist:t,shareOfPool:s,noPoolBalance:a,tokenOneValue:n,tokenTwoValue:i}=this.state,{tokenInfo:o,tokenDetail:r}=this.props.sunSwapPool;let l="--",d="--";"--"!==r.price1&&(l=r.price1._toFixed(4,1)),"--"!==r.price2&&(d=r.price2._toFixed(4,1)),i.gt(0)&&n.gt(0)&&(1===t||1===a)&&(l=n.div(i),d=i.div(n));let p="--",u="--";p="--"===l?l:Object(y.a)(l).lt(1e-4)?"< 0.0001":Object(y.a)(l)._toFixed(4,1),"--"===d||(u=Object(y.a)(d).lt(1e-4)?"< 0.0001":Object(y.a)(d)._toFixed(4,1));let b=s._toFixed(2,1);return isNaN(b)?b="--":s.gt(0)&&s.lt(.01)&&(b="<0.01"),Object(q.jsxs)(h.a,{className:"exchange-info",gutter:{xs:8,sm:16,md:24},children:[Object(q.jsxs)(m.a,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},className:"mt-30",children:[Object(q.jsx)("div",{className:K.pool_info_title,children:1===t||1===a?c.a.get("sunSwap.pool.create_initial_title"):c.a.get("sunSwap.pool.add_price_title")}),Object(q.jsx)(Y.a,{items:[{label:c.a.get("sunSwap.pool.add_unit_text",{toToken:o.tokenSymbol?o.tokenSymbol:"--",fromToken:"TRX"}),value:p},{label:c.a.get("sunSwap.pool.add_unit_text",{toToken:"TRX",fromToken:o.tokenSymbol?o.tokenSymbol:"--"}),value:u},{label:c.a.get("sunSwap.pool.add_share_text"),value:b+"%"}]})]}),e&&Object(q.jsx)(m.a,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},className:"mt-30",style:{marginTop:64},children:Object(q.jsx)(z.a,{title:c.a.get("sunSwap.pool.create_firstProv_bold"),content:c.a.get("sunSwap.pool.create_first_tip1")})}),1===t||1===a?null:Object(q.jsxs)(m.a,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},className:"mt-30",children:[Object(q.jsxs)("div",{className:"flex",children:[Object(q.jsx)("span",{className:j()("flex-1",K.pool_info_title),children:c.a.get("sunSwap.pool.base_posi_title")}),Object(q.jsxs)("p",{className:K.pool_logo,children:[Object(q.jsx)("img",{src:N.a,alt:""}),Object(q.jsx)("img",{src:o.tokenLogoUrl||T.a,onError:e=>{e.target.onerror=null,e.target.src=T.a},alt:""}),Object(q.jsx)("span",{children:"TRX"}),Object(q.jsx)("span",{className:"symbol",children:"/"}),Object(q.jsx)("span",{children:o.tokenSymbol?o.tokenSymbol:"--"})]})]}),Object(q.jsx)(Y.a,{items:[{label:"TRX",value:r.trx.lt(1e-4)&&r.trx.gt(0)?"<0.0001":r.trx._toFixed(4,1)},{label:o.tokenSymbol?o.tokenSymbol:"--",value:r.value.lt(1e-4)&&r.value.gt(0)?"<0.0001":r.value._toFixed(4,1)},{label:c.a.get("sunSwap.pool.add_tokens_text"),value:r.tokens.lt(1e-4)&&r.tokens.gt(0)?"<0.0001":r.tokens._toFixed(4,1)}]})]})]})},this.showSettingModal=()=>{this.props.sunSwapNetwork.setData({settingVisible:!0})},this.setLiq=e=>{this.props.sunSwapPool.setData({actionLiqV2:e})},this.retryGetExchange=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(s>10)return"";const a=await Object(f.l)(e);return a||(await new Promise((e=>{setTimeout((()=>{e()}),1e3)})),t.retryGetExchange(e,s+1))},this.createPair=async()=>{const{tokenInfo:e}=this.props.sunSwapPool,t={title:"sunSwap.pair_actions.create",obj:{trx:"TRX",tokenSymbol:e.tokenSymbol}};await Object(f.h)(e.tokenAddress,t)?this.setState({createActionState:"pending",actionInfo:c.a.get("sunSwap.action.doingBtn"),actionDisabled:!0,actionStarted:!0},(()=>{setTimeout((async()=>{const t=await this.retryGetExchange(e.tokenAddress);t?(this.props.sunSwapPool.setData({tokenInfo:{...e,address:t}}),this.setState({createActionState:"success",approveActionState:"start"},(()=>{this.setApprove()}))):this.setState({createActionState:"failed",actionRetry:"createPair",actionInfo:c.a.get("sunSwap.action.retryBtn"),actionDisabled:!1})}),5e3)})):this.setState({createActionState:"error",actionRetry:"createPair",actionInfo:c.a.get("sunSwap.action.retryBtn"),actionDisabled:!1,actionStarted:!0})},this.setApprove=async()=>{const{tokenInfo:e}=this.props.sunSwapPool,t={title:"pool.add_approve_token",obj:{token:e.tokenSymbol}};await Object(f.e)(e.tokenAddress,e.address,t)?this.setState({approveActionState:"pending",actionInfo:c.a.get("sunSwap.action.doingBtn"),actionDisabled:!0,actionStarted:!0},(()=>{setTimeout((()=>{this.setState({approveActionState:"success",actionState:"info"})}),5e3)})):this.setState({approveActionState:"error",actionRetry:"setApprove",actionInfo:c.a.get("sunSwap.action.retryBtn"),actionDisabled:!1,actionStarted:!0})},this.beforeSupplyLiquidity=async()=>{this.setState({actionStarted:!0,supplyPopBtn:c.a.get("sunSwap.action.startBtn"),supplyPopBtnDisabled:!0},(()=>{this.supplyLiquidity()}))},this.supplyLiquidity=async()=>{const{tokenOneValue:e,tokenTwoValue:t,needApprove:s}=this.state,{tokenInfo:a,tokenDetail:n}=this.props.sunSwapPool;let i,o,{settingSlippage:r}=this.props.sunSwapNetwork;r=Number(r);let l=e.times(1e6),d=t.times(new y.a(10).pow(a.tokenDecimal));n.exTrx.eq(0)?(i=l,o=d):(i="0x".concat(e.times(n.totalSupply).div(n.exTrx).times(1-r/100).times(new y.a(10).pow(k.a.trxDecimal)).integerValue(y.a.ROUND_DOWN).toString(16)),o="0x".concat(e.times(n.exToken).div(n.exTrx).times(1+r/100).times(new y.a(10).pow(a.tokenDecimal)).integerValue(y.a.ROUND_DOWN).toString(16)));const p={title:"sunSwap.pair_actions.add",obj:{trxAmount:Object(y.k)(e.toString(),6),trx:"TRX",tokenAmount:Object(y.k)(t.toString(),n.tokenDecimal),tokenSymbol:a.tokenSymbol}},h=this.state.tokenOneValueStr,m=this.state.tokenTwoValueStr;if(await Object(f.b)(a.address,i.toString(),o.toString(),await Object(f.g)(this.props.sunSwapNetwork.settingDeadline),l.toString(),p)){let e={supplyErrorInfo:"",supplyPopBtn:c.a.get("sunSwap.action.doingBtn"),supplyPopBtnDisabled:!0,actionStarted:!0};s&&(e={actionInfo:c.a.get("sunSwap.action.doingBtn"),actionDisabled:!0,supplyActionState:"pending",actionState:"line",actionStarted:!0}),this.setState(e,(()=>{setTimeout((async()=>{this.setState({tokenOneValue:new y.a(0),tokenOneValueStr:"",tokenTwoValue:new y.a(0),tokenTwoValueStr:"",successOneValueStr:h,successTwoValueStr:m,actionRetry:"",actionState:"success",actionStarted:!1})}),5e3)}))}else{let e={supplyErrorInfo:c.a.get("sunSwap.action.supplyActErr"),supplyPopBtn:c.a.get("sunSwap.action.retryBtn"),supplyPopBtnDisabled:!1,actionStarted:!0};s&&(e={actionState:"line",supplyActionState:"error",actionRetry:"supplyLiquidity",actionInfo:c.a.get("sunSwap.action.retryBtn"),actionDisabled:!1,actionStarted:!0}),this.setState(e)}},this.initAddModal=()=>{const{tokenInfo:e}=this.props.sunSwapPool;let t=!0;return this.state.approvedAmount.gte(this.state.tokenTwoValue)&&(t=!1),{needApprove:t,supplyPopBtn:c.a.get("sunSwap.pool.popup_supply_btn"),supplyPopBtnDisabled:!1,supplyErrorInfo:"",createActionTitle:c.a.get("sunSwap.action.createAct",{token:e.tokenSymbol}),createActionError:c.a.get("sunSwap.action.createActErr"),createActionFailed:c.a.get("sunSwap.action.createActFailed"),createActionState:"",approveActionTitle:c.a.get("sunSwap.action.approveAct",{token:e.tokenSymbol}),approveActionError:c.a.get("sunSwap.action.approveActErr"),approveActionState:"",supplyActionTitle:c.a.get("sunSwap.action.supplyAct"),supplyActionError:c.a.get("sunSwap.action.supplyActErr"),supplyActionState:"",actionInfo:c.a.get("sunSwap.action.startBtn"),actionDisabled:!0,actionRetry:"",actionState:t?"line":"info",actionStarted:!1,successOneValueStr:"",successTwoValueStr:"",miniPopVisible:!1}},this.showAddModal=()=>{this.setState({...this.initAddModal(),addVisible:!0},(()=>{this.onRetryAction()}))},this.beforeHideAddModal=()=>{this.state.actionStarted?this.setState({miniPopVisible:!0}):this.hideAddModal()},this.hideAddModal=()=>{this.setState({addVisible:!1},(()=>{setTimeout((()=>{this.setState({...this.initAddModal()})}),1e3)}))},this.miniPopOk=()=>{const e=this.state.needApprove;this.setState({miniPopVisible:!1},(async()=>{if(this.hideAddModal(),e){const e=this.props.sunSwapPool.tokenInfo,t=this.props.network.defaultAccount,{exchangeAddr:s,allowance:a}=await Object(f.m)(t,e.tokenAddress);let n=!0;s&&(n=!1),this.setState({needCreate:n,approvedAmount:a.div(new y.a(10).pow(e.tokenDecimal))})}}))},this.miniPopCancel=()=>{this.setState({miniPopVisible:!1})},this.gotoPool=()=>{const e={tokenSymbol:"TRX",tokenAddress:k.a.trxFakeAddress,tokenLogoUrl:k.a.trxLogoUrl},t={trx:new y.a(0),value:new y.a(0),tokens:new y.a(0),price1:"--",price2:"--",exTrx:new y.a(0),exToken:new y.a(0),totalSupply:new y.a(0)};this.props.sunSwapPool.setData({selectTokenOne:e,tokenInfo:{tokenAddress:"",tokenSymbol:""},tokenDetail:t}),this.setState({addVisible:!1}),this.props.onSuccess()},this.onRetryAction=()=>{const e=this.state.needCreate,t=this.state.needApprove;let s=this.state.actionRetry;switch(!s&&e&&(s="createPair"),!s&&t&&(s="setApprove"),s){case"createPair":this.setState({createActionState:"start",actionInfo:c.a.get("sunSwap.action.startBtn"),actionDisabled:!0},(()=>{this.createPair()}));break;case"setApprove":this.setState({approveActionState:"start",actionInfo:c.a.get("sunSwap.action.startBtn"),actionDisabled:!0},(()=>{this.setApprove()}));break;case"supplyLiquidity":this.setState({swapActionState:"start",actionInfo:c.a.get("sunSwap.action.startBtn"),actionDisabled:!1},(()=>{this.supplyLiquidity()}))}},this.useSafeMax=()=>{const{tokenInfo:e}=this.props.sunSwapPool,{poolIsExist:t,fromBalanceStr:s,noPoolBalance:a}=this.state,n=(1===t||1===a)&&""!==e.tokenAddress?k.a.createFeeAmount:k.a.addFeeAmount,i=Object(y.b)(Object(y.D)(s).minus(n));this.judgeIssues(i,1)},this.addLiquidityDisableChange=e=>{this.setState({disableAdd:e})},this.toTokenRef=i.a.createRef(),this.state={fromToken:{tokenSymbol:"TRX",tokenAddress:k.a.trxFakeAddress,tokenDecimal:k.a.trxDecimal,trxBalance:new y.a(0),tokenBalance:new y.a(0)},calcStatus:!1,insufficientBalance:"",fromBalance:new y.a(-1),fromBalanceStr:"--",toBalance:new y.a(-1),toBalanceStr:"--",poolIsExist:-1,noPoolBalance:-1,shareOfPool:new y.a(0),approvedAmount:new y.a(0),tokenOneValueStr:"",tokenTwoValueStr:"",tokenOneValue:new y.a(0),tokenTwoValue:new y.a(0),tokenMap:{[k.a.trxFakeAddress]:{tokenAddress:k.a.trxFakeAddress,address:"",tokenSymbol:"TRX",tokenLogoUrl:k.a.trxLogoUrl,tokenName:"TRX",tokenDecimal:k.a.trxDecimal}},addVisible:!1,createTxt:c.a.get("sunSwap.pool.create_pair_btn"),createState:"",approveTxt:c.a.get("sunSwap.pool.add_approve_btn"),approveState:"",supplyTxt:c.a.get("sunSwap.pool.add_supply_btn"),supplyState:"",createAddr:"",fromOrTo:0,appleDevice:!1,needCreate:!0,needApprove:!0,supplyPopBtn:"",supplyPopBtnDisabled:!1,supplyErrorInfo:"",createActionTitle:"",createActionError:"",createActionFailed:"",createActionState:"",approveActionTitle:"",approveActionError:"",approveActionState:"",supplyActionTitle:"",supplyActionError:"",supplyActionState:"",actionInfo:"",actionDisabled:!1,actionRetry:"",actionState:"",actionStarted:!1,successOneValueStr:"",successTwoValueStr:"",miniPopVisible:!1,versionChanged:!1,status:!1,disableAdd:!1}}componentDidUpdate(e){e.sunSwapPool.actionLiqV2!=this.props.sunSwapPool.actionLiqV2&&1===Number(this.props.sunSwapPool.actionLiqV2)&&this.props.sunSwapPool.setData({addRef:this.toTokenRef})}render(){const{calcStatus:e,insufficientBalance:t,shareOfPool:s,poolIsExist:a,fromBalanceStr:n,toBalanceStr:i,tokenOneValue:o,tokenTwoValue:r,addVisible:l,noPoolBalance:d,tokenOneValueStr:p,tokenTwoValueStr:b,successOneValueStr:j,successTwoValueStr:g,status:w,networkError:x}=this.state,{tokenTwoFixed:S,tokenInfo:O,selectTokenOne:v,tokenDetail:_}=this.props.sunSwapPool;let{settingSlippage:f}=this.props.sunSwapNetwork,A=o._toFixed(4,1),N=r.div(o),V=o.div(r);_.exTrx.gt(0)&&(A=o.times(_.totalSupply).div(_.exTrx)._toFixed(k.a.trxDecimal,1),N=_.price2,V=_.price1);let D=s._toFixed(2,1);isNaN(D)?D="--":s.gt(0)&&s.lt(.01)&&(D="<0.01");let B="";t&&(B=c.a.get("sunSwap.pool.add_insufficient_btn",{value:t}));const C=(1===a||1===d)&&""!==O.tokenAddress,P=C?k.a.createFeeAmount:k.a.addFeeAmount;C?o.lt(k.a.createFeeAmount)&&(B=c.a.get("sunSwap.pool.less_than_btn",{value:k.a.createFeeAmount})):o.lt(k.a.firstTRXLimit)&&0!==d&&(B=c.a.get("sunSwap.pool.less_than_btn",{value:k.a.firstTRXLimit}));let L="";B&&(L=B),e||(L=c.a.get("sunSwap.pool.add_enter_btn"));let F=null;return F=setTimeout((()=>{this.setState({status:!0}),clearTimeout(F)}),3e3),Object(q.jsxs)("section",{className:"swap-and-pool",children:[Object(q.jsx)(G.a,{callback:this.addLiquidityDisableChange}),Object(q.jsxs)(h.a,{gutter:[{xs:8,sm:16,md:24},10],children:[Object(q.jsxs)(m.a,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},className:"swap-block",children:[Object(q.jsxs)("div",{className:"flex select-token-top",children:[Object(q.jsxs)("div",{className:v.tokenAddress?"flex":"flex sunswap-chose-token",children:[Object(q.jsx)(X,{disabled:!0,value:v.tokenAddress,tokenInfo:v,fromPool:!0}),Object(q.jsx)(J.a,{token:v})]}),Object(q.jsxs)("div",{className:"swap-balance",children:[Object(q.jsxs)("span",{children:[c.a.get("sunSwap.pool.add_balance_text"),": "]}),Object(q.jsx)("span",{children:Object(y.a)(n).gte(0)?Object(y.l)(n,{dp:6,cutZero:!0}):"--"})]})]}),Object(q.jsxs)("div",{className:"flex input-block mt-16",children:[Object(q.jsx)("div",{className:"flex input-number",children:Object(q.jsx)("input",{type:"type",className:"token-sec-input token-sec-input-1",placeholder:c.a.get("sunSwap.pool.add_placeholder_text"),onChange:e=>this.judgeIssues(e.target.value,1),value:p})}),this.props.network.isConnected?Object(q.jsx)("span",{className:"max-btn",onClick:e=>this.setMaxFrom("TRX",{firstAdd:!0}),children:c.a.get("sunSwap.swap.input_from_max")}):null]})]}),Object(q.jsxs)(m.a,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},className:"swap-block",children:[Object(q.jsxs)("div",{className:"flex select-token-top",children:[Object(q.jsxs)("div",{className:O.tokenAddress?"flex":"flex sunswap-chose-token",children:[Object(q.jsx)(X,{onChange:this.selectedToken,fromPool:!0,appleDevice:this.state.appleDevice,disabled:S,address:this.props.network.defaultAccount,value:O.tokenAddress,tokenInfo:O,ref:this.toTokenRef}),Object(q.jsx)(J.a,{token:O})]}),Object(q.jsxs)("div",{className:"swap-balance",children:[Object(q.jsxs)("span",{children:[c.a.get("sunSwap.pool.add_balance_text"),": "]}),Object(q.jsx)("span",{children:Object(y.a)(i).gte(0)&&O.tokenAddress?Object(y.l)(i,{dp:6,cutZero:!0}):"--"})]})]}),Object(q.jsxs)("div",{className:"flex input-block mt-16",children:[Object(q.jsx)("div",{className:"flex input-number",children:Object(q.jsx)("input",{type:"type",className:"token-sec-input token-sec-input-2",placeholder:c.a.get("sunSwap.pool.add_placeholder_text"),onChange:e=>this.judgeIssues(e.target.value,2),value:b})}),this.props.network.isConnected?Object(q.jsx)("span",{className:"max-btn",onClick:e=>this.setMaxFrom("token"),children:c.a.get("sunSwap.swap.input_from_max")}):null]})]})]}),""!==O.tokenAddress&&O.tokenAddress.length>0?this.exchangeInfo(C):null,Object(q.jsxs)(h.a,{gutter:{xs:8,sm:16,md:24},children:[Object(q.jsxs)(m.a,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},className:"mt-20",children:[w&&"TRX"===v.tokenSymbol&&p?Object(y.D)(n).lt(P)?Object(q.jsx)("div",{className:"warning-amount-tip",children:c.a.getHTML("list.trx_tip_3",{value:P})}):Object(y.D)(n).minus(P).lt(Object(y.D)(p))?Object(q.jsxs)("div",{className:"safe-amount-tip",children:[c.a.getHTML("list.trx_tip_1",{value:P})," ",Object(q.jsx)("span",{className:"safe-amount-set-btn",onClick:this.useSafeMax,children:c.a.get("sunSwap.list.trx_tip_2")})]}):null:null,x&&Object(q.jsx)("p",{className:"warning-amount-tip",children:c.a.get("sunSwap.pool.network_error")})]}),Object(q.jsx)(m.a,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},className:"mt-20"})]}),this.props.network.isConnected?L?Object(q.jsx)(H.a,{styleName:"mt-40",type:"single",disabled:!0,info:L}):Object(q.jsx)(H.a,{styleName:"mt-40",type:"single",info:this.state.disableAdd?c.a.get("not_available"):c.a.get("sunSwap.pool.add_supply_btn"),disabled:this.state.disableAdd,onClick:this.showAddModal}):Object(q.jsx)(H.a,{styleName:"mt-40",type:"single",info:c.a.get("sunSwap.pool.add_connect_btn"),onClick:e=>{this.props.network.setData({loginModalVisible:!0,loginModalStep:1})}}),Object(q.jsxs)(u.a,{title:null,closable:"success"!==this.state.actionState,open:l,onCancel:this.beforeHideAddModal,className:"pool-modal add-gai sun-swap-modal",footer:null,width:630,centered:!0,transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",children:["line"===this.state.actionState&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:"title normal",children:c.a.get("sunSwap.swap.action_supply")}),Object(q.jsxs)("div",{className:"ib-parent center",children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"add-value",children:p}),Object(q.jsx)("span",{className:"add-token",children:v.tokenSymbol})]}),Object(q.jsx)("span",{className:"plus",children:"+"}),Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"add-value",children:b}),Object(q.jsx)("span",{className:"add-token",children:O.tokenSymbol})]})]}),Object(q.jsx)("div",{className:"supplyLineTitle",children:c.a.get("sunSwap.action.supplyLineTitle")}),this.state.needCreate?Object(q.jsxs)(W.a,{children:[Object(q.jsx)("span",{status:this.state.createActionState,err:this.state.createActionError,failed:this.state.createActionFailed,children:this.state.createActionTitle}),Object(q.jsx)("span",{status:this.state.approveActionState,err:this.state.approveActionError,children:this.state.approveActionTitle}),Object(q.jsx)("span",{status:this.state.supplyActionState,err:this.state.supplyActionError,children:this.state.supplyActionTitle})]}):Object(q.jsxs)(W.a,{children:[Object(q.jsx)("span",{status:this.state.approveActionState,err:this.state.approveActionError,children:this.state.approveActionTitle}),Object(q.jsx)("span",{status:this.state.supplyActionState,err:this.state.supplyActionError,children:this.state.supplyActionTitle})]}),Object(q.jsx)(H.a,{type:"single",disabled:this.state.actionDisabled,info:this.state.actionInfo,onClick:this.onRetryAction})]}),"info"===this.state.actionState&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{children:c.a.get("sunSwap.pool.popup_receive_title")}),Object(q.jsxs)("div",{className:"amount",children:[Object(q.jsxs)("div",{className:"center",children:[Object(q.jsx)("p",{className:"amount-num",children:Object(y.l)(A,{dp:k.a.trxDecimal,cutZero:!0})}),Object(q.jsx)("p",{className:"amount-name",children:Object(q.jsx)("span",{children:v.tokenSymbol+"/"+O.tokenSymbol+" "+c.a.get("sunSwap.pool.popup_tokens_text")})})]}),Object(q.jsx)("p",{className:"amount-tip left",children:c.a.get("sunSwap.pool.popup_receive_tip",{value:f})})]}),Object(q.jsxs)("div",{className:"price",children:[Object(q.jsxs)("p",{className:"flex param",children:[Object(q.jsx)("span",{className:"price-key",children:v.tokenSymbol+" "+c.a.get("sunSwap.pool.popup_deposited_text")}),Object(q.jsxs)("span",{className:"price-value",children:[Object(q.jsx)("img",{src:v.tokenLogoUrl,alt:""}),Object(q.jsx)("span",{children:o.toString()})]})]}),Object(q.jsxs)("p",{className:"flex param",children:[Object(q.jsx)("span",{className:"price-key",children:O.tokenSymbol+" "+c.a.get("sunSwap.pool.popup_deposited_text")}),Object(q.jsxs)("span",{className:"price-value",children:[Object(q.jsx)("img",{src:O.tokenLogoUrl||T.a,alt:"",onError:e=>{e.target.onerror=null,e.target.src=T.a}}),Object(q.jsx)("span",{children:r.toString()})]})]}),Object(q.jsxs)("div",{className:"flex param",children:[Object(q.jsx)("span",{className:"price-key",children:c.a.get("sunSwap.pool.popup_rates_text")}),Object(q.jsxs)("div",{className:"price-value ib",children:[Object(q.jsxs)("p",{children:["1 ",v.tokenSymbol," ="," ",Object(y.a)(1).div(Object(y.a)(10).pow(Number(O.tokenDecimal))).gt(N)?"< "+Object(y.a)(1).div(Object(y.a)(10).pow(Number(O.tokenDecimal))).toString():N._toFixed(Number(O.tokenDecimal))," ",O.tokenSymbol]}),Object(q.jsxs)("p",{children:["1 ",O.tokenSymbol," ="," ",Object(y.a)(1).div(Object(y.a)(10).pow(Number(k.a.trxDecimal))).gt(V)?"< "+Object(y.a)(1).div(Object(y.a)(10).pow(Number(k.a.trxDecimal))).toString():V._toFixed(Number(k.a.trxDecimal))," ",v.tokenSymbol]})]})]}),Object(q.jsxs)("div",{className:"flex between mb30",children:[Object(q.jsx)("div",{className:"share-title",children:c.a.get("sunSwap.pool.popup_share_text")}),Object(q.jsxs)("div",{className:"v-right",children:[D,"%"]})]})]}),this.state.supplyErrorInfo&&Object(q.jsx)("div",{className:"errorMsg",children:this.state.supplyErrorInfo}),Object(q.jsx)(H.a,{type:"single",disabled:this.state.supplyPopBtnDisabled,info:this.state.supplyPopBtn,onClick:this.beforeSupplyLiquidity})]}),"success"===this.state.actionState&&Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:"modal-success",children:[Object(q.jsx)("img",{src:Q.a,alt:""}),Object(q.jsx)("div",{className:"title green",children:c.a.get("sunSwap.action.supplySuccessTitle")}),Object(q.jsxs)("div",{className:"ib-parent center mb40",children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"add-value",children:j}),Object(q.jsx)("span",{className:"add-token",children:v.tokenSymbol})]}),Object(q.jsx)("span",{className:"plus",children:"+"}),Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"add-value",children:g}),Object(q.jsx)("span",{className:"add-token",children:O.tokenSymbol})]})]}),Object(q.jsx)(H.a,{type:"single",info:c.a.get("sunSwap.action.closeBtn"),onClick:this.gotoPool}),Object(q.jsx)("div",{className:"supplyDescTitle",children:c.a.get("sunSwap.action.supplyDescTitle")})]})})]}),Object(q.jsx)(Z.a,{visible:this.state.miniPopVisible,confirm:this.miniPopOk,cancel:this.miniPopCancel})]})}})||U)||U)||U)||U;var ee,te=$,se=s(1956),ae=s(1135),ne=s(1256),ie=s(332);const oe=Object(p.a)(window.navigator).any;let ce=Object(r.b)("sunSwapPool")(ee=Object(r.b)("sunSwapNetwork")(ee=Object(r.b)("network")(ee=Object(r.c)(ee=class extends i.a.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=async()=>{this.getUserPool()},this.getUserPool=async()=>{const{tokenInfo:e}=this.props.sunSwapPool,t=this.props.network.defaultAccount,{exchangeAddr:s,exTokenBalance:a,exTrxBalance:n,totalLiquidity:i,userLiquidity:o,userTrxBalance:c,userTokenBalance:r}=await Object(f.m)(t,e.tokenAddress);if(s){const t=n.div(new y.a(10).pow(k.a.trxDecimal)),s=a.div(new y.a(10).pow(e.tokenDecimal));t.gt(0)&&this.setState({tokenDetail:{trx:new y.a(c).div(new y.a(10).pow(k.a.trxDecimal)),value:new y.a(r).div(new y.a(10).pow(e.tokenDecimal)),tokens:new y.a(o).div(new y.a(10).pow(k.a.trxDecimal)),totalSupply:new y.a(i).div(new y.a(10).pow(k.a.trxDecimal)),price1:t.div(s),price2:s.div(t),exTrx:t,exToken:s}})}},this.showSettingModal=()=>{this.props.sunSwapNetwork.setData({settingVisible:!0})},this.setPercent=e=>{this.setState({percentNum:e})},this.renderLiqBtn=e=>{const{percentNum:t}=this.state;return Object(q.jsx)("button",{className:j()({[ne.remove_liq_active_btn]:String(t)===e,[ne.remove_liq_btn]:t!==e,"ml-10":"25"!==e}),onClick:t=>this.setPercent(Number(e)),children:"100"===e?c.a.get("sunSwap.pool.remove_max_text"):e+"%"})},this.renderTokenInfo=(e,t,s)=>Object(q.jsxs)("div",{children:[Object(q.jsxs)("p",{className:j()(ne.remove_liq_token,["flex start"]),children:[Object(q.jsx)("img",{src:e.tokenLogoUrl,alt:""}),Object(q.jsx)("span",{children:e.tokenSymbol})]}),Object(q.jsx)("p",{className:j()(ne.remove_liq_value,["mt-12"],["mb-12"]),children:0===s?0:t.times(s).div(100)._toFixed(4,1)<1e-4?"<0.0001":t.times(s).div(100)._toFixed(4,1)})]}),this.userTokenInfo=()=>{let{percentNum:e,tokenDetail:s}=this.state;const{selectTokenOne:a,tokenInfo:n}=this.props.sunSwapPool;let i=e;const o=(e,t)=>e.isNaN()||e.eq(1/0)?"--":e._toFixed(Number(t),1);let r=o(s.value.div(s.trx),n.tokenDecimal),l=o(s.trx.div(s.value),k.a.trxDecimal);const d=[{label:Object(q.jsx)(J.a,{token:a,showTokenName:!0,showTrx:!0}),value:s.trx._toFixed(4,1)},{label:Object(q.jsx)(J.a,{styleName:"ml-30",token:n,showTokenName:!0,showTrx:!0}),value:s.value._toFixed(4,1)},{label:Object(q.jsx)("span",{style:{color:"#ffffff",fontSize:"14px"},children:c.a.get("sunSwap.pool.add_tokens_text")}),value:s.tokens._toFixed(4,1)}],p=[{label:Object(q.jsx)(J.a,{token:a,showTokenName:!0,showTrx:!0}),value:s.trx._toFixed(4,1)},{label:Object(q.jsx)(J.a,{styleName:"ml-30",token:n,showTokenName:!0,showTrx:!0}),value:s.value._toFixed(4,1)}];return Object(q.jsxs)(h.a,{gutter:[{xs:8,sm:16,md:24},10],children:[Object(q.jsxs)(m.a,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},className:"mt-30",children:[Object(q.jsxs)("div",{className:"flex mb-16",children:[Object(q.jsx)("div",{className:ne.remove_liq_title,children:c.a.get("sunSwap.pool.base_posi_title")}),oe?Object(q.jsxs)("div",{className:ne.remove_liq_fee,children:[Object(q.jsxs)("span",{children:[c.a.get("sunSwap.pool.add_tokens_text")," "]}),Object(q.jsx)("span",{children:s.tokens._toFixed(4,1)})]}):null]}),Object(q.jsx)(Y.a,{items:oe?p:d,textColor:"#ffffff"}),Object(q.jsx)("div",{className:"hide-for-pc",style:{marginTop:"28px"},children:Object(q.jsx)(ae.a,{slippage:this.props.sunSwapNetwork.settingSlippage,deadline:this.props.sunSwapNetwork.settingDeadline,onChange:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.props.sunSwapNetwork.saveSettings(e,s),t.swapRef&&t.swapRef.current&&t.swapRef.current.calcPrice()}})})]}),Object(q.jsxs)(m.a,{xs:{span:24},sm:{span:24},md:{span:12},lg:{span:12},className:"mt-30",children:[Object(q.jsx)("div",{className:ne.remove_liq_title,children:c.a.get("withdraw.share_of_liq")}),Object(q.jsxs)("div",{className:"flex",children:[Object(q.jsxs)("div",{className:ne.remove_liq_num,children:[Object(q.jsx)("span",{className:"percent",children:i}),"%"]}),Object(q.jsxs)("div",{className:"flex hide-for-pc",children:[this.renderLiqBtn("25"),this.renderLiqBtn("50"),this.renderLiqBtn("75"),this.renderLiqBtn("100")]})]}),Object(q.jsx)(se.a,{defaultValue:e,onChange:e=>this.setPercent(e),className:"super-slider",value:e,tooltip:{formatter:null}}),Object(q.jsxs)("div",{className:"flex mb-24 mt-20 hide-for-mobile",children:[this.renderLiqBtn("25"),this.renderLiqBtn("50"),this.renderLiqBtn("75"),this.renderLiqBtn("100")]}),oe?Object(q.jsxs)("div",{className:"flex mb-24",children:[Object(q.jsxs)("div",{children:[this.renderTokenInfo(a,s.trx,e),this.renderTokenInfo(n,s.value,e)]}),Object(q.jsxs)("div",{className:ne.remove_liq_price,children:[Object(q.jsxs)("p",{children:["1 ",a.tokenSymbol," ="," ",Object(y.a)(1).div(Object(y.a)(10).pow(n.tokenDecimal)).gt(r)?"< "+Object(y.a)(1).div(Object(y.a)(10).pow(n.tokenDecimal)).toString():r," ",n.tokenSymbol,Object(q.jsx)("span",{})]}),Object(q.jsxs)("p",{children:[Object(q.jsx)("span",{}),"1 ",n.tokenSymbol," ="," ",Object(y.a)(1).div(Object(y.a)(10).pow(a.tokenDecimal)).gt(l)?"< "+Object(y.a)(1).div(Object(y.a)(10).pow(a.tokenDecimal)).toString():l," ",a.tokenSymbol]})]})]}):Object(q.jsxs)("div",{className:"flex mt036",children:[this.renderTokenInfo(a,s.trx,e),Object(q.jsxs)("div",{className:ne.remove_liq_price,children:[Object(q.jsxs)("p",{children:["1 ",a.tokenSymbol," ="," ",Object(y.a)(1).div(Object(y.a)(10).pow(n.tokenDecimal)).gt(r)?"< "+Object(y.a)(1).div(Object(y.a)(10).pow(n.tokenDecimal)).toString():r," ",n.tokenSymbol,Object(q.jsx)("span",{})]}),Object(q.jsxs)("p",{children:[Object(q.jsx)("span",{}),"1 ",n.tokenSymbol," ="," ",Object(y.a)(1).div(Object(y.a)(10).pow(a.tokenDecimal)).gt(l)?"< "+Object(y.a)(1).div(Object(y.a)(10).pow(a.tokenDecimal)).toString():l," ",a.tokenSymbol]})]}),this.renderTokenInfo(n,s.value,e)]}),Object(q.jsx)("div",{className:"hide-for-mobile",style:{marginTop:"28px"},children:Object(q.jsx)(ae.a,{slippage:this.props.sunSwapNetwork.settingSlippage,deadline:this.props.sunSwapNetwork.settingDeadline,onChange:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.props.sunSwapNetwork.saveSettings(e,s),t.swapRef&&t.swapRef.current&&t.swapRef.current.calcPrice()}})})]})]})},this.setLiq=e=>{this.props.sunSwapPool.setData({actionLiqV2:e})},this.beforeRemoveLiquidity=async()=>{this.setState({actionStarted:!0,removePopBtn:c.a.get("sunSwap.action.startBtn"),removePopBtnDisabled:!0},(()=>{this.removeLiquidity()}))},this.removeLiquidity=async()=>{const{percentNum:e,tokenDetail:t}=this.state,{tokenInfo:s}=this.props.sunSwapPool,a=t.tokens.times(this.state.percentNum).div(100).times(new y.a(10).pow(k.a.trxDecimal)).integerValue(y.a.ROUND_DOWN),n=(await Object(f.o)(s.tokenAddress,s.address)).div(new y.a(10).pow(s.tokenDecimal)),i=a.times(t.exTrx).div(t.totalSupply).integerValue(y.a.ROUND_DOWN),o=a.times(n).div(t.totalSupply).integerValue(y.a.ROUND_DOWN),r={title:"sunSwap.pair_actions.remove",obj:{trxAmount:Object(y.k)(Object(y.a)(t.trx).times(e).div(100),6),trx:"TRX",tokenSymbol:s.tokenSymbol,tokenAmount:Object(y.k)(Object(y.a)(t.value).times(e).div(100),s.tokenDecimal)}};await Object(f.x)(s.address,"0x".concat(a.toString(16)),"0x".concat(i.toString(16)),"0x".concat(o.toString(16)),await Object(f.g)(this.props.sunSwapNetwork.settingDeadline),r)?this.setState({removeErrorInfo:"",removePopBtn:c.a.get("sunSwap.action.doingBtn"),removePopBtnDisabled:!0,actionStarted:!0},(()=>{setTimeout((()=>{this.setState({actionState:"success",actionStarted:!1})}),5e3)})):this.setState({removeErrorInfo:c.a.get("sunSwap.action.removeActErr"),removePopBtn:c.a.get("sunSwap.action.retryBtn"),removePopBtnDisabled:!1,actionStarted:!0})},this.initRemoveModal=()=>({removeErrorInfo:"",removePopBtn:c.a.get("sunSwap.pool.popup_remove_btn"),removePopBtnDisabled:!1,actionState:"info",actionStarted:!1,miniPopVisible:!1}),this.showRemoveModal=()=>{let{percentNum:e,tokenDetail:t}=this.state;e>0&&t.tokens.gt(0)&&this.setState({...this.initRemoveModal(),removePopStatus:!0})},this.beforeHideRemoveModal=()=>{this.state.actionStarted?this.setState({miniPopVisible:!0}):this.hideRemoveModal()},this.hideRemoveModal=()=>{this.setState({removePopStatus:!1},(()=>{setTimeout((()=>{this.setState({...this.initRemoveModal()})}),1e3)}))},this.miniPopOk=()=>{this.setState({miniPopVisible:!1},(()=>{this.hideRemoveModal()}))},this.miniPopCancel=()=>{this.setState({miniPopVisible:!1})},this.gotoPool=()=>{this.props.onSuccess()},this.state={percentNum:0,removePopStatus:!1,tokenDetail:{trx:new y.a(0),value:new y.a(0),tokens:new y.a(0),totalSupply:new y.a(0),price1:"--",price2:"--",exTrx:new y.a(0),exToken:new y.a(0),removeErrorInfo:"",removePopBtn:c.a.get("sunSwap.pool.popup_remove_btn"),removePopBtnDisabled:!1,actionState:"info",actionStarted:!1,miniPopVisible:!1}}}render(){let{percentNum:e,removePopStatus:t,tokenDetail:s}=this.state,{selectTokenOne:a,tokenInfo:n}=this.props.sunSwapPool;const i=(e,t)=>e.isNaN()||e.eq(1/0)?"--":e._toFixed(Number(t),1);let o=i(s.value.div(s.trx),n.tokenDecimal),r=i(s.trx.div(s.value),k.a.trxDecimal);return Object(q.jsxs)("section",{className:"action-content",children:[this.userTokenInfo(),Object(q.jsx)(H.a,{styleName:"mt-40",type:"single",disabled:e<=0||s.tokens.lte(0),info:c.a.get("sunSwap.pool.remove_confirm_btn"),onClick:this.showRemoveModal}),Object(q.jsxs)(u.a,{title:null,closable:"success"!==this.state.actionState,open:t,onCancel:this.beforeHideRemoveModal,className:"pool-modal remove-modal sun-swap-modal",footer:null,width:630,centered:!0,transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",children:["info"===this.state.actionState&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:"title big",children:c.a.get("sunSwap.pool.popup_remove_title")}),Object(q.jsxs)("div",{className:"amount ib-parent center pb25",children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("p",{className:"add-value",children:s.trx.times(e).div(100).lt(1e-4)?"<0.0001":s.trx.times(e).div(100)._toFixed(4,1)}),Object(q.jsxs)("p",{className:"add-token",children:[Object(q.jsx)("img",{src:a.tokenLogoUrl,alt:""}),Object(q.jsx)("span",{children:a.tokenSymbol})]})]}),Object(q.jsx)("span",{className:"plus",children:"+"}),Object(q.jsxs)("div",{children:[Object(q.jsx)("p",{className:"add-value",children:s.value.times(e).div(100).lt(1e-4)?"<0.0001":s.value.times(e).div(100)._toFixed(4,1)}),Object(q.jsxs)("p",{className:"add-token",children:[Object(q.jsx)("img",{src:n.tokenLogoUrl,alt:""}),Object(q.jsx)("span",{children:n.tokenSymbol})]})]})]}),Object(q.jsxs)("div",{className:"price",children:[Object(q.jsxs)("p",{className:"flex param",children:[Object(q.jsx)("span",{className:"price-key",children:c.a.get("sunSwap.pool.popup_burned_text")}),Object(q.jsxs)("span",{className:"price-value",children:[Object(q.jsx)("img",{src:a.tokenLogoUrl,alt:""}),Object(q.jsx)("img",{src:n.tokenLogoUrl||T.a,alt:""}),Object(q.jsx)("span",{children:s.tokens.times(e).div(100).lt(1e-4)?"<0.0001":s.tokens.times(e).div(100)._toFixed(4,1)})]})]}),Object(q.jsxs)("div",{className:"flex param",children:[Object(q.jsx)("span",{className:"price-key",children:c.a.get("sunSwap.pool.popup_price_text")}),Object(q.jsxs)("div",{className:"price-value ib right",children:[Object(q.jsxs)("p",{children:["1 ",a.tokenSymbol," = ",o," ",n.tokenSymbol]}),Object(q.jsxs)("p",{className:"mb20",children:["1 ",n.tokenSymbol," = ",r," ",a.tokenSymbol]})]})]})]}),this.state.removeErrorInfo&&Object(q.jsx)("div",{className:"errorMsg",children:this.state.removeErrorInfo}),Object(q.jsx)(H.a,{type:"single",disabled:this.state.removePopBtnDisabled,info:this.state.removePopBtn,onClick:this.beforeRemoveLiquidity})]}),"success"===this.state.actionState&&Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:"modal-success",children:[Object(q.jsx)("img",{src:Q.a,alt:""}),Object(q.jsx)("div",{className:"title green",children:c.a.get("sunSwap.action.removeSuccessTitle")}),Object(q.jsxs)("div",{className:"ib-parent center mb25",children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"remove-value",children:s.trx.times(e).div(100).lt(1e-4)?"<0.0001":s.trx.times(e).div(100)._toFixed(4,1)}),Object(q.jsx)("span",{className:"remove-token",children:a.tokenSymbol})]}),Object(q.jsx)("span",{className:"plus",children:"+"}),Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"remove-value",children:s.value.times(e).div(100).lt(1e-4)?"<0.0001":s.value.times(e).div(100)._toFixed(4,1)}),Object(q.jsx)("span",{className:"remove-token",children:n.tokenSymbol})]})]}),Object(q.jsx)(H.a,{type:"single",info:c.a.get("sunSwap.action.closeBtn"),onClick:this.gotoPool}),Object(q.jsx)("div",{className:"endTip",children:c.a.get("sunSwap.action.removeDescTitle")})]})})]}),Object(q.jsx)(Z.a,{visible:this.state.miniPopVisible,confirm:this.miniPopOk,cancel:this.miniPopCancel})]})}})||ee)||ee)||ee)||ee;var re,le=ce,de=s(1969),pe=s(223),he=(s(1257),s(1258)),me=s(1259),ue=s(1260),be=(s(1261),s(1366));const je=Object(p.a)(window.navigator).any;var ke,ge=Object(r.b)("sunSwapNetwork")(re=Object(r.b)("sunSwapPool")(re=Object(r.b)("network")(re=Object(r.c)(re=class extends i.a.Component{constructor(e){super(e),this.getExchangesFunc=async(e,t,s,a)=>{const n=window.localStorage.getItem("swapVersion");await this.props.sunSwapPool.getExchangesListV3(e||n),await this.fromTokenRef.current.setTokenList(),await this.toTokenRef.current.setTokenList();let{fromToken:i,toToken:o}=this.state;const c=t||Object(y.q)("type");let r=o.tokenAddress||Object(y.q)("t1"),l=i.tokenAddress||Object(y.q)("t0");l&&!r&&(r=""),!l&&r&&(l="",i={tokenAddress:"",tokenSymbol:"",approvedAmount:new y.a(0)});const d=s||Object(y.q)("tokenAddress");if("swap"===c)d?this.setState({fromToken:{tokenSymbol:"TRX",tokenAddress:k.a.trxFakeAddress,tokenDecimal:k.a.trxDecimal,trxBalance:new y.a(0),tokenBalance:new y.a(0),trxBalanceV1:new y.a(0),tokenBalanceV1:new y.a(0),approvedAmount:new y.a(f.a),tokenLogoUrl:k.a.trxLogoUrl}},(async()=>{!a&&await this.toTokenRef.current.setTokenAddress(d,!0,"swap")})):(l||r)&&(l?await this.fromTokenRef.current.setTokenAddress(l,!0):this.setState({fromToken:i}),await this.toTokenRef.current.setTokenAddress(r,!0));else if(l||r||i.tokenAddress)try{this.state.fromToken&&this.state.fromToken.tokenAddress&&await this.fromTokenRef.current.setTokenAddress(this.state.fromToken.tokenAddress),this.state.toToken&&this.state.toToken.tokenAddress&&await this.toTokenRef.current.setTokenAddress(this.state.toToken.tokenAddress)}catch(p){console.log("version change:",p)}else this.setState({fromToken:{tokenSymbol:"TRX",tokenAddress:k.a.trxFakeAddress,tokenDecimal:k.a.trxDecimal,trxBalance:new y.a(0),tokenBalance:new y.a(0),trxBalanceV1:new y.a(0),tokenBalanceV1:new y.a(0),approvedAmount:new y.a(f.a),tokenLogoUrl:k.a.trxLogoUrl}},(async()=>{try{this.state.fromToken&&this.state.fromToken.tokenAddress&&await this.fromTokenRef.current.setTokenAddress(this.state.fromToken.tokenAddress),this.state.toToken&&this.state.toToken.tokenAddress&&await this.toTokenRef.current.setTokenAddress(this.state.toToken.tokenAddress)}catch(p){console.log("version change:",p)}}))},this.getHasLiquidity=async()=>{let e=this.state.fromToken;if(e&&e.tokenAddress&&e.tokenAddress!==k.a.trxFakeAddress){const t=this.props.network.defaultAccount,{exchangeAddr:s,totalLiquidity:a}=await Object(f.m)(t,e.tokenAddress);let n=s&&Object(y.a)(a).gt(0);if(this.setState({hasLiquidity:n}),!n)return}let t=this.state.toToken;if(t&&t.tokenAddress&&t.tokenAddress!==k.a.trxFakeAddress){const e=this.props.network.defaultAccount,{exchangeAddr:s,totalLiquidity:a}=await Object(f.m)(e,t.tokenAddress);let n=s&&Object(y.a)(a).gt(0);this.setState({hasLiquidity:n})}},this.componentDidMount=async()=>{try{const e=setInterval((()=>{if(this.props.network.isConnected){this.getHasLiquidity(),this.timer=setInterval((()=>{this.getTokenBalance(),this.getExchangeBalance(this.state.fromToken),this.getExchangeBalance(this.state.toToken);const e=k.a.contract.poly;this.getExchangeBalance(this.state.fromToken,e),this.getExchangeBalance(this.state.toToken,e),this.calcPrice()}),6e3),this.timer2=setInterval((()=>{const e=window.localStorage.getItem("swapVersion");this.props.sunSwapPool.getExchangesListV3(e)}),15e3),this.getTokenBalance(),this.getExchangeBalance(this.state.fromToken),this.getExchangeBalance(this.state.toToken);const t=k.a.contract.poly;this.getExchangeBalance(this.state.fromToken,t),this.getExchangeBalance(this.state.toToken,t),clearInterval(e)}}),1e3);await this.getExchangesFunc()}catch(e){}},this.componentWillUnmount=()=>{clearInterval(this.timer),clearInterval(this.timer2)},this.reload=async e=>{this.setState({fromValue:"",toValue:"",miniError:!1});const{v1Balance:t,v2Balance:s}=this.state;"v1.0"===e?(this.setState({betterPrice:!1}),t.fromBalance&&t.fromBalanceStr?this.setState({fromBalanceStr:t.fromBalanceStr,fromBalance:t.fromBalance,toBalance:t.toBalance,toBalanceStr:t.toBalanceStr,swapVersion:e},(()=>{this.checkInput(),this.initSwapData(e)})):this.initSwapData(e)):"v1.5"===e&&s.fromBalance&&s.fromBalanceStr?this.setState({fromBalanceStr:s.fromBalanceStr,fromBalance:s.fromBalance,toBalance:s.toBalance,toBalanceStr:s.toBalanceStr,swapVersion:e},(()=>{this.checkInput(),this.initSwapData(e)})):this.initSwapData(e),this.setState({priceChartVisible:!1},(()=>{this.showPriceChart()}))},this.initSwapData=async e=>{await this.getExchangesFunc(e),this.getTokenBalance(),this.getExchangeBalance(this.state.fromToken),this.getExchangeBalance(this.state.toToken),this.calcPrice()},this.checkInput=()=>{const e=this.state.fromValue,t=this.state.toValue,s=this.state.fromToken,a=this.state.toToken,n=s.tokenAddress,i=a.tokenAddress,o=this.state.dependentValue,r=this.state.receivedFlag;let l;l=!!(s&&a&&(s.tokenAddress===k.a.trxFakeAddress&&a.tokenAddress===k.a.wtrxAddress||a.tokenAddress===k.a.trxFakeAddress&&s.tokenAddress===k.a.wtrxAddress));const d=e=>{this.setState({actionError:e,swapTRXState:l})},p=this.state.recipientAddr;if(this.state.miniError)return d(c.a.get("sunSwap.swap.action_zero"));if(p){if(!Object(y.t)(p))return this.setState({recipientValid:!1}),d(c.a.get("sunSwap.swap.action_invalid_recipient"));this.setState({recipientValid:!0})}else if(this.setState({recipientValid:!1}),this.state.addRecipient)return d(c.a.get("sunSwap.swap.action_enter_recipient"));if(!n||!i)return d(c.a.get("sunSwap.swap.action_select_token"));if(!e)return!r&&t?Object(y.D)(t).lte(0)?d(c.a.get("sunSwap.swap.action_enter_amount")):d(c.a.get("sunSwap.swap.action_insufficient_liquidity")):d(c.a.get("sunSwap.swap.action_enter_amount"));if(Object(y.D)(e).lte(0))return d(c.a.get("sunSwap.swap.action_enter_amount"));if(r){if(!t)return d(c.a.get("sunSwap.swap.action_insufficient_liquidity"));if(this.state.fromBalance.lt(Object(y.D)(e)))return d(c.a.get("sunSwap.swap.action_insufficient",{token:s.tokenSymbol}));if(Object(y.D)(e).gt(s.approvedAmount))return this.setState({actionError:"",needApprove:!0})}else{if(this.state.fromBalance.lt(Object(y.D)(this.state.swapTRXState?e:o)))return d(c.a.get("sunSwap.swap.action_insufficient",{token:s.tokenSymbol}));if(Object(y.D)(o).gt(s.approvedAmount))return this.setState({actionError:"",needApprove:!0})}this.setState({actionError:"",needApprove:!1})},this.getTokenBalance=async()=>{if(this.props.network.isConnected){const e=this.props.network.defaultAccount,t=this.state.fromToken,s=this.state.toToken,a=[k.a.trxFakeAddress],n=t.tokenAddress,i=s.tokenAddress;if(n&&(a[0]=n),i&&a.push(i),!a.length)return;const o=await Object(f.i)(e,a);let c=!1,r=!1,l=new y.a(-1),d=new y.a(-1);const p={};n?(l=o[0].div(new y.a(10).pow(t.tokenDecimal)),l.eq(this.state.fromBalance)||(c=!0)):l.eq(this.state.fromBalance)||(p.fromBalance=l,p.fromBalanceStr="--"),i?(d=o[1].div(new y.a(10).pow(s.tokenDecimal)),d.eq(this.state.toBalance)||(r=!0)):d.eq(this.state.toBalance)||(p.toBalance=d,p.toBalanceStr="--"),c&&(p.fromBalance=l,p.fromBalanceStr=l._toFixed(6,1)),r&&(p.toBalance=d,p.toBalanceStr=d._toFixed(6,1)),this.setState(p,(()=>{this.checkInput();const e=window.localStorage.getItem("swapVersion"),t={fromBalance:this.state.fromBalance,fromBalanceStr:this.state.fromBalanceStr,toBalance:this.state.toBalance,toBalanceStr:this.state.toBalanceStr};"v1.0"===e&&this.setState({v1Balance:t}),"v1.5"===e&&this.setState({v2Balance:t})}))}},this.getExchangeBalance=async(e,t)=>{if(this.props.network.isConnected&&e.tokenAddress){let s=e.address;e.address||(s=this.props.network.defaultAccount);let a=e.addressV1;e.addressV1||(a=this.props.network.defaultAccount);const n=[k.a.trxFakeAddress,e.tokenAddress];if(t&&a){const s=await Object(f.i)(a,n,t);e.trxBalanceV1=s[0].div(new y.a(10).pow(k.a.trxDecimal)),e.tokenBalanceV1=s[1].div(new y.a(10).pow(e.tokenDecimal))}else{const t=await Object(f.i)(s,n);e.trxBalance=t[0].div(new y.a(10).pow(k.a.trxDecimal)),e.tokenBalance=t[1].div(new y.a(10).pow(e.tokenDecimal))}}else e.trxBalance=new y.a(0),e.tokenBalance=new y.a(0)},this.getApprovedAmount=async e=>{if(this.props.network.isConnected){const t=e.tokenAddress;if(t===k.a.trxFakeAddress)return void(e.approvedAmount=new y.a(f.a));const s=this.props.network.defaultAccount,a=e.address,n=await Object(f.u)(t,s,a);e.approvedAmount=n.div(new y.a(10).pow(e.tokenDecimal))}},this.onFromValueChange=e=>{let t=e.target.value,s=this.state.toValue;if(t){const{valid:e,str:a}=Object(y.w)(t.replace(/,/g,""),this.state.fromToken.tokenDecimal);if(!e)return;t=a,this.state.fromToken.tokenAddress&&this.state.toToken.tokenAddress||(s="")}else s="";this.setState({fromValue:Object(y.b)(t),toValue:Object(y.b)(s),receivedFlag:!0},(()=>{this.calcPrice()}))},this.onToValueChange=e=>{let t=this.state.fromValue,s=e.target.value;if(s){const{valid:e,str:a}=Object(y.w)(s.replace(/,/g,""),this.state.toToken.tokenDecimal);if(!e)return;s=a,this.state.fromToken.tokenAddress&&this.state.toToken.tokenAddress||(t="")}else t="";this.setState({fromValue:Object(y.b)(t),toValue:Object(y.b)(s),receivedFlag:!1},(()=>{this.calcPrice()}))},this.addSplit=e=>e?Object(y.k)(e):0,this.removeSplit=e=>e?(""+e).replace(/\s/g,""):0,this.onFromValueBlur=()=>{const e=this.state.fromValue;e&&this.setState({fromValue:Object(y.b)(e)})},this.onToValueBlur=()=>{const e=this.state.toValue;e&&this.setState({toValue:Object(y.b)(e)})},this.calcPrice=async()=>{try{const{hasLiquidity:e}=this.state,t=this.state.receivedFlag,s=this.state.fromToken,a=this.state.toToken;let n=this.state.fromValue,i=this.state.toValue,{swapTRXState:o}=this.state,r=Object(y.D)(n),l=Object(y.D)(i),d="-",p="-";const h=window.localStorage.getItem("swapVersion");this.getExchangeBalance(s),this.getExchangeBalance(a);const{allExchanges:m={}}=this.props.sunSwapPool;if(s.tokenAddress!==k.a.trxFakeAddress&&(s.addressV1=m&&m[0]&&m[0][s.tokenAddress]?m[0][s.tokenAddress].e:null,s.addressV2=m&&m[1]&&m[1][s.tokenAddress]?m[1][s.tokenAddress].e:null,s.address="v1.0"===h?m&&m[0]&&m[0][s.tokenAddress]?m[0][s.tokenAddress].e:null:m&&m[1]&&m[1][s.tokenAddress]?m[1][s.tokenAddress].e:null),a.tokenAddress!==k.a.trxFakeAddress&&(a.addressV1=m&&m[0]&&m[0][a.tokenAddress]?m[0][a.tokenAddress].e:null,a.addressV2=m&&m[1]&&m[1][a.tokenAddress]?m[1][a.tokenAddress].e:null,a.address="v1.0"===h?m&&m[0]&&m[0][a.tokenAddress]?m[0][a.tokenAddress].e:null:m&&m[1]&&m[1][a.tokenAddress]?m[1][a.tokenAddress].e:null),!n&&!i)return void this.setState({priceStr:d,priceInverseStr:p,betterPrice:!1},(()=>{this.checkInput()}));if(!s.tokenAddress||!a.tokenAddress)return void this.setState({priceStr:d,priceInverseStr:p,betterPrice:!1},(()=>{this.checkInput()}));let u=new y.a(1),b=new y.a(1);s.tokenAddress!==k.a.trxFakeAddress&&(u=s.tokenBalance.div(s.trxBalance),b=s.tokenBalanceV1.div(s.trxBalanceV1));let j=new y.a(1),g=new y.a(1);a.tokenAddress!==k.a.trxFakeAddress&&(j=a.tokenBalance.div(a.trxBalance),g=a.tokenBalanceV1&&a.trxBalanceV1&&a.tokenBalanceV1.div(a.trxBalanceV1));const w=new y.a(1).div(new y.a(10).pow(s.tokenDecimal)),x=new y.a(1).div(new y.a(10).pow(a.tokenDecimal)),S=new y.a(1).div(new y.a(10).pow(k.a.trxDecimal)),O=e=>{const t=new y.a(10).pow(k.a.trxDecimal);return e.times(t).integerValue(y.a.ROUND_DOWN).div(t)};let v=u.div(j),_=null;(s.tokenAddress===k.a.trxFakeAddress&&a.addressV1&&a.addressV1.length>0||a.tokenAddress===k.a.trxFakeAddress&&s.addressV1&&s.addressV1.length>0)&&(_=b.div(g)),"v1.0"===h&&(v=b.div(g));let f=!1;if(t?(s.tokenAddress===k.a.trxFakeAddress?a.tokenAddress===k.a.wtrxAddress?(this.swapFuncType="deposit",l=r,this.setState({swapTRXState:!0}),o=!0):(this.swapFuncType="trxToTokenFromInput",l=this.calcTrxTokenOutputFromInput(r,a.trxBalance,a.tokenBalance)):a.tokenAddress===k.a.trxFakeAddress?s.tokenAddress===k.a.wtrxAddress?(this.swapFuncType="withdraw",l=r,this.setState({swapTRXState:!0}),o=!0):(this.swapFuncType="tokenToTrxFromInput",l=this.calcTrxTokenOutputFromInput(r,s.tokenBalance,s.trxBalance)):(this.swapFuncType="tokenToTokenFromInput",f=!0,l=this.calcTrxTokenOutputFromInput(r,s.tokenBalance,s.trxBalance),l.gte(S)?(l=O(l),l=this.calcTrxTokenOutputFromInput(l,a.trxBalance,a.tokenBalance)):l=new y.a(0)),i=l._toFixed(Number(a.tokenDecimal),1)):(s.tokenAddress===k.a.trxFakeAddress?a.tokenAddress===k.a.wtrxAddress?(this.swapFuncType="deposit",r=l,this.setState({swapTRXState:!0}),o=!0):(this.swapFuncType="trxToTokenFromOutput",r=this.calcTrxTokenInputFromOutput(l,a.trxBalance,a.tokenBalance,w)):a.tokenAddress===k.a.trxFakeAddress?s.tokenAddress===k.a.wtrxAddress?(this.swapFuncType="withdraw",r=l,this.setState({swapTRXState:!0}),o=!0):(this.swapFuncType="tokenToTrxFromOutput",r=this.calcTrxTokenInputFromOutput(l,s.tokenBalance,s.trxBalance,w)):(this.swapFuncType="tokenToTokenFromOutput",f=!0,r=this.calcTrxTokenInputFromOutput(l,a.trxBalance,a.tokenBalance,S),r.gte(S)?(r=O(r),r=this.calcTrxTokenInputFromOutput(r,s.tokenBalance,s.trxBalance,w)):r=new y.a(0)),n=r._toFixed(Number(s.tokenDecimal),1)),t){if(e&&r.gt(0)&&l.lt(x))return this.setState({toValue:o?n:0,dependentValue:0,priceImpactColor:o?"mini-red":"",priceImpact:o?"--":[a.tokenSymbol,s.tokenSymbol].includes("TRX")?"-99.70%":"-99.40%",miniError:!o,actionError:o?"":c.a.get("sunSwap.swap.action_zero")}),void this.calcLiquidityProviderFee(r);if(this.setState({miniError:!1}),l.lt(x)||l.eq(1/0)||l.isNaN()||"v1.0"===h&&!a.addressV1&&a.tokenAddress!==k.a.trxFakeAddress||"v1.5"===h&&!a.addressV2&&a.tokenAddress!==k.a.trxFakeAddress||"v1.0"===h&&!s.addressV1&&s.tokenAddress!==k.a.trxFakeAddress||"v1.5"===h&&!s.addressV2&&s.tokenAddress!==k.a.trxFakeAddress)return void("v1.5"===h&&a.addressV1&&s.addressV1&&_&&_.gt(0)?this.setState({toValue:o?n:"",priceStr:d,priceInverseStr:p,betterPrice:!0,notCreatedOfNew:!0},(()=>{this.checkInput()})):this.setState({toValue:o?n:"",priceStr:d,priceInverseStr:p,betterPrice:!1,notCreatedOfNew:!1},(()=>{this.checkInput()})));this.setState({miniError:!1})}else{if(e&&l.gt(0)&&r.lt(w))return o?this.setState({fromValue:o?i:0,dependentValue:i,priceImpactColor:"",priceImpact:"",miniError:!1,actionError:""}):this.setState({fromValue:o?i:0,dependentValue:0,priceImpactColor:"mini-red",priceImpact:[a.tokenSymbol,s.tokenSymbol].includes("TRX")?"-99.70%":"-99.40%",miniError:!0,actionError:c.a.get("sunSwap.swap.action_zero")}),void this.calcLiquidityProviderFee(l);if(this.setState({miniError:!1}),r.lte(w)||r.eq(1/0)||r.isNaN()||"v1.0"===h&&!a.addressV1&&a.tokenAddress!==k.a.trxFakeAddress||"v1.5"===h&&!a.addressV2&&a.tokenAddress!==k.a.trxFakeAddress||"v1.0"===h&&!s.addressV1&&s.tokenAddress!==k.a.trxFakeAddress||"v1.5"===h&&!s.addressV2&&s.tokenAddress!==k.a.trxFakeAddress)return void("v1.5"===h&&a.addressV1&&s.addressV2&&_.gt(0)?this.setState({fromValue:o?i:"",priceStr:d,priceInverseStr:p,betterPrice:!0,notCreatedOfNew:!0},(()=>{this.checkInput()})):this.setState({fromValue:o?i:"",priceStr:d,priceInverseStr:p,betterPrice:!1,notCreatedOfNew:!1},(()=>{this.checkInput()})));this.setState({miniError:!1})}_&&_.lt(v)&&"v1.5"===h?this.setState({betterPrice:!0,notCreatedOfNew:!1}):this.setState({betterPrice:!1,notCreatedOfNew:!1});const A=r.div(l),T=l.div(r);d=A._toFixed(Number(s.tokenDecimal),1),p=T._toFixed(Number(a.tokenDecimal),1),this.calcDependentValue(r,l),this.calcPriceImpact(v,A,f),this.calcLiquidityProviderFee(r),this.setState({priceStr:d,priceInverseStr:p,fromValue:Object(y.b)(n),toValue:Object(y.b)(i)},(()=>{this.checkInput()}))}catch(e){console.log("Error: "+e)}},this.calcDependentValue=(e,t)=>{const s=new y.a(this.props.sunSwapNetwork.settingSlippage).div(100);let a=new y.a(0),n=k.a.trxDecimal;this.state.receivedFlag?(a=t.times(new y.a(1).minus(s)),n=this.state.toToken.tokenDecimal):(a=e.times(new y.a(1).plus(s)),n=this.state.fromToken.tokenDecimal);const i=a._toFixed(Number(n),1);this.setState({dependentValue:i,dependentValueSunBig:new y.a(i).times(new y.a(10).pow(n))})},this.calcPriceImpact=(e,t,s)=>{let a=.997;s&&(a=.994);const n=e.minus(t.times(a)).abs().div(t).times(100).abs().times(-1);let i="",o="--";o=Object(y.a)(n).lte(0)&&Object(y.a)(n).gt(-.01)?"0.00%":"".concat(n._toFixed(2),"%"),i=n.lte(-15)?"red":n.gt(-15)&&n.lte(-5)?"orange":"blue",this.setState({priceImpact:o,priceImpactColor:i})},this.calcLiquidityProviderFee=e=>{this.swapFuncType.indexOf("tokenToToken")>-1?this.setState({liquidityProviderFee:e.times(6).div(1e3)._toFixed(Number(this.state.fromToken.tokenDecimal),1)}):this.setState({liquidityProviderFee:e.times(3).div(1e3)._toFixed(Number(this.state.fromToken.tokenDecimal),1)})},this.calcTrxTokenOutputFromInput=(e,t,s)=>{const a=e.times(997),n=a.times(s),i=t.times(1e3).plus(a);return n.div(i)},this.calcTrxTokenInputFromOutput=(e,t,s,a)=>{const n=t.times(e).times(1e3),i=s.minus(e).times(997);return n.div(i).plus(a)},this.setMaxFrom=()=>{if(this.state.fromBalance.eq(-1))return;let e=this.state.fromBalance;const t=e.gt(0)?e._toFixed(Number(this.state.fromToken.tokenDecimal),1):"0";this.setState({fromValue:Object(y.b)(t),receivedFlag:!0},(()=>{this.calcPrice()}))},this.addSolor=async e=>{try{const{solor:t=[]}=this.props.sunSwapPool,s=w.a.findIndex(t,(t=>t.tokenAddress===e.tokenAddress));s>=0?t.splice(s,1,{...e,cst:2}):t.unshift({...e,cst:2}),this.props.sunSwapPool.setData({solor:t}),window.localStorage.setItem("solor",JSON.stringify(t))}catch(t){console.log(t)}},this.onFromTokenChange=async e=>{if(!e)return;const{allExchanges:t={}}=this.props.sunSwapPool,s=window.localStorage.getItem("swapVersion");if(e.cst){let a=t&&t[0]&&t[0][e.tokenAddress]?t[0][e.tokenAddress].e:null,n=t&&t[1]&&t[1][e.tokenAddress]?t[1][e.tokenAddress].e:null;e.address="v1.0"===s?a||null:n||null,e.addressV1=a,e.addressV2=n,await this.addSolor(e)}if(e.tokenAddress===this.state.toToken.tokenAddress)return this.switchToken();let a=this.state.fromValue;a&&e.tokenDecimal!=this.state.fromToken.tokenDecimal&&(a=Object(y.D)(a)._toFixed(Number(e.tokenDecimal),1));const n=this.getExchangeBalance(e),i=this.getExchangeBalance(this.state.toToken),o=k.a.contract.poly,c=this.getExchangeBalance(e,o),r=this.getExchangeBalance(this.state.toToken,o),l=this.getApprovedAmount(e);if(await n,await i,await c,await r,await l,e.tokenAddress!==k.a.trxFakeAddress){const t=this.props.network.defaultAccount,{exchangeAddr:s,totalLiquidity:a}=await Object(f.m)(t,e.tokenAddress);this.setState({hasLiquidity:s&&Object(y.a)(a).gt(0)})}const{toToken:d}=this.state,p=e&&d&&(e.tokenAddress===k.a.trxFakeAddress&&d.tokenAddress===k.a.wtrxAddress||e.tokenAddress===k.a.wtrxAddress&&d.tokenAddress===k.a.trxFakeAddress);this.setState({fromValue:Object(y.b)(a),fromToken:e,needApprove:!1,swapTRXState:p},(()=>{this.calcPrice(),this.getTokenBalance(),this.showPriceChart()}))},this.onToTokenChange=async e=>{const{allExchanges:t={}}=this.props.sunSwapPool,s=window.localStorage.getItem("swapVersion");if(e.cst){let a=t&&t[0]&&t[0][e.tokenAddress]?t[0][e.tokenAddress].e:null,n=t&&t[1]&&t[1][e.tokenAddress]?t[1][e.tokenAddress].e:null;e.address="v1.0"===s?a||null:n||null,e.addressV1=a,e.addressV2=n,await this.addSolor(e)}try{if(e.tokenAddress===this.state.fromToken.tokenAddress)return this.switchToken();let t=this.state.toValue;t&&e.tokenDecimal!=this.state.toToken.tokenDecimal&&(t=Object(y.D)(t)._toFixed(Number(e.tokenDecimal),1));const s=this.getExchangeBalance(this.state.fromToken),a=this.getExchangeBalance(e),n=k.a.contract.poly,i=this.getExchangeBalance(this.state.fromToken,n),o=this.getExchangeBalance(e,n),c=this.getApprovedAmount(e);if(await s,await a,await i,await o,await c,e.tokenAddress!==k.a.trxFakeAddress){const t=this.props.network.defaultAccount,{exchangeAddr:s,totalLiquidity:a}=await Object(f.m)(t,e.tokenAddress);this.setState({hasLiquidity:s&&Object(y.a)(a).gt(0)})}const{fromToken:r}=this.state,l=r&&e&&(e.tokenAddress===k.a.trxFakeAddress&&r.tokenAddress===k.a.wtrxAddress||e.tokenAddress===k.a.wtrxAddress&&r.tokenAddress===k.a.trxFakeAddress);this.setState({toValue:Object(y.b)(t),toToken:e,swapTRXState:l},(()=>{this.calcPrice(),this.getTokenBalance(),this.showPriceChart()}))}catch(a){console.error(a)}},this.showPriceChart=()=>{const{fromToken:e,toToken:t}=this.state;let s=!1;e.tokenAddress&&t.tokenAddress&&(e.tokenAddress===k.a.trxFakeAddress||t.tokenAddress===k.a.trxFakeAddress)&&(s=!0),this.setState({priceChartVisible:s})},this.onSlippageChange=()=>{this.calcPrice()},this.showAddRecipient=()=>{this.setState({addRecipient:!0},(()=>{this.checkInput()}))},this.switchPriceInverseFlag=()=>{this.setState({priceInverseFlag:!this.state.priceInverseFlag})},this.switchToken=()=>{this.setState({showTrxLimitText:!1});const e=this.state.toToken,t=this.state.fromToken,s=this.state.receivedFlag;let a=this.state.fromValue,n=this.state.toValue;s?(n=this.state.fromValue,a=this.state.toValue):(a=this.state.toValue,n=this.state.fromValue),this.setState({priceInverseFlag:!1,receivedFlag:!s,fromToken:e,toToken:t,fromValue:Object(y.b)(a),toValue:Object(y.b)(n),needApprove:!1},(async()=>{await this.getApprovedAmount(e),await this.getTokenBalance(),this.calcPrice(),this.fromTokenRef.current.setTokenList(),this.toTokenRef.current.setTokenList(),this.fromTokenRef.current.setState({}),this.toTokenRef.current.setState({}),this.setState({showTrxLimitText:!0})}))},this.hideAddRecipient=()=>{this.setState({addRecipient:!1,recipientAddr:""},(()=>{this.checkInput()}))},this.onRecipientChange=e=>{const t=e.target.value;this.setState({recipientAddr:t},(()=>{this.checkInput()}))},this.showSettingModal=()=>{this.props.sunSwapNetwork.setData({settingVisible:!0})},this.initSwapModal=()=>{const{swapTRXState:e}=this.state,t=this.state.fromToken,s=this.state.toToken,a=!e&&this.state.needApprove,n=this.state.recipientAddr,i=n?c.a.get("sunSwap.swap.action_swapSend"):c.a.get("sunSwap.swap.action_swap"),o=["orange","red"].includes(this.state.priceImpactColor)&&!e?c.a.get("sunSwap.swap.action_swapStill"):n?c.a.get("sunSwap.swap.confirm_swapSend"):c.a.get("sunSwap.swap.confirm_swap"),r=n?c.a.get("sunSwap.action.swapSendAct",{from:t.tokenSymbol,to:s.tokenSymbol}):c.a.get("sunSwap.action.swapAct",{from:t.tokenSymbol,to:s.tokenSymbol}),l=n?c.a.get("sunSwap.action.swapSendActErr"):c.a.get("sunSwap.action.swapActErr");return{swapPopTitle:i,swapPopBtn:o,swapPopBtnDisabled:!1,swapErrorInfo:"",approveActionTitle:c.a.get("sunSwap.action.approveAct",{token:t.tokenSymbol}),approveActionError:c.a.get("sunSwap.action.approveActErr"),approveActionState:"",swapActionTitle:r,swapActionError:l,swapActionState:"",actionInfo:c.a.get("sunSwap.action.startBtn"),actionDisabled:!0,actionRetry:"",actionState:a?"line":"info",actionStarted:!1,successFromValue:"",successToValue:"",miniPopVisible:!1}},this.showSwapModal=()=>{this.setState({...this.initSwapModal(),swapVisible:!0},(()=>{this.onRetryAction()}))},this.beforeHideSwapModal=()=>{this.state.actionStarted?this.setState({miniPopVisible:!0}):this.hideSwapModal()},this.hideSwapModal=()=>{this.setState({swapVisible:!1},(()=>{setTimeout((()=>{this.setState({...this.initSwapModal()})}),1e3)}))},this.approveToken=async()=>{const e=this.state.fromToken.tokenAddress,t=this.state.fromToken.address;if(this.state.swapTRXState)return;await Object(f.e)(e,t,{title:"swap.pop_title_approve",obj:{token:this.state.fromToken.tokenSymbol}})?this.setState({approveActionState:"pending",actionInfo:c.a.get("sunSwap.action.doingBtn"),actionDisabled:!0,actionStarted:!0,needApprove:!1},(()=>{setTimeout((()=>{this.setState({approveActionState:"success",actionState:"info"})}),5e3)})):this.setState({approveActionState:"error",actionRetry:"approveToken",actionInfo:c.a.get("sunSwap.action.retryBtn"),actionDisabled:!1,actionStarted:!0})},this.beforeSwapToken=async()=>{this.setState({actionStarted:!0,swapPopBtn:c.a.get("sunSwap.action.startBtn"),swapPopBtnDisabled:!0},(()=>{this.swapToken()}))},this.swapToken=async()=>{const e=this.state.fromToken,t=this.state.toToken,s=this.state.fromValue,a=this.state.toValue,n=this.state.recipientAddr,i=this.state.swapTRXState,o=!i&&this.state.needApprove,r=s,l=a;let d="";if(i){const o={title:n&&!i?"swap.pop_title_swap_send":"swap.pop_title_swap",obj:{from:"".concat(Object(y.k)(Object(y.D)(s),e.tokenDecimal)," ").concat(e.tokenSymbol),to:"".concat(Object(y.k)(Object(y.D)(a),t.tokenDecimal)," ").concat(t.tokenSymbol),addr:i?window.defaultAccount:n}};d=await f.B[this.swapFuncType]({amountIn:Object(y.D)(s).times(Object(y.a)(10).pow(e.tokenDecimal))._toIntegerDown()._toHex(),amountOut:Object(y.D)(a).times(Object(y.a)(10).pow(t.tokenDecimal))._toIntegerDown()._toHex(),intlObj:o})}else d=await f.B[this.swapFuncType]({fromToken:e,toToken:t,input:"0x".concat(Object(y.D)(s).times(new y.a(10).pow(e.tokenDecimal)).toString(16)),output:"0x".concat(Object(y.D)(a).times(new y.a(10).pow(t.tokenDecimal)).toString(16)),dependentValue:"0x".concat(this.state.dependentValueSunBig.toString(16)),deadline:await Object(f.g)(this.props.sunSwapNetwork.settingDeadline),recipientAddr:n,intlObj:{title:n?"swap.pop_title_swap_send":"swap.pop_title_swap",obj:{from:"".concat(Object(y.k)(Object(y.D)(s),e.tokenDecimal)," ").concat(e.tokenSymbol),to:"".concat(Object(y.k)(Object(y.D)(a),t.tokenDecimal)," ").concat(t.tokenSymbol),addr:n}}});if(d){let e={swapErrorInfo:"",swapPopBtn:c.a.get("sunSwap.action.doingBtn"),swapPopBtnDisabled:!0,actionStarted:!0};o&&!i&&(e={actionInfo:c.a.get("sunSwap.action.doingBtn"),actionDisabled:!0,swapActionState:"pending",actionState:"line",actionStarted:!0}),this.setState(e,(()=>{setTimeout((async()=>{this.setState({fromValue:"",toValue:"",successFromValue:Object(y.b)(r),successToValue:Object(y.b)(l),actionRetry:"",actionState:"success",actionStarted:!1}),await this.getApprovedAmount(this.state.fromToken),this.calcPrice()}),5e3)}))}else{let e={swapErrorInfo:n?c.a.get("sunSwap.action.swapSendActErr"):c.a.get("sunSwap.action.swapActErr"),swapPopBtn:c.a.get("sunSwap.action.retryBtn"),swapPopBtnDisabled:!1,actionStarted:!0};o&&(e={actionState:"line",swapActionState:"error",actionRetry:"swapToken",actionInfo:c.a.get("sunSwap.action.retryBtn"),actionDisabled:!1,actionStarted:!0}),this.setState(e)}},this.onRetryAction=()=>{let e=this.state.actionRetry;const t=this.state.needApprove;switch(!e&&t&&(e="approveToken"),e){case"approveToken":this.setState({approveActionState:"start",actionInfo:c.a.get("sunSwap.action.startBtn"),actionDisabled:!0},(()=>{this.approveToken()}));break;case"swapToken":this.setState({swapActionState:"start",actionInfo:c.a.get("sunSwap.action.startBtn"),actionDisabled:!0},(()=>{this.swapToken()}))}},this.miniPopOk=()=>{const e=this.state.needApprove;this.setState({miniPopVisible:!1},(()=>{this.hideSwapModal(),e&&this.getApprovedAmount(this.state.fromToken)}))},this.miniPopCancel=()=>{this.setState({miniPopVisible:!1})},this.useSafeMax=e=>{const{fromBalanceStr:t,toBalanceStr:s}=this.state;if("from"===e){const e=Object(y.b)(Object(y.D)(t).minus(k.a.swapFeeAmount));this.setState({fromValue:e,receivedFlag:!0},(async()=>{await this.calcPrice()}))}else if("to"===e){const e=Object(y.b)(Object(y.D)(s).minus(k.a.swapFeeAmount));this.setState({toValue:e},(async()=>{await this.calcPrice()}))}},this.timer=0,this.timer2=0,this.fromTokenRef=i.a.createRef(),this.toTokenRef=i.a.createRef(),this.swapFuncType="",this.state={swapTRXState:!1,fromValue:"",toValue:"",fromToken:{tokenSymbol:""},toToken:{tokenSymbol:""},fromBalance:new y.a(-1),fromBalanceStr:"--",toBalance:new y.a(-1),toBalanceStr:"--",priceStr:"-",priceInverseStr:"-",priceInverseFlag:!1,dependentValueSunBig:"",dependentValue:"",priceImpact:"",priceImpactColor:"",liquidityProviderFee:"",receivedFlag:!0,addRecipient:!1,recipientAddr:"",recipientValid:!1,needApprove:!0,actionError:c.a.get("sunSwap.swap.action_enter_amount"),swapInfo:c.a.get("sunSwap.swap.action_swap"),swapVisible:!1,priceChartVisible:!1,swapPopTitle:"",swapPopBtn:"",swapPopBtnDisabled:!1,swapErrorInfo:"",approveActionTitle:"",approveActionError:"",approveActionState:"",swapActionTitle:"",swapActionError:"",swapActionState:"",actionInfo:"",actionDisabled:!1,actionRetry:"",actionState:"",actionStarted:!1,successFromValue:"",successToValue:"",miniPopVisible:!1,swapVersion:window.localStorage.getItem("swapVersion"),v1Balance:{fromBalance:null,fromBalanceStr:null,toBalance:null,toBalanceStr:null},v2Balance:{fromBalance:null,fromBalanceStr:null,toBalance:null,toBalanceStr:null},betterPrice:!1,notCreatedOfNew:!1,miniError:!1,hasLiquidity:!1,showTrxLimitText:!0}}componentDidUpdate(e,t){if(this.props.sunSwapNetwork.changedSetting&&this.state.fromValue&&this.state.toValue){let e=Object(y.D)(this.state.fromValue),t=Object(y.D)(this.state.toValue);this.calcDependentValue(e,t),this.props.sunSwapNetwork.setData({changedSetting:!1})}}render(){let{priceChartVisible:e,fromToken:t,toToken:s,betterPrice:a,notCreatedOfNew:n,fromBalanceStr:o,toBalanceStr:r,swapTRXState:l,fromValue:d,toValue:p,actionError:b}=this.state;return b===c.a.get("sunSwap.swap.action_insufficient_liquidity")&&l&&(b=""),Object(q.jsxs)(de.a,{className:"swap-content swap-and-pool",children:[Object(q.jsxs)(h.a,{gutter:[{xs:8,sm:16,md:24},10],align:"bottom",children:[Object(q.jsxs)(m.a,{xs:{span:24},sm:{span:24},md:{span:11},lg:{span:11},className:"swap-block",children:[Object(q.jsxs)("div",{className:"flex select-token-top",children:[Object(q.jsxs)("div",{className:t.tokenAddress?"flex":"flex sunswap-chose-token",children:[Object(q.jsx)(X,{ref:this.fromTokenRef,onChange:this.onFromTokenChange,address:this.props.network.defaultAccount,value:t.tokenAddress,tokenInfo:t,switchValue:s.tokenAddress,swap:!0,asInput:!0,type:1}),Object(q.jsx)(J.a,{token:t})]}),Object(q.jsxs)("div",{className:"swap-balance",children:[Object(q.jsx)("span",{children:c.a.get("sunSwap.swap.input_from_balance")}),Object(q.jsx)("span",{children:Object(y.l)(o,{dp:6,cutZero:!0})})]})]}),Object(q.jsx)("div",{className:"flex mt-16",children:Object(q.jsxs)("div",{className:"flex input-block",children:[Object(q.jsx)("div",{className:"flex input-number",children:Object(q.jsx)("input",{value:this.state.fromValue,onChange:this.onFromValueChange,onBlur:this.onFromValueBlur,placeholder:c.a.get("sunSwap.swap.input_placeholder")})}),this.props.network.isConnected?Object(q.jsx)("span",{className:"max-btn",onClick:this.setMaxFrom,children:c.a.get("sunSwap.swap.input_from_max")}):null]})})]}),Object(q.jsx)(m.a,{xs:{span:2},sm:{span:2},md:{span:2},lg:{span:2},style:{textAlign:"center"},children:Object(q.jsx)("div",{className:je?"flex":"flex center",children:Object(q.jsx)("span",{className:"swap-arrow",onClick:this.switchToken})})}),Object(q.jsxs)(m.a,{xs:{span:24},sm:{span:24},md:{span:11},lg:{span:11},className:"swap-block",children:[Object(q.jsxs)("div",{className:"flex",children:[Object(q.jsxs)("div",{className:s.tokenAddress?"flex":"flex sunswap-chose-token",children:[Object(q.jsx)(X,{ref:this.toTokenRef,onChange:this.onToTokenChange,address:this.props.network.defaultAccount,value:s.tokenAddress,tokenInfo:s,switchValue:t.tokenAddress,swap:!0,type:2}),Object(q.jsx)(J.a,{token:s})]}),Object(q.jsxs)("div",{className:"swap-balance",children:[Object(q.jsx)("span",{children:c.a.get("sunSwap.swap.input_to_balance")}),Object(q.jsx)("span",{children:Object(y.l)(r,{dp:6,cutZero:!0})})]})]}),Object(q.jsx)("div",{className:"flex mt-16",children:Object(q.jsx)("div",{className:"flex input-block",children:Object(q.jsx)("div",{className:"flex input-number",children:Object(q.jsx)("input",{value:this.state.toValue,onChange:this.onToValueChange,onBlur:this.onToValueBlur,placeholder:c.a.get("sunSwap.swap.input_placeholder")})})})})]})]}),Object(q.jsxs)(h.a,{gutter:[{xs:8,sm:16,md:24},10],className:"mt-20",children:[Object(q.jsxs)(m.a,{xs:{span:24},sm:{span:24},md:{span:11},lg:{span:11},className:"flex-swap-block",children:[this.state.addRecipient?Object(q.jsxs)(i.a.Fragment,{children:[Object(q.jsxs)("div",{className:"add-recipient add-recipient-remove",onClick:this.hideAddRecipient,children:[c.a.get("sunSwap.swap.input_remove_recipient"),Object(q.jsx)("img",{className:"ml-12 recipient-icon",src:ue.a,alt:""})]}),Object(q.jsxs)("div",{className:"recipient-list",children:[Object(q.jsx)("div",{className:"flex",children:this.state.recipientAddr&&this.state.recipientValid?Object(q.jsx)("a",{className:"link",href:"".concat(k.a.tronscanUrl,"/address/").concat(this.state.recipientAddr),target:"_blank",rel:"noreferrer",children:c.a.get("sunSwap.swap.input_recipient_tronscan")}):null}),Object(q.jsx)("input",{className:"mt-15",value:this.state.recipientAddr,onChange:this.onRecipientChange,placeholder:c.a.get("sunSwap.swap.input_recipient_placeholder")})]})]}):Object(q.jsxs)("div",{className:"add-recipient",onClick:this.showAddRecipient,children:[c.a.get("sunSwap.swap.input_add_recipient"),Object(q.jsx)("img",{className:"ml-12 recipient-icon",src:me.a,alt:""})]}),t.tokenAddress&&s.tokenAddress?Object(q.jsxs)("div",{className:"flex start rates mt-20",children:[c.a.get("sunSwap.swap.input_from_price"),Object(q.jsx)("span",{className:"swap-token",children:this.state.priceInverseFlag?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("span",{className:"token-rates",children:[Object(y.l)(this.state.priceInverseStr,{dp:k.a.trxDecimal,cutZero:!0,miniTextNoZero:!0,miniText:k.a.minPrice})," ",s.tokenSymbol]})," ",c.a.get("sunSwapV3.per"),Object(q.jsx)("span",{className:"token-rates",children:t.tokenSymbol})]}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("span",{className:"token-rates",children:[Object(y.l)(this.state.priceStr,{dp:k.a.trxDecimal,cutZero:!0,miniTextNoZero:!0,miniText:k.a.minPrice})," ",t.tokenSymbol]})," ",c.a.get("sunSwapV3.per"),Object(q.jsx)("span",{className:"token-rates",children:s.tokenSymbol})]})}),Object(q.jsx)("img",{className:"ml-12",src:he.a,alt:"",onClick:this.switchPriceInverseFlag})]}):null]}),Object(q.jsx)(m.a,{xs:{span:24},sm:{span:24},md:{span:2},lg:{span:2},style:{textAlign:"center"},children:Object(q.jsx)("span",{})}),Object(q.jsxs)(m.a,{xs:{span:24},sm:{span:24},md:{span:11},lg:{span:11},className:"flex-swap-block",children:["0.5"!=this.props.sunSwapNetwork.settingSlippage?Object(q.jsxs)("div",{className:"flex start mt-8 detail-item",children:[Object(q.jsxs)("div",{children:[c.a.get("sunSwap.swap.detail_slippage")," "]}),Object(q.jsx)("span",{className:"ml-8",children:(Object(y.a)(this.props.sunSwapNetwork.settingSlippage).lt(.01)?"<0.01":this.props.sunSwapNetwork.settingSlippage)+"%"})]}):null,!l&&Object(y.D)(this.state.fromValue).gt(0)&&Object(y.D)(this.state.toValue).gte(0)&&this.state.fromToken.tokenAddress&&this.state.toToken.tokenAddress?Object(q.jsxs)("div",{children:[Object(q.jsx)("div",{className:"flex start mt-8 detail-item",children:this.state.receivedFlag?Object(q.jsxs)(i.a.Fragment,{children:[Object(q.jsx)(pe.a,{tip:c.a.get("sunSwap.swap.detail_min_received_tip"),children:c.a.get("sunSwap.swap.detail_min_received")}),Object(q.jsx)("span",{className:"ml-8",children:this.state.dependentValue+" "+this.state.toToken.tokenSymbol})]}):Object(q.jsxs)(i.a.Fragment,{children:[Object(q.jsx)(pe.a,{tip:c.a.get("sunSwap.swap.detail_max_sold_tip"),children:c.a.get("sunSwap.swap.detail_max_sold")}),Object(q.jsx)("span",{className:"ml-8",children:this.state.dependentValue+" "+this.state.fromToken.tokenSymbol})]})}),Object(q.jsxs)("div",{className:"flex start mt-8 detail-item",children:[Object(q.jsx)(pe.a,{tip:c.a.get("sunSwap.swap.detail_price_impact_tip"),children:c.a.get("sunSwap.swap.detail_price_impact")}),Object(q.jsx)("span",{className:["orange","red","mini-red"].includes(this.state.priceImpactColor)?this.state.priceImpactColor+" ml-8":"ml-8",children:this.state.priceImpact.indexOf("NaN")>-1?"--":this.state.priceImpact})]}),Object(q.jsxs)("div",{className:"flex start mt-8 detail-item",children:[Object(q.jsx)(pe.a,{tip:c.a.get("sunSwap.swap.detail_liquidity_fee_tip"),children:c.a.get("sunSwap.swap.detail_liquidity_fee")}),Object(q.jsx)("span",{className:"ml-8",children:this.state.liquidityProviderFee+" "+this.state.fromToken.tokenSymbol})]})]}):null,"TRX"===t.tokenSymbol&&this.state.fromValue&&o&&this.state.showTrxLimitText?Object(y.D)(o).gte(k.a.swapFeeAmount)?Object(y.D)(o).minus(k.a.swapFeeAmount).gte(Object(y.D)(this.state.fromValue))?null:Object(q.jsxs)("div",{className:"safe-amount-tip safe-amount",children:[c.a.getHTML("list.trx_tip_1",{value:k.a.swapFeeAmount})," ",Object(q.jsx)("span",{className:"safe-amount-set-btn",onClick:()=>this.useSafeMax("from"),children:c.a.get("sunSwap.list.trx_tip_2")})]}):Object(q.jsx)("div",{className:"safe-amount-tip safe-amount",children:c.a.getHTML("list.trx_tip_3",{value:k.a.swapFeeAmount})}):null,"TRX"===s.tokenSymbol&&this.state.toValue&&r&&this.state.showTrxLimitText?Object(y.D)(r).gte(k.a.swapFeeAmount)?null:Object(q.jsx)("div",{className:"safe-amount-tip safe-amount",children:c.a.getHTML("list.trx_tip_3",{value:k.a.swapFeeAmount})}):null]})]}),Object(q.jsx)("div",{className:"action-btns",children:this.props.network.isConnected?b?Object(q.jsx)(H.a,{type:"single",disabled:!0,info:b}):Object(q.jsx)(H.a,{type:"single",btnColor:l?"":this.state.priceImpactColor,info:"red"!==this.state.priceImpactColor||l?this.state.swapInfo:c.a.get("sunSwap.swap.action_high"),onClick:this.showSwapModal}):Object(q.jsx)(H.a,{type:"single",info:c.a.get("sunSwap.swap.action_connect"),onClick:()=>{this.props.network.setData({loginModalVisible:!0,loginModalStep:1})}})}),Object(q.jsxs)(u.a,{title:null,closable:"success"!==this.state.actionState,open:this.state.swapVisible,onCancel:this.beforeHideSwapModal,footer:null,className:"confirm-swap-modal sun-swap-modal",width:630,centered:!0,transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",children:["line"===this.state.actionState&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:"title big",children:this.state.swapPopTitle}),Object(q.jsxs)("div",{className:"ib-parent center trans-modal amount",children:[Object(q.jsxs)("div",{className:"from",children:[Object(q.jsx)("div",{className:"from-value",children:this.state.fromValue}),Object(q.jsx)("div",{className:"from-token",children:this.state.fromToken.tokenSymbol})]}),Object(q.jsx)("img",{src:be.a,alt:"",className:"plus w10"}),Object(q.jsxs)("div",{className:"to",children:[Object(q.jsx)("div",{className:"to-value",children:this.state.toValue}),Object(q.jsx)("div",{className:"to-token",children:this.state.toToken.tokenSymbol})]}),this.state.recipientAddr&&Object(q.jsxs)("div",{className:"recipient",children:[c.a.get("sunSwap.swap.recipient"),this.state.recipientAddr]})]}),Object(q.jsx)("div",{className:"middleTip",children:this.state.recipientAddr?c.a.get("sunSwap.action.swapSendLineTitle"):c.a.get("sunSwap.action.swapLineTitle")}),Object(q.jsxs)(W.a,{children:[Object(q.jsx)("span",{status:this.state.approveActionState,err:this.state.approveActionError,children:this.state.approveActionTitle}),Object(q.jsx)("span",{status:this.state.swapActionState,err:this.state.swapActionError,children:this.state.swapActionTitle})]}),Object(q.jsx)(H.a,{type:"single",disabled:this.state.actionDisabled,info:this.state.actionInfo,onClick:this.onRetryAction})]}),"info"===this.state.actionState&&Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:"title big",children:this.state.swapPopTitle}),Object(q.jsxs)("div",{className:"ib-parent center tokens amount",children:[Object(q.jsxs)("div",{className:"from",children:[Object(q.jsx)("div",{className:"from-value",children:this.state.fromValue}),Object(q.jsxs)("div",{className:"from-token",children:[Object(q.jsx)("img",{src:this.state.fromToken.tokenLogoUrl,alt:""}),Object(q.jsx)("span",{children:this.state.fromToken.tokenSymbol})]})]}),Object(q.jsx)("img",{src:be.a,alt:"",className:"plus w10"}),Object(q.jsxs)("div",{className:"to",children:[Object(q.jsx)("div",{className:"to-value",children:this.state.toValue}),Object(q.jsxs)("div",{className:"to-token",children:[Object(q.jsx)("img",{src:this.state.toToken.tokenLogoUrl,alt:""}),Object(q.jsx)("span",{children:this.state.toToken.tokenSymbol})]})]}),this.state.recipientAddr&&Object(q.jsxs)("div",{className:"recipient",children:[c.a.get("sunSwap.swap.recipient"),this.state.recipientAddr]})]}),!l&&Object(q.jsxs)("div",{className:"flex justify-content price",children:[Object(q.jsx)("div",{className:"",children:c.a.get("sunSwap.swap.input_from_price")}),Object(q.jsxs)("div",{className:"right",children:[Object(q.jsx)("div",{children:"1 ".concat(this.state.toToken.tokenSymbol," =\n                    ").concat(Object(y.l)(this.state.priceStr,{dp:this.state.fromToken.tokenDecimal,cutZero:!0,miniTextNoZero:!0,miniText:k.a.minPrice}),"\n                    ").concat(this.state.fromToken.tokenSymbol," ")}),Object(q.jsx)("div",{className:"mt3",children:"1 ".concat(this.state.fromToken.tokenSymbol," =\n                    ").concat(Object(y.l)(this.state.priceInverseStr,{dp:this.state.toToken.tokenDecimal,cutZero:!0,miniTextNoZero:!0,miniText:k.a.minPrice}),"\n                    ").concat(this.state.toToken.tokenSymbol," ")})]})]}),!l&&"0.5"!=this.props.sunSwapNetwork.settingSlippage&&Object(q.jsxs)("div",{className:"flex justify-content detail-slippage",children:[Object(q.jsxs)("div",{children:[c.a.get("sunSwap.swap.detail_slippage")," "]}),Object(q.jsx)("div",{children:(Object(y.a)(this.props.sunSwapNetwork.settingSlippage).lt(.01)?"<0.01":this.props.sunSwapNetwork.settingSlippage)+"%"})]}),!l&&Object(q.jsxs)("div",{className:"detail-list",children:[Object(q.jsx)("div",{className:"flex justify-content detail-item",children:this.state.receivedFlag?Object(q.jsxs)(i.a.Fragment,{children:[Object(q.jsx)(pe.a,{tip:c.a.get("sunSwap.swap.detail_min_received_tip"),left:!0,dark:!0,children:c.a.get("sunSwap.swap.detail_min_received")}),Object(q.jsx)("span",{className:"right",children:this.state.dependentValue+" "+this.state.toToken.tokenSymbol})]}):Object(q.jsxs)(i.a.Fragment,{children:[Object(q.jsx)(pe.a,{tip:c.a.get("sunSwap.swap.detail_max_sold_tip"),left:!0,dark:!0,children:c.a.get("sunSwap.swap.detail_max_sold")}),Object(q.jsx)("span",{className:"right",children:this.state.dependentValue+" "+this.state.fromToken.tokenSymbol})]})}),Object(q.jsxs)("div",{className:"flex justify-content detail-item",children:[Object(q.jsx)(pe.a,{tip:c.a.get("sunSwap.swap.detail_price_impact_tip"),left:!0,dark:!0,children:c.a.get("sunSwap.swap.detail_price_impact")}),Object(q.jsx)("span",{className:"right "+(["orange","red"].includes(this.state.priceImpactColor)?this.state.priceImpactColor:"normal sun-swap-normal-1"),children:this.state.priceImpact.indexOf("NaN")>-1?"--":this.state.priceImpact})]}),Object(q.jsxs)("div",{className:"flex justify-content detail-item",children:[Object(q.jsx)(pe.a,{tip:c.a.get("sunSwap.swap.detail_liquidity_fee_tip"),left:!0,dark:!0,children:c.a.get("sunSwap.swap.detail_liquidity_fee")}),Object(q.jsx)("span",{className:"right",children:this.state.liquidityProviderFee+" "+this.state.fromToken.tokenSymbol})]})]}),Object(q.jsx)("div",{className:"warning",children:this.state.receivedFlag?Object(q.jsx)("div",{children:c.a.get("sunSwap.swap.confirm_warning_output",{amount:l?p:this.state.dependentValue,token:this.state.toToken.tokenSymbol})}):Object(q.jsx)("div",{children:c.a.get("sunSwap.swap.confirm_warning_input",{amount:l?d:this.state.dependentValue,token:this.state.fromToken.tokenSymbol})})}),this.state.swapErrorInfo&&Object(q.jsx)("div",{className:"errorMsg",children:this.state.swapErrorInfo}),Object(q.jsx)(H.a,{type:"single",btnColor:l?"":this.state.priceImpactColor,disabled:this.state.swapPopBtnDisabled,info:this.state.swapPopBtn,onClick:this.beforeSwapToken})]}),"success"===this.state.actionState&&Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:"modal-success",children:[Object(q.jsx)("img",{src:Q.a,alt:""}),this.state.recipientAddr?Object(q.jsx)("div",{className:"title green",children:c.a.get("sunSwap.action.swapSendSuccessTitle")}):Object(q.jsx)("div",{className:"title green",children:c.a.get("sunSwap.action.swapSuccessTitle")}),Object(q.jsxs)("div",{className:"ib-parent center trans-modal mb25",children:[Object(q.jsxs)("div",{className:"from",children:[Object(q.jsx)("div",{className:"from-value",children:this.state.successFromValue}),Object(q.jsx)("div",{className:"from-token",children:this.state.fromToken.tokenSymbol})]}),Object(q.jsx)("img",{src:be.a,alt:"",className:"plus w10"}),Object(q.jsxs)("div",{className:"to",children:[Object(q.jsx)("div",{className:"to-value",children:this.state.successToValue}),Object(q.jsx)("div",{className:"to-token",children:this.state.toToken.tokenSymbol})]}),this.state.recipientAddr&&Object(q.jsxs)("div",{className:"recipient",children:[c.a.get("sunSwap.swap.recipient"),Object(y.j)(this.state.recipientAddr)]})]}),Object(q.jsx)(H.a,{styleName:"mt-40",type:"single",info:c.a.get("sunSwap.action.closeBtn"),onClick:this.hideSwapModal}),this.state.recipientAddr?Object(q.jsx)("div",{className:"endTip",children:c.a.get("sunSwap.action.swapSendDescTitle")}):Object(q.jsx)("div",{className:"endTip",children:c.a.get("sunSwap.action.swapDescTitle")})]})})]}),Object(q.jsx)(Z.a,{visible:this.state.miniPopVisible,confirm:this.miniPopOk,cancel:this.miniPopCancel})]})}})||re)||re)||re)||re,we=(s(1861),s(1123));var xe,Se=Object(r.b)("sunSwapNetwork")(ke=Object(r.b)("sunSwapPool")(ke=Object(r.b)("network")(ke=Object(r.c)(ke=class extends i.a.Component{constructor(e){super(e),this.showModal=()=>{this.setState({visible:!0})},this.cancel=()=>{this.state.actionStarted?this.setState({miniPopVisible:!0}):(this.setState({visible:!1}),this.props.hideMigrateModal())},this.migrate=async()=>{const{migrateData:e,migrateDataV2:t}=this.props,{tokenV2:s,trxV2:a,lpV2:n}=this.computeV2(),i="v1.5"===this.props.version?k.a.migrateContract.v15:k.a.migrateContract.v1;let o,c,{settingSlippageMigrate:r}=this.props.sunSwapNetwork,{defaultAccount:l}=this.props.network;r=Number(r);const d=new y.a(a),p=new y.a(s);o="0x".concat(p.times(1-r/100).times(new y.a(10).pow(e.tokenDecimal)).integerValue(y.a.ROUND_DOWN).toString(16)),c="0x".concat(d.times(1-r/100).times(new y.a(10).pow(6)).integerValue(y.a.ROUND_DOWN).toString(16));const h={title:"sunSwap.pair_actions.add",obj:{trxAmount:Object(y.k)(e.trx.toString(),6),trx:"TRX",tokenAmount:Object(y.k)(e.value.toString(),e.tokenDecimal),tokenSymbol:e.tokenSymbol}},m={contractAddress:i,token:e.tokenAddress,amountTokenMin:Object(y.a)(o)._toIntegerDown()._toHex(),amountETHMin:Object(y.a)(c)._toIntegerDown()._toHex(),to:l,deadline:await Object(f.g)(this.props.sunSwapNetwork.settingDeadlineMigrate)};await Object(f.w)(m,h)?this.setState({step:3}):this.setApproveBarText("two",!1)},this.computeV2=()=>{const{migrateData:e,migrateDataV2:t}=this.props,s=Object(y.a)(e.value).div(Object(y.a)(e.trx)),a=Object(y.a)(t.exTokenABalance.div(new y.a(10).pow(e.tokenDecimal))).div(Object(y.a)(t.exTokenBBalance.div(new y.a(10).pow(6))));let n,i,o,c,r;return Object(y.a)(s).gt(Object(y.a)(a))?(n=Object(y.a)(e.trx),i=Object(y.a)(t.exTokenABalance.div(new y.a(10).pow(e.tokenDecimal))).div(Object(y.a)(t.exTokenBBalance.div(new y.a(10).pow(6)))).times(Object(y.a)(e.trx)),o=Object(y.a)(t.totalLiquidity.div(new y.a(10).pow(18))).div(Object(y.a)(t.exTokenBBalance.div(new y.a(10).pow(6)))).times(Object(y.a)(e.trx)),c=e.tokenSymbol,r=Object(y.l)(Object(y.a)(Object(y.a)(e.value).minus(i)),{miniText:1e-4,cutZero:!0,dp:4})):(i=Object(y.a)(e.value),n=Object(y.a)(t.exTokenBBalance.div(new y.a(10).pow(6))).div(Object(y.a)(t.exTokenABalance.div(new y.a(10).pow(e.tokenDecimal)))).times(Object(y.a)(e.value)),o=Object(y.a)(t.totalLiquidity.div(new y.a(10).pow(18))).div(Object(y.a)(t.exTokenABalance.div(new y.a(10).pow(e.tokenDecimal)))).times(Object(y.a)(e.value)),c="TRX",r=Object(y.l)(Object(y.a)(Object(y.a)(e.trx).minus(n)),{miniText:1e-4,cutZero:!0,dp:4})),{tokenV2:i,trxV2:n,lpV2:o,refundedToken:c,refundedValue:r}},this.checkApproveStatus=async()=>{await this.isApproved()?this.setState({needApproveOne:"false",actionRetry:"setApproveTwo",step:2,actionStarted:!0},(()=>{this.onRetryAction()})):this.onRetryAction()},this.onRetryAction=()=>{let{needApproveOne:e,needApproveTwo:t,actionRetry:s}=this.state;switch(s||(e?s="setApproveOne":t&&(s="setApproveTwo")),s){case"setApproveOne":this.setState({approveActionOneState:"start",actionInfo:c.a.get("sunSwap.action.startBtn"),actionDisabled:!0},(()=>{this.setApprove("one")}));break;case"setApproveTwo":this.setState({approveActionOneState:"success",approveActionTwoState:"start",actionInfo:c.a.get("sunSwap.action.startBtn"),actionDisabled:!0},(()=>{this.migrate()}))}},this.setApproveBarText=(e,t)=>{console.log(e),t?("one"===e&&this.setState({approveActionOneState:"pending",actionInfo:c.a.get("sunSwap.action.doingBtn"),actionDisabled:!0,actionStarted:!0},(()=>{console.log(273),setTimeout((()=>{this.setState({approveActionOneState:"success",approveActionTwoState:"start"})}),5e3)})),"two"===e&&this.setState({approveActionTwoState:"pending",actionInfo:c.a.get("sunSwap.action.doingBtn"),actionDisabled:!0,actionStarted:!0},(()=>{setTimeout((()=>{this.setState({approveActionTwoState:"success",baseActionState:"info"})}),5e3)}))):("one"===e&&this.setState({approveActionOneState:"error"}),"two"===e&&this.setState({approveActionTwoState:"error"}),this.setState({actionRetry:"one"===e?"setApproveOne":"setApproveTwo",actionInfo:c.a.get("sunSwap.action.retryBtn"),actionDisabled:!1,actionStarted:!0}))},this.setApprove=async e=>{const{migrateData:t,migrateDataV2:s}=this.props,a="v1.5"===this.props.version?k.a.migrateContract.v15:k.a.migrateContract.v1;this.setState({step:2});await Object(f.e)(t.address,a,{title:"migrate.action1"})?(this.setApproveBarText(e,!0),"one"===e?this.setState({needApproveOne:!1,actionRetry:"setApproveTwo"},(()=>{this.onRetryAction()})):this.setState({needApproveTwo:!1})):this.setApproveBarText(e,!1)},this.miniPopOk=()=>{this.setState({miniPopVisible:!1,visible:!1,step:1,actionStarted:!1}),this.props.hideMigrateModal()},this.miniPopCancel=()=>{this.setState({miniPopVisible:!1})},this.gotoPool=()=>{this.props.onChange(1),this.props.hideMigrateModal()},this.changeRate=()=>{const{migrateData:e,migrateDataV2:t}=this.props;1===this.state.newRateType?this.setState({oldRateType:2,oldRateLabel:"TRX-"+e.tokenSymbol,oldRate:Object(y.l)(Object(y.a)(e.value).div(Object(y.a)(e.trx)),{miniText:1e-4,cutZero:!0,dp:4}),newRateType:2,newRateLabel:"TRX-"+e.tokenSymbol,newRate:Object(y.l)(Object(y.a)(t.exTokenABalance.div(new y.a(10).pow(e.tokenDecimal))).div(Object(y.a)(t.exTokenBBalance.div(new y.a(10).pow(6)))),{miniText:1e-4,cutZero:!0,dp:4})}):this.setState({oldRateType:1,oldRateLabel:e.tokenSymbol+"-TRX",oldRate:Object(y.l)(Object(y.a)(e.trx).div(Object(y.a)(e.value)),{miniText:1e-4,cutZero:!0,dp:4}),newRateType:1,newRateLabel:e.tokenSymbol+"-TRX",newRate:Object(y.l)(Object(y.a)(t.exTokenBBalance.div(new y.a(10).pow(6))).div(Object(y.a)(t.exTokenABalance.div(new y.a(10).pow(e.tokenDecimal)))),{miniText:1e-4,cutZero:!0,dp:4})})},this.isApproved=async()=>{const e="v1.5"===this.props.version?k.a.migrateContract.v15:k.a.migrateContract.v1;let{defaultAccount:t}=this.props.network;const s=await Object(f.u)(this.props.migrateData.address,t,e);return Object(y.a)(s).gt(0)},this.settingsRef=i.a.createRef(),this.state={visible:!1,step:1,actionInfo:c.a.get("sunSwap.action.startBtn"),actionDisabled:!0,approveActionOneState:"",approveActionOneError:c.a.get("sunSwap.action.approveActErr"),approveActionOneTitle:c.a.get("sunSwap.migrate.action1"),needApproveOne:!0,needApproveTwo:!0,approveActionTwoState:"",supplyActionEapproveActionTwoErrorrror:c.a.get("sunSwap.action.supplyActErr"),approveActionTwoTitle:c.a.get("sunSwap.migrate.action2"),miniPopVisible:!1,actionStarted:!1,oldRateType:1,oldRateLabel:e.migrateData.tokenSymbol+"-TRX",oldRate:Object(y.l)(Object(y.a)(e.migrateData.trx).div(Object(y.a)(e.migrateData.value)),{miniText:1e-4,cutZero:!0,dp:4}),newRateType:1,newRateLabel:e.migrateData.tokenSymbol+"-TRX",newRate:Object(y.l)(Object(y.a)(e.migrateDataV2.exTokenBBalance.div(new y.a(10).pow(6))).div(Object(y.a)(e.migrateDataV2.exTokenABalance.div(new y.a(10).pow(e.migrateData.tokenDecimal)))),{miniText:1e-4,cutZero:!0,dp:4}),refundedValue:"",refundedToken:"",actionRetry:""}}componentDidMount(){}render(){const{migrateData:e,migrateDataV2:t}=this.props,{tokenV2:s,trxV2:a,lpV2:n,refundedToken:i,refundedValue:o}=this.computeV2(),{step:r,actionDisabled:l,actionInfo:d,approveActionTwoState:h,approveActionTwoError:m,approveActionTwoTitle:b,approveActionOneState:j,approveActionOneError:g,approveActionOneTitle:w,oldRateLabel:x,oldRate:S,newRateLabel:O,newRate:v}=this.state;return Object(q.jsxs)("div",{children:[Object(q.jsxs)(u.a,{title:null,closable:3!==this.state.step,open:this.props.visible||this.state.visible,onCancel:this.cancel,className:"pool-modal sun-swap-modal add-gai ".concat(1===r?"migrateModal":""),footer:null,width:630,destroyOnClose:!0,centered:!0,transitionName:"ant-zoom-sun",maskTransitionName:"ant-fade",children:[1===r&&Object(q.jsxs)("div",{className:"step1",children:[Object(q.jsx)("div",{className:"title",children:c.a.get("sunSwap.migrate.title")}),Object(q.jsx)("p",{className:"desc",children:c.a.get("sunSwap.migrate.desc")}),Object(q.jsxs)("section",{className:"info",children:[Object(q.jsxs)("div",{className:"lptokens",children:[Object(q.jsxs)("span",{className:"images",children:[Object(q.jsx)("img",{className:"logo",src:k.a.trxLogoUrl,alt:""}),Object(q.jsx)("img",{className:"logo",src:e.tokenLogoUrl||T.a,alt:""})]}),Object(q.jsxs)("span",{className:"name",children:["TRX-",e.tokenSymbol]}),Object(q.jsx)("span",{className:"version",children:"v1.5"===this.props.version?"V1.5":"V1"})]}),Object(q.jsxs)("div",{className:"box",children:[Object(q.jsx)("div",{className:"line-box",children:Object(q.jsx)("span",{})}),Object(q.jsxs)("div",{className:"lp",children:[Object(q.jsxs)("span",{className:"images",children:[Object(q.jsx)("img",{className:"logo",src:k.a.trxLogoUrl,alt:""}),Object(q.jsx)("img",{className:"logo",src:e.tokenLogoUrl||T.a,alt:""})]}),Object(q.jsxs)("span",{className:"name",children:[e.tokenSymbol,"-TRX LP"]}),Object(q.jsx)("span",{className:"amount",children:Object(y.l)(e.tokens,{miniText:1e-4,cutZero:!0,dp:4})})]}),Object(q.jsxs)("div",{className:"token",children:[Object(q.jsx)("span",{className:"images",children:Object(q.jsx)("img",{className:"logo",src:e.tokenLogoUrl||T.a,alt:""})}),Object(q.jsx)("span",{className:"name",children:e.tokenSymbol}),Object(q.jsx)("span",{className:"amount",children:Object(y.l)(e.value,{miniText:1e-4,cutZero:!0,dp:4})})]}),Object(q.jsxs)("div",{className:"token",children:[Object(q.jsx)("span",{className:"images",children:Object(q.jsx)("img",{className:"logo",src:k.a.trxLogoUrl,alt:""})}),Object(q.jsx)("span",{className:"name",children:"TRX"}),Object(q.jsx)("span",{className:"amount",children:Object(y.l)(e.trx,{miniText:1e-4,cutZero:!0,dp:4})})]})]}),Object(q.jsxs)("div",{className:"rate",children:[Object(q.jsx)("span",{className:"rate-title",children:c.a.get("sunSwap.migrate.rate")}),x,Object(q.jsx)("em",{onClick:()=>this.changeRate()}),Object(q.jsx)("span",{className:"value mr-0",children:S})]})]}),Object(q.jsx)("div",{className:"advanced",children:Object(q.jsx)(we.a,{version:"Migrate",network:this.props.sunSwapNetwork,onChange:(e,t)=>{this.props.sunSwapNetwork.setData({settingVisibleMigrate:!1}),this.props.sunSwapNetwork.saveSettingsForMigrate(e,t)}})}),Object(q.jsxs)("section",{className:"info v2",children:[Object(q.jsxs)("div",{className:"lptokens",children:[Object(q.jsxs)("span",{className:"images",children:[Object(q.jsx)("img",{className:"logo",src:k.a.trxLogoUrl,alt:""}),Object(q.jsx)("img",{className:"logo",src:e.tokenLogoUrl||T.a,alt:""})]}),Object(q.jsxs)("span",{className:"name",children:["TRX-",e.tokenSymbol]}),Object(q.jsx)("span",{className:"version",children:"V2"})]}),Object(q.jsxs)("div",{className:"box",children:[Object(q.jsx)("div",{className:"line-box",children:Object(q.jsx)("span",{})}),Object(q.jsxs)("div",{className:"lp",children:[Object(q.jsxs)("span",{className:"images",children:[Object(q.jsx)("img",{className:"logo",src:k.a.trxLogoUrl,alt:""}),Object(q.jsx)("img",{className:"logo",src:e.tokenLogoUrl||T.a,alt:""})]}),Object(q.jsxs)("span",{className:"name",children:[e.tokenSymbol,"-TRX LP"]}),Object(q.jsx)("span",{className:"amount",children:Object(y.l)(n,{miniText:1e-4,cutZero:!0,dp:4})})]}),Object(q.jsxs)("div",{className:"token",children:[Object(q.jsx)("span",{className:"images",children:Object(q.jsx)("img",{className:"logo",src:e.tokenLogoUrl||T.a,alt:""})}),Object(q.jsx)("span",{className:"name",children:e.tokenSymbol}),Object(q.jsx)("span",{className:"amount",children:Object(y.l)(s,{miniText:1e-4,cutZero:!0,dp:4})})]}),Object(q.jsxs)("div",{className:"token",children:[Object(q.jsx)("span",{className:"images",children:Object(q.jsx)("img",{className:"logo",src:k.a.trxLogoUrl,alt:""})}),Object(q.jsx)("span",{className:"name",children:"TRX"}),Object(q.jsx)("span",{className:"amount",children:Object(y.l)(a,{miniText:1e-4,cutZero:!0,dp:4})})]})]}),Object(q.jsxs)("div",{className:"rate",children:[Object(q.jsx)("span",{className:"rate-title",children:c.a.get("sunSwap.migrate.rate")}),O,Object(q.jsx)("em",{onClick:()=>this.changeRate()}),Object(q.jsx)("span",{className:"value",children:v})]}),Object(q.jsx)("div",{className:"refunded",children:Object(q.jsx)(pe.a,{tip:Object(q.jsx)("div",{className:"pool-tooltip-text",children:c.a.get("sunSwap.migrate.refunded_tips")}),children:c.a.get("sunSwap.migrate.refunded",{value1:o,value2:i}),toolClass:"flex common-tool",titleClass:"common-tool-title",tail:!0,placement:p.a?"left":"bottom",dark:!0})})]}),Object(q.jsx)("div",{className:"btn",onClick:this.checkApproveStatus,children:c.a.get("sunSwap.migrate.btn")})]}),2===r&&Object(q.jsxs)("div",{className:"step2",children:[Object(q.jsx)("div",{className:"title normal",children:c.a.get("sunSwap.migrate.migrate")}),Object(q.jsxs)("div",{className:"line",children:[Object(q.jsx)("span",{className:"version",children:"v1.5"===this.props.version?"V1.5":"V1"}),Object(q.jsx)("span",{className:"version",children:"V2"})]}),Object(q.jsxs)("div",{className:"ib-parent center",children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"add-value",children:Object(y.l)(e.value,{miniText:1e-4,cutZero:!0,dp:4})}),Object(q.jsx)("span",{className:"add-token",children:e.tokenSymbol})]}),Object(q.jsx)("span",{className:"plus",children:"+"}),Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"add-value",children:Object(y.l)(e.trx,{miniText:1e-4,cutZero:!0,dp:4})}),Object(q.jsx)("span",{className:"add-token",children:"TRX"})]}),Object(q.jsx)("div",{className:"add-ver",children:"v1.5"===this.props.version?"V1.5":"V1"})]}),Object(q.jsx)("div",{className:"supplyLineTitle",children:c.a.get("sunSwap.action.supplyLineTitle")}),Object(q.jsxs)(W.a,{children:["success"!==j&&Object(q.jsx)("span",{status:j,err:g,children:w}),"success"!==h&&Object(q.jsx)("span",{status:h,err:m,children:b})]}),Object(q.jsx)(H.a,{type:"single",disabled:l,info:d,onClick:this.onRetryAction})]}),3===r&&Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:"modal-success",children:[Object(q.jsx)("img",{src:Q.a,alt:""}),Object(q.jsx)("div",{className:"title green",children:c.a.get("sunSwap.migrate.successTitle")}),Object(q.jsxs)("div",{className:"ib-parent center mb40",children:[Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"add-value",children:Object(y.l)(e.value,{miniText:1e-4,cutZero:!0,dp:4})}),Object(q.jsx)("span",{className:"add-token",children:e.tokenSymbol})]}),Object(q.jsx)("span",{className:"plus",children:"+"}),Object(q.jsxs)("div",{children:[Object(q.jsx)("span",{className:"add-value",children:Object(y.l)(e.trx,{miniText:1e-4,cutZero:!0,dp:4})}),Object(q.jsx)("span",{className:"add-token",children:"TRX"})]}),Object(q.jsx)("div",{className:"add-ver",children:"v1.5"===this.props.version?"V1.5":"V1"})]}),Object(q.jsx)(H.a,{type:"single",info:c.a.get("sunSwap.action.closeBtn"),onClick:this.gotoPool}),Object(q.jsx)("div",{className:"supplyDescTitle",children:c.a.get("sunSwap.action.supplyDescTitle")})]})})]}),this.state.miniPopVisible&&Object(q.jsx)(Z.a,{visible:this.state.miniPopVisible,confirm:this.miniPopOk,cancel:this.miniPopCancel})]})}})||ke)||ke)||ke)||ke,Oe=s(53),ve=s.n(Oe),_e=s(1090),fe=s(1058),Ae=s(1136),ye=s(1367),Te=s(1262),Ne=s(1102),Ve=s(513),De=s(1369),Be=s(1197),Ce=s(1271),Pe=s(1370),Le=s(1272);let Fe=null;const Ie=Object(p.a)(window.navigator).any;var Re,qe=Object(r.b)("sunSwapNetwork")(xe=Object(r.b)("sunSwapPool")(xe=Object(r.b)("network")(xe=Object(r.c)(xe=class extends i.a.Component{constructor(e){super(e),this.componentDidMount=async()=>{this.unmount=!1,setTimeout((()=>{this.getLiquidityUserData()}),500)},this.componentWillUnmount=()=>{this.unmount=!0,clearInterval(this.timer)},this.addLiq=e=>{this.props.sunSwapPool.setData({tokenTwoFixed:!0,tokenInfo:e,addLiqFromPools:!0,actionLiqV2:ie.a.ADD_TYPE})},this.removeLiq=e=>{if(!(e.tokens.times(k.a.defaultTokenPrecision).integerValue(y.a.ROUND_DOWN).gt(0)&&e.trx.times(k.a.trxPrecision).integerValue(y.a.ROUND_DOWN).gt(0)&&e.value.times(k.a.defaultTokenPrecision).integerValue(y.a.ROUND_DOWN).gt(0)))return!1;e.tokens.lte(0)||this.props.sunSwapPool.setData({actionLiqV2:2,tokenInfo:e})},this.migrateLiq=async e=>{const t=k.a.wtrxAddress,s=e.tokenAddress,a=this.props.network.defaultAccount,{exchangeAddr:n,exTokenABalance:i,exTokenBBalance:o,totalLiquidity:c}=await Object(f.n)(a,s,t),r={exchangeAddr:n,exTokenABalance:i,exTokenBBalance:o,totalLiquidity:c};this.setState({migrateModalVisbile:!0,migrateData:e,migrateDataV2:r})},this.hasContractV2=async e=>{const t=k.a.wtrxAddress,s=e.tokenAddress,a=Object(y.h)(t,s),n=k.a.chain,i=new ve.a({fullHost:n.fullHost});let o;const c=await i.trx.getContract(a);return"{}"!==JSON.stringify(c)&&(o=!0,!0)},this.hideMigrateModal=e=>{this.setState({migrateModalVisbile:!1})},this.changeAndFree=()=>{this.props.sunSwapPool.setData({actionLiqV2:1,tokenTwoFixed:!1,tokenInfo:{tokenAddress:"",tokenSymbol:""},tokenDetail:{trx:new y.a(0),value:new y.a(0),tokens:new y.a(0),price1:"--",price2:"--",exTrx:new y.a(0)}})},this.getContractData=async()=>{try{const e=this.state.currentPage,t=this.props.sunSwapPool.originLiquidityList.slice(Ie?0:(e-1)*this.pageSize,(e-1)*this.pageSize+this.pageSize);if(t.length>0){if(this.props.sunSwapPool.originLiquidityList.map((e=>{const s=t.filter((t=>{t.tokenAddress,e.tokenAddress}));s.length>0&&Object.assign(e,s[0])})),this.unmount)return;e===this.state.currentPage&&this.setState({liquidityList:t})}}catch(e){console.log(e)}},this.onChange=async e=>{this.setState({currentPage:e},(()=>{this.getContractData()}))},this.onRefreshList=async()=>{this.setState({currentPage:1,liquidityList:[]},(()=>{this.getLiquidityUserData()}))},this.showLoginModal=e=>{this.props.network.setData({loginModalVisible:!0,loginModalStep:1})},this.getColumn=()=>[{title:c.a.get("sunSwap.liquidity_table.name"),dataIndex:"name",key:"name",fixed:!!Ie&&"left",width:Ie?"100px":void 0,render:(e,t)=>{const{tokenLogoUrl:s,tokenSymbol:a,tokenAddress:n,address:i}=t;return Object(q.jsxs)("div",{children:[Object(q.jsx)(Ae.a,{url:N.a,className:De.pool_list_logo}),Object(q.jsx)(Ae.a,{url:s||T.a,className:De.pool_list_logo_right}),Object(q.jsxs)(Ne.a,{target:"_blank",href:Object(Ve.b)({pathname:"#/scan/pairDetail",search:{version:"v1",pairAddress:i,token0Address:k.a.trxFakeAddress,token1Address:n}}),children:["TRX/",a]})]})}},{title:c.a.get("sunSwap.liquidity_table.token"),dataIndex:"trx",key:"trx",render:(e,t)=>(t.trx?t.trx._toFixed(4,1):"-")+" TRX"},{title:c.a.get("sunSwap.liquidity_table.token"),dataIndex:"value",key:"value",render:(e,t)=>(t.value?t.value._toFixed(4,1):"-")+" "+t.tokenSymbol},{title:c.a.get("sunSwap.liquidity_table.lp"),dataIndex:"tokens",key:"tokens",render:(e,t)=>t.value?Object(y.l)(t.tokens,{miniText:1e-4,cutZero:!0,dp:4}):"-"},{title:c.a.get("sunSwap.liquidity_table.share"),dataIndex:"share",key:"share",render:(e,t)=>t.value?Object(q.jsxs)("span",{children:[t.share.gt(0)&&t.share.lt(.01)?"<0.01":isNaN(t.share._toFixed(2,1))?"--":t.share._toFixed(2,1),"%"]}):"-"},{title:Object(q.jsx)("span",{}),dataIndex:"btn",key:"btn",width:370,render:(e,t)=>{const s=!(t.tokens.times(k.a.trxPrecision).integerValue(y.a.ROUND_DOWN).gt(0)&&t.trx.times(k.a.trxPrecision).integerValue(y.a.ROUND_DOWN).gt(0)&&t.value.times(k.a.defaultTokenPrecision).integerValue(y.a.ROUND_DOWN).gt(0));return Object(q.jsx)(Te.a,{showRemove:!0,showAdd:!0,showMigrate:!Object.keys(k.a.deflationToken).includes(t.tokenAddress)&&t.hasContractV2&&t.tokens.gt(0)&&t.trx.gt(0)&&t.value.gt(0),onAdd:()=>this.addLiq(t),onRemove:()=>this.removeLiq(t),onMigrate:()=>this.migrateLiq(t),removeDisabled:s})}}],this.formatLiquidityList=()=>this.state.liquidityList.map((e=>{const{tokenLogoUrl:t,tokenSymbol:s,value:a,trx:n,tokens:i,tokenAddress:o,address:c}=e,r=!(i.times(k.a.trxPrecision).integerValue(y.a.ROUND_DOWN).gt(0)&&n.times(k.a.trxPrecision).integerValue(y.a.ROUND_DOWN).gt(0)&&a.times(k.a.defaultTokenPrecision).integerValue(y.a.ROUND_DOWN).gt(0));return{token0:{tokenLogo:N.a,tokenSymbol:"TRX",amount:n?n._toFixed(4,1):"-"},token1:{tokenLogo:t,tokenSymbol:s,amount:a?a._toFixed(4,1):"-"},pool_share:(e.share.gt(0)&&e.share.lt(.01)?"<0.01":isNaN(e.share._toFixed(2,1))?"--":e.share._toFixed(2,1))+"%",pool_tokens:a?Object(y.l)(i,{miniText:1e-4,cutZero:!0,dp:4}):"-",originItem:e,disableRemove:r,toScan:Object(Ve.b)({pathname:"#/scan/pairDetail",search:{version:"v1",pairAddress:c,token0Address:k.a.trxFakeAddress,token1Address:o}})}})),this.timer=0,this.unmount=!1,this.pageSize=Ie?3:10,this.isConnected=e.network.isConnected,this.state={currentPage:1,liquidityList:[],version:window.localStorage.getItem("swapVersion")||"v1.0",migrateModalVisbile:!1,migrateData:"",status:!1,loading:!1}}componentDidUpdate(e,t){e.sunSwapPool.version!==t.version&&this.setState({currentPage:1,liquidityList:[],version:e.sunSwapPool.version,status:!1},(()=>{this.getLiquidityUserData(),Fe=setTimeout((()=>{this.setState({status:!0}),clearTimeout(Fe)}),3500)}))}async getLiquidityUserData(){const e=this.props.network.defaultAccount;if(!e)return;this.setState({loading:!0});const{originLiquidityList:t=[],version:s}=this.props.sunSwapPool;let a="v1.5"===s?2:1,n=(await V.a.getLiquidityUserList(e)).filter((e=>new y.a(e.jswapBalance).gt(0)&&e.ver===a)),i=[];for(let l of n)new y.a(l.jswapBalance).gt(0)&&i.push(l.address);let o=await Object(f.p)(this.props.network.defaultAccount,i);for(let l=0;l<(null===(c=o._trx)||void 0===c?void 0:c.length);l++){var c;n[l].trx=new y.a(o._trx[l]._hex).div(new y.a(10).pow(6)),n[l].value=new y.a(o._token[l]._hex).div(new y.a(10).pow(n[l].tokenDecimal)),n[l].tokens=new y.a(o._uniToken[l]._hex).div(new y.a(10).pow(6)),n[l].share=new y.a(o._uniToken[l]._hex).times(100).div(new y.a(o._totalsupply[l]._hex)),n[l].hasContractV2=await this.hasContractV2(n[l])}n=n.filter((e=>Object(y.a)(e.tokens).gt(0))),this.props.sunSwapPool.setData({originLiquidityList:n});const{currentPage:r}=this.state;1===r&&this.getContractData(),this.setState({loading:!1})}render(){const{liquidityList:e,status:t,loading:s,currentPage:a}=this.state,{isConnected:n}=this.props.network,{originLiquidityList:i=[],version:o}=this.props.sunSwapPool,r=i.length>a*this.pageSize,l=this.formatLiquidityList();return Fe&&clearTimeout(Fe),n!==this.isConnected&&n&&(this.isConnected=n,this.getLiquidityUserData()),Object(q.jsxs)("section",{className:De.pool_list,children:[Object(q.jsx)(ye.a,{tip:c.a.get("sunSwap.pool.base_list_title_tip"),title:"".concat(c.a.get("sunSwap.pool.base_list_title")).concat(s||!e.length?"":" ("+i.length+") ")}),n?s||0!==e.length?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:"hide-for-mobile",id:"scrollableDiv2",style:{maxHeight:430,overflow:"auto"},children:Object(q.jsx)(Be.a,{scrollableTarget:"scrollableDiv2",next:()=>{if(!s)return this.onChange(this.state.currentPage+1)},hasMore:!!s||r,loader:Object(q.jsx)(Ce.a,{}),endMessage:s?null:Object(q.jsx)("div",{style:{color:"#bbb",textAlign:"center"},children:c.a.get("sunSwapV3.pool.base_allLiquidity_tip")}),dataLength:l.length,children:l.map((e=>Object(q.jsx)(Pe.a,{...e,onAdd:this.addLiq,onRemove:this.removeLiq,onMigrate:this.migrateLiq,showMigrate:!Object.keys(k.a.deflationToken).includes(e.originItem.tokenAddress)&&e.originItem.hasContractV2&&e.originItem.tokens.gt(0)&&e.originItem.trx.gt(0)&&e.originItem.value.gt(0)})))})}),Object(q.jsx)("div",{className:"hide-for-pc",children:Object(q.jsx)(_e.a,{dataSource:e,columns:this.getColumn(),loading:{spinning:s},pagination:{current:this.state.currentPage,pageSize:this.pageSize,onChange:this.onChange,total:i.length},locale:{emptyText:s?Object(q.jsx)("span",{}):Object(q.jsx)("span",{style:{color:"#fff"},children:c.a.get("sunSwap.pool.base_noLiquidity_tip")})},scroll:{x:700}})})]}):Object(q.jsx)(Le.a,{}):Object(q.jsx)(fe.a,{}),this.state.migrateModalVisbile&&Object(q.jsx)(Se,{visible:this.state.migrateModalVisbile,hideMigrateModal:this.hideMigrateModal,migrateData:this.state.migrateData,migrateDataV2:this.state.migrateDataV2,onChange:this.onRefreshList,version:this.props.sunSwapPool.version})]})}})||xe)||xe)||xe)||xe,Ee=s(1372),Me=s(1127),Ue=s(1269);s(1267),s(1147);const Xe=[{textKey:"swap",key:ie.a.SWAP_TYPE},{textKey:"pools",key:ie.a.ADD_TYPE,tips:c.a.get("sunSwap.pool.add_addLiq_title_tip")}];let He=Object(r.b)("sunSwapNetwork")(Re=Object(r.b)("sunSwapPool")(Re=Object(r.c)(Re=class extends i.a.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=async()=>{window.scrollTo(0,0),this.getTvlData(),this.setVersion(),Object(y.A)(),this.props.sunSwapNetwork.setData({defaultSelectedKeys:"1"}),this.props.sunSwapNetwork.getSettingsData();try{this.props.sunSwapPool.setData({swapRef:this.swapRef,addRef:this.addRef});const e=Object(y.q)("type"),t=Object(y.q)("addLiqFromPools"),s=Object(y.q)("tokenAddress")||"",a=Object(y.q)("t1")||"",n=Object(y.q)("t0")||"",i=Object(y.q)("s"),o=window.location.hash.replace(/&s=\d/,""),c=window.location.origin+o;i&&window.history.pushState({},0,c),"add"===e?(this.props.sunSwapPool.setData({actionLiqV2:1,tokenInfo:{tokenAddress:s||a||n,tokenSymbol:""},addLiqFromPools:t}),this.setState({activeKey:ie.a.ADD_TYPE})):"pool"===e?(this.props.sunSwapPool.setData({actionLiqV2:0,tokenInfo:{tokenAddress:s,tokenSymbol:""}}),this.setState({activeKey:ie.a.SWAP_TYPE})):"swap"===e&&(this.props.sunSwapPool.setData({actionLiqV2:9}),this.setState({activeKey:ie.a.SWAP_TYPE})),this.props.sunSwapPool.getTokensDataFromLocal(),await this.props.sunSwapPool.getTokensCategory(),this.setState({isShow:!0})}catch(e){}this.setState({visible:!window.localStorage.getItem("noRemind"),version:window.localStorage.getItem("swapVersion")})},this.setVersion=()=>{window.localStorage.setItem("swapVersion",Ee.a),this.props.sunSwapPool.setData({version:Ee.a})},this.changeTab=async e=>{try{if(this.setState({activeKey:e}),e===ie.a.ADD_TYPE)this.props.sunSwapPool.setData({actionLiqV2:ie.a.ADD_TYPE});else{this.props.sunSwapPool.setData({actionLiqV2:ie.a.SWAP_TYPE});const e=window.localStorage.getItem("swapVersion");this.swapRef.current.getExchangesFunc(e,"swap",k.a.trxFakeAddress,!0),await this.swapRef.current.fromTokenRef.current.setTokenList((async()=>{this.swapRef.current.state.fromToken&&this.swapRef.current.state.fromToken.tokenAddress&&await this.swapRef.current.fromTokenRef.current.setTokenAddress(this.swapRef.current.state.fromToken.tokenAddress)})),await this.swapRef.current.toTokenRef.current.setTokenList((async()=>{this.swapRef.current.state.toToken&&this.swapRef.current.state.toToken.tokenAddress&&await this.swapRef.current.toTokenRef.current.setTokenAddress(this.swapRef.current.state.toToken.tokenAddress)}))}}catch(t){console.log(t)}},this.closeModal=()=>{this.setState({visible:!1})},this.getTvlData=async()=>{try{d.a.get("".concat(k.a.tvl)).then((e=>{var t,s;200===e.status&&null!==(t=e.data)&&void 0!==t&&null!==(s=t.data)&&void 0!==s&&s.allSwaps&&this.setState({totalStakeValue:Number(e.data.data.allSwaps)})}))}catch(e){}},this.onComplete=()=>{this.setState({isAnimationNotDone:!1})},this.start=()=>{},this.jumpToV3=()=>{const{actionLiqV2:e,tokenInfo:t}=this.props.sunSwapPool;if(9===e){const e=this.swapRef.current.state.fromToken.tokenAddress,t=this.swapRef.current.state.toToken.tokenAddress;Object(Me.b)({version:"v3",t0:e,t1:t,type:"swap"})}else 1===e?Object(Me.b)({version:"v3",t0:k.a.trxFakeAddress,t1:t.tokenAddress===k.a.wtrxAddress?void 0:t.tokenAddress,type:"add"}):Object(Me.b)({version:"v3",type:"pool"})},this.onVersionChange=e=>{const{route:t,key:s}=e;if("v3"===s)return this.jumpToV3();const{actionLiqV2:a}=this.props.sunSwapPool;if(t&&"sun_swap/v1"===t)return;const n={};if(9===a){const e=this.swapRef.current.state.fromToken.tokenAddress,t=this.swapRef.current.state.toToken.tokenAddress;e?(n.t0=e,t&&(n.t1=t)):t&&(n.t1=t),n.type="swap"}else 0===a&&(n.type="pool");1===a&&(n.type="add",n.t0=k.a.trxFakeAddress,n.t1=this.props.sunSwapPool.tokenInfo.tokenAddress===k.a.wtrxAddress?"":this.props.sunSwapPool.tokenInfo.tokenAddress),this.props.history.push(Object(Ve.b)({pathname:t,search:n}))},this.onSettingChange=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.props.sunSwapNetwork.setData({settingVisible:!1}),t.props.sunSwapNetwork.saveSettings(e,s),t.swapRef.current&&t.swapRef.current.onSlippageChange()},this.onBack=()=>{this.props.sunSwapPool.setData({actionLiqV2:ie.a.ADD_TYPE,addLiqFromPools:!1,tokenTwoFixed:!1})},this.handleSuccess=e=>{const{sunSwapPool:t}=this.props;switch(e){case ie.a.ADD_TYPE:t.addLiqFromPools?(t.setData({addLiqFromPools:!1,tokenTwoFixed:!1}),this.updatePoolList()):this.updatePoolList();break;case ie.a.REMOVE_TYPE:t.setData({addLiqFromPools:!1,actionLiqV2:ie.a.ADD_TYPE});break;default:t.setData({actionLiqV2:ie.a.ADD_TYPE,addLiqFromPools:!1})}},this.updatePoolList=()=>{this.poolRef&&this.poolRef.current&&this.poolRef.current.onRefreshList()},this.settingsRef=i.a.createRef(),this.swapRef=i.a.createRef(),this.addRef=i.a.createRef(),this.poolRef=i.a.createRef(),this.state={lang:window.localStorage.getItem("lang")||c.a.options.currentLocale,activeKey:ie.a.ADD_TYPE,visible:!1,isAnimationNotDone:!0,isShow:!1,toastStatus:!0,version:Ee.a}}render(){const{actionLiqV2:e,addLiqFromPools:t}=this.props.sunSwapPool,s=e===ie.a.ADD_TYPE&&t,a=e===ie.a.REMOVE_TYPE,n=s||a;return Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{children:[Object(q.jsxs)(Ue.a,{version:"V1",onVersionChange:this.onVersionChange,routeName:"sun_swap/v1",pageList:Xe,activePage:e,onPageChange:(e,t)=>{let{key:s}=t;return this.changeTab(s)},isDetailPage:n,detailPage:{title:c.a.get(s?"sunSwapV3.pool.add_addLiq_title":"sunSwapV3.pool.remove_liq_title"),tip:c.a.get(s?"sunSwapV3.pool.add_addLiq_title_tip":"sunSwapV3.pool.remove_liq_title_tip"),onBack:this.onBack,showSetting:s,onSettingChange:this.onSettingChange,network:this.props.sunSwapNetwork,version:"V1"},network:this.props.sunSwapNetwork,onSettingChange:this.onSettingChange,children:[e===ie.a.ADD_TYPE&&!s&&Object(q.jsx)(te,{ref:this.addRef,onSuccess:()=>this.handleSuccess(ie.a.ADD_TYPE)}),s&&Object(q.jsx)(te,{ref:this.addRef,onSuccess:()=>this.handleSuccess(ie.a.ADD_TYPE)}),e===ie.a.SWAP_TYPE&&!n&&Object(q.jsx)(ge,{ref:this.swapRef}),a&&Object(q.jsx)(le,{onSuccess:()=>this.handleSuccess(ie.a.REMOVE_TYPE)})]}),!n&&Object(q.jsx)(qe,{ref:this.poolRef})]})})}})||Re)||Re)||Re;t.default=He}}]);