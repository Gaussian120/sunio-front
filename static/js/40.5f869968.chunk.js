(this["webpackJsonpfront-js"]=this["webpackJsonpfront-js"]||[]).push([[40],{1750:function(e,t,a){"use strict";a.r(t);a(3),a(892),a(941),a(913);var n=a(945),c=a(10);t.default=function(){return Object(c.jsx)("div",{className:"container",children:Object(c.jsx)(n.a,{isSinglePage:!0})})}},894:function(e,t,a){"use strict";a(909);var n=a(26),c=a.n(n),r=a(10);t.a=function(e){return Object(r.jsx)("div",{className:"tempalte-pageTab-nav",children:e.list.map((function(t){return Object(r.jsx)("div",{className:c()("tempalte-pageTab-nav-item",{"tempalte-pageTab-nav-active":e.activeKey===t.value}),onClick:function(){return t.handler(t)},children:t.label},t.value)}))})}},896:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var n=a(20),c=a.n(n),r={row:{gutter:[{xs:8,sm:16,md:32},20]},colLeft:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:15}},colRight:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:9}}},i={1:{title:c.a.get("banner.title_deposit"),content:c.a.get("banner.desc_deposit"),tabTitle:c.a.get("header.deposit")},2:{title:c.a.get("banner.title_withdraw"),content:c.a.get("banner.desc_withdraw"),tabTitle:c.a.get("header.withdraw")},3:{title:c.a.get("banner.title_1"),content:c.a.get("banner.desc_1"),tabTitle:c.a.get("header.swap")}},s=[{label:i[1].tabTitle,value:"1"},{label:i[2].tabTitle,value:"2"},{label:i[3].tabTitle,value:"3"}]},909:function(e,t,a){},912:function(e,t,a){"use strict";a(3);var n=a(20),c=a.n(n),r=a(84),i=a(6),s=a(170),o=a(1),l=(a(913),a(928)),u=a(926),b=a(10),j=i.a.Fee,p=i.a.A,d=i.a.ADMIN_FEE,O=i.a.poolKeys;i.a.pools;t.a=function(e){var t=Object(r.d)((function(){return s.a.pool})),a=Object(r.d)((function(){return s.a.network})),n=function(e,t){var a=Object(o.a)(e).times(t).div(1e18);return a.isNaN()?"--":Object(o.u)(a,2)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var a=Object(o.a)(0);for(var n in e){var c=e[n],r=c.userSwapBalance,i=c.priceKey,s=t?t[i]:"--";a=a.plus(Object(o.a)(r).times(s))}return Object(o.u)(a)}catch(l){return console.log(l),"--"}},v=O.map((function(e){return t.poolData[e]})).filter((function(e){return e})),x=t.volData?t.volData["3pvol24Hours"]:"",h="Old 3Pool ".concat(c.a.get("pool.pool2_contract")),m="3SUN ".concat(c.a.get("pool.token_contract2"));return Object(b.jsx)(r.a,{children:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(l.a,{poolTokens:v,totalSwapBalance:t.totalSwapBalance,adminFee:d,fee:j,virtualPrice:t.virtualPrice,dailyVol:x,poolContract:i.a.stablePool,poolName:h,lpTokenAddress:i.a.stableLp,lpTokenName:m,aValue:p}),a.isConnected&&Object(o.a)(t.sharePer).gt(0)&&Object(b.jsx)(u.a,{sharePer:t.sharePer,usdBalance:f(t.poolData,t.volData),avgUsdBalance:n(t.userLpBalance,t.virtualPrice),userTotalBalance:t.userTotalBalance,myPoolTokens:v})]})}})}},941:function(e,t,a){},945:function(e,t,a){"use strict";var n=a(5),c=a(4),r=a(0),i=a(2),s=a(14),o=a(3),l=a(20),u=a.n(l),b=a(84),j=a(1354),p=a(1355),d=a(1337),O=a(877),f=a(194),v=a(270),x=a(27),h=a(1),m=a(6),g=a(170),k=a(892),w=a(902),y=(a(908),a(912)),N=a(315),_=a(901),S=a(893),P=a(15),T=a(894),D=a(896),L=a(897),C=a(904),B=a(10),F=m.a.pools,I=m.a.poolKeys,A=m.a.ALL_FEE,V=m.a.defaultSlippage,E=m.a.stablePool;t.a=function(e){var t=e.pageList,a=e.tabPaneKey,l=Object(b.d)((function(){return g.a.network})),m=Object(b.d)((function(){return g.a.system})),K=Object(b.d)((function(){return g.a.pool})),U=Object(o.useState)(function(){var e={};return I.map((function(t){e[t]=""})),e}()),H=Object(s.a)(U,2),q=H[0],M=H[1],J=Object(o.useState)(!1),R=Object(s.a)(J,2),z=R[0],G=R[1],Q=Object(o.useState)(!0),W=Object(s.a)(Q,2),X=W[0],Y=W[1],Z=Object(o.useState)(!1),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ae=Object(o.useState)("--"),ne=Object(s.a)(ae,2),ce=ne[0],re=ne[1],ie=Object(o.useState)("--"),se=Object(s.a)(ie,2),oe=se[0],le=se[1],ue=Object(o.useState)(!1),be=Object(s.a)(ue,2),je=be[0],pe=be[1],de=Object(o.useState)(!1),Oe=Object(s.a)(de,2),fe=Oe[0],ve=Oe[1],xe=Object(o.useState)(!1),he=Object(s.a)(xe,2),me=he[0],ge=he[1],ke=null;Object(o.useEffect)(Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([De(q),Ne()]);case 2:je&&Pe(q);case 3:case"end":return e.stop()}}),e)}))),[q]);var we=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ee){e.next=5;break}if(!Pe(t)){e.next=5;break}return e.abrupt("return");case 5:if(!ee){e.next=7;break}return e.abrupt("return");case 7:if(!Object(h.a)(ce).abs().gt(10)){e.next=9;break}return e.abrupt("return",ve(!0));case 9:return e.next=11,ye(t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var t=Object(i.a)(Object(r.a)().mark((function t(a){var n,i,s,o,l,u,b,j,p,d,O,f,v,x,g,k,w;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,n=[],e.onSubmit&&e.onSubmit(),I.map((function(e){n.push(Object(c.a)(Object(c.a)({},K.poolData[e]),{},{inputValue:a[e]?Object(h.fb)(a[e]).times(F[e].precision):Object(h.a)(0)}))})),i=0;case 5:if(!(i<n.length)){t.next=19;break}if(s=n[i],o=s.allowance,l=void 0===o?Object(h.a)(0):o,u=s.inputValue,b=s.token,j=s.symbol,p=s.approveStatus,d=s.id,!Object(h.a)(l).lt(u)||p){t.next=16;break}return t.next=10,m.approveToken(b,E,{title:"deposit.approve_token",obj:{value:j},continuous:!0},[["pool/getBalanceInfo"]]);case 10:if(!t.sent){t.next=15;break}K.poolData[d].approveStatus=2,t.next=16;break;case 15:return t.abrupt("return");case 16:i++,t.next=5;break;case 19:if(O=n.sort((function(e,t){return e.index-t.index})),f=O.length,v=O.map((function(e){return e.inputValue._toIntegerDown()._toHex()}))||[],x=null,!K.lpTotalSupply.lte(0)){t.next=26;break}return t.next=26,K.getUserLp();case 26:if(!K.lpTotalSupply.lte(0)){t.next=30;break}x=Object(h.a)(1),t.next=36;break;case 30:return t.next=32,Object(P.d)(v);case 32:if((g=t.sent).success){t.next=35;break}return t.abrupt("return");case 35:x=g.value;case 36:return x=x.times(Object(h.a)(1).minus(Object(h.a)(A).times(f).div(Object(h.a)(4).times(f-1)).div(1e10))),k=x.times(1-V)._toFixed(0,1),w={title:"actions.addLiq",obj:{detail:Object(h.A)(a)}},t.next=41,m.addLiquidity(v,k,w,[["pool/updateCurrencyData"]]);case 41:t.sent&&Fe(),t.next=48;break;case 45:t.prev=45,t.t0=t.catch(0),console.log("deposit err: ",t.t0);case 48:case"end":return t.stop()}}),t,null,[[0,45]])})));return function(e){return t.apply(this,arguments)}}(),Ne=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,a,n,c,i,s,o,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],q)n=F[a],c=n.index,i=n.precision,s=q[a].replace(/,/g,""),t[c]=Object(h.a)(s).isNaN()?0:Object(h.a)(s).times(i)._toIntegerDown()._toHex();if(o=null,!K.lpTotalSupply.lte(0)){e.next=6;break}return e.next=6,K.getUserLp();case 6:if(!K.lpTotalSupply.lte(0)){e.next=10;break}o=Object(h.a)(1),e.next=16;break;case 10:return e.next=12,Object(P.d)(t);case 12:if((l=e.sent).success){e.next=15;break}return e.abrupt("return");case 15:o=l.value.div(1e18);case 16:le(o);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([K.getSwapBalance(),K.getVirtualPrice(),K.getVolData()]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([K.getUserLp(),K.getBalanceInfo()]);case 2:t={},I.map((function(e){var a=K.poolData[e],n=a.precision,c=a.balance,r=a.decimal;t[e]=Object(h.c)(Object(h.a)(c).div(n)._toFixed(r,1))})),M(t),!je&&pe(!0),ke||(ke=setInterval(Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_e(),K.getUserLp();case 2:case"end":return e.stop()}}),e)}))),l.defaultIntervalSec));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)(Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Se(),_e()]);case 2:return e.abrupt("return",(function(){clearInterval(ke)}));case 3:case"end":return e.stop()}}),e)}))),[l.defaultAccount]);var Pe=function(e){var t=Object.keys(e),a=t.length;if(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e),a=t.filter((function(t){return Object(h.fb)(e[t]).eq(0)||!e[t]}));return t.length===a.length}(e))return te(u.a.get("error.e1")),!0;for(var n=0;n<a;n++){var c=t[n],r=e[c];if(!r&&(z||X))return te(u.a.get("error.e1")),!0;var i=K.poolData[c],s=i.balance,o=i.precision,l=i.symbol;if(Object(h.a)(s).div(o).lt(Object(h.fb)(r)))return te(u.a.get("error.e2",{token:l})),!0}return te(!1),!1},Te=function(e){ge(e.target.checked)},De=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.calcInclPrice(t);case 2:a=e.sent,re(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(e,t){var a=t,n={};n[e]=Object(h.c)(String(a).replace(/,/g,""));var c=K.poolData[e],r=(c.precision,c.swapBalance),i=(c.balance,Object(h.fb)(a).div(r).isNaN()?Object(h.a)(0):Object(h.fb)(a).div(r));I.filter((function(t){return t!==e})).map((function(e){var t=K.poolData[e],a=t.balance,c=void 0===a?Object(h.a)(0):a,r=t.swapBalance,s=t.precision,o=t.decimal;n[e]=Object(h.c)(i.times(r)._toFixed(o,1)),c.div(s).lt(Object(h.fb)(n[e]))&&(n[e]=Object(h.c)(c.div(s)._toFixed(o,1)))})),M(n)},Ce=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.checked,G(a),X&&Y(!a),a&&Le(I[0],q[I[0]])}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var a,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a=t.target.checked,Y(a),z&&G(!a),n={},I.map((function(e){var t=K.poolData[e],a=t.balance,c=t.precision,r=t.decimal;n[e]=Object(h.a)(a).isNaN()?0:Object(h.c)(a.div(c)._toFixed(r,1))})),M(n)}catch(c){console.log(c)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){ge(!1),ve(!1)};return Object(B.jsx)(b.a,{children:function(){return Object(B.jsxs)(j.a,Object(c.a)(Object(c.a)({},D.a.row),{},{children:[Object(B.jsx)(p.a,Object(c.a)(Object(c.a)({},D.a.colLeft),{},{children:Object(B.jsxs)("div",{className:"pool-deposit",children:[Object(B.jsx)(T.a,{list:t,activeKey:a[0]}),e.isSinglePage?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(k.a,{routeName:"3pool/deposit",mountedActions:Se,instantActions:_e}),Object(B.jsx)(w.a,{title:"3pool "+u.a.get("banner.title_deposit"),desc:u.a.get("banner.desc_deposit")}),Object(B.jsx)(_.a,{})]}):null,l.isConnected?Object(B.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(B.jsxs)("div",{className:"add-liq",children:[Object(B.jsxs)("fieldset",{className:"currencies",children:[Object(B.jsx)("legend",{children:u.a.get("deposit.currencies")}),Object(B.jsx)("ul",{children:I.map((function(e){var t=K.poolData[e],a=t.symbol,r=void 0===a?"":a,i=t.balance,s=void 0===i?"--":i,o=t.precision,l=t.decimal;return s=Object(h.a)(s).div(o),Object(B.jsxs)("li",{children:[Object(B.jsxs)("div",{className:"cur-label",children:[Object(B.jsxs)("span",{className:"icon",children:[Object(B.jsx)("img",{src:x.a[e]?x.a[e]:v.default,alt:"",className:"token-logo"})," ",r]}),Object(B.jsx)("span",{className:"token-max",children:u.a.getHTML("deposit.token_max",{balance:Object(h.u)(s)})})]}),Object(B.jsx)(C.a,{onMaxClick:function(){!function(e,t,a){if(!Object(h.a)(t).isNaN()){var r=Object(h.a)(t)._toFixed(a,1);M(Object(c.a)(Object(c.a)({},q),{},Object(n.a)({},e,Object(h.c)(r)))),z&&Le(e,r)}}(e,s,l)},value:q[e],onChange:function(t){return function(e,t){X&&Y(!1);var a=F[t].decimal,r=Object(h.V)((""+e.target.value).replace(/,/g,""),a),i=r.valid,s=r.str;i&&(M(Object(c.a)(Object(c.a)({},q),{},Object(n.a)({},t,Object(h.c)(s)))),z&&Le(t,s))}(t,e)}})]},e)}))})]}),!Object(h.a)(ce).isNaN()&&Object(h.ab)(ce,!0),Object(B.jsxs)("div",{className:"deposit-check",children:[Object(B.jsx)(d.a,{checked:z,onChange:Ce,children:u.a.get("deposit.ch1")}),Object(B.jsx)("br",{}),Object(B.jsx)(d.a,{checked:X,onChange:Be,children:u.a.get("deposit.ch2")})]}),ee?Object(B.jsx)(S.a,{styleName:"mt-40",type:"single",disabled:!0,info:u.a.get("deposit.action")}):Object(B.jsx)(S.a,{styleName:"mt-40",type:"single",info:u.a.get("deposit.action"),onClick:function(){return we(q)}}),ee&&Object(B.jsx)("div",{className:"error-content mt-12",children:Object(B.jsx)("div",{className:"error-tip",children:ee})}),Object(h.a)(oe).gt(0)&&Object(B.jsxs)("div",{className:"error-content mt-12",children:[Object(B.jsxs)("div",{className:"error-tip",children:[u.a.getHTML("deposit.swap_detail",{value:Object(h.u)(oe,2),symbol:"Old 3pool LP"})," "]}),Object(B.jsx)("div",{className:"error-tip",children:u.a.get("deposit.exchange_rate",{value:Object(h.u)(K.virtualPrice,6),symbol:"Old 3pool LP"})})]})]})}):Object(B.jsx)(L.a,{}),Object(B.jsx)(N.a,{}),Object(B.jsx)(O.a,{title:u.a.get("deposit.high_slippage_title"),open:fe,closable:!0,icon:null,onCancel:Fe,footer:null,width:400,className:"common-modal common-bg slippage-modal",children:Object(B.jsxs)("div",{className:"center",children:[Object(B.jsxs)("div",{className:"common-err-bg",children:[Object(B.jsx)("div",{children:u.a.get("deposit.high_tip1")}),Object(B.jsx)("div",{children:u.a.get("deposit.high_tip2",{value:Object(h.u)(Object(h.a)(ce).abs(),3)})})]}),Object(B.jsx)(d.a,{checked:me,onChange:Te,children:u.a.get("deposit.confirm_slippage",{value:Object(h.u)(Object(h.a)(ce).abs(),3)})}),Object(B.jsx)("br",{}),Object(B.jsxs)("div",{className:"btns flex",children:[Object(B.jsx)(f.a,{onClick:function(){return ve(!1)},type:"primary",children:u.a.get("cancel")}),Object(B.jsx)(f.a,{onClick:function(){return ye(q)},disabled:!me,children:u.a.get("deposit.anyway")})]})]})})]})})),Object(B.jsx)(p.a,Object(c.a)(Object(c.a)({},D.a.colRight),{},{children:Object(B.jsx)(y.a,{className:l.isConnected?null:"window-for-tabs-pane"})}))]}))}})}}}]);