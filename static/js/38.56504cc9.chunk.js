(this["webpackJsonpfront-js"]=this["webpackJsonpfront-js"]||[]).push([[38],{1059:function(e,t,a){"use strict";a(1072);var c=a(15),s=a.n(c),l=a(2);t.a=e=>Object(l.jsx)("div",{className:"tempalte-pageTab-nav",children:e.list.map((t=>Object(l.jsx)("div",{className:s()("tempalte-pageTab-nav-item",{"tempalte-pageTab-nav-active":e.activeKey===t.value}),onClick:()=>t.handler(t),children:t.label},t.value)))})},1063:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return i}));var c=a(8),s=a.n(c);const l={row:{gutter:[{xs:8,sm:16,md:32},20]},colLeft:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:15}},colRight:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:9}}},n={1:{title:s.a.get("banner.title_deposit"),content:s.a.get("banner.desc_deposit"),tabTitle:s.a.get("header.deposit")},2:{title:s.a.get("banner.title_withdraw"),content:s.a.get("banner.desc_withdraw"),tabTitle:s.a.get("header.withdraw")},3:{title:s.a.get("banner.title_1"),content:s.a.get("banner.desc_1"),tabTitle:s.a.get("header.swap")}},i=[{label:n[1].tabTitle,value:"1"},{label:n[2].tabTitle,value:"2"},{label:n[3].tabTitle,value:"3"}]},1072:function(e,t,a){},1078:function(e,t,a){"use strict";a(1);var c=a(8),s=a.n(c),l=a(70),n=a(3),i=a(98),o=a(0),r=(a(1079),a(1094)),b=a(1092),d=a(2);const{Fee:j,A:p,ADMIN_FEE:O,poolKeys:u,pools:g}=n.a;t.a=e=>{const t=Object(l.d)((()=>i.a.pool)),a=Object(l.d)((()=>i.a.network)),c=(e,t)=>{const a=Object(o.a)(e).times(t).div(1e18);return a.isNaN()?"--":Object(o.u)(a,2)},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let a=Object(o.a)(0);for(let c in e){const{userSwapBalance:s,priceKey:l}=e[c],n=t?t[l]:"--";a=a.plus(Object(o.a)(s).times(n))}return Object(o.u)(a)}catch(a){return console.log(a),"--"}},m=u.map((e=>t.poolData[e])).filter((e=>e)),h=t.volData?t.volData["3pvol24Hours"]:"",v="Old 3Pool ".concat(s.a.get("pool.pool2_contract")),x="3SUN ".concat(s.a.get("pool.token_contract2"));return Object(d.jsx)(l.a,{children:()=>Object(d.jsxs)("div",{children:[Object(d.jsx)(r.a,{poolTokens:m,totalSwapBalance:t.totalSwapBalance,adminFee:O,fee:j,virtualPrice:t.virtualPrice,dailyVol:h,poolContract:n.a.stablePool,poolName:v,lpTokenAddress:n.a.stableLp,lpTokenName:x,aValue:p}),a.isConnected&&Object(o.a)(t.sharePer).gt(0)&&Object(d.jsx)(b.a,{sharePer:t.sharePer,usdBalance:g(t.poolData,t.volData),avgUsdBalance:c(t.userLpBalance,t.virtualPrice),userTotalBalance:t.userTotalBalance,myPoolTokens:m})]})})}},1108:function(e,t,a){},1112:function(e,t,a){"use strict";var c=a(1),s=a(8),l=a.n(s),n=a(70),i=a(1947),o=a(1949),r=a(1517),b=a(1043),d=a(188),j=a(268),p=a(17),O=a(0),u=a(3),g=a(98),m=a(1058),h=a(1068),v=(a(1076),a(1078)),x=a(324),f=a(1067),y=a(1060),w=a(5),N=a(1059),_=a(1063),k=a(1062),S=a(1071),P=a(322),T=a(2);const{pools:D,poolKeys:L,ALL_FEE:C,defaultSlippage:B,stablePool:F}=u.a;t.a=e=>{const{pageList:t,tabPaneKey:a}=e,s=Object(n.d)((()=>g.a.network)),u=Object(n.d)((()=>g.a.system)),I=Object(n.d)((()=>g.a.pool)),[A,V]=Object(c.useState)((()=>{const e={};return L.map((t=>{e[t]=""})),e})()),[E,K]=Object(c.useState)(!1),[U,H]=Object(c.useState)(!0),[q,M]=Object(c.useState)(!1),[J,R]=Object(c.useState)("--"),[z,G]=Object(c.useState)("--"),[Q,W]=Object(c.useState)(!1),[X,Y]=Object(c.useState)(!1),[Z,$]=Object(c.useState)(!1);let ee=null;Object(c.useEffect)((async()=>{await Promise.all([ie(A),ae()]),Q&&le(A)}),[A]);const te=async t=>{try{const a=[];e.onSubmit&&e.onSubmit(),L.map((e=>{a.push({...I.poolData[e],inputValue:t[e]?Object(O.fb)(t[e]).times(D[e].precision):Object(O.a)(0)})}));for(let e=0;e<a.length;e++){const{allowance:t=Object(O.a)(0),inputValue:c,token:s,symbol:l,approveStatus:n,id:i}=a[e];if(Object(O.a)(t).lt(c)&&!n){if(!await u.approveToken(s,F,{title:"deposit.approve_token",obj:{value:l},continuous:!0},[["pool/getBalanceInfo"]]))return;I.poolData[i].approveStatus=2}}const c=a.sort(((e,t)=>e.index-t.index)),s=c.length,l=c.map((e=>e.inputValue._toIntegerDown()._toHex()))||[];let n=null;if(I.lpTotalSupply.lte(0)&&await I.getUserLp(),I.lpTotalSupply.lte(0))n=Object(O.a)(1);else{const e=await Object(w.d)(l);if(!e.success)return;n=e.value}n=n.times(Object(O.a)(1).minus(Object(O.a)(C).times(s).div(Object(O.a)(4).times(s-1)).div(1e10)));const i=n.times(1-B)._toFixed(0,1),o={title:"actions.addLiq",obj:{detail:Object(O.A)(t)}};await u.addLiquidity(l,i,o,[["pool/updateCurrencyData"]])&&de()}catch(a){console.log("deposit err: ",a)}},ae=async()=>{const e=[];for(let a in A){const{index:t,precision:c}=D[a],s=A[a].replace(/,/g,"");e[t]=Object(O.a)(s).isNaN()?0:Object(O.a)(s).times(c)._toIntegerDown()._toHex()}let t=null;if(I.lpTotalSupply.lte(0)&&await I.getUserLp(),I.lpTotalSupply.lte(0))t=Object(O.a)(1);else{const a=await Object(w.d)(e);if(!a.success)return;t=a.value.div(1e18)}G(t)},ce=async()=>{await Promise.all([I.getSwapBalance(),I.getVirtualPrice(),I.getVolData()])},se=async()=>{await Promise.all([I.getUserLp(),I.getBalanceInfo()]);const e={};L.map((t=>{const{precision:a,balance:c,decimal:s}=I.poolData[t];e[t]=Object(O.c)(Object(O.a)(c).div(a)._toFixed(s,1))})),V(e),!Q&&W(!0),ee||(ee=setInterval((async()=>{ce(),I.getUserLp()}),s.defaultIntervalSec))};Object(c.useEffect)((async()=>(await Promise.all([se(),ce()]),()=>{clearInterval(ee)})),[s.defaultAccount]);const le=e=>{const t=Object.keys(e),a=t.length;if(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e),a=t.filter((t=>Object(O.fb)(e[t]).eq(0)||!e[t]));return t.length===a.length}(e))return M(l.a.get("error.e1")),!0;for(let c=0;c<a;c++){const a=t[c],s=e[a];if(!s&&(E||U))return M(l.a.get("error.e1")),!0;const{balance:n,precision:i,symbol:o}=I.poolData[a];if(Object(O.a)(n).div(i).lt(Object(O.fb)(s)))return M(l.a.get("error.e2",{token:o})),!0}return M(!1),!1},ne=e=>{$(e.target.checked)},ie=async e=>{const t=await I.calcInclPrice(e);R(t)},oe=(e,t)=>{const a=t,c={};c[e]=Object(O.c)(String(a).replace(/,/g,""));const{precision:s,swapBalance:l,balance:n}=I.poolData[e],i=Object(O.fb)(a).div(l).isNaN()?Object(O.a)(0):Object(O.fb)(a).div(l);L.filter((t=>t!==e)).map((e=>{const{balance:t=Object(O.a)(0),swapBalance:a,precision:s,decimal:l}=I.poolData[e];c[e]=Object(O.c)(i.times(a)._toFixed(l,1)),t.div(s).lt(Object(O.fb)(c[e]))&&(c[e]=Object(O.c)(t.div(s)._toFixed(l,1)))})),V(c)},re=async e=>{try{const t=e.target.checked;K(t),U&&H(!t),t&&oe(L[0],A[L[0]])}catch(t){console.log(t)}},be=async e=>{try{const t=e.target.checked;H(t),E&&K(!t);const a={};L.map((e=>{const{balance:t,precision:c,decimal:s}=I.poolData[e];a[e]=Object(O.a)(t).isNaN()?0:Object(O.c)(t.div(c)._toFixed(s,1))})),V(a)}catch(t){console.log(t)}},de=()=>{$(!1),Y(!1)},je=Object(P.b)();return Object(T.jsx)(n.a,{children:()=>Object(T.jsxs)(i.a,{..._.a.row,children:[Object(T.jsx)(o.a,{..._.a.colLeft,children:Object(T.jsxs)("div",{className:"pool-deposit",children:[Object(T.jsx)(N.a,{list:t,activeKey:a[0]}),e.isSinglePage?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(m.a,{routeName:"3pool/deposit",mountedActions:se,instantActions:ce}),Object(T.jsx)(h.a,{title:"3pool "+l.a.get("banner.title_deposit"),desc:l.a.get("banner.desc_deposit")}),Object(T.jsx)(f.a,{})]}):null,s.isConnected?Object(T.jsx)("div",{className:e.isSinglePage?"window white":"window-for-tabs-pane",children:Object(T.jsxs)("div",{className:"add-liq",children:[Object(T.jsxs)("fieldset",{className:"currencies",children:[Object(T.jsx)("legend",{children:l.a.get("deposit.currencies")}),Object(T.jsx)("ul",{children:L.map((e=>{let{symbol:t="",balance:a="--",precision:c,decimal:s}=I.poolData[e];return a=Object(O.a)(a).div(c),Object(T.jsxs)("li",{children:[Object(T.jsxs)("div",{className:"cur-label",children:[Object(T.jsxs)("span",{className:"icon",children:[Object(T.jsx)("img",{src:p.a[e]?p.a[e]:j.default,alt:"",className:"token-logo"})," ",t]}),Object(T.jsx)("span",{className:"token-max",children:l.a.getHTML("deposit.token_max",{balance:Object(O.u)(a)})})]}),Object(T.jsx)(S.a,{onMaxClick:()=>{((e,t,a)=>{if(Object(O.a)(t).isNaN())return;const c=Object(O.a)(t)._toFixed(a,1);V({...A,[e]:Object(O.c)(c)}),E&&oe(e,c)})(e,a,s)},value:A[e],onChange:t=>((e,t)=>{U&&H(!1);const{decimal:a}=D[t],{valid:c,str:s}=Object(O.V)((""+e.target.value).replace(/,/g,""),a);c&&(V({...A,[t]:Object(O.c)(s)}),E&&oe(t,s))})(t,e)})]},e)}))})]}),!Object(O.a)(J).isNaN()&&Object(O.ab)(J,!0),Object(T.jsxs)("div",{className:"deposit-check",children:[Object(T.jsx)(r.a,{checked:E,onChange:re,children:l.a.get("deposit.ch1")}),Object(T.jsx)("br",{}),Object(T.jsx)(r.a,{checked:U,onChange:be,children:l.a.get("deposit.ch2")})]}),q?Object(T.jsx)(y.a,{styleName:"mt-40",type:"single",disabled:!0,info:l.a.get("deposit.action")}):Object(T.jsx)(y.a,{styleName:"mt-40",type:"single",info:je?l.a.get("not_available"):l.a.get("deposit.action"),onClick:()=>(async e=>{try{if(!q&&le(e))return;if(q)return;if(Object(O.a)(J).abs().gt(10))return Y(!0);await te(e)}catch(t){console.log(t)}})(A),disabled:je}),q&&Object(T.jsx)("div",{className:"error-content mt-12",children:Object(T.jsx)("div",{className:"error-tip",children:q})}),Object(O.a)(z).gt(0)&&Object(T.jsxs)("div",{className:"error-content mt-12",children:[Object(T.jsxs)("div",{className:"error-tip",children:[l.a.getHTML("deposit.swap_detail",{value:Object(O.u)(z,2),symbol:"Old 3pool LP"})," "]}),Object(T.jsx)("div",{className:"error-tip",children:l.a.get("deposit.exchange_rate",{value:Object(O.u)(I.virtualPrice,6),symbol:"Old 3pool LP"})})]})]})}):Object(T.jsx)(k.a,{}),Object(T.jsx)(x.a,{}),Object(T.jsx)(b.a,{title:l.a.get("deposit.high_slippage_title"),open:X,closable:!0,icon:null,onCancel:de,footer:null,width:400,className:"common-modal common-bg slippage-modal",children:Object(T.jsxs)("div",{className:"center",children:[Object(T.jsxs)("div",{className:"common-err-bg",children:[Object(T.jsx)("div",{children:l.a.get("deposit.high_tip1")}),Object(T.jsx)("div",{children:l.a.get("deposit.high_tip2",{value:Object(O.u)(Object(O.a)(J).abs(),3)})})]}),Object(T.jsx)(r.a,{checked:Z,onChange:ne,children:l.a.get("deposit.confirm_slippage",{value:Object(O.u)(Object(O.a)(J).abs(),3)})}),Object(T.jsx)("br",{}),Object(T.jsxs)("div",{className:"btns flex",children:[Object(T.jsx)(d.a,{onClick:()=>Y(!1),type:"primary",children:l.a.get("cancel")}),Object(T.jsx)(d.a,{onClick:()=>te(A),disabled:!Z,children:l.a.get("deposit.anyway")})]})]})})]})}),Object(T.jsx)(o.a,{..._.a.colRight,children:Object(T.jsx)(v.a,{className:s.isConnected?null:"window-for-tabs-pane"})})]})})}},1951:function(e,t,a){"use strict";a.r(t);a(1),a(1058),a(1108),a(1079);var c=a(1112),s=a(2);t.default=()=>Object(s.jsx)("div",{className:"container",children:Object(s.jsx)(c.a,{isSinglePage:!0})})}}]);